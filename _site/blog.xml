<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Muestrear no es pecado</title>
<link>https://muestrear-no-es-pecado-rebranding.netlify.app/blog.html</link>
<atom:link href="https://muestrear-no-es-pecado-rebranding.netlify.app/blog.xml" rel="self" type="application/rss+xml"/>
<description>Estadística, ciencia de datos, big data, cosas varias</description>
<generator>quarto-1.3.433</generator>
<lastBuildDate>Fri, 21 Jul 2023 22:00:00 GMT</lastBuildDate>
<item>
  <title>Meta-análisis. Agregando encuestas</title>
  <dc:creator>José Luis Cañadas Reche</dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/metanalisis.html</link>
  <description><![CDATA[ 



<section id="introducción" class="level2">
<h2 class="anchored" data-anchor-id="introducción">Introducción</h2>
<p>Ya en <a href="https://muestrear-no-es-pecado.netlify.app/2022/01/01/cocinando/">2022</a> os mostraba uno de los ingredientes principales de la cocina electoral, al menos de la tradicional, no de la postmoderna Alaminos-Tezanos.</p>
<p>Hoy os quiero contar como haría yo la agregación de encuestas, cuando no se tienen los datos brutos. En primer lugar aviso de lo que sigue a continuación sólo lo he hecho <strong>por diversión</strong> y faltaría mucho más trabajo para considerarlo un intento serio.</p>
<p>La diversión viene por este <a href="https://twitter.com/AnaBayes/status/1682035400507002881">tweet</a> de <a href="https://twitter.com/AnaBayes">Anabel Forte</a> que puso como contestación a un hilo dónde Kiko Llaneras explicaba su modelo de predicción agregando encuestas y haciendo simulaciones. Aquí el <a href="https://twitter.com/kikollan/status/1681610401367326720">hilo de kiko</a> y en la imagen la respuesta de Ana.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="tweet_ana_bayes.png" class="lightbox" title="Tweet de Ana" data-gallery="quarto-lightbox-gallery-1"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/tweet_ana_bayes.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Tweet de Ana</figcaption>
</figure>
</div>
<p>Total, que dado que conozco a Ana y a Virgilio y son bayesianos y yo sólo un aprendiz de la cosa, pues he intentado un metaanálisis bayesiano sencillo juntando varias encuestas.</p>
</section>
<section id="datos" class="level2">
<h2 class="anchored" data-anchor-id="datos">Datos</h2>
<p>Lo primero era intentar encontrar datos de las encuestas que se han hecho, importante que tengan tanto la estimación como el tamaño muestral. Si, ya sé que cada empresa tiene su cocina y sus cosas, que unas son telefónicas, que otras son tracking o paneles y tal, pero ya he dicho que lo estoy haciendo por diversión..</p>
<p>Bueno, pues <a href="https://www.epdata.es/datos/elecciones-generales-cortes-23j-resultados-analisis-encuestas-censo-comunidades-provincias-municipios-estadisticas-mapas-datos-graficos/690#encuestas">aquí</a> he encontrado la info que buscaba. El tema es que la tabla está en una tabla de datawrapper <a href="https://www.datawrapper.de/_/I2mqK/">enlace_table</a> y no he sido capaz de escrapear de fora programática, que se le va a hacer, no vale uno pa to.</p>
<p>Como eran muchas encuestas pues he ido seleccionando algunas del mes de julio y al final me he quedado con unas 23. Para cada encuesta he puesto su tamaño muestral, la diferencia entre la fecha de las elecciones y la fecha de la realización de la encuesta, variable <code>time</code> , también he convertido a votos la estimación que dan para pp, psoe, sumar, vox y resto, simplemente multiplicando la estimación que dan por su tamaño muestral.</p>
<p>Mejor vemos la tabla</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(DT)</span>
<span id="cb1-3">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/encuestas_agregadas.csv"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb1-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(empresa, time, partido, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">everything</span>())</span>
<span id="cb1-5"></span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>(df)</span></code></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9d201c5d89631964af33" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9d201c5d89631964af33">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115"],["socio_metrica","socio_metrica","socio_metrica","socio_metrica","socio_metrica","gad3","gad3","gad3","gad3","gad3","sigma2","sigma2","sigma2","sigma2","sigma2","sigma2","sigma2","sigma2","sigma2","sigma2","electo_mania","electo_mania","electo_mania","electo_mania","electo_mania","gad3","gad3","gad3","gad3","gad3","nc_report","nc_report","nc_report","nc_report","nc_report","prisa","prisa","prisa","prisa","prisa","sigma2","sigma2","sigma2","sigma2","sigma2","simple_logica","simple_logica","simple_logica","simple_logica","simple_logica","celeste_tel","celeste_tel","celeste_tel","celeste_tel","celeste_tel","gad3","gad3","gad3","gad3","gad3","nc_report","nc_report","nc_report","nc_report","nc_report","simple_logica","simple_logica","simple_logica","simple_logica","simple_logica","socio_metrica","socio_metrica","socio_metrica","socio_metrica","socio_metrica","ok_diario","ok_diario","ok_diario","ok_diario","ok_diario","gesop","gesop","gesop","gesop","gesop","gad3","gad3","gad3","gad3","gad3","nc_report","nc_report","nc_report","nc_report","nc_report","ok_diario","ok_diario","ok_diario","ok_diario","ok_diario","prisa","prisa","prisa","prisa","prisa","simple_logica","simple_logica","simple_logica","simple_logica","simple_logica","socio_metrica","socio_metrica","socio_metrica","socio_metrica","socio_metrica"],[-21,-21,-21,-21,-21,-20,-20,-20,-20,-20,-20,-20,-20,-20,-20,-13,-13,-13,-13,-13,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-12,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-11,-10,-10,-10,-10,-10,-8,-8,-8,-8,-8,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7,-7],["pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto","pp","psoe","sumar","vox","resto"],[0.326,0.27,0.129,0.144,0.131,0.368,0.282,0.128,0.115,0.107,0.347,0.285,0.128,0.132,0.1080000000000001,0.346,0.286,0.123,0.127,0.1180000000000001,0.34,0.291,0.123,0.134,0.112,0.367,0.279,0.12,0.12,0.114,0.36,0.278,0.122,0.124,0.116,0.312,0.295,0.133,0.147,0.113,0.344,0.286,0.127,0.13,0.113,0.311,0.288,0.15,0.145,0.1060000000000001,0.365,0.284,0.115,0.114,0.122,0.367,0.282,0.116,0.124,0.111,0.363,0.277,0.119,0.12,0.121,0.322,0.291,0.144,0.142,0.101,0.338,0.286,0.127,0.139,0.11,0.355,0.263,0.127,0.135,0.12,0.306,0.274,0.144,0.15,0.126,0.37,0.284,0.115,0.119,0.112,0.372,0.283,0.113,0.111,0.121,0.356,0.266,0.127,0.131,0.12,0.329,0.287,0.137,0.135,0.112,0.322,0.286,0.138,0.139,0.115,0.335,0.283,0.132,0.137,0.113],[1447,1447,1447,1447,1447,1503,1503,1503,1503,1503,2880,2880,2880,2880,2880,4482,4482,4482,4482,4482,2788,2788,2788,2788,2788,5000,5000,5000,5000,5000,1000,1000,1000,1000,1000,2000,2000,2000,2000,2000,4455,4455,4455,4455,4455,1300,1300,1300,1300,1300,1100,1100,1100,1100,1100,5502,5502,5502,5502,5502,1000,1000,1000,1000,1000,1300,1300,1300,1300,1300,800,800,800,800,800,1500,1500,1500,1500,1500,1200,1200,1200,1200,1200,7002,7002,7002,7002,7002,1000,1000,1000,1000,1000,1500,1500,1500,1500,1500,2000,2000,2000,2000,2000,1600,1600,1600,1600,1600,1500,1500,1500,1500,1500],[472,391,187,207,190,553,424,192,173,161,999,821,369,380,311,1551,1282,551,569,529,948,811,343,374,312,1835,1395,600,600,570,360,278,122,124,116,624,590,266,294,226,1533,1274,566,579,503,404,374,196,188,138,402,312,127,125,134,2019,1552,638,682,611,363,277,119,120,121,419,378,187,185,131,270,229,102,111,88,532,394,190,204,180,367,329,173,180,151,2591,1989,805,833,784,372,283,113,111,121,534,399,190,197,180,658,574,274,270,224,515,458,221,222,184,503,424,198,206,169]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>empresa<\/th>\n      <th>time<\/th>\n      <th>partido<\/th>\n      <th>estim<\/th>\n      <th>n<\/th>\n      <th>votos<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,4,5,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Pintamos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"></span>
<span id="cb2-2">colores <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb2-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pp"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#005999"</span>,</span>
<span id="cb2-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"psoe"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#FF0126"</span>, </span>
<span id="cb2-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sumar"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#A00B85"</span>, </span>
<span id="cb2-6">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"vox"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#51962A"</span>, </span>
<span id="cb2-7">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"resto"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"grey"</span></span>
<span id="cb2-8">    )</span>
<span id="cb2-9"></span>
<span id="cb2-10">df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb2-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> time, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> estim,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> partido )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> colores) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="metanalisis_files/figure-html/unnamed-chunk-2-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/metanalisis_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>La selección de encuestas la he hecho sin mucho orden, son todas del mes de julio, algunas empresas repiten como sigma2 , gad3, simple_logica o sociométrica, otras veces he puesto como nombre el medio (okdiario o prisa).</p>
<p>Bueno, pues vamos a ver como hago el metaanálisis.</p>
<section id="preparación-datos" class="level3">
<h3 class="anchored" data-anchor-id="preparación-datos">Preparación datos</h3>
<p>Voy a poner los datos en un formato que me conviene más para lo que quiero hacer.</p>
<ul>
<li>n es tamaño de muestra</li>
<li>time : es días hasta elecciones, -7 quiere decir qeu la encuesta se publicó (o se hizo, no lo sé) 7 días antes del 23 de julio</li>
<li>Columnas resultantes de multiplicar la estimación en la encuesta para cada partido por el tamaño muestral</li>
</ul>
<p>Como vemos voy a considerar 23 encuestas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">df_wider <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>estim) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_wider</span>( <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id_cols =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(empresa, n, time),</span>
<span id="cb3-4">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_from =</span> partido, </span>
<span id="cb3-5">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_from =</span> votos) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(empresa)</span>
<span id="cb3-7"></span>
<span id="cb3-8">DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>(df_wider)</span></code></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-03a46050a7fd97196476" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-03a46050a7fd97196476">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],["celeste_tel","electo_mania","gad3","gad3","gad3","gad3","gesop","nc_report","nc_report","nc_report","ok_diario","ok_diario","prisa","prisa","sigma2","sigma2","sigma2","simple_logica","simple_logica","simple_logica","socio_metrica","socio_metrica","socio_metrica"],[1100,2788,1503,5000,5502,7002,1200,1000,1000,1000,1500,1500,2000,2000,2880,4482,4455,1300,1300,1600,1447,800,1500],[-11,-12,-20,-12,-11,-7,-8,-12,-11,-7,-10,-7,-12,-7,-20,-13,-12,-12,-11,-7,-21,-11,-7],[402,948,553,1835,2019,2591,367,360,363,372,532,534,624,658,999,1551,1533,404,419,515,472,270,503],[312,811,424,1395,1552,1989,329,278,277,283,394,399,590,574,821,1282,1274,374,378,458,391,229,424],[127,343,192,600,638,805,173,122,119,113,190,190,266,274,369,551,566,196,187,221,187,102,198],[125,374,173,600,682,833,180,124,120,111,204,197,294,270,380,569,579,188,185,222,207,111,206],[134,312,161,570,611,784,151,116,121,121,180,180,226,224,311,529,503,138,131,184,190,88,169]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>empresa<\/th>\n      <th>n<\/th>\n      <th>time<\/th>\n      <th>pp<\/th>\n      <th>psoe<\/th>\n      <th>sumar<\/th>\n      <th>vox<\/th>\n      <th>resto<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Pues con esto ya puedo hacer mi intento de meta-análisis, que es probable que esté mal, que no soy un experto en estas cosas.</p>
</section>
</section>
<section id="meta-análisis" class="level2">
<h2 class="anchored" data-anchor-id="meta-análisis">Meta-análisis</h2>
<p>Pues lo voy a hacer de forma bayesiana. Los datos los tenemos a nivel de encuesta, por lo que puedo considerar que los votos estimados a cada partido en cada encuesta siguen una distribución multinomial , dónde <code>n</code> (tamaño muestral) es el número de intentos y tengo el vector de votos a cada partido que se obtendría. La suma de pp+psoe+sumar+vox+resto es igual a <code>n</code> para cada fila de los datos.</p>
<p>También puedo considerar que las estimaciones de varias encuestas realizadas por la misma empresa no son independientes, no es descabellado ¿verdad?. Y también podría considerar que las estimaciones varían conforme se acerca la fecha de las elecciones y que esta variación podría ser diferente para cada empresa encuestadora. Pues con estos ingredientes ya puedo hacer el “meta-análisis”</p>
<p>Utilizo la librería <code>brms</code> que me va a permitir hacerlo con una interfaz sencilla. Y en algún momento del futuro miraré como hacerlo con <code>numpyro</code> que me está picando con eso <a href="https://www.datanalytics.com/2023/07/04/3pl-numpyro/">Carlos</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"></span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(cmdstanr)</span>
<span id="cb4-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(brms)</span>
<span id="cb4-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidybayes)</span>
<span id="cb4-5"></span>
<span id="cb4-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">options</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">brms.backend=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cmdstanr"</span>)</span></code></pre></div>
</div>
<p>Creamos una columna que una las columnas de los votos a partidos para que sea nuestro vector de respuesta <em>multinomial</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"></span>
<span id="cb5-2">df_wider<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cell_counts <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span>(df_wider, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(pp, psoe,sumar, vox, resto))</span>
<span id="cb5-3"></span>
<span id="cb5-4">DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(df_wider))</span></code></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-aedda9ab2bf1b2eebe94" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-aedda9ab2bf1b2eebe94">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],["celeste_tel","electo_mania","gad3","gad3","gad3","gad3"],[1100,2788,1503,5000,5502,7002],[-11,-12,-20,-12,-11,-7],[402,948,553,1835,2019,2591],[312,811,424,1395,1552,1989],[127,343,192,600,638,805],[125,374,173,600,682,833],[134,312,161,570,611,784],[[402,312,127,125,134],[948,811,343,374,312],[553,424,192,173,161],[1835,1395,600,600,570],[2019,1552,638,682,611],[2591,1989,805,833,784]]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>empresa<\/th>\n      <th>n<\/th>\n      <th>time<\/th>\n      <th>pp<\/th>\n      <th>psoe<\/th>\n      <th>sumar<\/th>\n      <th>vox<\/th>\n      <th>resto<\/th>\n      <th>cell_counts<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Y pasamos a ajustar el modelo, dónde vamos a considerar como efecto aleatorio la empresa y como efecto fijo el tiempo, aunque diferente para cada empresa.</p>
<p>En la fórmula de <code>brms</code> añadimos informacióna la variable respuesta, en este caso añadimos la info del tamaño muestral. Mirando cosas sobre meta-análisis con <code>brms</code> se puede añadir cosas como desviación estándar de la estimación del efecto y cosas así.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"></span>
<span id="cb6-2">formula <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">brmsformula</span>(</span>
<span id="cb6-3">    cell_counts <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">trials</span>(n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>  (time <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span>empresa))</span>
<span id="cb6-4"></span>
<span id="cb6-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># vemos las priors por defecto qeu h</span></span>
<span id="cb6-6">(priors <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_prior</span>(formula, df_wider, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">multinomial</span>()))</span>
<span id="cb6-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;                 prior     class      coef   group resp    dpar nlpar lb ub</span></span>
<span id="cb6-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;                lkj(1)       cor                                           </span></span>
<span id="cb6-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;                lkj(1)       cor           empresa                         </span></span>
<span id="cb6-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;                (flat) Intercept                                           </span></span>
<span id="cb6-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5) Intercept                         mupsoe            </span></span>
<span id="cb6-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd                         mupsoe        0   </span></span>
<span id="cb6-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd           empresa       mupsoe        0   </span></span>
<span id="cb6-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd Intercept empresa       mupsoe        0   </span></span>
<span id="cb6-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd      time empresa       mupsoe        0   </span></span>
<span id="cb6-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5) Intercept                        muresto            </span></span>
<span id="cb6-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd                        muresto        0   </span></span>
<span id="cb6-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd           empresa      muresto        0   </span></span>
<span id="cb6-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd Intercept empresa      muresto        0   </span></span>
<span id="cb6-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd      time empresa      muresto        0   </span></span>
<span id="cb6-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5) Intercept                        musumar            </span></span>
<span id="cb6-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd                        musumar        0   </span></span>
<span id="cb6-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd           empresa      musumar        0   </span></span>
<span id="cb6-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd Intercept empresa      musumar        0   </span></span>
<span id="cb6-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd      time empresa      musumar        0   </span></span>
<span id="cb6-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5) Intercept                          muvox            </span></span>
<span id="cb6-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd                          muvox        0   </span></span>
<span id="cb6-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd           empresa        muvox        0   </span></span>
<span id="cb6-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd Intercept empresa        muvox        0   </span></span>
<span id="cb6-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  student_t(3, 0, 2.5)        sd      time empresa        muvox        0   </span></span>
<span id="cb6-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;        source</span></span>
<span id="cb6-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       default</span></span>
<span id="cb6-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  (vectorized)</span></span>
<span id="cb6-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       default</span></span>
<span id="cb6-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       default</span></span>
<span id="cb6-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       default</span></span>
<span id="cb6-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  (vectorized)</span></span>
<span id="cb6-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  (vectorized)</span></span>
<span id="cb6-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  (vectorized)</span></span>
<span id="cb6-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       default</span></span>
<span id="cb6-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       default</span></span>
<span id="cb6-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  (vectorized)</span></span>
<span id="cb6-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  (vectorized)</span></span>
<span id="cb6-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  (vectorized)</span></span>
<span id="cb6-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       default</span></span>
<span id="cb6-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       default</span></span>
<span id="cb6-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  (vectorized)</span></span>
<span id="cb6-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  (vectorized)</span></span>
<span id="cb6-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  (vectorized)</span></span>
<span id="cb6-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       default</span></span>
<span id="cb6-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       default</span></span>
<span id="cb6-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  (vectorized)</span></span>
<span id="cb6-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  (vectorized)</span></span>
<span id="cb6-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  (vectorized)</span></span></code></pre></div>
</div>
<p>Ajustamos el modelo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">model_multinomial <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb7-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">brm</span>(</span>
<span id="cb7-3">        formula,</span>
<span id="cb7-4">        df_wider,</span>
<span id="cb7-5">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">multinomial</span>(),</span>
<span id="cb7-6">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prior =</span> priors,</span>
<span id="cb7-7">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">iter =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4000</span>,</span>
<span id="cb7-8">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">warmup =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb7-9">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cores =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>,</span>
<span id="cb7-10">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chains =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>,</span>
<span id="cb7-11">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">seed =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">47</span>,</span>
<span id="cb7-12">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">backend =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cmdstanr"</span>,</span>
<span id="cb7-13">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">control =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">adapt_delta =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.95</span>), </span>
<span id="cb7-14">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">refresh =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb7-15">    )</span>
<span id="cb7-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Running MCMC with 4 parallel chains...</span></span>
<span id="cb7-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb7-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 finished in 8.4 seconds.</span></span>
<span id="cb7-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 finished in 8.5 seconds.</span></span>
<span id="cb7-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 finished in 8.8 seconds.</span></span>
<span id="cb7-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 finished in 10.0 seconds.</span></span>
<span id="cb7-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb7-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; All 4 chains finished successfully.</span></span>
<span id="cb7-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Mean chain execution time: 8.9 seconds.</span></span>
<span id="cb7-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Total execution time: 10.1 seconds.</span></span>
<span id="cb7-26"></span>
<span id="cb7-27"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(model_multinomial)</span>
<span id="cb7-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  Family: multinomial </span></span>
<span id="cb7-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   Links: mupsoe = logit; musumar = logit; muvox = logit; muresto = logit </span></span>
<span id="cb7-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Formula: cell_counts | trials(n) ~ (time | empresa) </span></span>
<span id="cb7-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    Data: df_wider (Number of observations: 23) </span></span>
<span id="cb7-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   Draws: 4 chains, each with iter = 4000; warmup = 1000; thin = 1;</span></span>
<span id="cb7-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          total post-warmup draws = 12000</span></span>
<span id="cb7-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb7-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Group-Level Effects: </span></span>
<span id="cb7-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; ~empresa (Number of levels: 10) </span></span>
<span id="cb7-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;                                     Estimate Est.Error l-95% CI u-95% CI Rhat</span></span>
<span id="cb7-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(mupsoe_Intercept)                    0.05      0.03     0.00     0.13 1.00</span></span>
<span id="cb7-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(mupsoe_time)                         0.00      0.00     0.00     0.01 1.00</span></span>
<span id="cb7-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(musumar_Intercept)                   0.14      0.06     0.05     0.28 1.00</span></span>
<span id="cb7-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(musumar_time)                        0.00      0.00     0.00     0.02 1.00</span></span>
<span id="cb7-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(muvox_Intercept)                     0.11      0.06     0.01     0.25 1.00</span></span>
<span id="cb7-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(muvox_time)                          0.01      0.01     0.00     0.02 1.00</span></span>
<span id="cb7-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(muresto_Intercept)                   0.05      0.04     0.00     0.16 1.00</span></span>
<span id="cb7-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(muresto_time)                        0.01      0.00     0.00     0.01 1.00</span></span>
<span id="cb7-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; cor(mupsoe_Intercept,mupsoe_time)       0.06      0.58    -0.94     0.95 1.00</span></span>
<span id="cb7-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; cor(musumar_Intercept,musumar_time)     0.28      0.56    -0.88     0.98 1.00</span></span>
<span id="cb7-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; cor(muvox_Intercept,muvox_time)        -0.03      0.56    -0.95     0.93 1.00</span></span>
<span id="cb7-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; cor(muresto_Intercept,muresto_time)     0.21      0.58    -0.91     0.98 1.00</span></span>
<span id="cb7-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;                                     Bulk_ESS Tail_ESS</span></span>
<span id="cb7-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(mupsoe_Intercept)                    3451     3599</span></span>
<span id="cb7-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(mupsoe_time)                         2876     5041</span></span>
<span id="cb7-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(musumar_Intercept)                   3697     3162</span></span>
<span id="cb7-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(musumar_time)                        3236     4666</span></span>
<span id="cb7-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(muvox_Intercept)                     2951     2225</span></span>
<span id="cb7-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(muvox_time)                          1842     4433</span></span>
<span id="cb7-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(muresto_Intercept)                   5233     4971</span></span>
<span id="cb7-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd(muresto_time)                        3078     3653</span></span>
<span id="cb7-59"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; cor(mupsoe_Intercept,mupsoe_time)       5869     6716</span></span>
<span id="cb7-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; cor(musumar_Intercept,musumar_time)     7015     7025</span></span>
<span id="cb7-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; cor(muvox_Intercept,muvox_time)         6490     6740</span></span>
<span id="cb7-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; cor(muresto_Intercept,muresto_time)     4284     6808</span></span>
<span id="cb7-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb7-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Population-Level Effects: </span></span>
<span id="cb7-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;                   Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS</span></span>
<span id="cb7-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; mupsoe_Intercept     -0.20      0.03    -0.25    -0.15 1.00     6469     6941</span></span>
<span id="cb7-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; musumar_Intercept    -0.99      0.05    -1.09    -0.90 1.00     4232     5876</span></span>
<span id="cb7-68"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; muvox_Intercept      -0.97      0.05    -1.06    -0.87 1.00     3835     6313</span></span>
<span id="cb7-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; muresto_Intercept    -1.10      0.03    -1.15    -1.04 1.00     7182     7017</span></span>
<span id="cb7-70"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb7-71"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Draws were sampled using sample(hmc). For each parameter, Bulk_ESS</span></span>
<span id="cb7-72"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; and Tail_ESS are effective sample size measures, and Rhat is the potential</span></span>
<span id="cb7-73"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; scale reduction factor on split chains (at convergence, Rhat = 1).</span></span></code></pre></div>
</div>
<p>Y ya tendríamos el modelo.</p>
</section>
<section id="predicción-estimación" class="level2">
<h2 class="anchored" data-anchor-id="predicción-estimación">¿Predicción / estimación?</h2>
<p>Vuelvo a decir que esto es sólo por diversión, para hacer algo serio tendría que haber usado mayor número de encuestas y realizadas en diferentes momentos del tiempo, tener las estimaciones que daban en cada provincia y realizar la estimación de escaños. Todo eso y más ya lo hace, y muy bien, Kiko Llaneras para <a href="https://elpais.com/espana/elecciones-generales/2023-07-19/quien-va-a-ganar-las-elecciones-esto-dicen-las-encuestas.html"><em>El País</em></a></p>
<p>¿Cómo podríamos estimar lo que va a pasar el día de las elecciones con este modelo?</p>
<p>Pues podríamos considerar que las elecciones fueran una encuesta realizada por una <em>empresa</em> que no tengo en los datos (un nuevo nivel de la variable empresa) , en este caso el gobierno, y ponemos la variable <code>time = 0</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pongo n = 1 para que me devuelva las probabilidades , si ponenemos n = 15000000 nos devolvería una # estimación de cuántos votos van a cada partido</span></span>
<span id="cb8-2"></span>
<span id="cb8-3">newdata <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb8-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">empresa =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"votaciones_dia_23"</span>, </span>
<span id="cb8-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">time =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span id="cb8-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb8-7"></span>
<span id="cb8-8">newdata</span>
<span id="cb8-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb8-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   empresa            time     n</span></span>
<span id="cb8-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb8-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 votaciones_dia_23     0     1</span></span></code></pre></div>
</div>
<p>Ahora utilizando una función de la librería <code>tidybayes</code> tenemos una forma fácil de añadir las <em>posterior predict</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">estimaciones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  newdata <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb9-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_epred_draws</span>(model_multinomial, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">allow_new_levels =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb9-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">partido =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_factor</span>(.category)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb9-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>.category)</span>
<span id="cb9-5"></span>
<span id="cb9-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(estimaciones )</span>
<span id="cb9-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 60000    10</span></span>
<span id="cb9-8"></span>
<span id="cb9-9">DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(estimaciones, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>))</span></code></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-cbd2db37bcd7d063c0a0" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-cbd2db37bcd7d063c0a0">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],["pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp"],["votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23","votaciones_dia_23"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],[0.3436581593802737,0.3641373781311436,0.3664777025760337,0.3458878013952789,0.3354419371485308,0.3416107775788365,0.3416530658205596,0.3376937190521476,0.3337985250154044,0.3463376478899029,0.3305714818014183,0.3485300005525374,0.3255836328922667,0.3436317101145521,0.340317499203326,0.3364098039709202,0.3259146284548031,0.3449237601426104,0.3243120350589724,0.3334596859746268,0.3402791461731107,0.3516946567941385,0.3513179329444838,0.3504586359016796,0.355620627697897,0.3277559840521369,0.3425730408251823,0.346838702549446,0.3505075432425054,0.3501334558075403,0.3496802716389487,0.3515186676055376,0.3468472939853285,0.366260967333322,0.3355489065173984,0.3362143224466538,0.3544161302806361,0.3392062286648024,0.3452160007206057,0.3297349625021696,0.3401771599699583,0.3317390649098806,0.3397207474638965,0.3489541830282412,0.3437706373610612,0.3582938697920235,0.3434994121520896,0.3382168438550863,0.3481888152523854,0.3268593478720657,0.3487409160364556,0.3355197036239703,0.3407496498580515,0.3277221100806884,0.3315142931826389,0.3615899439515984,0.339180336328891,0.3279942624195576,0.3160430453259445,0.3562329084551752,0.3527989085075651,0.3535129293540476,0.3379083005444038,0.343382385422484,0.34029695097742,0.3503716277304988,0.3432190064467047,0.350613673067287,0.3525471123595162,0.3467657512718492,0.3389632877132301,0.3674573329570459,0.3501953880682628,0.3300975044150469,0.3423790118074308,0.3434387430835806,0.3480072086812138,0.3385272929533221,0.3277308343741481,0.359210726429881,0.352017841659674,0.3405849700713734,0.3245842235250944,0.3231021158953885,0.3344370726423418,0.3528046107124244,0.3274036910758294,0.3426160360248661,0.3500325048592732,0.32044697908532,0.3450554253536346,0.3459032824083138,0.3394551510038118,0.3355973006879638,0.3430254701557855,0.3389242567609898,0.3475688830041711,0.3228827221397838,0.3331524434347562,0.3540700173358812],["pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp","pp"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>.category<\/th>\n      <th>empresa<\/th>\n      <th>time<\/th>\n      <th>n<\/th>\n      <th>.row<\/th>\n      <th>.chain<\/th>\n      <th>.iteration<\/th>\n      <th>.draw<\/th>\n      <th>.epred<\/th>\n      <th>partido<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Y tenemos 12000 estimaciones de la posteriori para cada partido. Esto se podría decir que es <em>equivalente</em> a las 15000 simulaciones que hace Kiko con su modelo. Bueno, salvo que él en cada simulación calcula más cosas, como los escaños obtenidos etc..</p>
<p>Podemos hacer un summary de las posteriores y ver intervalo de <em>credibilidad</em> al 80% por ejemplo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">estimaciones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb10-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(partido) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb10-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb10-4">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">media =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(.epred), </span>
<span id="cb10-5">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mediana=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">median</span>(.epred), </span>
<span id="cb10-6">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">low =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">quantile</span>(.epred, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>), </span>
<span id="cb10-7">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">high=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">quantile</span>(.epred, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>)</span>
<span id="cb10-8">    )</span>
<span id="cb10-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 5 × 5</span></span>
<span id="cb10-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   partido media mediana   low  high</span></span>
<span id="cb10-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;fct&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb10-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 pp      0.344   0.344 0.328 0.360</span></span>
<span id="cb10-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 psoe    0.282   0.282 0.270 0.295</span></span>
<span id="cb10-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 sumar   0.128   0.127 0.114 0.143</span></span>
<span id="cb10-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4 vox     0.131   0.131 0.119 0.144</span></span>
<span id="cb10-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5 resto   0.115   0.115 0.108 0.122</span></span></code></pre></div>
</div>
<p>O pintar las distribuciones. .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"></span>
<span id="cb11-2">estimaciones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb11-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span>.epred, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> partido)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_density</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span> ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> scales<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>percent) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> colores) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Agregando encuestas por diversión. Resultado"</span>,</span>
<span id="cb11-8">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Porcentaje estimado"</span>, </span>
<span id="cb11-9">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Density"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="metanalisis_files/figure-html/unnamed-chunk-11-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/metanalisis_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>¿Qué más cosas podemos hacer? Ya que tengo las posterioris puedo usarlas y calcular las posterioris del bloque PP+ Vox o de cualquier otra cosa.</p>
<p>Supongamos que hubiera 15 millones de votos válidos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">votantes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">15e6</span></span>
<span id="cb12-2">posterioris <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> estimaciones  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb12-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb12-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">votos =</span> votantes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> .epred) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb12-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(partido, votos) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb12-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_wider</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_from =</span> partido, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_from =</span> votos) </span>
<span id="cb12-7"></span>
<span id="cb12-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tenemos columnas que son listas.  hay que hacer un unnest</span></span>
<span id="cb12-9">posterioris</span>
<span id="cb12-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 1 × 5</span></span>
<span id="cb12-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   pp             psoe           sumar          vox            resto         </span></span>
<span id="cb12-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;list&gt;         &lt;list&gt;         &lt;list&gt;         &lt;list&gt;         &lt;list&gt;        </span></span>
<span id="cb12-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 &lt;dbl [12,000]&gt; &lt;dbl [12,000]&gt; &lt;dbl [12,000]&gt; &lt;dbl [12,000]&gt; &lt;dbl [12,000]&gt;</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">posterioris <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> posterioris  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb13-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unnest</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(pp, psoe, sumar, vox, resto)) </span>
<span id="cb13-3"></span>
<span id="cb13-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(posterioris)</span>
<span id="cb13-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 6 × 5</span></span>
<span id="cb13-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;         pp     psoe    sumar      vox    resto</span></span>
<span id="cb13-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb13-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 5154872. 4417247. 1906176. 1892729. 1628976.</span></span>
<span id="cb13-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 5462061. 4424152. 1739160. 1631814. 1742813.</span></span>
<span id="cb13-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 5497166. 4231178. 1557841. 1776698. 1937118.</span></span>
<span id="cb13-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4 5188317. 4075203. 1799876. 2251351. 1685253.</span></span>
<span id="cb13-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5 5031629. 4030304. 2222602. 2065727. 1649738.</span></span>
<span id="cb13-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6 5124162. 4077820. 1967323. 2063156. 1767539.</span></span></code></pre></div>
</div>
<p>Sumo votos de los bloques para cada una de las 12000 filas. Además. añado al bloque de la izquierda el 50% de los votos que están en resto.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">posterioris <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> posterioris <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb14-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb14-3">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">derecha =</span> pp <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> vox, </span>
<span id="cb14-4">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">izquierda =</span> psoe <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> sumar <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>resto) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb14-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">derecha_posterior =</span> derecha <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> votantes, </span>
<span id="cb14-6">           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">izquierda_posterior =</span> izquierda<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>votantes)</span>
<span id="cb14-7"></span>
<span id="cb14-8">posterioris <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb14-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb14-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 20 × 9</span></span>
<span id="cb14-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          pp     psoe    sumar     vox  resto derecha izquierda derecha_posterior</span></span>
<span id="cb14-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;             &lt;dbl&gt;</span></span>
<span id="cb14-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1 5154872. 4417247. 1906176.  1.89e6 1.63e6  7.05e6  7137911.             0.470</span></span>
<span id="cb14-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2 5462061. 4424152. 1739160.  1.63e6 1.74e6  7.09e6  7034719.             0.473</span></span>
<span id="cb14-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3 5497166. 4231178. 1557841.  1.78e6 1.94e6  7.27e6  6757578.             0.485</span></span>
<span id="cb14-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4 5188317. 4075203. 1799876.  2.25e6 1.69e6  7.44e6  6717705.             0.496</span></span>
<span id="cb14-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5 5031629. 4030304. 2222602.  2.07e6 1.65e6  7.10e6  7077775.             0.473</span></span>
<span id="cb14-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6 5124162. 4077820. 1967323.  2.06e6 1.77e6  7.19e6  6928912.             0.479</span></span>
<span id="cb14-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7 5124796. 4399812. 1785892.  2.08e6 1.61e6  7.21e6  6989920.             0.480</span></span>
<span id="cb14-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8 5065406. 4162327. 2086878.  2.11e6 1.57e6  7.18e6  7035939.             0.478</span></span>
<span id="cb14-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9 5006978. 4204740. 2040810.  1.96e6 1.79e6  6.96e6  7141003.             0.464</span></span>
<span id="cb14-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10 5195065. 4180490. 1873306.  1.95e6 1.80e6  7.15e6  6954316.             0.476</span></span>
<span id="cb14-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 11 4958572. 4146219. 2302586.  1.90e6 1.70e6  6.85e6  7296952.             0.457</span></span>
<span id="cb14-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 12 5227950. 4227362. 2018533.  1.85e6 1.68e6  7.08e6  7083924.             0.472</span></span>
<span id="cb14-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 13 4883754. 4369071. 1995764.  2.08e6 1.67e6  6.96e6  7200832.             0.464</span></span>
<span id="cb14-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 14 5154476. 4271798. 1900588.  2.03e6 1.65e6  7.18e6  6995449.             0.479</span></span>
<span id="cb14-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 15 5104762. 4335827. 1960754.  1.95e6 1.65e6  7.05e6  7122528.             0.470</span></span>
<span id="cb14-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 16 5046147. 3949825. 2047913.  2.32e6 1.63e6  7.37e6  6813851.             0.491</span></span>
<span id="cb14-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 17 4888719. 4352391. 2079947.  1.95e6 1.73e6  6.84e6  7295231.             0.456</span></span>
<span id="cb14-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 18 5173856. 4462434. 1816875.  1.81e6 1.73e6  6.99e6  7145608.             0.466</span></span>
<span id="cb14-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 19 4864681. 4075628. 2050601.  2.23e6 1.78e6  7.10e6  7015613.             0.473</span></span>
<span id="cb14-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 20 5001895. 3986637. 2109063.  2.05e6 1.85e6  7.05e6  7022137.             0.470</span></span>
<span id="cb14-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # ℹ 1 more variable: izquierda_posterior &lt;dbl&gt;</span></span></code></pre></div>
</div>
<p>Ahora nos podemos hacer preguntas como , ¿en cuántas de estas posterioris gana el bloque de la derecha así construido al de la izquierda? o ¿en cuántas la diferencia que le saca el bloque de la derecha es mayor a un punto porcentual?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">posterioris <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb15-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gana_derecha =</span> derecha_posterior<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>izquierda_posterior, </span>
<span id="cb15-3">           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gana_derecha_mas1_pct =</span> (derecha_posterior <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> izquierda_posterior) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.01</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb15-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb15-5">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(gana_derecha),</span>
<span id="cb15-6">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(gana_derecha_mas1_pct)</span>
<span id="cb15-7">        )</span>
<span id="cb15-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb15-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   `mean(gana_derecha)` `mean(gana_derecha_mas1_pct)`</span></span>
<span id="cb15-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;                  &lt;dbl&gt;                         &lt;dbl&gt;</span></span>
<span id="cb15-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1                0.663                         0.471</span></span></code></pre></div>
</div>
</section>
<section id="coda" class="level2">
<h2 class="anchored" data-anchor-id="coda">Coda</h2>
<p>Bueno, pues así es como he pasado el sábado. ¿Cosas que le faltaría a esto para ser algo serio?</p>
<ul>
<li>Que tuviera en cuenta más encuestas y analizara mejor qué tipo de encuestas son, sus cambios de estimación según el tiempo</li>
<li>Que añadiera estimación de escaños, lo cual no es trivial.</li>
<li>Añadir encuestas a nivel autónomico o datos de las municipales y poder hacer un modelo jerárquico en condiciones.</li>
</ul>
<p>Y como decía al principio, seguramente esto del meta-análisis se pueda hacer de otra manera, mucho mejor, así que si alguien sabe, que lo ponga en los comentarios. Pues nada más, que voten ustedes lo que les de la gana mañana, que de eso se trata.</p>


</section>

 ]]></description>
  <category>muestreo</category>
  <category>2023</category>
  <category>encuestas electorales</category>
  <category>análisis bayesiano</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/metanalisis.html</guid>
  <pubDate>Fri, 21 Jul 2023 22:00:00 GMT</pubDate>
  <media:content url="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/metanalisis.png" medium="image" type="image/png" height="66" width="144"/>
</item>
<item>
  <title>Categóricas a lo catboost. Pensamientos</title>
  <dc:creator>José Luis Cañadas Reche</dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/06/09/categoricas_a_lo_catboost_pensamientos/index.html</link>
  <description><![CDATA[ 



<p>La gente de Yandex es gente lista y son los que están detrás de <a href="https://catboost.ai/">catboost</a>. Ya el pasado mes de Abril conté como hacían la regresión cuantil y obtenían estimación de varios cuantiles a la vez <a href="../../../04/23/quantile-catboost/">aquí</a></p>
<section id="codificación-de-las-categóricas." class="level2">
<h2 class="anchored" data-anchor-id="codificación-de-las-categóricas.">Codificación de las categóricas.</h2>
<p>Catboost por defecto usa <code>one-hot-encoding</code> pero si por algo es conocido es por tener otro método de codificación, el cual viene descrito en la <a href="https://catboost.ai/en/docs/concepts/algorithm-main-stages_cat-to-numberic">docu</a>. Otro sitio dónde viene relativamente bien explicado es en este <a href="https://towardsdatascience.com/how-catboost-encodes-categorical-variables-3866fb2ae640">post</a></p>
<p>Vamos a ver el detalle, para cuándo hay variables categóricas y la variable a predecir es binaria.</p>
<p>La idea en la que se basan tiene que ver con los test de permutación. Lo que hacen son varias iteraciones desordenando los datos y en cada iteración</p>
<ol type="1">
<li>Desordenan las filas del data frame de forma aleatoria de forma que se crea un nuevo orden</li>
<li>La codificación del nivel de la variable categórica se calcula <strong>para cada fila</strong> como: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">avg_target</mtext><mo>=</mo><mfrac displaystyle="true"><mrow><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mi>I</mi><mi>n</mi><mi>C</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>+</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>o</mi><mi>r</mi></mrow><mrow><mi>t</mi><mi>o</mi><mi>t</mi><mi>a</mi><mi>l</mi><mi>C</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mo>+</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\text{avg_target} = \dfrac{countInClass + prior}{totalCount +1}</annotation></semantics></math> pero usando sólo los datos previos a esa fila</li>
</ol>
<p>Y luego para cada observación toman como codificación la media de las codificaciones obtenidas en las diferentes permutaciones.</p>
<p>En <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">avg_target</mtext><annotation encoding="application/x-tex">\text{avg_target}</annotation></semantics></math> de la fila i se tiene que</p>
<ul>
<li><p>countInClass: Cuenta las veces que en todos los datos previos a la fila i, se tiene un target = 1 para cuando el nivel de la variable categórica es igual al de la fila i.</p></li>
<li><p>prior: Constante que se define al principio del algoritmo. Puede ser la proporción de 1’s en los datos por ejemplo.</p></li>
<li><p>totalCount: El número de observaciones con el mismo nivel en la variable categórica que tiene la fila i, en los datos previos.</p></li>
</ul>
<p>En el segundo <a href="https://towardsdatascience.com/how-catboost-encodes-categorical-variables-3866fb2ae640">post</a> podemos ver la siguiente figura.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="coches_cod_catboost.png" class="lightbox" title="Figura" data-gallery="quarto-lightbox-gallery-1"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/06/09/categoricas_a_lo_catboost_pensamientos/coches_cod_catboost.png" class="img-fluid figure-img" width="1224"></a></p>
<figcaption class="figure-caption">Figura</figcaption>
</figure>
</div>
<p>En este caso, si queremos calcular el valor de <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">avg_target</mtext><annotation encoding="application/x-tex">\text{avg_target}</annotation></semantics></math> para la quinta observación es tan sencillo como</p>
<ul>
<li>prior : La fijamos a 0.05, por ejemplo</li>
<li>countInClass: En los datos previos sólo había un caso en que el target fuera 1 y la marca Toyota, por lo tanto 1.</li>
<li>totalCount: En los datos previos hay 2 observaciones con marca Toyota.</li>
</ul>
<p>Así que <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">avg_target</mtext><mo>=</mo><mfrac displaystyle="true"><mrow><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mi>I</mi><mi>n</mi><mi>C</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>+</mo><mi>p</mi><mi>r</mi><mi>i</mi><mi>o</mi><mi>r</mi></mrow><mrow><mi>t</mi><mi>o</mi><mi>t</mi><mi>a</mi><mi>l</mi><mi>C</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mo>+</mo><mn>1</mn></mrow></mfrac><mo>=</mo><mfrac displaystyle="true"><mrow><mn>1</mn><mo>+</mo><mn>0.05</mn></mrow><mrow><mn>2</mn><mo>+</mo><mn>1</mn></mrow></mfrac><mo>=</mo><mn>0.35</mn></mrow><annotation encoding="application/x-tex">\text{avg_target} = \dfrac{countInClass + prior}{totalCount +1} = \dfrac{1+0.05}{2+1} = 0.35</annotation></semantics></math></p>
<p>Los autores de catboost reconocen que de esta forma si sólo haces una permutación de los datos para los primeros valores no se tiene info suficiente para obtener una buena codificación, así que proponen hacer varias permutaciones y tomar como codificación la media de las codificaciones anteriores.</p>
</section>
<section id="pensamientos" class="level2">
<h2 class="anchored" data-anchor-id="pensamientos">Pensamientos</h2>
<p>Pero, pero…</p>
<ul>
<li><p>¿No os recuerda un poco a como se hace un aprendizaje bayesiano? . Es decir parto de una priori (puede que poco informativa) y conforme voy obteniendo datos voy actualizando la distribución de mi parámetro, y de esa forma puedo obtener la posterior predictive distribution, que es la que aplicaría por ejemplo a un dato no visto.</p></li>
<li><p>De hecho al hacer varias permutaciones ¿ no está convergiendo de alguna manera la solución de catboost hacia la aproximación bayesiana?</p></li>
<li><p>¿No os parece un poco de sobreingeniería, para algo que quizá con una aproximación <em>estilo compadre bayesiana</em> se podría obtener algo muy similar y con menos esfuerzo?</p></li>
</ul>
<section id="pruebecilla" class="level3">
<h3 class="anchored" data-anchor-id="pruebecilla">Pruebecilla</h3>
<p>El ejemplo que viene en la <a href="https://catboost.ai/en/docs/concepts/algorithm-main-stages_cat-to-numberic">docu</a>, dónde se ejemplifica con un pequeño dataset de 7 filas y muestran una de las permutaciones generadas.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ejemplo_docu.png" class="lightbox" title="permutation1" data-gallery="quarto-lightbox-gallery-2"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/06/09/categoricas_a_lo_catboost_pensamientos/ejemplo_docu.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">permutation1</figcaption>
</figure>
</div>
<p>Que tras aplicar el algoritmo quedaría para esta permutación queda como <a href="ejemplo_docu_processed.png" class="lightbox" title="permutation_process" data-gallery="quarto-lightbox-gallery-3"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/06/09/categoricas_a_lo_catboost_pensamientos/ejemplo_docu_processed.png" class="img-fluid" alt="permutation_process"></a></p>
<p>Replicamos en código</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pa 4 tontás de hacer sample y de groups bys que hago luego</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(parallel) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># para usar varios cores con mclapply</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(patchwork) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pa juntar ggplots</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"></span>
<span id="cb2-2">mydf <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tribble</span>(</span>
<span id="cb2-3">    <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>id,<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>f2, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>cat, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>label, </span>
<span id="cb2-4">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">53</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rock"</span>,  <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span id="cb2-5">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">55</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"indie"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, </span>
<span id="cb2-6">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rock"</span>,  <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, </span>
<span id="cb2-7">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">42</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rock"</span>,  <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb2-8">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">34</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pop"</span>,   <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb2-9">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">48</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"indie"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb2-10">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rock"</span>,  <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb2-11">)</span>
<span id="cb2-12"></span>
<span id="cb2-13">mydf</span>
<span id="cb2-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 7 × 4</span></span>
<span id="cb2-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      id    f2 cat   label</span></span>
<span id="cb2-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;</span></span>
<span id="cb2-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1     1    53 rock      0</span></span>
<span id="cb2-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2     2    55 indie     0</span></span>
<span id="cb2-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3     3    40 rock      1</span></span>
<span id="cb2-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4     4    42 rock      1</span></span>
<span id="cb2-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5     5    34 pop       1</span></span>
<span id="cb2-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6     6    48 indie     1</span></span>
<span id="cb2-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 7     7    45 rock      0</span></span></code></pre></div>
</details>
</div>
<p>Funcioncita para obtener la codificación a lo catboost</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">avg_target <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(prev_df, nivel, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prior =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>){</span>
<span id="cb3-2">    countInClass <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(prev_df[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'label'</span>]][prev_df[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cat'</span>]]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> nivel])</span>
<span id="cb3-3">    totalCount <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(prev_df[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cat'</span>]]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span>nivel)</span>
<span id="cb3-4">    res <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  (countInClass <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> prior) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>(totalCount <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb3-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(res)</span>
<span id="cb3-6">}</span></code></pre></div>
</details>
</div>
<p>A la primer fila se le asigna siempre la prior</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># No estaba fino para ver como podría hacerlo sin iterar sobre todas las filas. </span></span>
<span id="cb4-2"></span>
<span id="cb4-3">foo1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(df, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prior =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>) {</span>
<span id="cb4-4">    </span>
<span id="cb4-5">    df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cat_code[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  prior</span>
<span id="cb4-6">    </span>
<span id="cb4-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (fila <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(df)) {</span>
<span id="cb4-8">        prev_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>(fila <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),]</span>
<span id="cb4-9">        df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cat_code[fila] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb4-10">            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">avg_target</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prev_df =</span> prev_df, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nivel =</span> df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cat[fila], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prior =</span> prior)</span>
<span id="cb4-11">    }</span>
<span id="cb4-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(df)</span>
<span id="cb4-13">}</span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">res1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">foo1</span>(mydf, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prior =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>)</span>
<span id="cb5-2">res1</span>
<span id="cb5-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 7 × 5</span></span>
<span id="cb5-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      id    f2 cat   label cat_code</span></span>
<span id="cb5-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb5-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1     1    53 rock      0    0.05 </span></span>
<span id="cb5-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2     2    55 indie     0    0.05 </span></span>
<span id="cb5-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3     3    40 rock      1    0.025</span></span>
<span id="cb5-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4     4    42 rock      1    0.35 </span></span>
<span id="cb5-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5     5    34 pop       1    0.05 </span></span>
<span id="cb5-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6     6    48 indie     1    0.025</span></span>
<span id="cb5-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 7     7    45 rock      0    0.512</span></span></code></pre></div>
</details>
</div>
<p>Ahora lo repetimos varias veces. Dónde en cada iteración hacemos una permutación de las filas</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">foo2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(df, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prior =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>) {</span>
<span id="cb6-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">require</span>(tidyverse)</span>
<span id="cb6-3">    mynew_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_sample</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prop =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replace =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb6-4">    mynew_df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cat_code[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  prior</span>
<span id="cb6-5">    </span>
<span id="cb6-6">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (fila <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(mynew_df)) {</span>
<span id="cb6-7">        prev_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mynew_df[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>(fila <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),]</span>
<span id="cb6-8">        mynew_df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cat_code[fila] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb6-9">            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">avg_target</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prev_df =</span> prev_df, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nivel =</span> mynew_df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cat[fila], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prior =</span> prior)</span>
<span id="cb6-10">    }</span>
<span id="cb6-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(mynew_df)</span>
<span id="cb6-12">}</span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"></span>
<span id="cb7-2">iteraciones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span></span>
<span id="cb7-3"></span>
<span id="cb7-4">res2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mclapply</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>iteraciones, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">FUN =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">foo2</span>(mydf,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prior =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mc.cores =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>))</span>
<span id="cb7-5"></span>
<span id="cb7-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(res2)</span>
<span id="cb7-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 7000    5</span></span>
<span id="cb7-8"></span>
<span id="cb7-9">(res2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> res2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cat_code =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(cat_code)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb7-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(id) )</span>
<span id="cb7-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 7 × 5</span></span>
<span id="cb7-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # Groups:   id [7]</span></span>
<span id="cb7-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      id    f2 cat   label cat_code</span></span>
<span id="cb7-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb7-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1     1    53 rock      0   0.340 </span></span>
<span id="cb7-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2     2    55 indie     0   0.284 </span></span>
<span id="cb7-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3     3    40 rock      1   0.175 </span></span>
<span id="cb7-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4     4    42 rock      1   0.194 </span></span>
<span id="cb7-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5     5    34 pop       1   0.05  </span></span>
<span id="cb7-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6     6    48 indie     1   0.0373</span></span>
<span id="cb7-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 7     7    45 rock      0   0.342</span></span></code></pre></div>
</details>
</div>
</section>
<section id="aproximación-compadre-bayesiana" class="level3">
<h3 class="anchored" data-anchor-id="aproximación-compadre-bayesiana">Aproximación compadre bayesiana</h3>
<p>¿Y si tomamos como priori una <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ℬ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>2</mn><mo>,</mo><mn>2</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathcal{B}(2,2)</annotation></semantics></math> y para cada categoría {rock, indie, pop} tomamos como su distribución a posteriori</p>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ℬ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>2</mn><mo>+</mo><mtext mathvariant="normal">exitos en datos</mtext><mo>,</mo><mn>2</mn><mo>+</mo><mtext mathvariant="normal">fracasos en los datos</mtext><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathcal{B}(2 + \text{exitos en datos},2 + \text{fracasos en los datos})</annotation></semantics></math> y para obtener un valor de la codificación para cada observación simplemente extraemos un valor aleatorio de esa distribución a posteriori?</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"></span>
<span id="cb8-2">res3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  mydf <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(cat) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb8-5">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>(), </span>
<span id="cb8-6">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">exitos =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(label)</span>
<span id="cb8-7">    )  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb8-10">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cat_code =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map2_dbl</span>(exitos, n, <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(exitos, n) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbeta</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, exitos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> , n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> exitos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))</span>
<span id="cb8-11">    ) </span>
<span id="cb8-12"></span>
<span id="cb8-13">res3</span>
<span id="cb8-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 7 × 7</span></span>
<span id="cb8-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      id    f2 cat   label     n exitos cat_code</span></span>
<span id="cb8-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb8-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1     1    53 rock      0     4      2    0.407</span></span>
<span id="cb8-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2     2    55 indie     0     2      1    0.467</span></span>
<span id="cb8-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3     3    40 rock      1     4      2    0.530</span></span>
<span id="cb8-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4     4    42 rock      1     4      2    0.532</span></span>
<span id="cb8-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5     5    34 pop       1     1      1    0.287</span></span>
<span id="cb8-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6     6    48 indie     1     2      1    0.290</span></span>
<span id="cb8-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 7     7    45 rock      0     4      2    0.801</span></span></code></pre></div>
</details>
</div>
<p>Pues tiene pinta de que esta aproximación podría ser tan válida como la que describen los de catboost y en principio es más sencilla.</p>
</section>
<section id="más-datos" class="level3">
<h3 class="anchored" data-anchor-id="más-datos">Más datos</h3>
<p>Creemos un dataset artificial partiendo de estos mismos datos.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">n<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span></span>
<span id="cb9-2">mydf_big<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> mydf[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq_len</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(mydf)), n), ]</span>
<span id="cb9-3">mydf_big<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>id <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(mydf_big)</span>
<span id="cb9-4"></span>
<span id="cb9-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(mydf_big)</span>
<span id="cb9-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 1400</span></span>
<span id="cb9-7"></span>
<span id="cb9-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(mydf_big, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb9-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 10 × 4</span></span>
<span id="cb9-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       id    f2 cat   label</span></span>
<span id="cb9-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;</span></span>
<span id="cb9-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1     1    53 rock      0</span></span>
<span id="cb9-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2     2    55 indie     0</span></span>
<span id="cb9-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3     3    40 rock      1</span></span>
<span id="cb9-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4     4    42 rock      1</span></span>
<span id="cb9-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5     5    34 pop       1</span></span>
<span id="cb9-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6     6    48 indie     1</span></span>
<span id="cb9-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7     7    45 rock      0</span></span>
<span id="cb9-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8     8    53 rock      0</span></span>
<span id="cb9-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9     9    55 indie     0</span></span>
<span id="cb9-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10    10    40 rock      1</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Cambiamos de forma aleatoria el valor de label para un % de las observaciones, para que no sea 200 veces exactamente el original</span></span>
<span id="cb10-2"></span>
<span id="cb10-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">table</span>(mydf_big<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>label)</span>
<span id="cb10-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb10-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   0   1 </span></span>
<span id="cb10-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 600 800</span></span>
<span id="cb10-7"></span>
<span id="cb10-8">mydf_big<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>label <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbinom</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(mydf_big), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prob =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(mydf_big<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>label<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>))</span>
<span id="cb10-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">table</span>(mydf_big<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>label)</span>
<span id="cb10-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb10-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   0   1 </span></span>
<span id="cb10-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 508 892</span></span>
<span id="cb10-13"></span>
<span id="cb10-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># vemos que hemos cambiado algunos valores en label</span></span>
<span id="cb10-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(mydf_big, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb10-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 10 × 4</span></span>
<span id="cb10-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       id    f2 cat   label</span></span>
<span id="cb10-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;int&gt;</span></span>
<span id="cb10-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1     1    53 rock      1</span></span>
<span id="cb10-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2     2    55 indie     1</span></span>
<span id="cb10-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3     3    40 rock      1</span></span>
<span id="cb10-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4     4    42 rock      1</span></span>
<span id="cb10-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5     5    34 pop       1</span></span>
<span id="cb10-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6     6    48 indie     1</span></span>
<span id="cb10-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7     7    45 rock      0</span></span>
<span id="cb10-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8     8    53 rock      0</span></span>
<span id="cb10-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9     9    55 indie     0</span></span>
<span id="cb10-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10    10    40 rock      1</span></span></code></pre></div>
</details>
</div>
</section>
<section id="comparamos" class="level3">
<h3 class="anchored" data-anchor-id="comparamos">Comparamos</h3>
<p>Para elegir las priori poco informativa para ambos métodos vemos una muestra de los datos de tamaño 10</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">(muestra <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mydf_big <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb11-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_sample</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb11-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(label) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb11-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>())</span>
<span id="cb11-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 2 × 2</span></span>
<span id="cb11-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # Groups:   label [2]</span></span>
<span id="cb11-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   label     n</span></span>
<span id="cb11-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;int&gt; &lt;int&gt;</span></span>
<span id="cb11-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1     0     7</span></span>
<span id="cb11-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2     1     3</span></span>
<span id="cb11-11"></span>
<span id="cb11-12"></span>
<span id="cb11-13">(prior_shape1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  muestra<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>n[muestra<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>label<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb11-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 3</span></span>
<span id="cb11-15">(prior_shape2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  muestra<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>n[muestra<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>label<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>])</span>
<span id="cb11-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 7</span></span>
<span id="cb11-17"></span>
<span id="cb11-18"></span>
<span id="cb11-19">(prior_catboost <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> prior_shape1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>(prior_shape1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> prior_shape2))</span>
<span id="cb11-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 0.3</span></span></code></pre></div>
</details>
</div>
<section id="catboost-codificación" class="level4">
<h4 class="anchored" data-anchor-id="catboost-codificación">Catboost codificación</h4>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">iteraciones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span></span>
<span id="cb12-2">tictoc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tic</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"catbost_code"</span>)</span>
<span id="cb12-3"></span>
<span id="cb12-4">cod_catboost <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mclapply</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>iteraciones, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">FUN =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">foo2</span>(mydf_big, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prior =</span> prior_catboost), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mc.cores =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>))</span>
<span id="cb12-5"></span>
<span id="cb12-6"></span>
<span id="cb12-7">tictoc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">toc</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">log=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb12-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; catbost_code: 3.293 sec elapsed</span></span>
<span id="cb12-9"></span>
<span id="cb12-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(cod_catboost)</span>
<span id="cb12-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 70000     5</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">cod_catboost <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cod_catboost <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb13-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb13-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cat_code =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(cat_code)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb13-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb13-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(id)</span>
<span id="cb13-6"></span>
<span id="cb13-7"></span>
<span id="cb13-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(cod_catboost)</span>
<span id="cb13-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 1400    5</span></span>
<span id="cb13-10"></span>
<span id="cb13-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(cod_catboost)</span>
<span id="cb13-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 6 × 5</span></span>
<span id="cb13-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # Groups:   id [6]</span></span>
<span id="cb13-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      id    f2 cat   label cat_code</span></span>
<span id="cb13-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;int&gt;    &lt;dbl&gt;</span></span>
<span id="cb13-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1     1    53 rock      1    0.587</span></span>
<span id="cb13-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2     2    55 indie     1    0.567</span></span>
<span id="cb13-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3     3    40 rock      1    0.577</span></span>
<span id="cb13-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4     4    42 rock      1    0.586</span></span>
<span id="cb13-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5     5    34 pop       1    0.910</span></span>
<span id="cb13-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6     6    48 indie     1    0.582</span></span></code></pre></div>
</details>
</div>
</section>
<section id="estilo-compadre-codificación" class="level4">
<h4 class="anchored" data-anchor-id="estilo-compadre-codificación">Estilo compadre codificación</h4>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">tictoc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tic</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"estilo compadre"</span>)</span>
<span id="cb14-2">estilo_compadre <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  mydf_big <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb14-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(cat) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb14-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb14-5">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>(), </span>
<span id="cb14-6">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">exitos =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(label)</span>
<span id="cb14-7">    )  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb14-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb14-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb14-10">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cat_code =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map2_dbl</span>(exitos, n, <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(exitos, n) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbeta</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, exitos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> prior_shape1 , n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> exitos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> prior_shape2))</span>
<span id="cb14-11">    ) </span>
<span id="cb14-12"></span>
<span id="cb14-13">tictoc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">toc</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">log =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb14-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; estilo compadre: 0.023 sec elapsed</span></span>
<span id="cb14-15"></span>
<span id="cb14-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(estilo_compadre)</span>
<span id="cb14-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 6 × 7</span></span>
<span id="cb14-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      id    f2 cat   label     n exitos cat_code</span></span>
<span id="cb14-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt;  &lt;int&gt;    &lt;dbl&gt;</span></span>
<span id="cb14-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1     1    53 rock      1   800    474    0.604</span></span>
<span id="cb14-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2     2    55 indie     1   400    233    0.539</span></span>
<span id="cb14-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3     3    40 rock      1   800    474    0.572</span></span>
<span id="cb14-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4     4    42 rock      1   800    474    0.563</span></span>
<span id="cb14-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5     5    34 pop       1   200    185    0.854</span></span>
<span id="cb14-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6     6    48 indie     1   400    233    0.558</span></span></code></pre></div>
</details>
</div>
<p>¿cómo de parecidas son las dos codificaciones?</p>
<p>Por el momento parece que bastante</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cor</span>(cod_catboost<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cat_code, estilo_compadre<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cat_code)</span>
<span id="cb15-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 0.9819561</span></span></code></pre></div>
</details>
</div>
<p>Parece que la codificación estilo compadre es un poco más dispersa, lo cual no tiene por qué ser necesariamente malo.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"></span>
<span id="cb16-2">cod_catboost <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb16-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(cat) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb16-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">media =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(cat_code), </span>
<span id="cb16-5">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">low =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">quantile</span>(cat_code, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>), </span>
<span id="cb16-6">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">high =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">quantile</span>(cat_code, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.95</span>), </span>
<span id="cb16-7">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd_value =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(cat_code))</span>
<span id="cb16-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 3 × 5</span></span>
<span id="cb16-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   cat   media   low  high sd_value</span></span>
<span id="cb16-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb16-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 indie 0.577 0.567 0.587  0.00635</span></span>
<span id="cb16-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 pop   0.906 0.888 0.916  0.00871</span></span>
<span id="cb16-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 rock  0.585 0.575 0.592  0.00520</span></span>
<span id="cb16-14"></span>
<span id="cb16-15"></span>
<span id="cb16-16">estilo_compadre <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb16-17">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(cat) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb16-18">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">media =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(cat_code), </span>
<span id="cb16-19">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">low =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">quantile</span>(cat_code, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>), </span>
<span id="cb16-20">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">high =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">quantile</span>(cat_code, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.95</span>), </span>
<span id="cb16-21">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd_value =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(cat_code))</span>
<span id="cb16-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 3 × 5</span></span>
<span id="cb16-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   cat   media   low  high sd_value</span></span>
<span id="cb16-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb16-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 indie 0.578 0.541 0.616   0.0240</span></span>
<span id="cb16-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 pop   0.896 0.857 0.933   0.0209</span></span>
<span id="cb16-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 rock  0.589 0.561 0.617   0.0173</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">p1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cod_catboost <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb17-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span>cat_code, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span>cat))  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb17-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_density</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb17-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gráfico densidad de las codificanes"</span>, </span>
<span id="cb17-5">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"catboost"</span>)</span>
<span id="cb17-6"></span>
<span id="cb17-7">p2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> estilo_compadre <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb17-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span>cat_code, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span>cat))  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb17-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_density</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb17-10">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gráfico densidad de las codificanes"</span>, </span>
<span id="cb17-11">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Estilo bayesian compadre"</span>)</span>
<span id="cb17-12"></span>
<span id="cb17-13">p1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p2</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-17-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/06/09/categoricas_a_lo_catboost_pensamientos/index_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Y si hacemos un modelito tonto usando estas codificaciones. Si, ya sé que son datos fakes y que no tiene mucho sentido y tal, y que lo suyo sería con unos datos reales (mandadme algunos !! )</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># set.seed(47)</span></span>
<span id="cb18-2"></span>
<span id="cb18-3">id_train <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(mydf_big), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">700</span>)</span>
<span id="cb18-4"></span>
<span id="cb18-5"></span>
<span id="cb18-6">train_predict_simple <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(df){</span>
<span id="cb18-7">    train <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  df[id_train, ]</span>
<span id="cb18-8">    test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>id_train, ]</span>
<span id="cb18-9">    </span>
<span id="cb18-10">    fit_base <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glm</span>(label <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> f2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> cat, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> train, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> binomial)</span>
<span id="cb18-11">    fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glm</span>(label <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>  f2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>  cat_code, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> train, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> binomial)</span>
<span id="cb18-12">    </span>
<span id="cb18-13">    auc_base <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pROC<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">auc</span>(test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>label, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(fit_base, test, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"response"</span>))</span>
<span id="cb18-14">    auc <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pROC<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">auc</span>(test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>label, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(fit, test, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"response"</span>))</span>
<span id="cb18-15">    </span>
<span id="cb18-16">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">auc_base =</span> auc_base, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">auc =</span> auc))</span>
<span id="cb18-17">    </span>
<span id="cb18-18">}</span>
<span id="cb18-19"></span>
<span id="cb18-20"></span>
<span id="cb18-21"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mclapply</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(cod_catboost, estilo_compadre), train_predict_simple, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mc.cores =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb18-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[1]]</span></span>
<span id="cb18-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[1]]$auc_base</span></span>
<span id="cb18-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Area under the curve: 0.8231</span></span>
<span id="cb18-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb18-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[1]]$auc</span></span>
<span id="cb18-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Area under the curve: 0.7693</span></span>
<span id="cb18-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb18-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb18-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[2]]</span></span>
<span id="cb18-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[2]]$auc_base</span></span>
<span id="cb18-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Area under the curve: 0.8231</span></span>
<span id="cb18-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb18-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[2]]$auc</span></span>
<span id="cb18-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Area under the curve: 0.7658</span></span></code></pre></div>
</details>
</div>
</section>
</section>
</section>
<section id="más-pensamientos" class="level2">
<h2 class="anchored" data-anchor-id="más-pensamientos">Más pensamientos</h2>
<ul>
<li><p>El ejemplo que he hecho no es del todo válido puesto que tanto para la codificación con catboost como la de estilo compadre han intervenido todos los datos.</p></li>
<li><p>La variable categórica que codifico sólo tiene 3 niveles, de hecho no haría falta hacer este tipo de codificación. Tengo pendiente probar con algo como códigos postales o similar.</p></li>
<li><p>La forma en que catboost hace esta codificación me parece que está en mitad entre la aproximación bayesiana y hacer un target_encoding al uso. De hecho si hay un nivel con muy pocos valores el valor de la codificación de catboost para ese nivel va a parecerse más a la prior que elijas que a la proporción de éxitos en esa categoría, lo cual es muy parecido a la estimación bayesiana compadre.</p></li>
<li><p>Se podrían utilizar codificaciones basadas en modelos mixtos o algún tipo de combinación convexa entre la información particular que tiene una categoría y la general aportada por el conjunto de los datos.</p></li>
</ul>


</section>

 ]]></description>
  <category>Estadística</category>
  <category>categóricas</category>
  <category>R</category>
  <category>catboost</category>
  <category>2023</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/06/09/categoricas_a_lo_catboost_pensamientos/index.html</guid>
  <pubDate>Thu, 08 Jun 2023 22:00:00 GMT</pubDate>
  <media:content url="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/06/09/categoricas_a_lo_catboost_pensamientos" medium="image"/>
</item>
<item>
  <title>Mapeando</title>
  <dc:creator>José Luis Cañadas Reche</dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/05/06/mapeando/index.html</link>
  <description><![CDATA[ 



<p>Siempre me ha gustado el tema de los Sistemas de información geográfica y derivados. Ya cuando trabajaba en el <a href="https://www.iesa.csic.es/">IESA</a> fui a un curso en Vigo sobre <a href="http://www.gvsig.com/es">gvSIG</a> y luego aprendí cosas con <a href="https://www.qgis.org/es/site/">QGIS</a> , el cual me sigue pareciendo un software más que excelente.</p>
<p>Hoy en día se pueden hacer muchísimas cosas con Python y con R, incluso tienen conectores con librerías de javascript para hacer cosas resultonas y con interactividad, veáse <a href="https://r-graph-gallery.com/map.html">esto</a> por ejemplo. En realidad tanto python como R tiran de las mismas librerías de bajo nivel, a saber, <code>gdal</code>, <code>libproj</code>, <code>libgeos</code> y similares, las cuales, para ser honestos, pueden meterte en un infierno de dependencias en según qué sistemas unix. Eso sí, una vez sales de ahí es una gozada.</p>
<p>Total, el caso es que el pasado jueves me llega una duda del gran <a href="https://leonardohansa.com/">Leonardo Hansa</a>, que reproduzco a continuación.</p>
<blockquote class="blockquote">
<p>Vicepresi, tú sabes cómo se puede saber si dos códigos postales son adyancentes? Con datos, claro, no a ojo</p>
</blockquote>
<p>Y bueno, como no tenía mucho más que hacer esa tarde y soy un picado de la vida, pues me dije.</p>
<blockquote class="blockquote">
<p>Creo que tengo un shapefile de códigos postales de 2019 que no recuerdo como llegó a mis manos, quizá pueda hacer algo.</p>
</blockquote>
<p>Y me puse manos a la obra a investigar a ver cómo se podría hacer eso de encontrar polígonos adyacentes a uno dado usando <code>Rstats</code>. El caso es que llegué a varios hilos dónde se comentaban diferentes formas, una era usando la función <code>poly2nb</code> de la librería <code>spdep</code> y también cómo hacerlo usando la función <code>st_intersects</code> de la librería <code>sf</code> . En este <a href="https://github.com/r-spatial/sf/issues/234"><code>issue</code></a> incluso comentaban los grandes de estas cosas, Edzer Pebesma , Roger Bivand y nuestro conocico Virgilio Gómez Rubio.</p>
<p>Bueno, vamos al código, que de eso se trata.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(sf)</span>
<span id="cb1-3"></span>
<span id="cb1-4">mapa <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_read</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/shapefiles/cod_postales/cp_19_dis.shp"</span>))</span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Reading layer `cp_19_dis' from data source </span></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   `/media/hd1/canadasreche@gmail.com/blog_quarto/data/shapefiles/cod_postales/cp_19_dis.shp' </span></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   using driver `ESRI Shapefile'</span></span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Simple feature collection with 10809 features and 4 fields (with 1 geometry empty)</span></span>
<span id="cb1-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Dimension:     XY</span></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Bounding box:  xmin: -2021660 ymin: 3203377 xmax: 481778.5 ymax: 5433002</span></span>
<span id="cb1-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Projected CRS: WGS 84 / Pseudo-Mercator</span></span>
<span id="cb1-13"></span>
<span id="cb1-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(mapa)</span>
<span id="cb1-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Simple feature collection with 6 features and 4 fields</span></span>
<span id="cb1-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span id="cb1-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Dimension:     XY</span></span>
<span id="cb1-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Bounding box:  xmin: -1536953 ymin: 3373964 xmax: -41802.13 ymax: 5247186</span></span>
<span id="cb1-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Projected CRS: WGS 84 / Pseudo-Mercator</span></span>
<span id="cb1-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      cp cp_num cp_2 cp_2_num                       geometry</span></span>
<span id="cb1-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 35560  35560   35       35 MULTIPOLYGON (((-1518970 33...</span></span>
<span id="cb1-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 27330  27330   27       27 MULTIPOLYGON (((-821864.3 5...</span></span>
<span id="cb1-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 46680  46680   46       46 MULTIPOLYGON (((-51610.46 4...</span></span>
<span id="cb1-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4 49706  49706   49       49 MULTIPOLYGON (((-641488.4 5...</span></span>
<span id="cb1-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5 21120  21120   21       21 MULTIPOLYGON (((-776955.2 4...</span></span>
<span id="cb1-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6 16623  16623   16       16 MULTIPOLYGON (((-256256.7 4...</span></span></code></pre></div>
</details>
</div>
<p>Pinto códigos postales de la provincia de Madrid por ejemplo, coloreando por área de cada polígono.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">mapa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-2">    </span>
<span id="cb2-3">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># calculo area usando st_area</span></span>
<span id="cb2-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">area_m2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_area</span>(mapa) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb2-5">               <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(cp_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">28</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_sf</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> area_m2)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_viridis_c</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-2-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/05/06/mapeando/index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Para encontrar los polígonos adyacentes uso <code>st_intersects</code> que permite por ejemplo saber qué puntos están dentro de un polígono y cosas así. Al aplicarlo sobre una geometría de tipo polígono lo que encuentra son los polígonos adyacentes.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># mido a ver cuánto tarda. </span></span>
<span id="cb3-2">tictoc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tic</span>()</span>
<span id="cb3-3">lista_adyacentes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_intersects</span>(mapa)</span>
<span id="cb3-4">tictoc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">toc</span>()</span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2.531 sec elapsed</span></span></code></pre></div>
</details>
</div>
<p>Ahora si quisiera saber qué polígonos son adyacentes a uno dado, es simplemente seleccionar en lista adyacentes, por ejemplo</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">lista_adyacentes[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb4-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[1]]</span></span>
<span id="cb4-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1]    1 3684 4621 6345 7017 7996</span></span></code></pre></div>
</details>
</div>
<p>Para ver los adyacentes a mi código postal en Madrid.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">(fila_mi_cp <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  mapa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rownames_to_column</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(cp <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"28043"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(rowname))</span>
<span id="cb5-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "9138"</span></span>
<span id="cb5-6"></span>
<span id="cb5-7"></span>
<span id="cb5-8">(mis_vecinos_fila <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lista_adyacentes[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(fila_mi_cp)])</span>
<span id="cb5-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[1]]</span></span>
<span id="cb5-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1]  493 4831 4998 5127 6941 7662 9138 9427</span></span></code></pre></div>
</details>
</div>
<p>Pero me devuelve el número de fila, para ver el cp sería</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">mi_cp <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"28043"</span></span>
<span id="cb6-2">(mis_vecinos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mapa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cp[mis_vecinos_fila[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]]])</span>
<span id="cb6-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "28028" "28042" "28002" "28022" "28033" "28016" "28043" "28027"</span></span>
<span id="cb6-4"></span>
<span id="cb6-5">(adyacentes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">setdiff</span>(mis_vecinos, mi_cp))</span>
<span id="cb6-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "28028" "28042" "28002" "28022" "28033" "28016" "28027"</span></span></code></pre></div>
</details>
</div>
<p>Pintamos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">  mapa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb7-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(cp_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">28</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-3">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb7-4">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tipo =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb7-5">                cp <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> mi_cp <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mi_cp"</span>, </span>
<span id="cb7-6">                cp <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> adyacentes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mis_copostales_vecinos"</span>, </span>
<span id="cb7-7">                <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"resto de codpostales"</span></span>
<span id="cb7-8">            )</span>
<span id="cb7-9">        ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb7-10">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-11">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_sf</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> tipo)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-12">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_viridis_d</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/05/06/mapeando/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>y listo.. Lo ponemos en unas funcioncitas todo</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">get_adyacentes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mapa =</span> mapa, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id_col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cp_num"</span>) {</span>
<span id="cb8-2">  </span>
<span id="cb8-3">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># quiza sacar el st_intersects de la función sea mejor</span></span>
<span id="cb8-4">  nb <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_intersects</span>(mapa)</span>
<span id="cb8-5">  </span>
<span id="cb8-6">  get_nb <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x){</span>
<span id="cb8-7">      res <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mapa[[id_col]][x]</span>
<span id="cb8-8">      res</span>
<span id="cb8-9">  }</span>
<span id="cb8-10">  </span>
<span id="cb8-11">  adjacency_list <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(nb, get_nb)</span>
<span id="cb8-12">  adjacency_list_names <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  mapa[[id_col]][<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(adjacency_list)]</span>
<span id="cb8-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(adjacency_list) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> adjacency_list_names</span>
<span id="cb8-14">  adjacency_list</span>
<span id="cb8-15">}</span>
<span id="cb8-16"></span>
<span id="cb8-17"></span>
<span id="cb8-18"></span>
<span id="cb8-19"></span>
<span id="cb8-20">get_mis_vecinos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(mi_cp, cps_adyacentes){</span>
<span id="cb8-21">    cp_simbol <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.symbol</span>(mi_cp) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># a simbolo para poder llamara cps_adyacentes[[`18814`]]</span></span>
<span id="cb8-22">    mis_vecinos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  cps_adyacentes[[cp_simbol]]</span>
<span id="cb8-23">}</span>
<span id="cb8-24"></span>
<span id="cb8-25"></span>
<span id="cb8-26"></span>
<span id="cb8-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># mapa seleccionando solo tu provincia </span></span>
<span id="cb8-28"></span>
<span id="cb8-29"></span>
<span id="cb8-30">plot_cp_vecinos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(mi_cp, cps_adyacentes, mapa){</span>
<span id="cb8-31">    cp_simbol <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.symbol</span>(mi_cp)</span>
<span id="cb8-32">    mis_vecinos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  cps_adyacentes[[cp_simbol]]</span>
<span id="cb8-33">    mi_prop <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_sub</span>(mi_cp, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>()</span>
<span id="cb8-34">    adyacentes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">setdiff</span>(mis_vecinos, mi_cp)</span>
<span id="cb8-35">    mapa <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-36">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(cp_2_num <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> mi_prop) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-37">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb8-38">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tipo =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb8-39">                cp_num <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> mi_cp <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mi_cp"</span>, </span>
<span id="cb8-40">                cp_num <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> adyacentes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mis_copostales_vecinos"</span>, </span>
<span id="cb8-41">                <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"resto de codpostales"</span></span>
<span id="cb8-42">            )</span>
<span id="cb8-43">        ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-44">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-45">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_sf</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> tipo)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-46">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_viridis_d</span>()</span>
<span id="cb8-47">}</span></code></pre></div>
</details>
</div>
<p>Y ya podemos usarlo</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">cps_adyacentes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_adyacentes</span>(mapa, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id_col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cp_num"</span>)</span>
<span id="cb9-2"></span>
<span id="cb9-3">(mis_cps_vecinos_pueblo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_mis_vecinos</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18814</span>, cps_adyacentes))</span>
<span id="cb9-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 18815 18800 18817 18811 18814 18818 18816</span></span></code></pre></div>
</details>
</div>
<p>Pintamos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"></span>
<span id="cb10-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_cp_vecinos</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18814</span>, cps_adyacentes, mapa) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CP núcleo principal Cortes de Baza"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-10-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/05/06/mapeando/index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plaza cascorro</span></span>
<span id="cb11-2"></span>
<span id="cb11-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_cp_vecinos</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">28005</span>, cps_adyacentes, mapa) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cp Plaza Cascorro"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-11-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/05/06/mapeando/index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Pongo Carmona por ser el de mayor área </span></span>
<span id="cb12-2"></span>
<span id="cb12-3">(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_mis_vecinos</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">41410</span>, cps_adyacentes))</span>
<span id="cb12-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [1] 41620 41300 41449 41339 41420 41359 41610 41600 41320 41309 41520 41429</span></span>
<span id="cb12-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [13] 41410 41510 41310 41016 41500 41440</span></span>
<span id="cb12-6"></span>
<span id="cb12-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_cp_vecinos</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">41410</span>, cps_adyacentes, mapa) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Carmona"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-12-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/05/06/mapeando/index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<section id="notas" class="level2">
<h2 class="anchored" data-anchor-id="notas">Notas</h2>
<ul>
<li>Los códigos postales que uso están desactualizados. La capa de shapefile es un producto que vende Correos a precio no barato. Antes se podían descargar de CartoCiudad, pero ya no. Algún enlace interesante:
<ul>
<li><a href="https://analisisydecision.es/como-hacer-un-mapa-de-espana-por-codigos-postales-con-qgis/">post de Raúl Vaquerizo</a></li>
<li><a href="https://www.nosolosig.com/articulos/1191-asi-hice-el-mapa-de-los-codigos-postales-de-espana-con-sig-y-datos-abiertos">post de nosolosig</a></li>
</ul></li>
<li>Libros online sobre GIS en R:
<ul>
<li><a href="https://r-spatial.org/book/">r-spatial</a></li>
<li><a href="https://r.geocompx.org/index.html">geocomputation with R</a></li>
</ul></li>
<li><a href="https://asdar-book.org/">Applied Spatial Data Analysis with R</a> . Un poco antiguo ya, no sé si Virgilio, Roger y Edzer están trabajando sobre nueva edición o no</li>
</ul>


</section>

 ]]></description>
  <category>Estadística</category>
  <category>gis</category>
  <category>R</category>
  <category>2023</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/05/06/mapeando/index.html</guid>
  <pubDate>Fri, 05 May 2023 22:00:00 GMT</pubDate>
  <media:content url="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/05/06/mapeando" medium="image"/>
</item>
<item>
  <title>Regresión cuantil a lo machín lenin con catboost</title>
  <dc:creator>José Luis Cañadas Reche</dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/04/23/quantile-catboost/index.html</link>
  <description><![CDATA[ 



<p>Hay veces, más de las que se cree, en que nos interesa estimar un cuantil en vez de la media. Si tenemos una variable dependinte <img src="https://latex.codecogs.com/png.latex?y"> y una o varias independientes <img src="https://latex.codecogs.com/png.latex?X">, lo que se suele hacer es una regresión cuantil.</p>
<p>Si visitamos uno de los papers originales de dicha técnica <a href="https://www.jstor.org/stable/2347802">Computing Regression Quantiles</a> vemos que trata de minimizar la siguiente expresión.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Carg%5Cmin_b%20R_%7B%5Ctheta%7D(b)%20%20=%20%5Csum_%7Bi%20=%201%7D%5E%7Bn%7D%5Crho_%5Ctheta%20%5Cleft(%20y_i%20-%20x_ib%5Cright)%0A"> Con <img src="https://latex.codecogs.com/png.latex?%5Ctheta%20%5Cin%20(0,1)"> y</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bequation%7D%0A%20%20%20%20%5Crho_%5Ctheta(u)%20=%0A%20%20%20%20%20%20%20%20%5Cbegin%7Bcases%7D%0A%20%20%20%20%20%20%20%20%5Ctheta%20u%20%20&amp;%20%20u%20%5Cgeq%200%5C%5C%0A%20%20%20%20%20%20%20%20(%5Ctheta%20-1)%20&amp;%20u%20%20%3C%200%20%5C%5C%0A%20%20%20%20%20%20%20%20%5Cend%7Bcases%7D%0A%5Cend%7Bequation%7D%0A"></p>
<p>Lo cual es simplemente “penalizar” por <img src="https://latex.codecogs.com/png.latex?%5Ctheta"> cuando el residuo sea mayor o igual que 0, es decir, cuando nos equivocamos por arriba y por <img src="https://latex.codecogs.com/png.latex?(%5Ctheta%20-1)"> si nos equivocamos por abajo.</p>
<p>Ejemplo, si <img src="https://latex.codecogs.com/png.latex?y_i%20=%2040"> y <img src="https://latex.codecogs.com/png.latex?f(x)%20=%2050"> y queremos estimar el cuantil 0.95. Entonces como el residuo es menor que 0, se pondera por 0.05</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Crho_(40%20-%2050)%20=%20(0.95%20-1)%20(40%20-%2050)%20=%200.5%20"> Si en cambio <img src="https://latex.codecogs.com/png.latex?f(x)%20=%2030">, es decir, nos equivocamos por abajo, pero a la misma distancia del valor real entonces</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Crho(40-30)%20=%200.95%20(40-30)%20=%209.5%20"></p>
<p>Y por tanto la función a minimizar <img src="https://latex.codecogs.com/png.latex?%5Carg%5Cmin_b%20R_%7B%5Ctheta%7D(b)"> cuando <img src="https://latex.codecogs.com/png.latex?%5Ctheta%20%3E%200.5"> va a tener un valor mucho mayor cuando nos “equivocamos” por abajo que por arriba. Y debido a cómo está definido <img src="https://latex.codecogs.com/png.latex?%5Crho_%5Ctheta(u)"> se consigue la regresión cuantil con cuantil igual a <img src="https://latex.codecogs.com/png.latex?%5Ctheta">. En el paper (de 1987) viene mejor explicado y el algoritmo para resolverlo en el caso de que <img src="https://latex.codecogs.com/png.latex?f(x)"> sea lineal.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pero, ¿qué me estás contando??</p>
<p>¡¡Estamos en la segunda década del siglo XXI y ahora todo es IA y Machín Lenin!!</p>
</div>
</div>
<p>Fuera coñas, el caso es que la gente de yandex en su librería <a href="https://catboost.ai/">catboost</a> han utilizado esto para hacer la regresión cuantil, simplemente utilizando la expresión anterior como función de pérdida. <a href="https://catboost.ai/en/docs/concepts/loss-functions-regression">Aquí</a> se puede ver las diferentes funciones de pérdida que usan según el caso.</p>
<p>Para la regresión cuantil usan</p>
<p><img src="https://latex.codecogs.com/png.latex?L(t,%20a,%20%5Calpha)%20=%20%5Cdfrac%7B%5Csum_%7Bi%7D%5E%7BN%7D%20%5Comega_i(%5Calpha%20-%20I(t_i%20%5Cleq%20a_i))(t_i-a_i)%7D%7B%5Csum_%7Bi%7D%5E%7BN%7D%20%5Comega_i%7D"> Dónde</p>
<ul>
<li><img src="https://latex.codecogs.com/png.latex?t_i"> es el valor real de la variable</li>
<li><img src="https://latex.codecogs.com/png.latex?a_i"> el valor de la predicción</li>
<li><img src="https://latex.codecogs.com/png.latex?%5Calpha"> es el cuantil que se quiere predecir</li>
<li><img src="https://latex.codecogs.com/png.latex?%5Comega_i"> son los pesos de cada observación</li>
<li>I es la función indicadora</li>
</ul>
<p>Como vemos, es lo mismo que se cuenta en el paper de 1987. Pero al meterlo como función de pérdida en el algoritmo sirve para el algoritmo de boosting que se utiliza en la librería.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ojo, que los de yandex han ido un poquito más allá</p>
</div>
</div>
<p>La gente de catboost, atinadamente ha dicho, y ¿por qué no construimos un función de pérdida que minimice globalmente varios cuantiles? Lo cual es algo así como “encuéntrame la distribución de los parámetros que mejor se ajusta a estos datos en vez de un sólo parámetro”.</p>
<p>Pero esto son arbolitos y boosting, no hay lo que se dice un parámetro de la función propiamente dicho, por lo que al final lo que se “aprende” debe ser la configuración de árboles que minimiza globalmente los cuantiles indicados.</p>
<p>Bueno, la función de pérdida “multi-quantile” es una modificación simple de la anterior.</p>
<p><img src="https://latex.codecogs.com/png.latex?L(t,%20a,%20%5Calpha_q)%20=%20%5Cdfrac%7B%5Csum_%7Bi%7D%5E%7BN%7D%20%5Comega_i%20%5Csum_%7Bq=1%7D%5E%7BQ%7D(%5Calpha_q%20-%20I(t_i%20%5Cleq%20a_i))(t_i-a_i)%7D%7B%5Csum_%7Bi%7D%5E%7BN%7D%20%5Comega_i%7D"></p>
<section id="ejemplo" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo">Ejemplo</h2>
<p>El ejemplo no es mío, lo he visto por algún sitio que no me acuerdo.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>catboost</code> se puede utilizar en R y python.</p>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"></span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb1-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> seaborn <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sns</span>
<span id="cb1-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> catboost <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> CatBoostRegressor</span>
<span id="cb1-7">sns.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>()</span>
<span id="cb1-8"></span>
<span id="cb1-9">n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">800</span></span>
<span id="cb1-10"></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># X aleatorias</span></span>
<span id="cb1-12">x_train <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.rand(n)</span>
<span id="cb1-13">x_test <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.rand(n)</span>
<span id="cb1-14"></span>
<span id="cb1-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># un poquito de ruido gaussiano</span></span>
<span id="cb1-16"></span>
<span id="cb1-17">noise_train <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.normal(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, n)</span>
<span id="cb1-18">noise_test <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.normal(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, n)</span>
<span id="cb1-19"></span>
<span id="cb1-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Simulamos y_train e y _x como y = 2 + 3 * x + ruido</span></span>
<span id="cb1-21">a, b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb1-22"></span>
<span id="cb1-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># al lio</span></span>
<span id="cb1-24">y_train <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x_train <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> noise_train</span>
<span id="cb1-25">y_test <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x_test <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> noise_test</span></code></pre></div>
</details>
</div>
<p>Pintamos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">sns.scatterplot(x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> x_train, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> y_train).<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ejemplillo"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-2-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/04/23/quantile-catboost/index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Vaos a predecir 10 cuantiles</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">quantiles <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [q<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> q <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)]</span>
<span id="cb3-2"></span>
<span id="cb3-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># se ponen en string separados por commas</span></span>
<span id="cb3-4">quantile_str <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(quantiles).replace(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'['</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>).replace(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">']'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>)</span>
<span id="cb3-5"></span>
<span id="cb3-6"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(quantile_str)</span>
<span id="cb3-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9</span></span></code></pre></div>
</details>
</div>
<p>Modelito</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> CatBoostRegressor(iterations<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>,</span>
<span id="cb4-2">                          loss_function<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'MultiQuantile:alpha=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>quantile_str<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>)</span>
<span id="cb4-3"></span>
<span id="cb4-4">model.fit(x_train.reshape(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), y_train)</span>
<span id="cb4-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 0:   learn: 0.1977907    total: 49.8ms   remaining: 4.93s</span></span>
<span id="cb4-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1:   learn: 0.1934878    total: 54.5ms   remaining: 2.67s</span></span>
<span id="cb4-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2:   learn: 0.1891389    total: 61.2ms   remaining: 1.98s</span></span>
<span id="cb4-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3:   learn: 0.1849242    total: 64.9ms   remaining: 1.56s</span></span>
<span id="cb4-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4:   learn: 0.1808818    total: 68.4ms   remaining: 1.3s</span></span>
<span id="cb4-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5:   learn: 0.1769520    total: 71.7ms   remaining: 1.12s</span></span>
<span id="cb4-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6:   learn: 0.1732251    total: 74.7ms   remaining: 993ms</span></span>
<span id="cb4-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 7:   learn: 0.1696774    total: 77.9ms   remaining: 896ms</span></span>
<span id="cb4-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 8:   learn: 0.1661482    total: 80.9ms   remaining: 818ms</span></span>
<span id="cb4-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 9:   learn: 0.1628541    total: 84.5ms   remaining: 760ms</span></span>
<span id="cb4-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10:  learn: 0.1596378    total: 87.6ms   remaining: 709ms</span></span>
<span id="cb4-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 11:  learn: 0.1565479    total: 90.7ms   remaining: 665ms</span></span>
<span id="cb4-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 12:  learn: 0.1536016    total: 93.8ms   remaining: 628ms</span></span>
<span id="cb4-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 13:  learn: 0.1507692    total: 96.9ms   remaining: 595ms</span></span>
<span id="cb4-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 14:  learn: 0.1480845    total: 100ms    remaining: 567ms</span></span>
<span id="cb4-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 15:  learn: 0.1454840    total: 103ms    remaining: 541ms</span></span>
<span id="cb4-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 16:  learn: 0.1429863    total: 106ms    remaining: 518ms</span></span>
<span id="cb4-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 17:  learn: 0.1407059    total: 109ms    remaining: 497ms</span></span>
<span id="cb4-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 18:  learn: 0.1383697    total: 112ms    remaining: 477ms</span></span>
<span id="cb4-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 19:  learn: 0.1361779    total: 115ms    remaining: 460ms</span></span>
<span id="cb4-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 20:  learn: 0.1340707    total: 118ms    remaining: 444ms</span></span>
<span id="cb4-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 21:  learn: 0.1320342    total: 122ms    remaining: 432ms</span></span>
<span id="cb4-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 22:  learn: 0.1300775    total: 125ms    remaining: 418ms</span></span>
<span id="cb4-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 23:  learn: 0.1282447    total: 129ms    remaining: 408ms</span></span>
<span id="cb4-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 24:  learn: 0.1264588    total: 133ms    remaining: 399ms</span></span>
<span id="cb4-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 25:  learn: 0.1247594    total: 137ms    remaining: 390ms</span></span>
<span id="cb4-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 26:  learn: 0.1232137    total: 141ms    remaining: 381ms</span></span>
<span id="cb4-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 27:  learn: 0.1216563    total: 145ms    remaining: 373ms</span></span>
<span id="cb4-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 28:  learn: 0.1202034    total: 149ms    remaining: 365ms</span></span>
<span id="cb4-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 29:  learn: 0.1187735    total: 153ms    remaining: 357ms</span></span>
<span id="cb4-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 30:  learn: 0.1174263    total: 157ms    remaining: 350ms</span></span>
<span id="cb4-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 31:  learn: 0.1161250    total: 162ms    remaining: 344ms</span></span>
<span id="cb4-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 32:  learn: 0.1148583    total: 172ms    remaining: 350ms</span></span>
<span id="cb4-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 33:  learn: 0.1136688    total: 176ms    remaining: 342ms</span></span>
<span id="cb4-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 34:  learn: 0.1125292    total: 180ms    remaining: 335ms</span></span>
<span id="cb4-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 35:  learn: 0.1114357    total: 184ms    remaining: 327ms</span></span>
<span id="cb4-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 36:  learn: 0.1104088    total: 187ms    remaining: 318ms</span></span>
<span id="cb4-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 37:  learn: 0.1094203    total: 190ms    remaining: 309ms</span></span>
<span id="cb4-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 38:  learn: 0.1085302    total: 193ms    remaining: 301ms</span></span>
<span id="cb4-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 39:  learn: 0.1076702    total: 196ms    remaining: 294ms</span></span>
<span id="cb4-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 40:  learn: 0.1068348    total: 200ms    remaining: 288ms</span></span>
<span id="cb4-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 41:  learn: 0.1060263    total: 204ms    remaining: 281ms</span></span>
<span id="cb4-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 42:  learn: 0.1052530    total: 207ms    remaining: 274ms</span></span>
<span id="cb4-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 43:  learn: 0.1045115    total: 212ms    remaining: 269ms</span></span>
<span id="cb4-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 44:  learn: 0.1037861    total: 216ms    remaining: 264ms</span></span>
<span id="cb4-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 45:  learn: 0.1031053    total: 220ms    remaining: 259ms</span></span>
<span id="cb4-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 46:  learn: 0.1024645    total: 225ms    remaining: 254ms</span></span>
<span id="cb4-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 47:  learn: 0.1018457    total: 229ms    remaining: 248ms</span></span>
<span id="cb4-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 48:  learn: 0.1012497    total: 232ms    remaining: 242ms</span></span>
<span id="cb4-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 49:  learn: 0.1006996    total: 235ms    remaining: 235ms</span></span>
<span id="cb4-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 50:  learn: 0.1001835    total: 239ms    remaining: 229ms</span></span>
<span id="cb4-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51:  learn: 0.0996695    total: 242ms    remaining: 223ms</span></span>
<span id="cb4-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52:  learn: 0.0991990    total: 246ms    remaining: 218ms</span></span>
<span id="cb4-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53:  learn: 0.0987716    total: 249ms    remaining: 212ms</span></span>
<span id="cb4-59"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54:  learn: 0.0983443    total: 252ms    remaining: 206ms</span></span>
<span id="cb4-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55:  learn: 0.0979411    total: 255ms    remaining: 200ms</span></span>
<span id="cb4-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 56:  learn: 0.0975621    total: 258ms    remaining: 195ms</span></span>
<span id="cb4-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 57:  learn: 0.0972083    total: 261ms    remaining: 189ms</span></span>
<span id="cb4-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 58:  learn: 0.0968639    total: 265ms    remaining: 184ms</span></span>
<span id="cb4-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 59:  learn: 0.0965243    total: 269ms    remaining: 179ms</span></span>
<span id="cb4-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 60:  learn: 0.0961923    total: 272ms    remaining: 174ms</span></span>
<span id="cb4-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 61:  learn: 0.0958829    total: 275ms    remaining: 168ms</span></span>
<span id="cb4-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 62:  learn: 0.0956101    total: 278ms    remaining: 163ms</span></span>
<span id="cb4-68"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 63:  learn: 0.0953473    total: 281ms    remaining: 158ms</span></span>
<span id="cb4-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 64:  learn: 0.0950908    total: 284ms    remaining: 153ms</span></span>
<span id="cb4-70"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 65:  learn: 0.0948327    total: 287ms    remaining: 148ms</span></span>
<span id="cb4-71"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 66:  learn: 0.0946033    total: 290ms    remaining: 143ms</span></span>
<span id="cb4-72"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 67:  learn: 0.0943820    total: 293ms    remaining: 138ms</span></span>
<span id="cb4-73"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 68:  learn: 0.0941723    total: 297ms    remaining: 133ms</span></span>
<span id="cb4-74"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 69:  learn: 0.0939663    total: 300ms    remaining: 129ms</span></span>
<span id="cb4-75"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 70:  learn: 0.0937677    total: 304ms    remaining: 124ms</span></span>
<span id="cb4-76"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 71:  learn: 0.0935819    total: 307ms    remaining: 119ms</span></span>
<span id="cb4-77"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 72:  learn: 0.0933969    total: 310ms    remaining: 115ms</span></span>
<span id="cb4-78"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 73:  learn: 0.0932181    total: 313ms    remaining: 110ms</span></span>
<span id="cb4-79"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 74:  learn: 0.0930514    total: 316ms    remaining: 105ms</span></span>
<span id="cb4-80"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 75:  learn: 0.0928960    total: 320ms    remaining: 101ms</span></span>
<span id="cb4-81"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 76:  learn: 0.0927433    total: 323ms    remaining: 96.4ms</span></span>
<span id="cb4-82"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 77:  learn: 0.0925871    total: 326ms    remaining: 91.9ms</span></span>
<span id="cb4-83"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 78:  learn: 0.0924635    total: 329ms    remaining: 87.6ms</span></span>
<span id="cb4-84"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 79:  learn: 0.0923467    total: 333ms    remaining: 83.1ms</span></span>
<span id="cb4-85"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 80:  learn: 0.0922292    total: 336ms    remaining: 78.7ms</span></span>
<span id="cb4-86"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 81:  learn: 0.0921089    total: 339ms    remaining: 74.3ms</span></span>
<span id="cb4-87"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 82:  learn: 0.0919860    total: 342ms    remaining: 70.1ms</span></span>
<span id="cb4-88"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 83:  learn: 0.0918862    total: 346ms    remaining: 65.9ms</span></span>
<span id="cb4-89"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 84:  learn: 0.0917925    total: 349ms    remaining: 61.6ms</span></span>
<span id="cb4-90"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 85:  learn: 0.0916927    total: 353ms    remaining: 57.4ms</span></span>
<span id="cb4-91"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 86:  learn: 0.0916089    total: 356ms    remaining: 53.1ms</span></span>
<span id="cb4-92"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 87:  learn: 0.0915482    total: 356ms    remaining: 48.6ms</span></span>
<span id="cb4-93"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 88:  learn: 0.0914624    total: 362ms    remaining: 44.7ms</span></span>
<span id="cb4-94"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 89:  learn: 0.0913841    total: 365ms    remaining: 40.5ms</span></span>
<span id="cb4-95"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 90:  learn: 0.0912981    total: 368ms    remaining: 36.4ms</span></span>
<span id="cb4-96"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 91:  learn: 0.0912323    total: 371ms    remaining: 32.3ms</span></span>
<span id="cb4-97"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 92:  learn: 0.0911620    total: 374ms    remaining: 28.2ms</span></span>
<span id="cb4-98"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 93:  learn: 0.0910968    total: 378ms    remaining: 24.1ms</span></span>
<span id="cb4-99"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 94:  learn: 0.0910390    total: 381ms    remaining: 20ms</span></span>
<span id="cb4-100"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 95:  learn: 0.0909742    total: 384ms    remaining: 16ms</span></span>
<span id="cb4-101"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 96:  learn: 0.0909243    total: 387ms    remaining: 12ms</span></span>
<span id="cb4-102"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 97:  learn: 0.0908512    total: 390ms    remaining: 7.95ms</span></span>
<span id="cb4-103"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 98:  learn: 0.0907883    total: 393ms    remaining: 3.97ms</span></span>
<span id="cb4-104"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 99:  learn: 0.0907341    total: 396ms    remaining: 0us</span></span>
<span id="cb4-105"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; &lt;catboost.core.CatBoostRegressor object at 0x7f75bdded3c0&gt;</span></span></code></pre></div>
</details>
</div>
<p>Predecimos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"></span>
<span id="cb5-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Make predictions on the test set</span></span>
<span id="cb5-3">preds <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model.predict(x_test.reshape(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb5-4">preds <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.DataFrame(preds, columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'pred_</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>q<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> q <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> quantiles])</span>
<span id="cb5-5"></span>
<span id="cb5-6">preds.head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>)</span>
<span id="cb5-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    pred_0.1  pred_0.2  pred_0.3  ...  pred_0.7  pred_0.8  pred_0.9</span></span>
<span id="cb5-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 0  3.401601  3.542894  3.619259  ...  3.938859  4.041568  4.165809</span></span>
<span id="cb5-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1  4.150397  4.269908  4.355643  ...  4.701792  4.816983  4.958197</span></span>
<span id="cb5-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2  4.350918  4.476999  4.595515  ...  4.933372  5.017778  5.147716</span></span>
<span id="cb5-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3  2.829240  2.936415  3.034001  ...  3.365471  3.446338  3.577815</span></span>
<span id="cb5-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4  3.456021  3.574613  3.658350  ...  3.966363  4.047775  4.166815</span></span>
<span id="cb5-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5  3.356988  3.505757  3.580486  ...  3.858433  3.961821  4.084200</span></span>
<span id="cb5-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [6 rows x 9 columns]</span></span></code></pre></div>
</details>
</div>
<p>Pintamos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"></span>
<span id="cb6-2">fig, ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>))</span>
<span id="cb6-3">ax.scatter(x_test, y_test)</span>
<span id="cb6-4"></span>
<span id="cb6-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> col <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pred_0.1'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pred_0.5'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pred_0.9'</span>]:</span>
<span id="cb6-6">    ax.scatter(x_test.reshape(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), preds[col], alpha<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.50</span>, label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>col)</span>
<span id="cb6-7"></span>
<span id="cb6-8">ax.legend()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-6-3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/04/23/quantile-catboost/index_files/figure-html/unnamed-chunk-6-3.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Y ya estaría, no parece mala alternativa si uno tiene que hacer este tipo de cosas.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ojalá le sirva a mi amigo Kenet para una cosa que estaba bicheando.</p>
</div>
</div>
<p>Pues poco más. <strong>Feliz domingo</strong></p>
<p>Con R también se puede, como no.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(reticulate) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># para comunicar R y python y poder convertir datos y funciones de uno a otro bidireccionalmente</span></span>
<span id="cb7-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(catboost)</span>
<span id="cb7-3"></span>
<span id="cb7-4">X_train <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.matrix</span>(py<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_train) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># catboost en R espera  una matriz</span></span>
<span id="cb7-5">Y_train <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.matrix</span>(py<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>y_train)</span>
<span id="cb7-6"></span>
<span id="cb7-7"></span>
<span id="cb7-8">X_test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.matrix</span>(py<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_test) </span>
<span id="cb7-9">Y_test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.matrix</span>(py<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>y_test)</span>
<span id="cb7-10"></span>
<span id="cb7-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(X_train) ; <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(Y_train)</span>
<span id="cb7-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;           [,1]</span></span>
<span id="cb7-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1,] 0.6499924</span></span>
<span id="cb7-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [2,] 0.9125034</span></span>
<span id="cb7-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [3,] 0.4820761</span></span>
<span id="cb7-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [4,] 0.2060426</span></span>
<span id="cb7-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [5,] 0.5411845</span></span>
<span id="cb7-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [6,] 0.1779657</span></span>
<span id="cb7-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          [,1]</span></span>
<span id="cb7-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1,] 4.165367</span></span>
<span id="cb7-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [2,] 5.018479</span></span>
<span id="cb7-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [3,] 4.146041</span></span>
<span id="cb7-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [4,] 2.942043</span></span>
<span id="cb7-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [5,] 4.287877</span></span>
<span id="cb7-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [6,] 3.589826</span></span>
<span id="cb7-26"></span>
<span id="cb7-27">(quantiles_str <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  py<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>quantile_str)</span>
<span id="cb7-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9"</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">train_pool <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">catboost.load_pool</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> X_train, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> Y_train)</span>
<span id="cb8-2">test_pool <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">catboost.load_pool</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> X_test)</span>
<span id="cb8-3">loss_function <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MultiQuantile:alpha="</span>, quantiles_str)</span>
<span id="cb8-4"></span>
<span id="cb8-5">fit_params <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">iterations =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>,</span>
<span id="cb8-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">loss_function=</span> loss_function</span>
<span id="cb8-8">    )</span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"></span>
<span id="cb9-2">model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">catboost.train</span>(train_pool, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">params=</span>fit_params)</span>
<span id="cb9-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 0:   learn: 0.1977907    total: 50.6ms   remaining: 5s</span></span>
<span id="cb9-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1:   learn: 0.1934878    total: 56.9ms   remaining: 2.79s</span></span>
<span id="cb9-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2:   learn: 0.1891389    total: 61.3ms   remaining: 1.98s</span></span>
<span id="cb9-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3:   learn: 0.1849242    total: 66.1ms   remaining: 1.58s</span></span>
<span id="cb9-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4:   learn: 0.1808818    total: 71ms remaining: 1.35s</span></span>
<span id="cb9-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5:   learn: 0.1769520    total: 74.5ms   remaining: 1.17s</span></span>
<span id="cb9-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6:   learn: 0.1732251    total: 78.2ms   remaining: 1.04s</span></span>
<span id="cb9-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 7:   learn: 0.1696774    total: 83ms remaining: 955ms</span></span>
<span id="cb9-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 8:   learn: 0.1661482    total: 86.6ms   remaining: 876ms</span></span>
<span id="cb9-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 9:   learn: 0.1628541    total: 89.7ms   remaining: 807ms</span></span>
<span id="cb9-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10:  learn: 0.1596378    total: 93.1ms   remaining: 753ms</span></span>
<span id="cb9-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 11:  learn: 0.1565479    total: 97.3ms   remaining: 714ms</span></span>
<span id="cb9-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 12:  learn: 0.1536016    total: 102ms    remaining: 683ms</span></span>
<span id="cb9-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 13:  learn: 0.1507692    total: 105ms    remaining: 647ms</span></span>
<span id="cb9-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 14:  learn: 0.1480845    total: 109ms    remaining: 615ms</span></span>
<span id="cb9-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 15:  learn: 0.1454840    total: 113ms    remaining: 592ms</span></span>
<span id="cb9-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 16:  learn: 0.1429863    total: 118ms    remaining: 576ms</span></span>
<span id="cb9-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 17:  learn: 0.1407059    total: 122ms    remaining: 557ms</span></span>
<span id="cb9-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 18:  learn: 0.1383697    total: 126ms    remaining: 536ms</span></span>
<span id="cb9-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 19:  learn: 0.1361779    total: 129ms    remaining: 518ms</span></span>
<span id="cb9-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 20:  learn: 0.1340707    total: 133ms    remaining: 500ms</span></span>
<span id="cb9-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 21:  learn: 0.1320342    total: 137ms    remaining: 485ms</span></span>
<span id="cb9-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 22:  learn: 0.1300775    total: 140ms    remaining: 468ms</span></span>
<span id="cb9-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 23:  learn: 0.1282447    total: 144ms    remaining: 455ms</span></span>
<span id="cb9-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 24:  learn: 0.1264588    total: 147ms    remaining: 441ms</span></span>
<span id="cb9-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 25:  learn: 0.1247594    total: 151ms    remaining: 429ms</span></span>
<span id="cb9-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 26:  learn: 0.1232137    total: 154ms    remaining: 416ms</span></span>
<span id="cb9-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 27:  learn: 0.1216563    total: 157ms    remaining: 404ms</span></span>
<span id="cb9-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 28:  learn: 0.1202034    total: 161ms    remaining: 394ms</span></span>
<span id="cb9-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 29:  learn: 0.1187735    total: 164ms    remaining: 383ms</span></span>
<span id="cb9-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 30:  learn: 0.1174263    total: 169ms    remaining: 375ms</span></span>
<span id="cb9-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 31:  learn: 0.1161250    total: 172ms    remaining: 365ms</span></span>
<span id="cb9-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 32:  learn: 0.1148583    total: 175ms    remaining: 356ms</span></span>
<span id="cb9-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 33:  learn: 0.1136688    total: 180ms    remaining: 349ms</span></span>
<span id="cb9-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 34:  learn: 0.1125292    total: 185ms    remaining: 343ms</span></span>
<span id="cb9-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 35:  learn: 0.1114357    total: 188ms    remaining: 334ms</span></span>
<span id="cb9-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 36:  learn: 0.1104088    total: 195ms    remaining: 332ms</span></span>
<span id="cb9-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 37:  learn: 0.1094203    total: 199ms    remaining: 325ms</span></span>
<span id="cb9-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 38:  learn: 0.1085302    total: 202ms    remaining: 316ms</span></span>
<span id="cb9-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 39:  learn: 0.1076702    total: 205ms    remaining: 308ms</span></span>
<span id="cb9-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 40:  learn: 0.1068348    total: 212ms    remaining: 305ms</span></span>
<span id="cb9-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 41:  learn: 0.1060263    total: 216ms    remaining: 298ms</span></span>
<span id="cb9-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 42:  learn: 0.1052530    total: 219ms    remaining: 290ms</span></span>
<span id="cb9-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 43:  learn: 0.1045115    total: 223ms    remaining: 284ms</span></span>
<span id="cb9-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 44:  learn: 0.1037861    total: 228ms    remaining: 278ms</span></span>
<span id="cb9-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 45:  learn: 0.1031053    total: 232ms    remaining: 272ms</span></span>
<span id="cb9-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 46:  learn: 0.1024645    total: 235ms    remaining: 265ms</span></span>
<span id="cb9-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 47:  learn: 0.1018457    total: 242ms    remaining: 262ms</span></span>
<span id="cb9-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 48:  learn: 0.1012497    total: 246ms    remaining: 256ms</span></span>
<span id="cb9-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 49:  learn: 0.1006996    total: 250ms    remaining: 250ms</span></span>
<span id="cb9-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 50:  learn: 0.1001835    total: 253ms    remaining: 243ms</span></span>
<span id="cb9-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51:  learn: 0.0996695    total: 257ms    remaining: 237ms</span></span>
<span id="cb9-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52:  learn: 0.0991990    total: 261ms    remaining: 232ms</span></span>
<span id="cb9-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53:  learn: 0.0987716    total: 265ms    remaining: 225ms</span></span>
<span id="cb9-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54:  learn: 0.0983443    total: 268ms    remaining: 219ms</span></span>
<span id="cb9-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55:  learn: 0.0979411    total: 272ms    remaining: 214ms</span></span>
<span id="cb9-59"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 56:  learn: 0.0975621    total: 275ms    remaining: 208ms</span></span>
<span id="cb9-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 57:  learn: 0.0972083    total: 279ms    remaining: 202ms</span></span>
<span id="cb9-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 58:  learn: 0.0968639    total: 283ms    remaining: 197ms</span></span>
<span id="cb9-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 59:  learn: 0.0965243    total: 287ms    remaining: 191ms</span></span>
<span id="cb9-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 60:  learn: 0.0961923    total: 292ms    remaining: 187ms</span></span>
<span id="cb9-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 61:  learn: 0.0958829    total: 298ms    remaining: 182ms</span></span>
<span id="cb9-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 62:  learn: 0.0956101    total: 304ms    remaining: 178ms</span></span>
<span id="cb9-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 63:  learn: 0.0953473    total: 308ms    remaining: 173ms</span></span>
<span id="cb9-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 64:  learn: 0.0950908    total: 313ms    remaining: 168ms</span></span>
<span id="cb9-68"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 65:  learn: 0.0948327    total: 317ms    remaining: 163ms</span></span>
<span id="cb9-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 66:  learn: 0.0946033    total: 324ms    remaining: 160ms</span></span>
<span id="cb9-70"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 67:  learn: 0.0943820    total: 329ms    remaining: 155ms</span></span>
<span id="cb9-71"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 68:  learn: 0.0941723    total: 332ms    remaining: 149ms</span></span>
<span id="cb9-72"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 69:  learn: 0.0939663    total: 338ms    remaining: 145ms</span></span>
<span id="cb9-73"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 70:  learn: 0.0937677    total: 342ms    remaining: 140ms</span></span>
<span id="cb9-74"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 71:  learn: 0.0935819    total: 346ms    remaining: 134ms</span></span>
<span id="cb9-75"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 72:  learn: 0.0933969    total: 349ms    remaining: 129ms</span></span>
<span id="cb9-76"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 73:  learn: 0.0932181    total: 353ms    remaining: 124ms</span></span>
<span id="cb9-77"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 74:  learn: 0.0930514    total: 358ms    remaining: 119ms</span></span>
<span id="cb9-78"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 75:  learn: 0.0928960    total: 361ms    remaining: 114ms</span></span>
<span id="cb9-79"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 76:  learn: 0.0927433    total: 364ms    remaining: 109ms</span></span>
<span id="cb9-80"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 77:  learn: 0.0925871    total: 369ms    remaining: 104ms</span></span>
<span id="cb9-81"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 78:  learn: 0.0924635    total: 374ms    remaining: 99.3ms</span></span>
<span id="cb9-82"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 79:  learn: 0.0923467    total: 377ms    remaining: 94.3ms</span></span>
<span id="cb9-83"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 80:  learn: 0.0922292    total: 380ms    remaining: 89.2ms</span></span>
<span id="cb9-84"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 81:  learn: 0.0921089    total: 386ms    remaining: 84.8ms</span></span>
<span id="cb9-85"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 82:  learn: 0.0919860    total: 390ms    remaining: 79.9ms</span></span>
<span id="cb9-86"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 83:  learn: 0.0918862    total: 394ms    remaining: 75ms</span></span>
<span id="cb9-87"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 84:  learn: 0.0917925    total: 398ms    remaining: 70.2ms</span></span>
<span id="cb9-88"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 85:  learn: 0.0916927    total: 404ms    remaining: 65.8ms</span></span>
<span id="cb9-89"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 86:  learn: 0.0916089    total: 408ms    remaining: 61ms</span></span>
<span id="cb9-90"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 87:  learn: 0.0915482    total: 409ms    remaining: 55.8ms</span></span>
<span id="cb9-91"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 88:  learn: 0.0914624    total: 412ms    remaining: 50.9ms</span></span>
<span id="cb9-92"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 89:  learn: 0.0913841    total: 416ms    remaining: 46.2ms</span></span>
<span id="cb9-93"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 90:  learn: 0.0912981    total: 420ms    remaining: 41.6ms</span></span>
<span id="cb9-94"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 91:  learn: 0.0912323    total: 424ms    remaining: 36.9ms</span></span>
<span id="cb9-95"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 92:  learn: 0.0911620    total: 427ms    remaining: 32.2ms</span></span>
<span id="cb9-96"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 93:  learn: 0.0910968    total: 431ms    remaining: 27.5ms</span></span>
<span id="cb9-97"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 94:  learn: 0.0910390    total: 437ms    remaining: 23ms</span></span>
<span id="cb9-98"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 95:  learn: 0.0909742    total: 441ms    remaining: 18.4ms</span></span>
<span id="cb9-99"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 96:  learn: 0.0909243    total: 444ms    remaining: 13.7ms</span></span>
<span id="cb9-100"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 97:  learn: 0.0908512    total: 449ms    remaining: 9.17ms</span></span>
<span id="cb9-101"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 98:  learn: 0.0907883    total: 454ms    remaining: 4.58ms</span></span>
<span id="cb9-102"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 99:  learn: 0.0907341    total: 457ms    remaining: 0us</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">predicciones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">catboost.predict</span>(model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pool =</span> test_pool)</span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colnames</span>(predicciones) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"quantile_"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>) </span>
<span id="cb11-2"></span>
<span id="cb11-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(predicciones)</span>
<span id="cb11-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      quantile_1 quantile_2 quantile_3 quantile_4 quantile_5 quantile_6</span></span>
<span id="cb11-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1,]   3.401601   3.542894   3.619259   3.716297   3.794767   3.868639</span></span>
<span id="cb11-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [2,]   4.150397   4.269908   4.355643   4.431774   4.502443   4.586961</span></span>
<span id="cb11-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [3,]   4.350918   4.476999   4.595515   4.651673   4.713752   4.815297</span></span>
<span id="cb11-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [4,]   2.829240   2.936415   3.034001   3.123039   3.208654   3.292293</span></span>
<span id="cb11-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [5,]   3.456021   3.574613   3.658350   3.741498   3.824226   3.897069</span></span>
<span id="cb11-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [6,]   3.356988   3.505757   3.580486   3.651319   3.720015   3.791630</span></span>
<span id="cb11-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      quantile_7 quantile_8 quantile_9</span></span>
<span id="cb11-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1,]   3.938859   4.041568   4.165809</span></span>
<span id="cb11-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [2,]   4.701792   4.816983   4.958197</span></span>
<span id="cb11-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [3,]   4.933372   5.017778   5.147716</span></span>
<span id="cb11-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [4,]   3.365471   3.446338   3.577815</span></span>
<span id="cb11-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [5,]   3.966363   4.047775   4.166815</span></span>
<span id="cb11-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [6,]   3.858433   3.961821   4.084200</span></span></code></pre></div>
</details>
</div>


</section>

 ]]></description>
  <category>Estadística</category>
  <category>machine learning</category>
  <category>R</category>
  <category>2023</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/04/23/quantile-catboost/index.html</guid>
  <pubDate>Sat, 22 Apr 2023 22:00:00 GMT</pubDate>
  <media:content url="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/04/23/quantile-catboost" medium="image"/>
</item>
<item>
  <title>Conformal prediction. Estilo compadre</title>
  <dc:creator>José Luis Cañadas Reche</dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/03/26/Conformal_estilo_compadre/index.html</link>
  <description><![CDATA[ 



<section id="intro" class="level2">
<h2 class="anchored" data-anchor-id="intro">Intro</h2>
<p>El jueves pasado asistí al más que recomendable meetup de <a href="https://www.meetup.com/es-ES/pydata-madrid/events/292228851/">PyData Madrid</a>, que cuenta entre sus organizadores con el gran <a href="https://www.meetup.com/es-ES/pydata-madrid/?_locale=es-ES">Juan Luis Cano Rodríguez</a>, antiguo compañero mío de curro y tocayo de iniciales.</p>
<p>El caso es que en una de las charlas, <a href="https://www.linkedin.com/in/ignacio-peletier/">Ignacio Peletier</a>, mencionó de pasada lo del “Conformal Prediction”. Y siendo que Ignacio es un gran científico de datos, y que hacía unos meses que había tenido varias charlas con <a href="https://www.datanalytics.com/">Carlos</a> sobre el particular, pues he decidido ver un poco más en detalle de qué iba el asunto .</p>
</section>
<section id="recursos" class="level2">
<h2 class="anchored" data-anchor-id="recursos">Recursos</h2>
<p>Un excelente sitio para empezar a bichear con este tema es el Readme de este <a href="https://github.com/valeman/awesome-conformal-prediction">repo</a>, dónde han ido recopilando enlaces a libros, posts, papers y código relativo a lo de conformal prediction.</p>
<p>En particular, uno de los recursos que me ha gustado es este <a href="https://mindfulmodeler.substack.com/p/e-mail-course-on-conformal-prediction">minicurso</a> de Christoph Molnar.</p>
<p>Otro recurso útil es este <a href="https://www.datanalytics.com/2023/03/02/prediccion-conforme/">post</a> de Carlos, dónde se esboza un poco en qué consiste esto de la predicción conforme y en por qué no es algo tan novedoso como se cree.</p>
</section>
<section id="experimentando" class="level2">
<h2 class="anchored" data-anchor-id="experimentando">Experimentando</h2>
<p>La predicción conforme se puede aplicar tanto a modelos de regresión de clasificación. Su objetivo es <em>simplemente</em> medir la incertidumbre de una predicción dada.</p>
<p>En el caso de regresión no tiene mucho misterio:</p>
<ul>
<li><p>Se entrena un modelo usando un conjunto de datos de <em>entrenamiento</em>.</p></li>
<li><p>Se mide el error en un conjunto de datos de <em>validación</em>, <em>calibración</em>, utilizando la norma L1, es decir <img src="https://latex.codecogs.com/png.latex?%5Cmid%20y%20-%20%5Chat%7By%7D%5Cmid"></p></li>
<li><p>Se elige una medida de dispersión del error, por ejemplo el cuantil <img src="https://latex.codecogs.com/png.latex?(1-%20%5Calpha)%20=%200.95"> de los errores anteriores.</p></li>
<li><p>Para una nueva predicción se da su intervalo como <img src="https://latex.codecogs.com/png.latex?(%5Chat%7By%7D%20-%20q_%7B1-%5Calpha%7D,%20%5Chat%7By%7D%20+%20q_%7B1-%5Calpha%7D)"></p></li>
</ul>
<p>En el caso de clasificación la cosa es más divertida. Puesto que lo que se quiere obtener es un conjunto de etiquetas probables. Tipo {A} {A, B} {B, C}</p>
<p>En este caso según he leído <a href="https://mindfulmodeler.substack.com/p/week-1-getting-started-with-conformal">aquí</a> el algoritmo sería</p>
<ul>
<li><p>Se entrena un modelo usando un conjunto de datos de <em>entrenamiento</em>.</p></li>
<li><p>Se mide el error en un conjunto de datos de <em>validación</em>, <em>calibración</em>, viendo para cada observación el valor que el modelo le ha dado para la predicción de la clase verdadera. Es un conjunto de validación , sabemos cuál es la verdad. Y se calcula el error como <img src="https://latex.codecogs.com/png.latex?1-%20p_%7Bi%7D"> siendo <img src="https://latex.codecogs.com/png.latex?p_i">, la probabilidad predicha para la clase verdadera</p></li>
<li><p>Se calcula el cuantil de orden <img src="https://latex.codecogs.com/png.latex?1-%5Calpha"> de esos <em>errores</em> y se guarda. Se entiende que el modelo está bien calibrado y que el conjunto de validación y que los <em>scores</em> que da el modelo se pueden asumir como probabilidades</p></li>
<li><p>Para una nueva predicción se tendrá una <img src="https://latex.codecogs.com/png.latex?p_i"> para cada clase. Se calcula <img src="https://latex.codecogs.com/png.latex?1-p_i"> para cada clase y se considera que esa clase forma parte del <em>prediction set</em> si ese valor es menor o igual que el valor del cuantil anterior.</p></li>
</ul>
<p>Pues vamos a ver como se haría con R en estilo compadre, y puede que con alguna pequeña modificación por mi parte.</p>
<section id="ejemplo" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo">Ejemplo</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(MASS)</span></code></pre></div>
</details>
</div>
<p>Vamos a usar el conjunto de datos <code>housing</code> <a href="housing_help.png" class="lightbox" title="Help housing" data-gallery="quarto-lightbox-gallery-1"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/03/26/Conformal_estilo_compadre/housing_help.png" class="img-fluid" alt="Help housing"></a></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"></span>
<span id="cb2-2">skimr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">skim</span>(housing)</span></code></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">housing</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">72</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 15%">
<col style="width: 11%">
<col style="width: 15%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 38%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Sat</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Low: 24, Med: 24, Hig: 24</td>
</tr>
<tr class="even">
<td style="text-align: left;">Infl</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Low: 24, Med: 24, Hig: 24</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Type</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Tow: 18, Apa: 18, Atr: 18, Ter: 18</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cont</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Low: 36, Hig: 36</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 17%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Freq</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">23.35</td>
<td style="text-align: right;">17.67</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">19.5</td>
<td style="text-align: right;">31.75</td>
<td style="text-align: right;">86</td>
<td style="text-align: left;">▇▅▂▁▁</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Y vamos a justar un modelito tonto usando regresión logística ordinal, sobre los 40 primeros datos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"></span>
<span id="cb3-2">house.plr <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">polr</span>(Sat <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> Infl <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> Type <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> Cont, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">weights =</span> Freq, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> housing[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>,])</span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(house.plr, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"probs"</span>))</span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;         Low    Medium      High</span></span>
<span id="cb3-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 0.3639420 0.2575531 0.3785049</span></span>
<span id="cb3-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 0.3639420 0.2575531 0.3785049</span></span>
<span id="cb3-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 0.3639420 0.2575531 0.3785049</span></span>
<span id="cb3-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4 0.3263764 0.2552793 0.4183443</span></span>
<span id="cb3-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5 0.3263764 0.2552793 0.4183443</span></span>
<span id="cb3-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6 0.3263764 0.2552793 0.4183443</span></span></code></pre></div>
</details>
</div>
<p>Guardamos las predicciones para el conjunto de validación , que va a ser las filas de la 41 a la 55, junto con el valor de <code>Sat</code> verdadero</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"></span>
<span id="cb4-2">predictions <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(house.plr, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"probs"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">newdata =</span> housing[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">41</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">55</span>,]))</span>
<span id="cb4-3"></span>
<span id="cb4-4">tt <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(predictions, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">True_class=</span>housing<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Sat[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">41</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">55</span>])</span>
<span id="cb4-5"></span>
<span id="cb4-6">tt</span>
<span id="cb4-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          Low    Medium      High True_class</span></span>
<span id="cb4-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 41 0.3055662 0.2524868 0.4419471     Medium</span></span>
<span id="cb4-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 42 0.3055662 0.2524868 0.4419471       High</span></span>
<span id="cb4-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 43 0.1595073 0.1930758 0.6474169        Low</span></span>
<span id="cb4-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 44 0.1595073 0.1930758 0.6474169     Medium</span></span>
<span id="cb4-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 45 0.1595073 0.1930758 0.6474169       High</span></span>
<span id="cb4-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 46 0.4671694 0.2484190 0.2844116        Low</span></span>
<span id="cb4-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 47 0.4671694 0.2484190 0.2844116     Medium</span></span>
<span id="cb4-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 48 0.4671694 0.2484190 0.2844116       High</span></span>
<span id="cb4-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 49 0.4260865 0.2544760 0.3194375        Low</span></span>
<span id="cb4-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 50 0.4260865 0.2544760 0.3194375     Medium</span></span>
<span id="cb4-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51 0.4260865 0.2544760 0.3194375       High</span></span>
<span id="cb4-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52 0.2425400 0.2363201 0.5211399        Low</span></span>
<span id="cb4-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53 0.2425400 0.2363201 0.5211399     Medium</span></span>
<span id="cb4-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54 0.2425400 0.2363201 0.5211399       High</span></span>
<span id="cb4-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55 0.4014928 0.2566312 0.3418760        Low</span></span></code></pre></div>
</details>
</div>
<p>Ahora, para la primera fila sería hacer (1-0.2524), puesto que la clase real es “Medium” y para la segunda sería (1-0.44), puesto que la clase real es “High”. No estoy muy inspirado hoy y no he conseguido una forma elegante de hacerlo en R, y ChatGpt no me ha servido de mucha ayuda, seguramente porque aún no soy muy ducho preguntándole.</p>
<p>Así que he tirado iterando para cada fila con un map y quedándode con el valor predicho de la columna cuyo nombre coincida con el valor en <code>True_class</code></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"></span>
<span id="cb5-2">tt<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>prob_true_class <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_dbl</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(tt), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.f =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(i) </span>
<span id="cb5-3">    tt[i, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colnames</span>(tt) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> tt<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>True_class[i]])</span>
<span id="cb5-4"></span>
<span id="cb5-5">tt<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resid <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>tt<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>prob_true_class</span>
<span id="cb5-6"></span>
<span id="cb5-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(tt)</span>
<span id="cb5-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          Low    Medium      High True_class prob_true_class     resid</span></span>
<span id="cb5-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 41 0.3055662 0.2524868 0.4419471     Medium       0.2524868 0.7475132</span></span>
<span id="cb5-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 42 0.3055662 0.2524868 0.4419471       High       0.4419471 0.5580529</span></span>
<span id="cb5-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 43 0.1595073 0.1930758 0.6474169        Low       0.1595073 0.8404927</span></span>
<span id="cb5-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 44 0.1595073 0.1930758 0.6474169     Medium       0.1930758 0.8069242</span></span>
<span id="cb5-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 45 0.1595073 0.1930758 0.6474169       High       0.6474169 0.3525831</span></span>
<span id="cb5-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 46 0.4671694 0.2484190 0.2844116        Low       0.4671694 0.5328306</span></span></code></pre></div>
</details>
</div>
<p>Definimos un <img src="https://latex.codecogs.com/png.latex?%5Calpha%20=%200.3"> y calculamos el cuantil 70 .</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">qhat =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">quantile</span>(tt<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resid, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>))</span>
<span id="cb6-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       70% </span></span>
<span id="cb6-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 0.7507675</span></span></code></pre></div>
</details>
</div>
<p>Y ya estamos listos para hacer la <em>predicción conforme</em> para nuevos datos.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># predecimos de la fila 51 a la 70 </span></span>
<span id="cb7-2">predicciones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(house.plr, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">newdata =</span> housing[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">51</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span>,], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type  =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"probs"</span>)</span>
<span id="cb7-3"></span>
<span id="cb7-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(predicciones)</span>
<span id="cb7-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          Low    Medium      High</span></span>
<span id="cb7-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51 0.4260865 0.2544760 0.3194375</span></span>
<span id="cb7-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52 0.2425400 0.2363201 0.5211399</span></span>
<span id="cb7-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53 0.2425400 0.2363201 0.5211399</span></span>
<span id="cb7-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54 0.2425400 0.2363201 0.5211399</span></span>
<span id="cb7-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55 0.4014928 0.2566312 0.3418760</span></span>
<span id="cb7-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 56 0.4014928 0.2566312 0.3418760</span></span></code></pre></div>
</details>
</div>
<p>Nos creamos un data.frame que indique si el valor de 1 - predicciones es menor o igual que el cuantil elegido</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">set <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> predicciones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> qhat)</span>
<span id="cb8-2"></span>
<span id="cb8-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(set)</span>
<span id="cb8-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      Low Medium High</span></span>
<span id="cb8-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51  TRUE   TRUE TRUE</span></span>
<span id="cb8-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52 FALSE  FALSE TRUE</span></span>
<span id="cb8-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53 FALSE  FALSE TRUE</span></span>
<span id="cb8-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54 FALSE  FALSE TRUE</span></span>
<span id="cb8-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55  TRUE   TRUE TRUE</span></span>
<span id="cb8-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 56  TRUE   TRUE TRUE</span></span></code></pre></div>
</details>
</div>
<p>Al igual que antes, utilizo un map para obtener el conjunto de etiquetas, para la primera fila serían todas, para la segunda sería {“Medium”, “High”}</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"></span>
<span id="cb9-2">set<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>conformal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_chr</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(set), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.f=</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(i) {</span>
<span id="cb9-3">     set_list <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colnames</span>(set)[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(set[i,])]</span>
<span id="cb9-4">     <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(set_list, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">","</span>)</span>
<span id="cb9-5">     })</span>
<span id="cb9-6"></span>
<span id="cb9-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(set)</span>
<span id="cb9-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      Low Medium High       conformal</span></span>
<span id="cb9-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51  TRUE   TRUE TRUE Low,Medium,High</span></span>
<span id="cb9-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52 FALSE  FALSE TRUE            High</span></span>
<span id="cb9-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53 FALSE  FALSE TRUE            High</span></span>
<span id="cb9-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54 FALSE  FALSE TRUE            High</span></span>
<span id="cb9-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55  TRUE   TRUE TRUE Low,Medium,High</span></span>
<span id="cb9-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 56  TRUE   TRUE TRUE Low,Medium,High</span></span></code></pre></div>
</details>
</div>
<p>Se lo pego al dataset original de test (filas 51 a 70), junto con las predicciones y la clase verdadera.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"></span>
<span id="cb10-2">set_fin <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>( <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">True_class =</span> housing<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Sat[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">51</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span>], <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>(predicciones),</span>
<span id="cb10-3">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">set_conformal =</span>set<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>conformal)</span>
<span id="cb10-4"></span>
<span id="cb10-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(set_fin)</span>
<span id="cb10-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    True_class       Low    Medium      High   set_conformal</span></span>
<span id="cb10-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51       High 0.4260865 0.2544760 0.3194375 Low,Medium,High</span></span>
<span id="cb10-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52        Low 0.2425400 0.2363201 0.5211399            High</span></span>
<span id="cb10-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53     Medium 0.2425400 0.2363201 0.5211399            High</span></span>
<span id="cb10-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54       High 0.2425400 0.2363201 0.5211399            High</span></span>
<span id="cb10-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55        Low 0.4014928 0.2566312 0.3418760 Low,Medium,High</span></span>
<span id="cb10-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 56     Medium 0.4014928 0.2566312 0.3418760 Low,Medium,High</span></span></code></pre></div>
</details>
</div>
<p>Y ya estaría.</p>
<p>Una cosa que se suele calcular es la cobertura de cada clase, es decir, la proporción de veces que cada clase está dentro del conjunto.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">set_fin <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> set_fin <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb11-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb11-3">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">class_in_set =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map2_lgl</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.x =</span> True_class,</span>
<span id="cb11-4">                               <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.y =</span> set_conformal , </span>
<span id="cb11-5">                               <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> .x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_split</span>(.y,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">","</span>)))</span>
<span id="cb11-6">    )</span>
<span id="cb11-7"></span>
<span id="cb11-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(set_fin)</span>
<span id="cb11-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    True_class       Low    Medium      High   set_conformal class_in_set</span></span>
<span id="cb11-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51       High 0.4260865 0.2544760 0.3194375 Low,Medium,High         TRUE</span></span>
<span id="cb11-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52        Low 0.2425400 0.2363201 0.5211399            High        FALSE</span></span>
<span id="cb11-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53     Medium 0.2425400 0.2363201 0.5211399            High        FALSE</span></span>
<span id="cb11-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54       High 0.2425400 0.2363201 0.5211399            High         TRUE</span></span>
<span id="cb11-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55        Low 0.4014928 0.2566312 0.3418760 Low,Medium,High         TRUE</span></span>
<span id="cb11-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 56     Medium 0.4014928 0.2566312 0.3418760 Low,Medium,High         TRUE</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">set_fin <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb12-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(True_class) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb12-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cov =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(class_in_set))</span>
<span id="cb12-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 3 × 2</span></span>
<span id="cb12-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   True_class   cov</span></span>
<span id="cb12-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;ord&gt;      &lt;dbl&gt;</span></span>
<span id="cb12-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 Low        0.571</span></span>
<span id="cb12-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 Medium     0.5  </span></span>
<span id="cb12-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 High       1</span></span></code></pre></div>
</details>
</div>
</section>
<section id="modificación-1." class="level3">
<h3 class="anchored" data-anchor-id="modificación-1.">Modificación 1.</h3>
<p>No me convence lo de tener un sólo cuantil, común a todas las clases, ¿no sería mejor tener una medida de cómo se distribuyen los errores para cada una de las clases?</p>
<p>Usamos el conjunto de <em>validación</em> dónde tenemos el <img src="https://latex.codecogs.com/png.latex?1-p_i"> que nos dice en cuánto se ha equivocado el modelo en predecir la clase real</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(tt)</span>
<span id="cb13-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          Low    Medium      High True_class prob_true_class     resid</span></span>
<span id="cb13-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 41 0.3055662 0.2524868 0.4419471     Medium       0.2524868 0.7475132</span></span>
<span id="cb13-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 42 0.3055662 0.2524868 0.4419471       High       0.4419471 0.5580529</span></span>
<span id="cb13-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 43 0.1595073 0.1930758 0.6474169        Low       0.1595073 0.8404927</span></span>
<span id="cb13-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 44 0.1595073 0.1930758 0.6474169     Medium       0.1930758 0.8069242</span></span>
<span id="cb13-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 45 0.1595073 0.1930758 0.6474169       High       0.6474169 0.3525831</span></span>
<span id="cb13-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 46 0.4671694 0.2484190 0.2844116        Low       0.4671694 0.5328306</span></span></code></pre></div>
</details>
</div>
<p>Calculamos el quantil 70 para cada clase, y así vemos que varía por clase</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">(qhat_by_class <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb14-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(True_class) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb14-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">qhat =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">quantile</span>(resid, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb14-4">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_wider</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_from =</span> True_class, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_from =</span> qhat))</span>
<span id="cb14-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb14-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     Low Medium  High</span></span>
<span id="cb14-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb14-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 0.726  0.761 0.656</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">predicciones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(house.plr, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">newdata =</span> housing[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">51</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span>,], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type  =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"probs"</span>)</span>
<span id="cb15-2">complementarios <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>predicciones</span>
<span id="cb15-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(complementarios)</span>
<span id="cb15-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          Low    Medium      High</span></span>
<span id="cb15-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51 0.5739135 0.7455240 0.6805625</span></span>
<span id="cb15-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52 0.7574600 0.7636799 0.4788601</span></span>
<span id="cb15-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53 0.7574600 0.7636799 0.4788601</span></span>
<span id="cb15-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54 0.7574600 0.7636799 0.4788601</span></span>
<span id="cb15-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55 0.5985072 0.7433688 0.6581240</span></span>
<span id="cb15-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 56 0.5985072 0.7433688 0.6581240</span></span></code></pre></div>
</details>
</div>
<p>Y vemos si cada <img src="https://latex.codecogs.com/png.latex?1-p_i"> es menor o igual que el cuantil correspondiente de cada clase</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">set_adjust <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Low =</span> complementarios[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> qhat_by_class<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Low,</span>
<span id="cb16-2">                        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Medium =</span> complementarios[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> qhat_by_class<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Medium,</span>
<span id="cb16-3">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">High =</span> complementarios[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> qhat_by_class<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>High )</span>
<span id="cb16-4"></span>
<span id="cb16-5"></span>
<span id="cb16-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(set_adjust)</span>
<span id="cb16-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      Low Medium  High</span></span>
<span id="cb16-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51  TRUE   TRUE FALSE</span></span>
<span id="cb16-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52 FALSE  FALSE  TRUE</span></span>
<span id="cb16-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53 FALSE  FALSE  TRUE</span></span>
<span id="cb16-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54 FALSE  FALSE  TRUE</span></span>
<span id="cb16-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55  TRUE   TRUE FALSE</span></span>
<span id="cb16-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 56  TRUE   TRUE FALSE</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">set_adjust<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>conformal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_chr</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(set_adjust), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.f=</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(i) {</span>
<span id="cb17-2">    set_list <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colnames</span>(set_adjust)[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(set_adjust[i,])]</span>
<span id="cb17-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(set_list, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">","</span>)</span>
<span id="cb17-4">})</span>
<span id="cb17-5"></span>
<span id="cb17-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(set_adjust)</span>
<span id="cb17-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      Low Medium  High  conformal</span></span>
<span id="cb17-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51  TRUE   TRUE FALSE Low,Medium</span></span>
<span id="cb17-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52 FALSE  FALSE  TRUE       High</span></span>
<span id="cb17-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53 FALSE  FALSE  TRUE       High</span></span>
<span id="cb17-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54 FALSE  FALSE  TRUE       High</span></span>
<span id="cb17-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55  TRUE   TRUE FALSE Low,Medium</span></span>
<span id="cb17-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 56  TRUE   TRUE FALSE Low,Medium</span></span></code></pre></div>
</details>
</div>
<p>Como antes, nos quedamos con la clase de verdad, la predicción en probabilidad de cada clase y la predicción conforme</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">set_adjust_fin <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>( <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">True_class =</span> housing<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Sat[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">51</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span>], <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(house.plr, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">newdata =</span> housing[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">51</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span>,],<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"probs"</span>)),</span>
<span id="cb18-2">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">set_conformal =</span>set_adjust<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>conformal)</span>
<span id="cb18-3"></span>
<span id="cb18-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(set_adjust_fin)</span>
<span id="cb18-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    True_class       Low    Medium      High set_conformal</span></span>
<span id="cb18-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51       High 0.4260865 0.2544760 0.3194375    Low,Medium</span></span>
<span id="cb18-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52        Low 0.2425400 0.2363201 0.5211399          High</span></span>
<span id="cb18-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53     Medium 0.2425400 0.2363201 0.5211399          High</span></span>
<span id="cb18-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54       High 0.2425400 0.2363201 0.5211399          High</span></span>
<span id="cb18-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55        Low 0.4014928 0.2566312 0.3418760    Low,Medium</span></span>
<span id="cb18-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 56     Medium 0.4014928 0.2566312 0.3418760    Low,Medium</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">set_adjust_fin <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> set_adjust_fin <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb19-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb19-3">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">class_in_set =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map2_lgl</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.x =</span> True_class,</span>
<span id="cb19-4">                                <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.y =</span> set_conformal , </span>
<span id="cb19-5">                                <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> .x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_split</span>(.y,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">","</span>)))</span>
<span id="cb19-6">    )</span>
<span id="cb19-7"></span>
<span id="cb19-8">set_adjust_fin</span>
<span id="cb19-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    True_class       Low    Medium      High   set_conformal class_in_set</span></span>
<span id="cb19-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51       High 0.4260865 0.2544760 0.3194375      Low,Medium        FALSE</span></span>
<span id="cb19-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52        Low 0.2425400 0.2363201 0.5211399            High        FALSE</span></span>
<span id="cb19-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53     Medium 0.2425400 0.2363201 0.5211399            High        FALSE</span></span>
<span id="cb19-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54       High 0.2425400 0.2363201 0.5211399            High         TRUE</span></span>
<span id="cb19-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55        Low 0.4014928 0.2566312 0.3418760      Low,Medium         TRUE</span></span>
<span id="cb19-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 56     Medium 0.4014928 0.2566312 0.3418760      Low,Medium         TRUE</span></span>
<span id="cb19-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 57       High 0.4014928 0.2566312 0.3418760      Low,Medium        FALSE</span></span>
<span id="cb19-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 58        Low 0.3622588 0.2575226 0.3802186 Low,Medium,High         TRUE</span></span>
<span id="cb19-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 59     Medium 0.3622588 0.2575226 0.3802186 Low,Medium,High         TRUE</span></span>
<span id="cb19-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 60       High 0.3622588 0.2575226 0.3802186 Low,Medium,High         TRUE</span></span>
<span id="cb19-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 61        Low 0.1967801 0.2160332 0.5871868            High        FALSE</span></span>
<span id="cb19-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 62     Medium 0.1967801 0.2160332 0.5871868            High        FALSE</span></span>
<span id="cb19-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 63       High 0.1967801 0.2160332 0.5871868            High         TRUE</span></span>
<span id="cb19-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 64        Low 0.4732214 0.2472855 0.2794931      Low,Medium         TRUE</span></span>
<span id="cb19-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 65     Medium 0.4732214 0.2472855 0.2794931      Low,Medium         TRUE</span></span>
<span id="cb19-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 66       High 0.4732214 0.2472855 0.2794931      Low,Medium        FALSE</span></span>
<span id="cb19-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 67        Low 0.4320378 0.2537829 0.3141793      Low,Medium         TRUE</span></span>
<span id="cb19-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 68     Medium 0.4320378 0.2537829 0.3141793      Low,Medium         TRUE</span></span>
<span id="cb19-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 69       High 0.4320378 0.2537829 0.3141793      Low,Medium        FALSE</span></span>
<span id="cb19-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 70        Low 0.2470311 0.2378946 0.5150743            High        FALSE</span></span></code></pre></div>
</details>
</div>
<p>Y aquí ya vemos que la cobertura es distinta y que la clase “High” ya no está en el 100% de los <em>prediction sets</em></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">set_adjust_fin <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb20-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(True_class) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb20-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cov =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(class_in_set))</span>
<span id="cb20-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 3 × 2</span></span>
<span id="cb20-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   True_class   cov</span></span>
<span id="cb20-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;ord&gt;      &lt;dbl&gt;</span></span>
<span id="cb20-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 Low        0.571</span></span>
<span id="cb20-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 Medium     0.667</span></span>
<span id="cb20-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 High       0.429</span></span></code></pre></div>
</details>
</div>
<p>De hecho si tabulamos ambas predicciones conformes , vemos que de las 10 predicciones que el primer método ponía como {Low, Medium, High} , el segundo pone 7 como {Low, Medium } y 3 como {Low, Medium, High}</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"></span>
<span id="cb21-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">table</span>(set_fin<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>set_conformal, set_adjust_fin<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>set_conformal)</span>
<span id="cb21-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;                  </span></span>
<span id="cb21-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;                   High Low,Medium Low,Medium,High</span></span>
<span id="cb21-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   High               7          0               0</span></span>
<span id="cb21-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   Low,High           0          3               0</span></span>
<span id="cb21-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   Low,Medium,High    0          7               3</span></span></code></pre></div>
</details>
</div>
</section>
<section id="modificación-2." class="level3">
<h3 class="anchored" data-anchor-id="modificación-2.">Modificación 2.</h3>
<p>Vale, todo esto está muy bien, pero ¿y si simplemente para cada observación ordeno de forma decreciente su probabilidad predicha y me quedo con las clases que lleguen al 60% de probabilidad, por ejemplo?</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"></span>
<span id="cb22-2">(predicciones_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>(predicciones ))</span>
<span id="cb22-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          Low    Medium      High</span></span>
<span id="cb22-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51 0.4260865 0.2544760 0.3194375</span></span>
<span id="cb22-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52 0.2425400 0.2363201 0.5211399</span></span>
<span id="cb22-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53 0.2425400 0.2363201 0.5211399</span></span>
<span id="cb22-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54 0.2425400 0.2363201 0.5211399</span></span>
<span id="cb22-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55 0.4014928 0.2566312 0.3418760</span></span>
<span id="cb22-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 56 0.4014928 0.2566312 0.3418760</span></span>
<span id="cb22-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 57 0.4014928 0.2566312 0.3418760</span></span>
<span id="cb22-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 58 0.3622588 0.2575226 0.3802186</span></span>
<span id="cb22-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 59 0.3622588 0.2575226 0.3802186</span></span>
<span id="cb22-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 60 0.3622588 0.2575226 0.3802186</span></span>
<span id="cb22-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 61 0.1967801 0.2160332 0.5871868</span></span>
<span id="cb22-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 62 0.1967801 0.2160332 0.5871868</span></span>
<span id="cb22-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 63 0.1967801 0.2160332 0.5871868</span></span>
<span id="cb22-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 64 0.4732214 0.2472855 0.2794931</span></span>
<span id="cb22-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 65 0.4732214 0.2472855 0.2794931</span></span>
<span id="cb22-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 66 0.4732214 0.2472855 0.2794931</span></span>
<span id="cb22-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 67 0.4320378 0.2537829 0.3141793</span></span>
<span id="cb22-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 68 0.4320378 0.2537829 0.3141793</span></span>
<span id="cb22-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 69 0.4320378 0.2537829 0.3141793</span></span>
<span id="cb22-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 70 0.2470311 0.2378946 0.5150743</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1">modificacion_2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> predicciones_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb23-2">     <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rownames_to_column</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"individuo"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb23-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> Low<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>High) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb23-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(individuo) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb23-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>( <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(value)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb23-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">suma_acumulada =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cumsum</span>(value)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb23-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(individuo)</span>
<span id="cb23-8"></span>
<span id="cb23-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(modificacion_2, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb23-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 10 × 4</span></span>
<span id="cb23-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # Groups:   individuo [4]</span></span>
<span id="cb23-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    individuo name   value suma_acumulada</span></span>
<span id="cb23-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    &lt;chr&gt;     &lt;chr&gt;  &lt;dbl&gt;          &lt;dbl&gt;</span></span>
<span id="cb23-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1 51        Low    0.426          0.426</span></span>
<span id="cb23-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2 51        High   0.319          0.746</span></span>
<span id="cb23-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3 51        Medium 0.254          1    </span></span>
<span id="cb23-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4 52        High   0.521          0.521</span></span>
<span id="cb23-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5 52        Low    0.243          0.764</span></span>
<span id="cb23-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6 52        Medium 0.236          1    </span></span>
<span id="cb23-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7 53        High   0.521          0.521</span></span>
<span id="cb23-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8 53        Low    0.243          0.764</span></span>
<span id="cb23-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9 53        Medium 0.236          1    </span></span>
<span id="cb23-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10 54        High   0.521          0.521</span></span></code></pre></div>
</details>
</div>
<p>Uhmm, pero no me acaba de convencer ordenar de forma descendente por la probabilidad predicha de cada clase. Por ejemplo para el individuo 51, si tomo Low +High llegaría a 0.74, pero si tomo Low + Medium llego al 67% . Si quisiera el menor conjunto de etiquetas que lleguen como mínimo al 60% la opción buena sería Low + Medium para ese individuo.</p>
<p>No me veo con ganas de implementar todas las posibles sumas de probabilidades estimadas y elegir el conjunto que cumpla la restricción de llegar al menos al 60% y si hay varios para mismo individuos que se quede con el conjunto más pequeño.</p>
</section>
</section>
<section id="conclusión." class="level2">
<h2 class="anchored" data-anchor-id="conclusión.">Conclusión.</h2>
<ul>
<li><p>Lo de la predicción conforme para el caso de regresión me parece bastante sencillo, no es más que sumar y restar una medida de dispersión de los residuos a la predicción para nuevos datos.</p></li>
<li><p>Para clasificación es un poco más interesante, sobre todo para casos en los que el usuario quiere una etiqueta o etiquetas y no se conforma con las probabilidades predichas de cada clase.</p></li>
<li><p>Subyace la hipótesis de que los scores del modelo están bien calibrados y reflejan la verdadera probabilidad.</p></li>
</ul>
<p>Pues nada más, tengan un feliz día.</p>


</section>

 ]]></description>
  <category>Estadística</category>
  <category>R</category>
  <category>2023</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/03/26/Conformal_estilo_compadre/index.html</guid>
  <pubDate>Sat, 25 Mar 2023 23:00:00 GMT</pubDate>
  <media:content url="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/03/26/Conformal_estilo_compadre" medium="image"/>
</item>
<item>
  <title>Arrow y S3</title>
  <dc:creator>José Luis Cañadas Reche</dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/02/19/Arrow_y_s3/index.html</link>
  <description><![CDATA[ 



<section id="intro" class="level2">
<h2 class="anchored" data-anchor-id="intro">Intro</h2>
<p><a href="https://arrow.apache.org/">Apache Arrow</a> está de moda, permite trabajar de forma muy rápida con ficheros parquet por ejemplo, está escrito en C++, aunque también hay implementación en Rust, de hecho la librería <a href="https://www.pola.rs/">polars</a> está escrita en Rust.</p>
<p>Luego hay APis que permiten usar Arrow desde Java Julia, Go, Python o incluso R. Vamos a ver un par de ejemplos de como usar arrow desde R. El primero de ellos es sólo copia de la excelente presentación de <a href="https://fosstodon.org/@djnavarro">Danielle Navarro</a> que os dejo <a href="https://djnavarro.net/slides-arrow-latinr-2022/#/title-slide">aquí</a> . Y el segundo ejemplo es como ver lo mismo pero con unos datos <strong>fake</strong> que he dejado en un bucket de S3 (del que no puedo poner la dirección)</p>
</section>
<section id="ejemplo-1" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-1">Ejemplo 1</h2>
<p>Una cosa maravillosa de Arrow es que puedes conectarte a un bucket remoto de S3 (o google cloud storage) y hacer consultas sobre varios millones de datos sin necesidad de que esos datos se traigan enteros a tu pc y sin necesidad de que te quepan en RAM. ¿Cómo lo hace? pues ni la más remota idea. Pero podéis leer las slides de Danielle para haceros una idea</p>
<p>Cargamos librerías, nos conectamos a un bucket de s3 y vemos que hay</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(arrow)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tictoc) </span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(duckdb) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compraberomos más tarde si usar duckdb mejora</span></span>
<span id="cb1-5"></span>
<span id="cb1-6">bucket <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">s3_bucket</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"voltrondata-labs-datasets"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">anonymous =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb1-7">bucket<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ls</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nyc-taxi"</span>)</span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [1] "nyc-taxi/year=2009" "nyc-taxi/year=2010" "nyc-taxi/year=2011"</span></span>
<span id="cb1-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [4] "nyc-taxi/year=2012" "nyc-taxi/year=2013" "nyc-taxi/year=2014"</span></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [7] "nyc-taxi/year=2015" "nyc-taxi/year=2016" "nyc-taxi/year=2017"</span></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [10] "nyc-taxi/year=2018" "nyc-taxi/year=2019" "nyc-taxi/year=2020"</span></span>
<span id="cb1-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [13] "nyc-taxi/year=2021" "nyc-taxi/year=2022"</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tic</span>()</span>
<span id="cb2-2">bucket <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">s3_bucket</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"voltrondata-labs-datasets/nyc-taxi"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">anonymous =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb2-3">remote_taxi <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">open_dataset</span>(bucket) </span>
<span id="cb2-4">remote_taxi</span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; FileSystemDataset with 158 Parquet files</span></span>
<span id="cb2-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; vendor_name: string</span></span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; pickup_datetime: timestamp[ms]</span></span>
<span id="cb2-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; dropoff_datetime: timestamp[ms]</span></span>
<span id="cb2-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; passenger_count: int64</span></span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; trip_distance: double</span></span>
<span id="cb2-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; pickup_longitude: double</span></span>
<span id="cb2-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; pickup_latitude: double</span></span>
<span id="cb2-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; rate_code: string</span></span>
<span id="cb2-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; store_and_fwd: string</span></span>
<span id="cb2-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; dropoff_longitude: double</span></span>
<span id="cb2-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; dropoff_latitude: double</span></span>
<span id="cb2-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; payment_type: string</span></span>
<span id="cb2-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; fare_amount: double</span></span>
<span id="cb2-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; extra: double</span></span>
<span id="cb2-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; mta_tax: double</span></span>
<span id="cb2-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; tip_amount: double</span></span>
<span id="cb2-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; tolls_amount: double</span></span>
<span id="cb2-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; total_amount: double</span></span>
<span id="cb2-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; improvement_surcharge: double</span></span>
<span id="cb2-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; congestion_surcharge: double</span></span>
<span id="cb2-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; pickup_location_id: int64</span></span>
<span id="cb2-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; dropoff_location_id: int64</span></span>
<span id="cb2-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; year: int32</span></span>
<span id="cb2-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; month: int32</span></span>
<span id="cb2-30"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">toc</span>()</span>
<span id="cb2-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 8.916 sec elapsed</span></span></code></pre></div>
</details>
</div>
<p>Cuánto tardaría en hacer el cálculo de cuántos viajes ha habido en Enero de 2019 y ver el número de viajes en los que ha habido más de un pasajero. (Viendo el htop de mi linuxmint se ve que no hay casi uso de mis cpus)</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tic</span>()</span>
<span id="cb3-2">result <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> remote_taxi <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2019</span>, month <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarize</span>(</span>
<span id="cb3-5">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">all_trips =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>(),</span>
<span id="cb3-6">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shared_trips =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(passenger_count <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb3-7">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pct_shared =</span> shared_trips <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> all_trips <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">collect</span>()</span>
<span id="cb3-10"></span>
<span id="cb3-11">result <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>)</span>
<span id="cb3-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb3-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   all_trips shared_trips pct_shared</span></span>
<span id="cb3-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       &lt;int&gt;        &lt;int&gt;      &lt;dbl&gt;</span></span>
<span id="cb3-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1   7667255      2094091       27.3</span></span>
<span id="cb3-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">toc</span>()</span>
<span id="cb3-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 12.982 sec elapsed</span></span></code></pre></div>
</details>
</div>
<p>No está mal , ¿verdad?</p>
</section>
<section id="ejemplo-2" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-2">Ejemplo 2</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">BUCKET   <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.getenv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BUCKET_COMUN"</span>)</span>
<span id="cb4-2"></span>
<span id="cb4-3">ROLE_ARN <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.getenv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ROLE_ARN"</span>)</span>
<span id="cb4-4">S3_FOLDER <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.getenv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"S3_FOLDER"</span>)</span>
<span id="cb4-5"></span>
<span id="cb4-6"></span>
<span id="cb4-7"></span>
<span id="cb4-8"></span>
<span id="cb4-9">bucket_comun <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">s3_bucket</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bucket =</span> BUCKET, </span>
<span id="cb4-10">                             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">role_arn =</span> ROLE_ARN)</span>
<span id="cb4-11"></span>
<span id="cb4-12"></span>
<span id="cb4-13">ds <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">open_dataset</span>(bucket_comun<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">path</span>(S3_FOLDER),</span>
<span id="cb4-14">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">partitioning =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"month"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"day"</span>))</span></code></pre></div>
</details>
</div>
<p>Cuántos datos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"></span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tic</span>()</span>
<span id="cb5-3">res <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ds <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb5-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2021</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> month <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(year, month, day ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(day) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb5-8">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_filas =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()</span>
<span id="cb5-9">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">collect</span>()</span>
<span id="cb5-11"></span>
<span id="cb5-12">res <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(day) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n  =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb5-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 30 × 2</span></span>
<span id="cb5-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      day n_filas</span></span>
<span id="cb5-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    &lt;int&gt;   &lt;int&gt;</span></span>
<span id="cb5-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1     1 6260454</span></span>
<span id="cb5-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2     2 6245312</span></span>
<span id="cb5-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3     3 6243455</span></span>
<span id="cb5-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4     4 6242304</span></span>
<span id="cb5-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5     5 6241816</span></span>
<span id="cb5-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6     6 6241089</span></span>
<span id="cb5-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7     7 6241633</span></span>
<span id="cb5-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8     8 6241651</span></span>
<span id="cb5-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9    10 6240299</span></span>
<span id="cb5-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10    11 6239817</span></span>
<span id="cb5-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # … with 20 more rows</span></span>
<span id="cb5-29"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">toc</span>()</span>
<span id="cb5-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 33.974 sec elapsed</span></span></code></pre></div>
</details>
</div>
<p>Y usando <code>duckdb</code> como engine de consulta .</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"></span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tic</span>()</span>
<span id="cb6-3">res <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ds <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb6-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2021</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> month <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(year, month, day ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">to_duckdb</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(day) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb6-9">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_filas =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()</span>
<span id="cb6-10">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">collect</span>()</span>
<span id="cb6-12"></span>
<span id="cb6-13">res <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(day) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-15">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n  =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb6-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 30 × 2</span></span>
<span id="cb6-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      day n_filas</span></span>
<span id="cb6-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    &lt;int&gt;   &lt;dbl&gt;</span></span>
<span id="cb6-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1     1 6260454</span></span>
<span id="cb6-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2     2 6245312</span></span>
<span id="cb6-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3     3 6243455</span></span>
<span id="cb6-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4     4 6242304</span></span>
<span id="cb6-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5     5 6241816</span></span>
<span id="cb6-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6     6 6241089</span></span>
<span id="cb6-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7     7 6241633</span></span>
<span id="cb6-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8     8 6241651</span></span>
<span id="cb6-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9    10 6240299</span></span>
<span id="cb6-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10    11 6239817</span></span>
<span id="cb6-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # … with 20 more rows</span></span>
<span id="cb6-30"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">toc</span>()</span>
<span id="cb6-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 38.924 sec elapsed</span></span></code></pre></div>
</details>
</div>
<p>Pues a mi la verdad, arrow me parece impresionante. Poder hacer cosas como calcular medias, contar, filtrar etc, sobre conjuntos de datos que están en remoto sin tener una computadadora muy potente.</p>
</section>
<section id="nota" class="level2">
<h2 class="anchored" data-anchor-id="nota">Nota</h2>
<p>Para instalar la última versión de Arrow en R, recomiendo que os leáis esta <a href="https://arrow.apache.org/docs/r/articles/install.html">documentación</a></p>
<p>Feliz domingo</p>


</section>

 ]]></description>
  <category>big data</category>
  <category>R</category>
  <category>C++</category>
  <category>S3</category>
  <category>AWS</category>
  <category>2023</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/02/19/Arrow_y_s3/index.html</guid>
  <pubDate>Sat, 18 Feb 2023 23:00:00 GMT</pubDate>
  <media:content url="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/02/19/Arrow_y_s3" medium="image"/>
</item>
<item>
  <title>Explicatividad no usual</title>
  <dc:creator>José Luis Cañadas Reche</dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/29/explicatividad_no_usual/index.html</link>
  <description><![CDATA[ 



<section id="intro" class="level2">
<h2 class="anchored" data-anchor-id="intro">Intro</h2>
<p>Buscando en el portátil sobre otras cosas me he encontrado un pequeño ejercicio para implementar la idea que se comenta <a href="https://www.datanalytics.com/2020/10/14/explicacion-de-los-scorings-de-ciertos-modelos/">aquí</a></p>
<p>La idea es muy sencilla, tal y como comenta Carlos. Si tengo un modelo que sea tipo randomForest</p>
<ul>
<li>De cada observación a predecir se anota en qué nodo terminal ha caído en cada árbol</li>
<li>Para cada nodo terminal en cada árbol se recorre el camino hacia “arriba” para saber qué variables están implicadas en ese nodo</li>
<li>Se cuenta para cada nodo terminal el número de veces que aparece una variable en cada árbol (o se da más importancia a las qeu estén más altos en el árbol)</li>
<li>Se agrega de alguna manera para cada observación qué variables y cómo de importantes están en los caminos de los nodos terminales en los que han caído.</li>
<li>Esa info sería la importancia de las variables a nivel individual</li>
<li>Se podría clusterizar observaciones con similares variables importantes</li>
</ul>
<p>Antes de nada, sí, ya sé que existen cosas como los shap values y que a partir de ellos se puede hacer algo parecido. Pero no está de más de vez en cuando buscarse uno las habichueleas de forma más artesanal..</p>
</section>
<section id="ejemplo-1" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-1">Ejemplo 1</h2>
<p>Pues ale, vamos a hacerlo con iris, tan denostado hoy en día. Pobre Fisher o Anderson si levantaran la cabeza.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ranger)</span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ya veremos para que usamos furrr y FactoMineR</span></span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(furrr) </span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(FactoMineR)</span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(factoextra)</span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"></span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 5 arbolitos tiene mi.. </span></span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">47</span>)</span>
<span id="cb2-4">rg_iris <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ranger</span>(Species <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> . , <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> iris, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">num.trees =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
</details>
</div>
<p>Info del árbol 3</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">(arbol3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">treeInfo</span>(rg_iris, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tree =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>))</span>
<span id="cb3-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    nodeID leftChild rightChild splitvarID splitvarName splitval terminal</span></span>
<span id="cb3-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1       0         1          2          0 Sepal.Length     5.55    FALSE</span></span>
<span id="cb3-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2       1         3          4          2 Petal.Length     2.45    FALSE</span></span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3       2         5          6          3  Petal.Width     1.70    FALSE</span></span>
<span id="cb3-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4       3        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5       4         7          8          2 Petal.Length     4.25    FALSE</span></span>
<span id="cb3-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6       5         9         10          1  Sepal.Width     3.60    FALSE</span></span>
<span id="cb3-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 7       6        11         12          0 Sepal.Length     6.00    FALSE</span></span>
<span id="cb3-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 8       7        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 9       8        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10      9        13         14          2 Petal.Length     4.95    FALSE</span></span>
<span id="cb3-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 11     10        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 12     11        15         16          2 Petal.Length     4.85    FALSE</span></span>
<span id="cb3-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 13     12        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 14     13        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 15     14        17         18          3  Petal.Width     1.55    FALSE</span></span>
<span id="cb3-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 16     15        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 17     16        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 18     17        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 19     18        19         20          2 Petal.Length     5.45    FALSE</span></span>
<span id="cb3-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 20     19        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 21     20        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    prediction</span></span>
<span id="cb3-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1        &lt;NA&gt;</span></span>
<span id="cb3-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2        &lt;NA&gt;</span></span>
<span id="cb3-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3        &lt;NA&gt;</span></span>
<span id="cb3-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4      setosa</span></span>
<span id="cb3-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5        &lt;NA&gt;</span></span>
<span id="cb3-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6        &lt;NA&gt;</span></span>
<span id="cb3-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 7        &lt;NA&gt;</span></span>
<span id="cb3-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 8  versicolor</span></span>
<span id="cb3-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 9   virginica</span></span>
<span id="cb3-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10       &lt;NA&gt;</span></span>
<span id="cb3-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 11     setosa</span></span>
<span id="cb3-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 12       &lt;NA&gt;</span></span>
<span id="cb3-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 13  virginica</span></span>
<span id="cb3-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 14 versicolor</span></span>
<span id="cb3-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 15       &lt;NA&gt;</span></span>
<span id="cb3-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 16 versicolor</span></span>
<span id="cb3-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 17  virginica</span></span>
<span id="cb3-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 18  virginica</span></span>
<span id="cb3-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 19       &lt;NA&gt;</span></span>
<span id="cb3-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 20 versicolor</span></span>
<span id="cb3-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 21  virginica</span></span></code></pre></div>
</details>
</div>
<p>Analizando un poco, vemos que el nodo raíz (0) se parte por la variable <code>Sepal.Length</code>. Luego el nodo 1 se bifurca a la izquierda hacia el 3 y a la derecha hacia el 4, siendo <code>Petal.Length</code> la variable que decide esa partición.</p>
<p>La idea sería recorrer el árbol partiendo de un nodo terminal y ver qué camino ha seguido. Para eso hacemos el siguiente código</p>
<p>Hacemos un ejemplo, partiendo del nodo terminal 8</p>
<p>Camino del Nodo 8</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">nodo_terminal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span></span>
<span id="cb4-2"></span>
<span id="cb4-3">nodos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> nodo_terminal <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># vamos a ir sobreescribiendo la variable nodos hasta llegar al nodo raíz 0 </span></span>
<span id="cb4-4">variables <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vector</span>() <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># guardamos el nombre de las variables de split</span></span>
<span id="cb4-5"></span>
<span id="cb4-6">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">while</span> (<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> nodos) {</span>
<span id="cb4-7">    tmp <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> arbol3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb4-8">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(leftChild <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> nodos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb4-9">        rightChild <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> nodos)</span>
<span id="cb4-10">    </span>
<span id="cb4-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Nodo hijo: {nodos}"</span>))</span>
<span id="cb4-12">    </span>
<span id="cb4-13">    nodos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(tmp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>nodeID)</span>
<span id="cb4-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Nodo padre: {nodos}"</span>))</span>
<span id="cb4-15">    </span>
<span id="cb4-16">    </span>
<span id="cb4-17">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"variable de split en nodo padre: {tmp$splitvarName}"</span>))</span>
<span id="cb4-18">    </span>
<span id="cb4-19">    variables <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(variables, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(tmp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>splitvarName)) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># la última variable de este vector es la que está más arriba en el árbol</span></span>
<span id="cb4-20"></span>
<span id="cb4-21">  }</span>
<span id="cb4-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Nodo hijo: 8</span></span>
<span id="cb4-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Nodo padre: 4</span></span>
<span id="cb4-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; variable de split en nodo padre: Petal.Length</span></span>
<span id="cb4-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Nodo hijo: 4</span></span>
<span id="cb4-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Nodo padre: 1</span></span>
<span id="cb4-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; variable de split en nodo padre: Petal.Length</span></span>
<span id="cb4-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Nodo hijo: 1</span></span>
<span id="cb4-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Nodo padre: 0</span></span>
<span id="cb4-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; variable de split en nodo padre: Sepal.Length</span></span></code></pre></div>
</details>
</div>
<p>Y vemos que para llegar al nodo terminal 8 ha utilizado dos veces la variable <code>Petal.Length</code> y una la variable <code>Sepal.Length</code></p>
<p>Nos creamos una funcioncita para esto, donde al final construyo un data.frame donde guardo eel nodo terminal que estamos investigando, las variables que se han usado para llegar a ese nodo y una variable peso que se calcula asignando un peso igual 1 a la variable que está más alta en el árbol y menos a las demás. Si hay 4 variables se crea un vector c(4,3,2,1) en orden de más alta en el árbol a más baja y se divide por el número de variables. así se tendrían estos pesos 1, 0.75, 0.5, 0.25</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"></span>
<span id="cb5-2">extraerVariables_nodos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(nodo_terminal, info_arbol) {</span>
<span id="cb5-3">  nodos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> nodo_terminal</span>
<span id="cb5-4">  variables <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vector</span>()</span>
<span id="cb5-5"></span>
<span id="cb5-6">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">while</span> (<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> nodos) {</span>
<span id="cb5-7">    tmp <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> info_arbol <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-8">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(leftChild <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> nodos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb5-9">        rightChild <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> nodos)</span>
<span id="cb5-10"></span>
<span id="cb5-11">    variables <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(variables, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(tmp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>splitvarName))</span>
<span id="cb5-12"></span>
<span id="cb5-13">    nodos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(tmp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>nodeID)</span>
<span id="cb5-14">  }</span>
<span id="cb5-15"></span>
<span id="cb5-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(</span>
<span id="cb5-17">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb5-18">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nodo_terminal =</span> nodo_terminal,</span>
<span id="cb5-19">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variables =</span> variables,</span>
<span id="cb5-20">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">peso =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq_along</span>(variables) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(variables))</span>
<span id="cb5-21">      )</span>
<span id="cb5-22">  )</span>
<span id="cb5-23">}</span></code></pre></div>
</details>
</div>
<p>Comprobamos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"></span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">extraerVariables_nodos</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nodo_terminal =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">info_arbol =</span> arbol3)</span>
<span id="cb6-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   nodo_terminal    variables      peso</span></span>
<span id="cb6-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1             8 Petal.Length 0.3333333</span></span>
<span id="cb6-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2             8 Petal.Length 0.6666667</span></span>
<span id="cb6-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3             8 Sepal.Length 1.0000000</span></span></code></pre></div>
</details>
</div>
<p>Ok. Lo suyo sería extraer la misma info pero para cada nodo terminal del árbol que estamos considerando. Pues nos creamos la funcioncita, que dado un modelo y un número de árbol, saque la info anterior para todos los nodos terminales</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"></span>
<span id="cb7-2">extraerVariablePorArbol <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(modelo, arbol, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">verbose =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) {</span>
<span id="cb7-3">  </span>
<span id="cb7-4">  info_arbol <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">treeInfo</span>(modelo, arbol)</span>
<span id="cb7-5">  nodos_terminales <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">treeInfo</span>(modelo, arbol) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(terminal <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(nodeID) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>()</span>
<span id="cb7-9"> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(verbose) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(nodos_terminales)</span>
<span id="cb7-10">  </span>
<span id="cb7-11">  variables_por_arbol <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_df</span>(</span>
<span id="cb7-12">    nodos_terminales,</span>
<span id="cb7-13">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(nodos) {</span>
<span id="cb7-14">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">extraerVariables_nodos</span>(nodos, info_arbol)</span>
<span id="cb7-15">    }</span>
<span id="cb7-16">  )</span>
<span id="cb7-17"></span>
<span id="cb7-18">  variables_por_arbol<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>arbol <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> arbol</span>
<span id="cb7-19">  variables_por_arbol</span>
<span id="cb7-20">}</span></code></pre></div>
</details>
</div>
<p>Comprobemos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># arbol 3 </span></span>
<span id="cb8-2">(importancia_individual_arbol3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">extraerVariablePorArbol</span>(rg_iris, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>))</span>
<span id="cb8-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    nodo_terminal    variables      peso arbol</span></span>
<span id="cb8-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1              3 Petal.Length 0.5000000     3</span></span>
<span id="cb8-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2              3 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3              7 Petal.Length 0.3333333     3</span></span>
<span id="cb8-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4              7 Petal.Length 0.6666667     3</span></span>
<span id="cb8-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5              7 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6              8 Petal.Length 0.3333333     3</span></span>
<span id="cb8-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 7              8 Petal.Length 0.6666667     3</span></span>
<span id="cb8-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 8              8 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 9             10  Sepal.Width 0.3333333     3</span></span>
<span id="cb8-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10            10  Petal.Width 0.6666667     3</span></span>
<span id="cb8-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 11            10 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 12            12 Sepal.Length 0.3333333     3</span></span>
<span id="cb8-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 13            12  Petal.Width 0.6666667     3</span></span>
<span id="cb8-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 14            12 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 15            13 Petal.Length 0.2500000     3</span></span>
<span id="cb8-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 16            13  Sepal.Width 0.5000000     3</span></span>
<span id="cb8-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 17            13  Petal.Width 0.7500000     3</span></span>
<span id="cb8-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 18            13 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 19            15 Petal.Length 0.2500000     3</span></span>
<span id="cb8-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 20            15 Sepal.Length 0.5000000     3</span></span>
<span id="cb8-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 21            15  Petal.Width 0.7500000     3</span></span>
<span id="cb8-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 22            15 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 23            16 Petal.Length 0.2500000     3</span></span>
<span id="cb8-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 24            16 Sepal.Length 0.5000000     3</span></span>
<span id="cb8-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 25            16  Petal.Width 0.7500000     3</span></span>
<span id="cb8-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 26            16 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 27            17  Petal.Width 0.2000000     3</span></span>
<span id="cb8-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 28            17 Petal.Length 0.4000000     3</span></span>
<span id="cb8-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 29            17  Sepal.Width 0.6000000     3</span></span>
<span id="cb8-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 30            17  Petal.Width 0.8000000     3</span></span>
<span id="cb8-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 31            17 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 32            19 Petal.Length 0.1666667     3</span></span>
<span id="cb8-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 33            19  Petal.Width 0.3333333     3</span></span>
<span id="cb8-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 34            19 Petal.Length 0.5000000     3</span></span>
<span id="cb8-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 35            19  Sepal.Width 0.6666667     3</span></span>
<span id="cb8-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 36            19  Petal.Width 0.8333333     3</span></span>
<span id="cb8-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 37            19 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 38            20 Petal.Length 0.1666667     3</span></span>
<span id="cb8-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 39            20  Petal.Width 0.3333333     3</span></span>
<span id="cb8-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 40            20 Petal.Length 0.5000000     3</span></span>
<span id="cb8-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 41            20  Sepal.Width 0.6666667     3</span></span>
<span id="cb8-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 42            20  Petal.Width 0.8333333     3</span></span>
<span id="cb8-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 43            20 Sepal.Length 1.0000000     3</span></span></code></pre></div>
</details>
</div>
<p>Solo queda extraer lo mismo pero para cada arbolito</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">extraerVariablesPorModelo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(modelo, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">parallel =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) {</span>
<span id="cb9-2">  </span>
<span id="cb9-3">  </span>
<span id="cb9-4">  arboles <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> modelo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>num.trees</span>
<span id="cb9-5"></span>
<span id="cb9-6">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (parallel) {</span>
<span id="cb9-7">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Si hay muchos árboles usamos procesamiento en paralelo</span></span>
<span id="cb9-8">    future<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plan</span>(multisession)</span>
<span id="cb9-9">    </span>
<span id="cb9-10">    furrr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">future_map_dfr</span>(</span>
<span id="cb9-11">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq_len</span>(arboles),</span>
<span id="cb9-12">      <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(arbol) {</span>
<span id="cb9-13">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">extraerVariablePorArbol</span>(modelo, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">arbol =</span> arbol)</span>
<span id="cb9-14">      }</span>
<span id="cb9-15">    )</span>
<span id="cb9-16">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span>{</span>
<span id="cb9-17">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_df</span>(</span>
<span id="cb9-18">          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq_len</span>(arboles),</span>
<span id="cb9-19">          <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(arbol) {</span>
<span id="cb9-20">              <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">extraerVariablePorArbol</span>(modelo, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">arbol =</span> arbol)</span>
<span id="cb9-21">          }</span>
<span id="cb9-22">      )  </span>
<span id="cb9-23">  }</span>
<span id="cb9-24">}</span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">(importancia_individual_todos_arboles <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">extraerVariablesPorModelo</span>(rg_iris, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">parallel =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>))</span>
<span id="cb10-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     nodo_terminal    variables      peso arbol</span></span>
<span id="cb10-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1               1  Petal.Width 1.0000000     1</span></span>
<span id="cb10-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2               5 Petal.Length 0.3333333     1</span></span>
<span id="cb10-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3               5  Petal.Width 0.6666667     1</span></span>
<span id="cb10-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4               5  Petal.Width 1.0000000     1</span></span>
<span id="cb10-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5               8  Petal.Width 0.3333333     1</span></span>
<span id="cb10-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6               8  Petal.Width 0.6666667     1</span></span>
<span id="cb10-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 7               8  Petal.Width 1.0000000     1</span></span>
<span id="cb10-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 8               9  Petal.Width 0.2500000     1</span></span>
<span id="cb10-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 9               9 Petal.Length 0.5000000     1</span></span>
<span id="cb10-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10              9  Petal.Width 0.7500000     1</span></span>
<span id="cb10-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 11              9  Petal.Width 1.0000000     1</span></span>
<span id="cb10-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 12             10  Petal.Width 0.2500000     1</span></span>
<span id="cb10-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 13             10 Petal.Length 0.5000000     1</span></span>
<span id="cb10-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 14             10  Petal.Width 0.7500000     1</span></span>
<span id="cb10-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 15             10  Petal.Width 1.0000000     1</span></span>
<span id="cb10-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 16             11 Petal.Length 0.2500000     1</span></span>
<span id="cb10-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 17             11  Petal.Width 0.5000000     1</span></span>
<span id="cb10-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 18             11  Petal.Width 0.7500000     1</span></span>
<span id="cb10-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 19             11  Petal.Width 1.0000000     1</span></span>
<span id="cb10-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 20             12 Petal.Length 0.2500000     1</span></span>
<span id="cb10-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 21             12  Petal.Width 0.5000000     1</span></span>
<span id="cb10-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 22             12  Petal.Width 0.7500000     1</span></span>
<span id="cb10-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 23             12  Petal.Width 1.0000000     1</span></span>
<span id="cb10-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 24              3  Petal.Width 0.5000000     2</span></span>
<span id="cb10-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 25              3 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 26              4  Petal.Width 0.5000000     2</span></span>
<span id="cb10-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 27              4 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 28              8  Sepal.Width 0.3333333     2</span></span>
<span id="cb10-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 29              8  Petal.Width 0.6666667     2</span></span>
<span id="cb10-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 30              8 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 31             10 Sepal.Length 0.3333333     2</span></span>
<span id="cb10-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 32             10  Petal.Width 0.6666667     2</span></span>
<span id="cb10-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 33             10 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 34             11 Petal.Length 0.2500000     2</span></span>
<span id="cb10-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 35             11  Sepal.Width 0.5000000     2</span></span>
<span id="cb10-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 36             11  Petal.Width 0.7500000     2</span></span>
<span id="cb10-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 37             11 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 38             13  Sepal.Width 0.2500000     2</span></span>
<span id="cb10-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 39             13 Sepal.Length 0.5000000     2</span></span>
<span id="cb10-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 40             13  Petal.Width 0.7500000     2</span></span>
<span id="cb10-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 41             13 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 42             14  Sepal.Width 0.2500000     2</span></span>
<span id="cb10-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 43             14 Sepal.Length 0.5000000     2</span></span>
<span id="cb10-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 44             14  Petal.Width 0.7500000     2</span></span>
<span id="cb10-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 45             14 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 46             15  Sepal.Width 0.2000000     2</span></span>
<span id="cb10-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 47             15 Petal.Length 0.4000000     2</span></span>
<span id="cb10-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 48             15  Sepal.Width 0.6000000     2</span></span>
<span id="cb10-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 49             15  Petal.Width 0.8000000     2</span></span>
<span id="cb10-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 50             15 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 51             17  Sepal.Width 0.1666667     2</span></span>
<span id="cb10-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 52             17  Sepal.Width 0.3333333     2</span></span>
<span id="cb10-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 53             17 Petal.Length 0.5000000     2</span></span>
<span id="cb10-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 54             17  Sepal.Width 0.6666667     2</span></span>
<span id="cb10-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 55             17  Petal.Width 0.8333333     2</span></span>
<span id="cb10-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 56             17 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-59"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 57             18  Sepal.Width 0.1666667     2</span></span>
<span id="cb10-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 58             18  Sepal.Width 0.3333333     2</span></span>
<span id="cb10-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 59             18 Petal.Length 0.5000000     2</span></span>
<span id="cb10-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 60             18  Sepal.Width 0.6666667     2</span></span>
<span id="cb10-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 61             18  Petal.Width 0.8333333     2</span></span>
<span id="cb10-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 62             18 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 63              3 Petal.Length 0.5000000     3</span></span>
<span id="cb10-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 64              3 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 65              7 Petal.Length 0.3333333     3</span></span>
<span id="cb10-68"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 66              7 Petal.Length 0.6666667     3</span></span>
<span id="cb10-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 67              7 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-70"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 68              8 Petal.Length 0.3333333     3</span></span>
<span id="cb10-71"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 69              8 Petal.Length 0.6666667     3</span></span>
<span id="cb10-72"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 70              8 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-73"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 71             10  Sepal.Width 0.3333333     3</span></span>
<span id="cb10-74"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 72             10  Petal.Width 0.6666667     3</span></span>
<span id="cb10-75"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 73             10 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-76"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 74             12 Sepal.Length 0.3333333     3</span></span>
<span id="cb10-77"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 75             12  Petal.Width 0.6666667     3</span></span>
<span id="cb10-78"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 76             12 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-79"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 77             13 Petal.Length 0.2500000     3</span></span>
<span id="cb10-80"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 78             13  Sepal.Width 0.5000000     3</span></span>
<span id="cb10-81"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 79             13  Petal.Width 0.7500000     3</span></span>
<span id="cb10-82"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 80             13 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-83"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 81             15 Petal.Length 0.2500000     3</span></span>
<span id="cb10-84"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 82             15 Sepal.Length 0.5000000     3</span></span>
<span id="cb10-85"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 83             15  Petal.Width 0.7500000     3</span></span>
<span id="cb10-86"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 84             15 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-87"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 85             16 Petal.Length 0.2500000     3</span></span>
<span id="cb10-88"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 86             16 Sepal.Length 0.5000000     3</span></span>
<span id="cb10-89"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 87             16  Petal.Width 0.7500000     3</span></span>
<span id="cb10-90"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 88             16 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-91"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 89             17  Petal.Width 0.2000000     3</span></span>
<span id="cb10-92"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 90             17 Petal.Length 0.4000000     3</span></span>
<span id="cb10-93"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 91             17  Sepal.Width 0.6000000     3</span></span>
<span id="cb10-94"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 92             17  Petal.Width 0.8000000     3</span></span>
<span id="cb10-95"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 93             17 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-96"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 94             19 Petal.Length 0.1666667     3</span></span>
<span id="cb10-97"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 95             19  Petal.Width 0.3333333     3</span></span>
<span id="cb10-98"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 96             19 Petal.Length 0.5000000     3</span></span>
<span id="cb10-99"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 97             19  Sepal.Width 0.6666667     3</span></span>
<span id="cb10-100"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 98             19  Petal.Width 0.8333333     3</span></span>
<span id="cb10-101"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 99             19 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-102"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 100            20 Petal.Length 0.1666667     3</span></span>
<span id="cb10-103"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 101            20  Petal.Width 0.3333333     3</span></span>
<span id="cb10-104"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 102            20 Petal.Length 0.5000000     3</span></span>
<span id="cb10-105"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 103            20  Sepal.Width 0.6666667     3</span></span>
<span id="cb10-106"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 104            20  Petal.Width 0.8333333     3</span></span>
<span id="cb10-107"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 105            20 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-108"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 106             1  Petal.Width 1.0000000     4</span></span>
<span id="cb10-109"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 107             5  Petal.Width 0.3333333     4</span></span>
<span id="cb10-110"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 108             5 Petal.Length 0.6666667     4</span></span>
<span id="cb10-111"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 109             5  Petal.Width 1.0000000     4</span></span>
<span id="cb10-112"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 110             6  Petal.Width 0.3333333     4</span></span>
<span id="cb10-113"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 111             6 Petal.Length 0.6666667     4</span></span>
<span id="cb10-114"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 112             6  Petal.Width 1.0000000     4</span></span>
<span id="cb10-115"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 113             9 Sepal.Length 0.2500000     4</span></span>
<span id="cb10-116"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 114             9 Petal.Length 0.5000000     4</span></span>
<span id="cb10-117"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 115             9 Petal.Length 0.7500000     4</span></span>
<span id="cb10-118"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 116             9  Petal.Width 1.0000000     4</span></span>
<span id="cb10-119"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 117            10 Sepal.Length 0.2500000     4</span></span>
<span id="cb10-120"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 118            10 Petal.Length 0.5000000     4</span></span>
<span id="cb10-121"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 119            10 Petal.Length 0.7500000     4</span></span>
<span id="cb10-122"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 120            10  Petal.Width 1.0000000     4</span></span>
<span id="cb10-123"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 121            12  Petal.Width 0.2500000     4</span></span>
<span id="cb10-124"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 122            12 Petal.Length 0.5000000     4</span></span>
<span id="cb10-125"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 123            12 Petal.Length 0.7500000     4</span></span>
<span id="cb10-126"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 124            12  Petal.Width 1.0000000     4</span></span>
<span id="cb10-127"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 125            13 Sepal.Length 0.2000000     4</span></span>
<span id="cb10-128"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 126            13  Petal.Width 0.4000000     4</span></span>
<span id="cb10-129"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 127            13 Petal.Length 0.6000000     4</span></span>
<span id="cb10-130"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 128            13 Petal.Length 0.8000000     4</span></span>
<span id="cb10-131"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 129            13  Petal.Width 1.0000000     4</span></span>
<span id="cb10-132"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 130            14 Sepal.Length 0.2000000     4</span></span>
<span id="cb10-133"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 131            14  Petal.Width 0.4000000     4</span></span>
<span id="cb10-134"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 132            14 Petal.Length 0.6000000     4</span></span>
<span id="cb10-135"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 133            14 Petal.Length 0.8000000     4</span></span>
<span id="cb10-136"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 134            14  Petal.Width 1.0000000     4</span></span>
<span id="cb10-137"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 135             1 Petal.Length 1.0000000     5</span></span>
<span id="cb10-138"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 136             6  Sepal.Width 0.3333333     5</span></span>
<span id="cb10-139"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 137             6  Petal.Width 0.6666667     5</span></span>
<span id="cb10-140"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 138             6 Petal.Length 1.0000000     5</span></span>
<span id="cb10-141"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 139             8 Petal.Length 0.3333333     5</span></span>
<span id="cb10-142"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 140             8  Petal.Width 0.6666667     5</span></span>
<span id="cb10-143"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 141             8 Petal.Length 1.0000000     5</span></span>
<span id="cb10-144"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 142            10 Petal.Length 0.2500000     5</span></span>
<span id="cb10-145"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 143            10  Sepal.Width 0.5000000     5</span></span>
<span id="cb10-146"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 144            10  Petal.Width 0.7500000     5</span></span>
<span id="cb10-147"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 145            10 Petal.Length 1.0000000     5</span></span>
<span id="cb10-148"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 146            11 Sepal.Length 0.2500000     5</span></span>
<span id="cb10-149"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 147            11 Petal.Length 0.5000000     5</span></span>
<span id="cb10-150"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 148            11  Petal.Width 0.7500000     5</span></span>
<span id="cb10-151"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 149            11 Petal.Length 1.0000000     5</span></span>
<span id="cb10-152"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 150            12 Sepal.Length 0.2500000     5</span></span>
<span id="cb10-153"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 151            12 Petal.Length 0.5000000     5</span></span>
<span id="cb10-154"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 152            12  Petal.Width 0.7500000     5</span></span>
<span id="cb10-155"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 153            12 Petal.Length 1.0000000     5</span></span>
<span id="cb10-156"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 154            14 Sepal.Length 0.2000000     5</span></span>
<span id="cb10-157"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 155            14 Petal.Length 0.4000000     5</span></span>
<span id="cb10-158"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 156            14  Sepal.Width 0.6000000     5</span></span>
<span id="cb10-159"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 157            14  Petal.Width 0.8000000     5</span></span>
<span id="cb10-160"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 158            14 Petal.Length 1.0000000     5</span></span>
<span id="cb10-161"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 159            15 Petal.Length 0.1666667     5</span></span>
<span id="cb10-162"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 160            15 Sepal.Length 0.3333333     5</span></span>
<span id="cb10-163"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 161            15 Petal.Length 0.5000000     5</span></span>
<span id="cb10-164"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 162            15  Sepal.Width 0.6666667     5</span></span>
<span id="cb10-165"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 163            15  Petal.Width 0.8333333     5</span></span>
<span id="cb10-166"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 164            15 Petal.Length 1.0000000     5</span></span>
<span id="cb10-167"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 165            16 Petal.Length 0.1666667     5</span></span>
<span id="cb10-168"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 166            16 Sepal.Length 0.3333333     5</span></span>
<span id="cb10-169"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 167            16 Petal.Length 0.5000000     5</span></span>
<span id="cb10-170"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 168            16  Sepal.Width 0.6666667     5</span></span>
<span id="cb10-171"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 169            16  Petal.Width 0.8333333     5</span></span>
<span id="cb10-172"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 170            16 Petal.Length 1.0000000     5</span></span></code></pre></div>
</details>
</div>
<p>Ahora ya tenemos qué variables llevan a cada nodo terminal en cada árbol e incluso un peso que vale 1 si la variable es la primera en el “camino” hacia el nodo</p>
<p>Pero lo que nosotros queremos es para cada observación que predecimos, ver su nodo terminal en cada árbol y pegarle las variables importantes en cada nodo.</p>
<p>Sería algo así.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># lo hacems de momento con todo iris, en la realidad serían los datos de test o el conjunto de datos a predecir. </span></span>
<span id="cb11-2"></span>
<span id="cb11-3"></span>
<span id="cb11-4">nodos_terminales <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(rg_iris, iris, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"terminalNodes"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>predictions</span>
<span id="cb11-5"></span>
<span id="cb11-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># cada fila corresponde a una observación y cada columna al nodo terminal en cada árbol</span></span>
<span id="cb11-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(nodos_terminales, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span> )</span>
<span id="cb11-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       [,1] [,2] [,3] [,4] [,5]</span></span>
<span id="cb11-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [1,]    1    3    3    1    1</span></span>
<span id="cb11-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [2,]    1    3    3    1    1</span></span>
<span id="cb11-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [3,]    1    3    3    1    1</span></span>
<span id="cb11-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [4,]    1    3    3    1    1</span></span>
<span id="cb11-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [5,]    1    3    3    1    1</span></span>
<span id="cb11-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [6,]    1    3    3    1    1</span></span>
<span id="cb11-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [7,]    1    3    3    1    1</span></span>
<span id="cb11-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [8,]    1    3    3    1    1</span></span>
<span id="cb11-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [9,]    1    3    3    1    1</span></span>
<span id="cb11-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [10,]    1    3    3    1    1</span></span></code></pre></div>
</details>
</div>
<p>Lo ponemos de otra forma.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># añadimos el id de la fila</span></span>
<span id="cb12-2">nodos_terminales_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> nodos_terminales <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb12-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb12-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rownames_to_column</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>)</span>
<span id="cb12-5">  </span>
<span id="cb12-6">  </span>
<span id="cb12-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colnames</span>(nodos_terminales_df)[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ncol</span>(nodos_terminales_df)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb12-8"></span>
<span id="cb12-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(nodos_terminales_df)</span>
<span id="cb12-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   id 1 2 3 4 5</span></span>
<span id="cb12-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1  1 1 3 3 1 1</span></span>
<span id="cb12-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2  2 1 3 3 1 1</span></span>
<span id="cb12-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3  3 1 3 3 1 1</span></span>
<span id="cb12-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4  4 1 3 3 1 1</span></span>
<span id="cb12-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5  5 1 3 3 1 1</span></span>
<span id="cb12-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6  6 1 3 3 1 1</span></span></code></pre></div>
</details>
</div>
<p>Pivotamos para facilitar luego las agregaciones por observaciones</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"> nodos_terminales_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> nodos_terminales_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb13-2">    tidyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>( <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colnames</span>(nodos_terminales_df)[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"arbol"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nodo_terminal"</span>)</span>
<span id="cb13-3"></span>
<span id="cb13-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(nodos_terminales_df)</span>
<span id="cb13-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 6 × 3</span></span>
<span id="cb13-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   id    arbol nodo_terminal</span></span>
<span id="cb13-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span id="cb13-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 1     1                 1</span></span>
<span id="cb13-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 1     2                 3</span></span>
<span id="cb13-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 1     3                 3</span></span>
<span id="cb13-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4 1     4                 1</span></span>
<span id="cb13-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5 1     5                 1</span></span>
<span id="cb13-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6 2     1                 1</span></span></code></pre></div>
</details>
</div>
<p>a la importancia en todos los árboles lo llamo info_modelo</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">  </span>
<span id="cb14-2">info_modelo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  importancia_individual_todos_arboles</span>
<span id="cb14-3">info_modelo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>arbol <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(info_modelo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>arbol)</span>
<span id="cb14-4"></span>
<span id="cb14-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(info_modelo)</span>
<span id="cb14-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   nodo_terminal    variables      peso arbol</span></span>
<span id="cb14-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1             1  Petal.Width 1.0000000     1</span></span>
<span id="cb14-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2             5 Petal.Length 0.3333333     1</span></span>
<span id="cb14-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3             5  Petal.Width 0.6666667     1</span></span>
<span id="cb14-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4             5  Petal.Width 1.0000000     1</span></span>
<span id="cb14-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5             8  Petal.Width 0.3333333     1</span></span>
<span id="cb14-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6             8  Petal.Width 0.6666667     1</span></span></code></pre></div>
</details>
</div>
<p>Hacemos el join con la info de cada nodo terminal para cada observación con las variables que llevan a cada nodo terminal (en cada árbol)</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">final <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> nodos_terminales_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb15-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(info_modelo, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nodo_terminal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"arbol"</span>))</span>
<span id="cb15-3"></span>
<span id="cb15-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># para el individuo 30</span></span>
<span id="cb15-5"></span>
<span id="cb15-6">final <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb15-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(id <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>)</span>
<span id="cb15-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 7 × 5</span></span>
<span id="cb15-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   id    arbol nodo_terminal variables     peso</span></span>
<span id="cb15-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;</span></span>
<span id="cb15-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 30    1                 1 Petal.Width    1  </span></span>
<span id="cb15-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 30    2                 3 Petal.Width    0.5</span></span>
<span id="cb15-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 30    2                 3 Sepal.Length   1  </span></span>
<span id="cb15-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4 30    3                 3 Petal.Length   0.5</span></span>
<span id="cb15-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5 30    3                 3 Sepal.Length   1  </span></span>
<span id="cb15-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6 30    4                 1 Petal.Width    1  </span></span>
<span id="cb15-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 7 30    5                 1 Petal.Length   1</span></span></code></pre></div>
</details>
</div>
<p>Agregamos la info para cada individuo, de forma que contemos cuántas veces aparece cada variable, sumamos los pesos y ordenamos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">res <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> final <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(id, variables) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb16-4">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">total =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>(),</span>
<span id="cb16-5">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ponderado =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(peso)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb16-8">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">importancia_caso =</span> total <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(total),</span>
<span id="cb16-9">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">importancia_ponderada =</span> ponderado <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(ponderado)</span>
<span id="cb16-10">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb16-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">top_n</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, importancia_ponderada) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb16-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb16-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(id), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(importancia_ponderada))</span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">res <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb17-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(id <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>)</span>
<span id="cb17-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 3 × 6</span></span>
<span id="cb17-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   id    variables    total ponderado importancia_caso importancia_ponderada</span></span>
<span id="cb17-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;chr&gt; &lt;chr&gt;        &lt;int&gt;     &lt;dbl&gt;            &lt;dbl&gt;                 &lt;dbl&gt;</span></span>
<span id="cb17-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 30    Petal.Width      3       2.5            0.429                 0.417</span></span>
<span id="cb17-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 30    Sepal.Length     2       2              0.286                 0.333</span></span>
<span id="cb17-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 30    Petal.Length     2       1.5            0.286                 0.25</span></span></code></pre></div>
</details>
</div>
<p>Y esa sería la importancia de las variables específica para la observación 30</p>
</section>
<section id="todo-junto." class="level2">
<h2 class="anchored" data-anchor-id="todo-junto.">Todo junto.</h2>
<p>Nos podemos crear una funcioncita que lo haga todo.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">getIndividualImportance <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(modelo, data, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">top =</span> modelo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>num.independent.variables, ...){</span>
<span id="cb18-2">    </span>
<span id="cb18-3"> params_ellipsis <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(...)</span>
<span id="cb18-4">  </span>
<span id="cb18-5">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># get terminalNodes</span></span>
<span id="cb18-6">  nodos_terminales <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(modelo, data, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"terminalNodes"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>predictions</span>
<span id="cb18-7">  </span>
<span id="cb18-8">  nodos_terminales_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> nodos_terminales <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb18-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>() </span>
<span id="cb18-10">  nodos_terminales_df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>id <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rownames</span>(data)</span>
<span id="cb18-11">  nodos_terminales_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  nodos_terminales_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-12">      dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(id, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">everything</span>())</span>
<span id="cb18-13">      </span>
<span id="cb18-14">  </span>
<span id="cb18-15">  </span>
<span id="cb18-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colnames</span>(nodos_terminales_df)[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ncol</span>(nodos_terminales_df)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb18-17">  </span>
<span id="cb18-18">  nodos_terminales_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> nodos_terminales_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb18-19">    tidyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>( <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colnames</span>(nodos_terminales_df)[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"arbol"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nodo_terminal"</span>)</span>
<span id="cb18-20">  </span>
<span id="cb18-21">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># get variables_path for each tree and terminal node</span></span>
<span id="cb18-22">  info_modelo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">extraerVariablesPorModelo</span>(modelo, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">parallel =</span> params_ellipsis<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>parallel)</span>
<span id="cb18-23">  info_modelo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>arbol <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(info_modelo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>arbol)</span>
<span id="cb18-24">  </span>
<span id="cb18-25">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># join both</span></span>
<span id="cb18-26">  </span>
<span id="cb18-27">  final <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> nodos_terminales_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb18-28">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(info_modelo, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nodo_terminal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"arbol"</span>))</span>
<span id="cb18-29">  </span>
<span id="cb18-30">  res <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> final <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-31">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(id, variables) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-32">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb18-33">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">total =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>(),</span>
<span id="cb18-34">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ponderado =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(peso)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-35">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-36">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># para poder comparar luego observaciones, para cadda individuo, divido las veces qeu </span></span>
<span id="cb18-37">     <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># aparece una variable por el total de veces que han aparecido todas sus variables</span></span>
<span id="cb18-38">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb18-39">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">importancia_caso =</span> total <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(total),</span>
<span id="cb18-40">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">importancia_ponderada =</span> ponderado <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(ponderado)</span>
<span id="cb18-41">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb18-42">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">top_n</span>(top, importancia_ponderada) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb18-43">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb18-44">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(id), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(importancia_ponderada))</span>
<span id="cb18-45">  </span>
<span id="cb18-46">}</span></code></pre></div>
</details>
</div>
<p>Y comprobamos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">explicatividad_iris <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">getIndividualImportance</span>(rg_iris, iris, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">parallel =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>(explicatividad_iris)</span></code></pre></div>
</details>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-8ed300990c16c588b585" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-8ed300990c16c588b585">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516"],["1","1","1","2","2","2","3","3","3","4","4","4","5","5","5","6","6","6","7","7","7","8","8","8","9","9","9","10","10","10","11","11","11","12","12","12","13","13","13","14","14","14","15","15","15","15","16","16","16","16","17","17","17","18","18","18","19","19","19","19","20","20","20","21","21","21","22","22","22","23","23","23","24","24","24","25","25","25","26","26","26","27","27","27","28","28","28","29","29","29","30","30","30","31","31","31","32","32","32","33","33","33","34","34","34","34","35","35","35","36","36","36","37","37","37","37","38","38","38","39","39","39","40","40","40","41","41","41","42","42","42","43","43","43","44","44","44","45","45","45","46","46","46","47","47","47","48","48","48","49","49","49","50","50","50","51","51","51","51","52","52","52","52","53","53","53","53","54","54","54","54","55","55","55","55","56","56","56","56","57","57","57","57","58","58","58","58","59","59","59","59","60","60","60","60","61","61","61","61","62","62","62","62","63","63","63","63","64","64","64","64","65","65","65","65","66","66","66","66","67","67","67","67","68","68","68","68","69","69","69","69","70","70","70","70","71","71","71","71","72","72","72","72","73","73","73","73","74","74","74","74","75","75","75","75","76","76","76","76","77","77","77","77","78","78","78","78","79","79","79","79","80","80","80","80","81","81","81","81","82","82","82","82","83","83","83","83","84","84","84","84","85","85","85","85","86","86","86","86","87","87","87","87","88","88","88","88","89","89","89","89","90","90","90","90","91","91","91","91","92","92","92","92","93","93","93","93","94","94","94","94","95","95","95","95","96","96","96","96","97","97","97","97","98","98","98","98","99","99","99","99","100","100","100","100","101","101","101","102","102","102","102","103","103","103","104","104","104","105","105","105","106","106","106","107","107","107","107","108","108","108","109","109","109","110","110","110","111","111","111","112","112","112","113","113","113","114","114","114","114","115","115","115","115","116","116","116","117","117","117","118","118","118","119","119","119","120","120","120","120","121","121","121","122","122","122","122","123","123","123","124","124","124","125","125","125","126","126","126","127","127","127","128","128","128","129","129","129","130","130","130","130","131","131","131","132","132","132","133","133","133","134","134","134","134","135","135","135","135","136","136","136","137","137","137","138","138","138","139","139","139","140","140","140","141","141","141","142","142","142","143","143","143","143","144","144","144","145","145","145","146","146","146","147","147","147","148","148","148","149","149","149","150","150","150","150"],["Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Petal.Width","Petal.Length","Sepal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width"],[3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,4,2,1,2,4,2,1,2,3,2,2,3,2,2,4,2,1,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,1,3,2,2,3,2,2,3,2,2,1,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,7,5,2,3,7,5,2,3,7,5,2,3,6,7,3,2,7,5,2,3,7,5,2,3,7,5,2,3,6,7,3,1,7,5,2,3,6,5,2,1,6,6,3,1,7,5,2,3,7,6,3,3,7,5,2,3,7,5,2,3,7,5,2,3,7,5,2,3,7,5,2,3,7,6,3,3,7,6,3,3,8,5,5,1,7,5,2,3,7,6,3,3,7,5,2,3,7,5,2,3,7,5,2,3,7,5,2,3,8,7,3,5,7,5,2,3,7,6,3,3,6,7,3,2,6,7,3,2,7,5,2,3,9,7,3,5,6,5,2,1,7,5,2,3,7,5,2,3,7,6,3,3,7,5,2,3,6,7,3,2,6,7,3,2,7,5,2,3,7,6,3,3,6,6,3,1,7,5,2,3,7,5,2,3,7,5,2,3,7,5,2,3,6,6,3,1,7,5,2,3,8,4,4,8,4,5,1,8,4,4,8,5,4,8,4,4,8,4,4,6,7,3,1,8,5,4,8,5,4,8,4,4,8,4,4,8,4,4,8,4,4,7,5,5,1,8,4,5,1,8,4,4,8,5,4,8,4,4,8,4,4,8,7,3,4,8,4,4,8,4,4,1,8,4,4,8,4,4,8,4,4,8,5,4,8,5,4,8,4,4,8,4,4,9,7,3,5,8,4,4,8,4,4,8,4,4,9,6,3,5,9,7,3,4,8,4,4,8,4,4,8,5,4,8,5,5,8,4,4,8,4,4,8,4,4,8,4,5,1,8,4,4,8,4,4,8,4,4,7,5,4,8,4,4,8,4,4,8,6,4,1],[2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,3.33333333333333,2,1,0.666666666666667,3.33333333333333,2,1,0.666666666666667,2.5,2,1.5,2.5,2,1.5,3.33333333333333,2,1,0.666666666666667,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.66666666666667,2,1.5,0.333333333333333,2.5,2,1.5,2.5,2,1.5,2.66666666666667,2,1.5,0.333333333333333,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,4.55,3.65,2.2,1.1,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,4.33333333333333,3.66666666666667,2.33333333333333,0.666666666666667,5.16666666666667,2.5,2,1.33333333333333,4.16666666666667,3,2,0.333333333333333,4.3,3.4,2.2,0.6,5.16666666666667,2.5,2,1.33333333333333,5.3,2.9,2.2,1.6,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.3,2.9,2.2,1.6,5.3,2.9,2.2,1.6,5.83333333333333,3.25,2.66666666666667,0.25,5.16666666666667,2.5,2,1.33333333333333,5.3,2.9,2.2,1.6,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.66666666666667,3.91666666666667,2.25,2.16666666666667,5.16666666666667,2.5,2,1.33333333333333,5.3,2.9,2.2,1.6,4.55,3.65,2.2,1.1,4.55,3.65,2.2,1.1,5.16666666666667,2.5,2,1.33333333333333,6.06666666666667,4.06666666666667,2.2,2.16666666666667,4.16666666666667,3,2,0.333333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.3,2.9,2.2,1.6,5.16666666666667,2.5,2,1.33333333333333,4.55,3.65,2.2,1.1,4.55,3.65,2.2,1.1,5.16666666666667,2.5,2,1.33333333333333,5.3,2.9,2.2,1.6,4.3,3.4,2.2,0.6,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,4.3,3.4,2.2,0.6,5.16666666666667,2.5,2,1.33333333333333,5.25,2.66666666666667,2.58333333333333,5.41666666666667,3,2.83333333333333,0.25,5.25,2.66666666666667,2.58333333333333,5.5,2.83333333333333,2.66666666666667,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,4.33333333333333,3.66666666666667,2.33333333333333,0.666666666666667,5.5,2.83333333333333,2.66666666666667,5.5,2.83333333333333,2.66666666666667,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.16666666666667,3.25,2.83333333333333,0.25,5.41666666666667,3,2.83333333333333,0.25,5.25,2.66666666666667,2.58333333333333,5.5,2.83333333333333,2.66666666666667,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.55,3.8,2.25,1.9,5.25,2.66666666666667,2.58333333333333,5.5,3,2.25,0.25,5.25,2.66666666666667,2.58333333333333,5.58333333333333,2.66666666666667,2.25,5.25,2.66666666666667,2.58333333333333,5.5,2.83333333333333,2.66666666666667,5.66666666666667,2.91666666666667,2.41666666666667,5.58333333333333,2.66666666666667,2.25,5.25,2.66666666666667,2.58333333333333,6.06666666666667,4.06666666666667,2.2,2.16666666666667,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.9,3.8,2.2,2.1,5.95,3.95,2.2,1.9,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.5,2.83333333333333,2.66666666666667,5.75,3.08333333333333,2.66666666666667,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.41666666666667,3,2.83333333333333,0.25,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5,2.91666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.66666666666667,3.08333333333333,3,0.25],[0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.444444444444444,0.222222222222222,0.111111111111111,0.222222222222222,0.444444444444444,0.222222222222222,0.111111111111111,0.222222222222222,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.444444444444444,0.222222222222222,0.111111111111111,0.222222222222222,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.375,0.25,0.25,0.125,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.375,0.25,0.25,0.125,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.333333333333333,0.388888888888889,0.166666666666667,0.111111111111111,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.352941176470588,0.411764705882353,0.176470588235294,0.0588235294117647,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.428571428571429,0.357142857142857,0.142857142857143,0.0714285714285714,0.375,0.375,0.1875,0.0625,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.368421052631579,0.315789473684211,0.157894736842105,0.157894736842105,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.368421052631579,0.315789473684211,0.157894736842105,0.157894736842105,0.368421052631579,0.315789473684211,0.157894736842105,0.157894736842105,0.421052631578947,0.263157894736842,0.263157894736842,0.0526315789473684,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.368421052631579,0.315789473684211,0.157894736842105,0.157894736842105,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.347826086956522,0.304347826086957,0.130434782608696,0.217391304347826,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.368421052631579,0.315789473684211,0.157894736842105,0.157894736842105,0.333333333333333,0.388888888888889,0.166666666666667,0.111111111111111,0.333333333333333,0.388888888888889,0.166666666666667,0.111111111111111,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.375,0.291666666666667,0.125,0.208333333333333,0.428571428571429,0.357142857142857,0.142857142857143,0.0714285714285714,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.368421052631579,0.315789473684211,0.157894736842105,0.157894736842105,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.333333333333333,0.388888888888889,0.166666666666667,0.111111111111111,0.333333333333333,0.388888888888889,0.166666666666667,0.111111111111111,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.368421052631579,0.315789473684211,0.157894736842105,0.157894736842105,0.375,0.375,0.1875,0.0625,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.375,0.375,0.1875,0.0625,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.5,0.25,0.25,0.444444444444444,0.222222222222222,0.277777777777778,0.0555555555555556,0.5,0.25,0.25,0.470588235294118,0.294117647058824,0.235294117647059,0.5,0.25,0.25,0.5,0.25,0.25,0.352941176470588,0.411764705882353,0.176470588235294,0.0588235294117647,0.470588235294118,0.294117647058824,0.235294117647059,0.470588235294118,0.294117647058824,0.235294117647059,0.5,0.25,0.25,0.5,0.25,0.25,0.5,0.25,0.25,0.5,0.25,0.25,0.388888888888889,0.277777777777778,0.277777777777778,0.0555555555555556,0.444444444444444,0.222222222222222,0.277777777777778,0.0555555555555556,0.5,0.25,0.25,0.470588235294118,0.294117647058824,0.235294117647059,0.5,0.25,0.25,0.5,0.25,0.25,0.363636363636364,0.318181818181818,0.136363636363636,0.181818181818182,0.5,0.25,0.25,0.470588235294118,0.235294117647059,0.235294117647059,0.0588235294117647,0.5,0.25,0.25,0.5,0.25,0.25,0.5,0.25,0.25,0.470588235294118,0.294117647058824,0.235294117647059,0.470588235294118,0.294117647058824,0.235294117647059,0.5,0.25,0.25,0.5,0.25,0.25,0.375,0.291666666666667,0.125,0.208333333333333,0.5,0.25,0.25,0.5,0.25,0.25,0.5,0.25,0.25,0.391304347826087,0.260869565217391,0.130434782608696,0.217391304347826,0.391304347826087,0.304347826086957,0.130434782608696,0.173913043478261,0.5,0.25,0.25,0.5,0.25,0.25,0.470588235294118,0.294117647058824,0.235294117647059,0.444444444444444,0.277777777777778,0.277777777777778,0.5,0.25,0.25,0.5,0.25,0.25,0.5,0.25,0.25,0.444444444444444,0.222222222222222,0.277777777777778,0.0555555555555556,0.5,0.25,0.25,0.5,0.25,0.25,0.5,0.25,0.25,0.4375,0.3125,0.25,0.5,0.25,0.25,0.5,0.25,0.25,0.421052631578947,0.315789473684211,0.210526315789474,0.0526315789473684],[0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.476190476190476,0.285714285714286,0.142857142857143,0.0952380952380952,0.476190476190476,0.285714285714286,0.142857142857143,0.0952380952380952,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.476190476190476,0.285714285714286,0.142857142857143,0.0952380952380952,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.41025641025641,0.307692307692308,0.230769230769231,0.0512820512820513,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.41025641025641,0.307692307692308,0.230769230769231,0.0512820512820513,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.395652173913043,0.317391304347826,0.191304347826087,0.0956521739130435,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.393939393939394,0.333333333333333,0.212121212121212,0.0606060606060606,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.43859649122807,0.315789473684211,0.210526315789474,0.0350877192982456,0.40952380952381,0.323809523809524,0.20952380952381,0.0571428571428571,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.441666666666667,0.241666666666667,0.183333333333333,0.133333333333333,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.441666666666667,0.241666666666667,0.183333333333333,0.133333333333333,0.441666666666667,0.241666666666667,0.183333333333333,0.133333333333333,0.486111111111111,0.270833333333333,0.222222222222222,0.0208333333333333,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.441666666666667,0.241666666666667,0.183333333333333,0.133333333333333,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.404761904761905,0.279761904761905,0.160714285714286,0.154761904761905,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.441666666666667,0.241666666666667,0.183333333333333,0.133333333333333,0.395652173913043,0.317391304347826,0.191304347826087,0.0956521739130435,0.395652173913043,0.317391304347826,0.191304347826087,0.0956521739130435,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.418390804597701,0.280459770114942,0.151724137931035,0.149425287356322,0.43859649122807,0.315789473684211,0.210526315789474,0.0350877192982456,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.441666666666667,0.241666666666667,0.183333333333333,0.133333333333333,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.395652173913043,0.317391304347826,0.191304347826087,0.0956521739130435,0.395652173913043,0.317391304347826,0.191304347826087,0.0956521739130435,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.441666666666667,0.241666666666667,0.183333333333333,0.133333333333333,0.40952380952381,0.323809523809524,0.20952380952381,0.0571428571428571,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.40952380952381,0.323809523809524,0.20952380952381,0.0571428571428571,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.5,0.253968253968254,0.246031746031746,0.471014492753623,0.260869565217391,0.246376811594203,0.0217391304347826,0.5,0.253968253968254,0.246031746031746,0.5,0.257575757575758,0.242424242424242,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.393939393939394,0.333333333333333,0.212121212121212,0.0606060606060606,0.5,0.257575757575758,0.242424242424242,0.5,0.257575757575758,0.242424242424242,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.449275362318841,0.282608695652174,0.246376811594203,0.0217391304347826,0.471014492753623,0.260869565217391,0.246376811594203,0.0217391304347826,0.5,0.253968253968254,0.246031746031746,0.5,0.257575757575758,0.242424242424242,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.411111111111111,0.281481481481481,0.166666666666667,0.140740740740741,0.5,0.253968253968254,0.246031746031746,0.5,0.272727272727273,0.204545454545455,0.0227272727272727,0.5,0.253968253968254,0.246031746031746,0.531746031746032,0.253968253968254,0.214285714285714,0.5,0.253968253968254,0.246031746031746,0.5,0.257575757575758,0.242424242424242,0.515151515151515,0.265151515151515,0.21969696969697,0.531746031746032,0.253968253968254,0.214285714285714,0.5,0.253968253968254,0.246031746031746,0.418390804597701,0.280459770114942,0.151724137931035,0.149425287356322,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.421428571428571,0.271428571428571,0.157142857142857,0.15,0.425,0.282142857142857,0.157142857142857,0.135714285714286,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.5,0.257575757575758,0.242424242424242,0.5,0.268115942028986,0.231884057971014,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.471014492753623,0.260869565217391,0.246376811594203,0.0217391304347826,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.476190476190476,0.277777777777778,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.472222222222222,0.256944444444444,0.25,0.0208333333333333]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>variables<\/th>\n      <th>total<\/th>\n      <th>ponderado<\/th>\n      <th>importancia_caso<\/th>\n      <th>importancia_ponderada<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="agrupando-observaciones-con-similar-importancia-de-variables" class="level2">
<h2 class="anchored" data-anchor-id="agrupando-observaciones-con-similar-importancia-de-variables">Agrupando observaciones con similar importancia de variables</h2>
<p>Podríamos hacer ahora un PCA pero yo voy a utilizar un CA usando la importancia_ponderada</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"></span>
<span id="cb21-2">  tabla_para_diagonalizar <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xtabs</span>(ponderado <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> id<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> variables, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data=</span> explicatividad_iris)</span>
<span id="cb21-3">  tabla_para_diagonalizar</span>
<span id="cb21-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      variables</span></span>
<span id="cb21-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; id    Petal.Length Petal.Width Sepal.Length Sepal.Width</span></span>
<span id="cb21-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   1      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   10     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   100    2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   101    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   102    2.8333333   5.4166667    3.0000000   0.2500000</span></span>
<span id="cb21-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   103    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   104    2.8333333   5.5000000    2.6666667   0.0000000</span></span>
<span id="cb21-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   105    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   106    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   107    3.6666667   4.3333333    2.3333333   0.6666667</span></span>
<span id="cb21-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   108    2.8333333   5.5000000    2.6666667   0.0000000</span></span>
<span id="cb21-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   109    2.8333333   5.5000000    2.6666667   0.0000000</span></span>
<span id="cb21-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   11     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   110    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   111    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   112    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   113    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   114    2.8333333   5.1666667    3.2500000   0.2500000</span></span>
<span id="cb21-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   115    2.8333333   5.4166667    3.0000000   0.2500000</span></span>
<span id="cb21-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   116    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   117    2.8333333   5.5000000    2.6666667   0.0000000</span></span>
<span id="cb21-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   118    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   119    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   12     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   120    3.8000000   5.5500000    2.2500000   1.9000000</span></span>
<span id="cb21-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   121    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   122    2.2500000   5.5000000    3.0000000   0.2500000</span></span>
<span id="cb21-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   123    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   124    2.2500000   5.5833333    2.6666667   0.0000000</span></span>
<span id="cb21-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   125    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   126    2.8333333   5.5000000    2.6666667   0.0000000</span></span>
<span id="cb21-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   127    2.4166667   5.6666667    2.9166667   0.0000000</span></span>
<span id="cb21-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   128    2.2500000   5.5833333    2.6666667   0.0000000</span></span>
<span id="cb21-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   129    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   13     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   130    4.0666667   6.0666667    2.2000000   2.1666667</span></span>
<span id="cb21-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   131    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   132    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   133    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   134    3.8000000   5.9000000    2.2000000   2.1000000</span></span>
<span id="cb21-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   135    3.9500000   5.9500000    2.2000000   1.9000000</span></span>
<span id="cb21-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   136    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   137    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   138    2.8333333   5.5000000    2.6666667   0.0000000</span></span>
<span id="cb21-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   139    2.6666667   5.7500000    3.0833333   0.0000000</span></span>
<span id="cb21-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   14     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   140    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   141    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   142    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   143    2.8333333   5.4166667    3.0000000   0.2500000</span></span>
<span id="cb21-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   144    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   145    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   146    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-59"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   147    2.5833333   5.0000000    2.9166667   0.0000000</span></span>
<span id="cb21-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   148    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   149    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   15     1.0000000   3.3333333    2.0000000   0.6666667</span></span>
<span id="cb21-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   150    3.0833333   5.6666667    3.0000000   0.2500000</span></span>
<span id="cb21-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   16     1.0000000   3.3333333    2.0000000   0.6666667</span></span>
<span id="cb21-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   17     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   18     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   19     1.0000000   3.3333333    2.0000000   0.6666667</span></span>
<span id="cb21-68"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   2      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   20     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-70"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   21     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-71"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   22     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-72"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   23     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-73"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   24     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-74"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   25     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-75"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   26     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-76"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   27     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-77"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   28     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-78"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   29     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-79"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   3      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-80"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   30     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-81"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   31     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-82"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   32     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-83"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   33     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-84"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   34     1.5000000   2.6666667    2.0000000   0.3333333</span></span>
<span id="cb21-85"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   35     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-86"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   36     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-87"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   37     1.5000000   2.6666667    2.0000000   0.3333333</span></span>
<span id="cb21-88"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   38     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-89"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   39     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-90"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   4      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-91"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   40     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-92"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   41     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-93"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   42     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-94"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   43     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-95"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   44     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-96"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   45     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-97"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   46     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-98"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   47     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-99"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   48     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-100"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   49     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-101"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   5      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-102"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   50     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-103"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   51     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-104"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   52     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-105"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   53     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-106"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   54     3.6500000   4.5500000    2.2000000   1.1000000</span></span>
<span id="cb21-107"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   55     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-108"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   56     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-109"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   57     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-110"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   58     3.6666667   4.3333333    2.3333333   0.6666667</span></span>
<span id="cb21-111"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   59     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-112"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   6      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-113"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   60     3.0000000   4.1666667    2.0000000   0.3333333</span></span>
<span id="cb21-114"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   61     3.4000000   4.3000000    2.2000000   0.6000000</span></span>
<span id="cb21-115"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   62     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-116"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   63     2.9000000   5.3000000    2.2000000   1.6000000</span></span>
<span id="cb21-117"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   64     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-118"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   65     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-119"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   66     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-120"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   67     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-121"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   68     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-122"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   69     2.9000000   5.3000000    2.2000000   1.6000000</span></span>
<span id="cb21-123"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   7      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-124"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   70     2.9000000   5.3000000    2.2000000   1.6000000</span></span>
<span id="cb21-125"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   71     2.6666667   5.8333333    3.2500000   0.2500000</span></span>
<span id="cb21-126"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   72     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-127"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   73     2.9000000   5.3000000    2.2000000   1.6000000</span></span>
<span id="cb21-128"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   74     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-129"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   75     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-130"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   76     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-131"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   77     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-132"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   78     3.9166667   5.6666667    2.2500000   2.1666667</span></span>
<span id="cb21-133"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   79     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-134"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   8      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-135"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   80     2.9000000   5.3000000    2.2000000   1.6000000</span></span>
<span id="cb21-136"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   81     3.6500000   4.5500000    2.2000000   1.1000000</span></span>
<span id="cb21-137"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   82     3.6500000   4.5500000    2.2000000   1.1000000</span></span>
<span id="cb21-138"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   83     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-139"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   84     4.0666667   6.0666667    2.2000000   2.1666667</span></span>
<span id="cb21-140"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   85     3.0000000   4.1666667    2.0000000   0.3333333</span></span>
<span id="cb21-141"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   86     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-142"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   87     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-143"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   88     2.9000000   5.3000000    2.2000000   1.6000000</span></span>
<span id="cb21-144"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   89     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-145"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   9      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-146"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   90     3.6500000   4.5500000    2.2000000   1.1000000</span></span>
<span id="cb21-147"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   91     3.6500000   4.5500000    2.2000000   1.1000000</span></span>
<span id="cb21-148"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   92     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-149"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   93     2.9000000   5.3000000    2.2000000   1.6000000</span></span>
<span id="cb21-150"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   94     3.4000000   4.3000000    2.2000000   0.6000000</span></span>
<span id="cb21-151"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   95     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-152"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   96     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-153"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   97     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-154"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   98     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-155"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   99     3.4000000   4.3000000    2.2000000   0.6000000</span></span></code></pre></div>
</details>
</div>
<p>Y al hacer un CA podemos ver qué individuos están asociados con las variables pero por la importancia ponderada.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"></span>
<span id="cb22-2">res_ca <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> FactoMineR<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">CA</span>(tabla_para_diagonalizar, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">graph =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb22-3"></span>
<span id="cb22-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fviz_ca</span>(res_ca)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-22-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/29/explicatividad_no_usual/index_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ejemplo-2" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-2">Ejemplo 2</h2>
<p>Utilicemos esto para los datos de Boston Housing</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1">boston_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  MASS<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>Boston</span></code></pre></div>
</details>
</div>
<blockquote class="blockquote">
<p>Housing Values in Suburbs of Boston Description The Boston data frame has 506 rows and 14 columns.</p>
</blockquote>
<blockquote class="blockquote">
<p>Usage Boston Format This data frame contains the following columns:</p>
</blockquote>
<blockquote class="blockquote">
<p>crim per capita crime rate by town.</p>
</blockquote>
<blockquote class="blockquote">
<p>zn proportion of residential land zoned for lots over 25,000 sq.ft.</p>
</blockquote>
<blockquote class="blockquote">
<p>indus proportion of non-retail business acres per town.</p>
</blockquote>
<blockquote class="blockquote">
<p>chas Charles River dummy variable (= 1 if tract bounds river; 0 otherwise).</p>
</blockquote>
<blockquote class="blockquote">
<p>nox nitrogen oxides concentration (parts per 10 million).</p>
</blockquote>
<blockquote class="blockquote">
<p>rm average number of rooms per dwelling.</p>
</blockquote>
<blockquote class="blockquote">
<p>age proportion of owner-occupied units built prior to 1940.</p>
</blockquote>
<blockquote class="blockquote">
<p>dis weighted mean of distances to five Boston employment centres.</p>
</blockquote>
<blockquote class="blockquote">
<p>rad index of accessibility to radial highways.</p>
</blockquote>
<blockquote class="blockquote">
<p>tax full-value property-tax rate per $10,000.</p>
</blockquote>
<blockquote class="blockquote">
<p>ptratio pupil-teacher ratio by town.</p>
</blockquote>
<blockquote class="blockquote">
<p>black 1000(Bk−0.63)^2 where BkBk is the proportion of blacks by town.</p>
</blockquote>
<blockquote class="blockquote">
<p>lstat lower status of the population (percent).</p>
</blockquote>
<blockquote class="blockquote">
<p>medv median value of owner-occupied homes in $1000s.</p>
</blockquote>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">47</span>)</span>
<span id="cb24-2"></span>
<span id="cb24-3">idx <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(boston_df),<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>)</span>
<span id="cb24-4">train_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> boston_df[idx,]</span>
<span id="cb24-5"></span>
<span id="cb24-6">test_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> boston_df[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>idx, ]</span></code></pre></div>
</details>
</div>
<section id="modelo-con-ranger" class="level3">
<h3 class="anchored" data-anchor-id="modelo-con-ranger">Modelo con ranger</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1">rg_boston <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ranger</span>(medv <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> ., <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> train_df, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">num.trees =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>)</span></code></pre></div>
</details>
</div>
<p>Variables importantes a nivel individual</p>
<p>Por simplificar, voy a seleccionar solo las 5 variables más importantes para cada observación</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"></span>
<span id="cb26-2">importancia_individual <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">getIndividualImportance</span>(rg_boston, test_df,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">top =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">parallel =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(importancia_individual)</span>
<span id="cb27-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 1030    6</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1">DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>(importancia_individual)</span></code></pre></div>
</details>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-6c8be787ec44e39a8a0b" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6c8be787ec44e39a8a0b">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783","784","785","786","787","788","789","790","791","792","793","794","795","796","797","798","799","800","801","802","803","804","805","806","807","808","809","810","811","812","813","814","815","816","817","818","819","820","821","822","823","824","825","826","827","828","829","830","831","832","833","834","835","836","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","870","871","872","873","874","875","876","877","878","879","880","881","882","883","884","885","886","887","888","889","890","891","892","893","894","895","896","897","898","899","900","901","902","903","904","905","906","907","908","909","910","911","912","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","930","931","932","933","934","935","936","937","938","939","940","941","942","943","944","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","970","971","972","973","974","975","976","977","978","979","980","981","982","983","984","985","986","987","988","989","990","991","992","993","994","995","996","997","998","999","1000","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1012","1013","1014","1015","1016","1017","1018","1019","1020","1021","1022","1023","1024","1025","1026","1027","1028","1029","1030"],["2","2","2","2","2","7","7","7","7","7","14","14","14","14","14","17","17","17","17","17","19","19","19","19","19","21","21","21","21","21","23","23","23","23","23","24","24","24","24","24","25","25","25","25","25","30","30","30","30","30","31","31","31","31","31","34","34","34","34","34","36","36","36","36","36","37","37","37","37","37","39","39","39","39","39","40","40","40","40","40","43","43","43","43","43","48","48","48","48","48","52","52","52","52","52","53","53","53","53","53","54","54","54","54","54","58","58","58","58","58","60","60","60","60","60","65","65","65","65","65","66","66","66","66","66","71","71","71","71","71","72","72","72","72","72","74","74","74","74","74","76","76","76","76","76","77","77","77","77","77","79","79","79","79","79","80","80","80","80","80","83","83","83","83","83","86","86","86","86","86","89","89","89","89","89","90","90","90","90","90","94","94","94","94","94","97","97","97","97","97","98","98","98","98","98","100","100","100","100","100","108","108","108","108","108","110","110","110","110","110","111","111","111","111","111","112","112","112","112","112","119","119","119","119","119","121","121","121","121","121","123","123","123","123","123","124","124","124","124","124","127","127","127","127","127","130","130","130","130","130","132","132","132","132","132","133","133","133","133","133","142","142","142","142","142","146","146","146","146","146","149","149","149","149","149","154","154","154","154","154","159","159","159","159","159","166","166","166","166","166","167","167","167","167","167","169","169","169","169","169","170","170","170","170","170","172","172","172","172","172","179","179","179","179","179","180","180","180","180","180","182","182","182","182","182","184","184","184","184","184","185","185","185","185","185","187","187","187","187","187","189","189","189","189","189","190","190","190","190","190","192","192","192","192","192","193","193","193","193","193","194","194","194","194","194","195","195","195","195","195","201","201","201","201","201","202","202","202","202","202","207","207","207","207","207","209","209","209","209","209","210","210","210","210","210","214","214","214","214","214","215","215","215","215","215","216","216","216","216","216","218","218","218","218","218","219","219","219","219","219","220","220","220","220","220","222","222","222","222","222","225","225","225","225","225","226","226","226","226","226","228","228","228","228","228","233","233","233","233","233","235","235","235","235","235","237","237","237","237","237","239","239","239","239","239","245","245","245","245","245","246","246","246","246","246","250","250","250","250","250","252","252","252","252","252","255","255","255","255","255","258","258","258","258","258","259","259","259","259","259","262","262","262","262","262","266","266","266","266","266","269","269","269","269","269","270","270","270","270","270","271","271","271","271","271","272","272","272","272","272","275","275","275","275","275","276","276","276","276","276","281","281","281","281","281","282","282","282","282","282","286","286","286","286","286","287","287","287","287","287","291","291","291","291","291","292","292","292","292","292","293","293","293","293","293","296","296","296","296","296","297","297","297","297","297","298","298","298","298","298","299","299","299","299","299","301","301","301","301","301","302","302","302","302","302","305","305","305","305","305","306","306","306","306","306","307","307","307","307","307","308","308","308","308","308","315","315","315","315","315","316","316","316","316","316","323","323","323","323","323","327","327","327","327","327","328","328","328","328","328","331","331","331","331","331","332","332","332","332","332","336","336","336","336","336","337","337","337","337","337","339","339","339","339","339","340","340","340","340","340","342","342","342","342","342","345","345","345","345","345","346","346","346","346","346","348","348","348","348","348","350","350","350","350","350","351","351","351","351","351","352","352","352","352","352","355","355","355","355","355","359","359","359","359","359","361","361","361","361","361","363","363","363","363","363","369","369","369","369","369","376","376","376","376","376","378","378","378","378","378","381","381","381","381","381","386","386","386","386","386","387","387","387","387","387","388","388","388","388","388","389","389","389","389","389","395","395","395","395","395","397","397","397","397","397","398","398","398","398","398","399","399","399","399","399","400","400","400","400","400","403","403","403","403","403","404","404","404","404","404","406","406","406","406","406","409","409","409","409","409","412","412","412","412","412","413","413","413","413","413","415","415","415","415","415","416","416","416","416","416","417","417","417","417","417","418","418","418","418","418","419","419","419","419","419","420","420","420","420","420","423","423","423","423","423","424","424","424","424","424","425","425","425","425","425","427","427","427","427","427","428","428","428","428","428","431","431","431","431","431","434","434","434","434","434","436","436","436","436","436","439","439","439","439","439","444","444","444","444","444","445","445","445","445","445","447","447","447","447","447","448","448","448","448","448","458","458","458","458","458","463","463","463","463","463","464","464","464","464","464","466","466","466","466","466","467","467","467","467","467","471","471","471","471","471","474","474","474","474","474","475","475","475","475","475","480","480","480","480","480","481","481","481","481","481","483","483","483","483","483","485","485","485","485","485","486","486","486","486","486","487","487","487","487","487","491","491","491","491","491","496","496","496","496","496","498","498","498","498","498","499","499","499","499","499","500","500","500","500","500","502","502","502","502","502","503","503","503","503","503"],["lstat","rm","dis","indus","ptratio","lstat","rm","indus","nox","dis","rm","lstat","nox","indus","dis","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","age","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","age","lstat","rm","nox","indus","age","lstat","rm","nox","indus","dis","lstat","rm","nox","dis","indus","rm","lstat","indus","nox","age","rm","lstat","indus","age","dis","lstat","rm","indus","age","nox","rm","lstat","indus","dis","tax","lstat","rm","indus","dis","ptratio","lstat","rm","nox","indus","age","rm","lstat","indus","ptratio","dis","rm","lstat","indus","ptratio","tax","rm","lstat","indus","ptratio","tax","rm","lstat","indus","age","ptratio","rm","lstat","indus","age","ptratio","rm","lstat","indus","age","ptratio","rm","lstat","indus","dis","ptratio","lstat","rm","nox","indus","dis","lstat","rm","indus","nox","dis","lstat","rm","nox","indus","dis","lstat","rm","indus","nox","age","lstat","rm","indus","age","dis","lstat","rm","indus","age","nox","lstat","rm","indus","nox","age","rm","lstat","indus","ptratio","tax","lstat","rm","indus","tax","dis","lstat","rm","nox","indus","ptratio","rm","lstat","indus","ptratio","nox","lstat","rm","indus","nox","ptratio","rm","lstat","indus","dis","ptratio","rm","lstat","indus","age","nox","rm","lstat","indus","age","nox","lstat","rm","nox","dis","indus","lstat","rm","nox","dis","age","lstat","rm","indus","dis","nox","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","dis","lstat","rm","nox","dis","age","lstat","rm","nox","indus","age","lstat","rm","nox","indus","age","lstat","nox","rm","dis","crim","lstat","rm","nox","dis","age","lstat","rm","nox","dis","crim","lstat","nox","rm","dis","age","lstat","rm","nox","age","dis","lstat","rm","nox","age","dis","lstat","rm","nox","age","dis","lstat","rm","nox","dis","crim","lstat","rm","nox","dis","indus","rm","lstat","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","indus","age","nox","rm","lstat","indus","ptratio","age","rm","lstat","indus","ptratio","dis","lstat","rm","dis","ptratio","indus","lstat","rm","indus","age","dis","rm","lstat","indus","age","dis","rm","lstat","indus","dis","ptratio","rm","lstat","indus","ptratio","age","rm","lstat","indus","ptratio","age","rm","lstat","indus","ptratio","age","rm","lstat","indus","ptratio","tax","rm","lstat","indus","dis","ptratio","rm","lstat","indus","age","ptratio","rm","lstat","indus","ptratio","dis","lstat","rm","indus","age","nox","lstat","rm","indus","nox","dis","lstat","rm","nox","indus","age","lstat","rm","indus","nox","dis","lstat","rm","nox","indus","dis","lstat","rm","indus","nox","age","lstat","rm","dis","nox","indus","lstat","rm","nox","indus","age","lstat","rm","nox","indus","dis","lstat","rm","indus","age","nox","lstat","rm","indus","age","nox","lstat","rm","nox","indus","age","lstat","rm","nox","indus","age","lstat","rm","indus","age","nox","lstat","rm","indus","age","nox","lstat","rm","indus","nox","age","rm","lstat","indus","tax","ptratio","lstat","rm","indus","age","nox","lstat","rm","indus","age","nox","lstat","rm","indus","ptratio","tax","rm","lstat","indus","age","tax","rm","lstat","indus","ptratio","tax","rm","lstat","indus","age","nox","rm","lstat","indus","nox","dis","rm","lstat","age","indus","nox","rm","lstat","indus","dis","age","rm","lstat","indus","dis","age","lstat","rm","indus","age","dis","lstat","rm","indus","dis","age","rm","lstat","indus","ptratio","dis","rm","lstat","indus","ptratio","age","rm","lstat","indus","ptratio","age","rm","lstat","indus","age","dis","rm","lstat","indus","age","ptratio","rm","lstat","indus","ptratio","age","rm","lstat","indus","age","ptratio","rm","lstat","indus","ptratio","dis","rm","lstat","indus","ptratio","crim","rm","lstat","indus","tax","dis","lstat","rm","nox","indus","age","lstat","rm","nox","indus","age","lstat","rm","indus","nox","age","rm","lstat","indus","tax","ptratio","rm","lstat","indus","ptratio","age","rm","lstat","indus","age","ptratio","rm","lstat","indus","ptratio","tax","rm","lstat","indus","age","ptratio","rm","lstat","indus","age","ptratio","lstat","rm","indus","ptratio","age","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","dis","rm","lstat","indus","nox","dis","lstat","rm","indus","nox","dis","lstat","rm","indus","nox","age","lstat","rm","dis","indus","ptratio","rm","lstat","indus","age","ptratio","rm","lstat","indus","nox","age","rm","lstat","indus","age","dis","rm","lstat","indus","age","dis","rm","lstat","indus","age","dis","rm","lstat","indus","ptratio","tax","rm","lstat","indus","ptratio","dis","rm","lstat","indus","age","dis","rm","lstat","indus","tax","ptratio","rm","lstat","indus","ptratio","dis","rm","lstat","indus","tax","age","rm","lstat","indus","ptratio","dis","rm","lstat","indus","ptratio","dis","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","nox","age","crim","rm","lstat","nox","dis","crim","lstat","rm","nox","age","indus","lstat","nox","rm","crim","age","lstat","rm","nox","age","dis","lstat","nox","rm","dis","crim","lstat","nox","rm","dis","crim","lstat","nox","rm","dis","age","lstat","nox","rm","dis","crim","lstat","rm","nox","dis","crim","lstat","nox","rm","age","crim","lstat","nox","rm","crim","dis","lstat","nox","rm","dis","crim","lstat","nox","rm","dis","crim","lstat","nox","rm","crim","dis","lstat","nox","rm","dis","crim","lstat","nox","rm","dis","crim","lstat","rm","nox","dis","crim","lstat","nox","rm","dis","age","lstat","rm","nox","dis","age","lstat","nox","rm","dis","crim","lstat","nox","rm","dis","crim","lstat","rm","nox","dis","crim","lstat","nox","rm","dis","age","lstat","rm","nox","dis","crim","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","nox","dis","indus","lstat","rm","nox","dis","indus","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","nox","age","dis","lstat","rm","nox","crim","age","lstat","rm","nox","dis","crim","lstat","nox","rm","crim","age","lstat","nox","rm","crim","dis","lstat","rm","nox","crim","age","lstat","nox","rm","crim","age","lstat","nox","rm","dis","age","lstat","rm","nox","dis","age","lstat","rm","nox","age","dis","lstat","rm","dis","nox","age","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","dis","nox","age","lstat","nox","rm","dis","age","lstat","rm","nox","dis","age","lstat","rm","dis","nox","indus","lstat","rm","nox","dis","age","lstat","rm","nox","dis","indus","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","nox","rm","dis","age","lstat","rm","indus","nox","dis","lstat","rm","indus","dis","nox","lstat","rm","indus","nox","dis","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","dis"],[82,75,49,37,45,77,77,50,48,59,77,71,50,43,45,65,67,43,40,39,64,54,41,35,36,71,56,48,36,37,81,66,53,41,43,71,62,48,40,39,82,64,55,40,49,87,63,48,39,44,71,52,51,37,42,73,56,52,47,34,95,82,51,39,40,84,73,53,44,48,87,83,53,45,39,67,52,35,40,33,78,79,43,47,40,86,73,45,38,43,89,82,44,45,47,79,69,33,37,42,83,87,40,39,46,56,47,29,23,26,86,75,47,42,37,54,51,32,29,28,70,50,35,37,32,77,73,41,39,49,72,77,45,47,49,76,70,41,41,47,78,78,44,43,44,77,73,51,46,53,73,76,50,46,43,79,83,45,46,42,87,84,38,42,44,79,82,39,44,46,60,61,35,31,28,63,60,35,31,33,73,70,38,37,36,74,75,50,43,29,59,49,33,27,27,62,59,38,31,33,80,63,57,62,49,84,65,55,61,52,78,69,52,54,45,85,67,50,44,48,87,63,62,48,50,77,68,54,44,50,81,53,56,47,43,76,49,48,43,39,76,45,51,40,42,88,65,62,57,54,83,64,66,53,47,86,68,65,60,58,79,57,53,43,33,68,51,44,37,36,71,53,49,41,41,76,57,48,46,41,73,60,47,42,32,76,60,50,55,35,48,45,27,21,18,83,56,56,49,36,87,59,60,49,39,83,64,57,56,40,75,75,36,35,30,58,49,39,28,27,61,64,40,38,40,55,53,37,32,30,66,59,38,36,37,62,47,34,27,28,61,50,36,31,31,57,58,30,38,29,65,55,39,33,26,57,51,32,26,23,66,55,38,35,36,71,45,31,35,31,59,41,27,24,26,66,52,30,40,34,82,79,50,50,42,67,68,52,43,51,75,53,45,38,36,80,78,43,41,50,62,52,42,38,40,79,83,47,47,44,72,69,54,39,41,77,57,52,42,44,79,57,43,40,43,68,63,38,41,39,53,57,25,26,23,55,58,23,22,21,67,69,38,29,25,50,54,22,23,19,74,65,34,33,29,69,65,38,35,36,90,74,39,46,44,75,69,44,43,34,72,69,44,38,31,79,79,41,47,39,66,54,33,33,27,77,54,36,38,38,55,46,19,20,18,50,44,17,20,24,56,45,24,19,19,59,52,35,34,26,57,49,25,30,21,71,67,44,35,41,76,71,48,40,34,73,71,40,37,36,61,52,29,31,25,66,58,32,31,26,56,43,29,24,27,60,49,36,26,31,79,59,38,43,34,64,55,36,26,25,62,59,30,28,30,63,49,31,26,28,69,57,36,31,32,75,73,41,37,41,74,78,45,40,40,66,71,48,46,40,66,47,36,30,31,59,58,29,45,29,81,78,44,43,43,64,53,35,35,39,61,60,37,31,34,61,48,32,29,28,59,56,31,32,28,81,72,42,40,46,95,88,58,56,61,91,78,47,46,46,82,79,41,42,45,74,77,50,47,47,73,71,49,40,37,81,70,45,35,33,86,74,44,39,38,86,68,46,45,47,90,70,44,40,42,86,71,45,40,44,70,53,36,39,34,65,61,41,32,30,83,72,46,43,48,72,68,31,37,36,64,57,34,31,37,67,54,33,39,29,62,54,33,35,37,69,49,38,30,31,64,51,51,50,44,67,64,45,46,46,76,54,56,50,49,40,44,34,33,26,43,39,32,29,16,65,53,51,51,39,46,41,38,33,32,61,53,44,47,54,58,51,42,45,51,57,53,44,46,34,55,51,48,47,52,65,50,55,54,59,82,66,57,48,53,78,60,53,65,60,58,49,43,40,50,62,47,42,48,43,71,56,55,61,49,59,51,40,44,55,55,52,45,45,51,78,57,56,50,45,63,60,54,42,30,65,49,51,43,25,52,44,38,41,44,50,49,39,42,46,64,45,42,45,46,54,43,37,39,29,52,42,48,41,47,53,42,38,44,33,73,48,56,46,38,71,52,53,53,33,69,51,47,37,28,71,50,51,42,27,51,40,37,40,30,78,57,60,48,37,83,60,58,47,52,72,50,46,43,39,56,43,44,49,47,80,62,49,59,48,69,49,43,56,50,92,61,60,57,54,81,62,51,58,50,59,47,46,45,36,75,59,47,59,46,80,58,53,51,55,73,60,56,52,41,69,55,52,49,36,88,68,65,57,49,59,46,44,40,37,84,61,59,51,43,72,51,60,49,39,90,63,61,55,39,57,48,43,34,29,83,72,60,61,41,84,66,53,60,55,94,63,63,59,47,68,56,43,36,27,78,65,47,46,49,85,79,58,58,52,86,78,54,54,57,81,68,54,48,53,73,60,48,36,35,71,58,48,36,32],[49.9637598512599,44.4160644910645,24.3260378510378,23.9880591630592,23.6369325119325,49.3313948693206,47.9811072742187,32.0930414356885,27.9945857934635,27.2249799692911,45.539565989566,44.3143606393606,28.6992895992896,27.5273615273615,23.1583194583195,41.3938311688312,39.2115079365079,26.0562770562771,24.7823232323232,20.5645021645022,42.5981601731602,31.6794733044733,24.2708152958153,23.1016594516595,20.1804834054834,43.1855158730159,34.0814033189033,28.1732864357864,23.3054112554113,20.2352453102453,49.9216244539774,39.6736586942469,31.2734242881302,25.2593434343434,23.4628317760671,45.0955097190391,37.0052032934386,29.6342288430524,25.1844877344877,21.0082739156269,51.1549952498482,39.1620050700933,32.6157167179226,25.4251248751249,24.8407899290252,51.7765375147728,38.1046797973269,28.649982860277,23.9528233204704,23.5526101349631,43.7354073214367,33.9784296585767,29.8548104673105,22.9011766011766,22.2355577429107,46.351893612923,35.5246778548249,31.2888292263292,24.1090065163595,21.928305028305,54.3537226662227,50.8747877122877,29.620072982573,22.6428848928849,22.5186327561328,49.5628593628594,49.1221792096792,31.7663336663337,24.374377011877,21.508701021201,52.6937479187479,49.5101898101898,31.3671786546787,24.5763972138972,22.44831002331,42.0463425463425,32.0120837495838,21.5766178266178,19.0196164946165,17.0828754578755,46.2197899322899,45.2951187701188,25.5441586191586,24.2339937839938,22.6580669330669,49.3079781329781,45.5024503274503,25.9288295038295,24.7906343656344,24.353243978244,52.8082617545853,49.3151919975449,28.2205717485129,24.6396145521146,21.7074049316696,44.9115662115662,41.6605672105672,22.2363830613831,21.9751998001998,21.4612248862249,49.7561361024596,48.5900088473618,26.3106455635867,22.9450174825175,20.7691312772195,36.6698412698413,30.768253968254,17.5503968253968,14.3083333333333,13.6884920634921,50.7917735042735,46.1567904317904,27.4206016206016,22.4353951603952,20.7912046287046,34.7156565656566,33.9214646464646,19.7571428571429,17.6459595959596,17.1655122655123,44.0008297258297,32.4585137085137,21.5270562770563,18.3532467532468,17.5399350649351,46.2626105920224,43.6021955169014,25.8526058908412,24.9356088356088,23.2783380018674,45.1659326784327,44.2061119436119,27.0775016650017,27.0249333999334,24.2879717504718,46.3134359104947,43.5565134212193,25.8829365079365,25.6529157117392,23.623778998779,48.3211066711067,45.9240759240759,27.4391941391941,25.3729603729604,24.1826090576091,50.2969447219447,41.9025335775336,30.5066322566323,27.0253524253524,25.5854673104673,46.870077798019,43.6570063923005,30.956717465541,26.3710229313171,24.2428016428016,47.5404882699,46.7649633046692,27.4923909423909,26.5856173238526,22.6119407553231,52.7436799311799,49.8940129315129,24.3059482184482,24.2515248640249,23.1150946275946,46.8941239316239,46.8159534909535,23.810656010656,21.7944902319902,21.6850413475413,38.6008574758575,37.6235264735265,19.5055194805195,18.4676684426684,16.8304279054279,38.9152236652237,38.5803751803752,20.8309163059163,18.8489718614719,18.0586940836941,43.7761072261072,42.3735847485847,23.2911255411255,22.4749167499168,19.4148656898657,44.465811965812,43.3624165050636,28.0015603677368,21.2075199310493,19.0016250089779,34.5539682539683,32.1507936507937,19.3686507936508,15.784126984127,15.2765873015873,38.4095238095238,37.8142857142857,21.9555555555556,18.3426587301587,17.2039682539683,50.7332821590175,41.0700188700189,34.2309532787474,28.5103898552428,27.882226433697,51.243926579956,42.0824675324675,33.0217578989638,29.2931152181152,27.7886842732431,49.4759612119906,43.2138923984512,33.533315377433,27.2785458006046,26.9014387573211,54.2505883005883,39.8012526688997,30.611949814891,25.53335357453,24.5391977303742,53.8536390080508,39.1169616331381,35.9238423341365,28.2896778058543,26.337854955502,49.2081607934549,41.681313784255,31.5676335102806,27.9766425567896,24.8352833441069,49.7456195765019,36.4817564788153,34.3468910174793,22.3708046855106,22.3312517547812,44.5737845487846,33.3232989232989,29.9746558996559,23.131018981019,20.2339799089799,44.9719627594628,31.7920038295038,30.0637432012432,22.3874042624043,20.780192030192,52.5299936174936,37.2270632145632,36.1265886890887,28.9062687312687,25.5504412254412,51.9293401043401,37.9805833055833,36.9155996780997,28.1241217116217,24.3870185370185,52.6126096126096,39.1603271728272,37.424198024198,30.0588383838384,26.4886252636253,45.4922799422799,32.2830086580087,32.0679653679654,22.6895382395382,19.5786796536797,40.8992063492064,30.0285714285714,27.3293650793651,21.7623015873016,18.0539682539683,42.7592685092685,30.968512043512,29.4527472527473,23.1162448662449,20.5175685425685,45.0611943611944,33.9262903762904,28.6949161949162,24.1449966699967,19.7146353646354,42.0621212121212,35.1989538239538,27.7395743145743,21.3473304473304,16.5222943722944,47.3636251820075,37.7632388852977,29.4763379594262,28.5341607738667,18.8966947268418,31.0575396825397,26.4988095238095,17.3297619047619,12.4753968253968,11.8130952380952,51.3380243939067,35.5116515837104,32.2940632896515,24.6280030427089,21.3595817581112,53.3064587373411,36.6985022330611,33.6017472723355,24.9945254092313,22.6681135041429,52.2829795204795,38.6358571983572,33.4676587301587,27.0539155289155,22.7654983904984,49.6317599067599,43.7847541347541,22.0618603618604,20.4895937395937,20.0840603840604,35.5440476190476,32.7388888888889,21.4242063492063,17.7964285714286,15.5281746031746,40.336936266348,38.4908029878618,23.0063492063492,20.8565656565657,18.6011480349716,35.9431096681097,34.3919913419913,18.6191919191919,18.0793650793651,17.3027777777778,39.8513680763681,37.6476384726385,21.0173382173382,20.0828754578755,17.6821844821845,36.0444444444444,31.2190476190476,19.3313492063492,15.9460317460317,14.0650793650794,38.6366161616162,31.1920634920635,22.7051587301587,16.0849567099567,15.5816738816739,37.7587301587302,35.179329004329,19.1916666666667,17.319696969697,16.958658008658,40.5977272727273,35.418253968254,22.6789682539683,15.9435786435786,15.2246753246753,36.9700216450216,30.3698051948052,19.8571428571429,14.9014069264069,14.3809523809524,40.1988095238095,35.4007936507937,22.2190476190476,19.7373015873016,17.225,42.7885281385281,28.6026515151515,20.8757936507936,17.4804834054834,17.2018398268398,37.4900793650794,27.2611111111111,16.6396825396825,14.0694444444444,13.9753968253968,40.8617784992785,33.3265512265512,20.0274891774892,17.4947691197691,17.250487012987,51.6596792096792,46.6621878121878,31.0011682761683,27.3442501942502,26.2501082251082,46.2483849483849,41.3774864024864,29.8478604728605,25.8884032634033,23.7814754689755,46.3080086580087,33.9543650793651,26.3158008658009,23.6606421356421,19.1706349206349,49.847113997114,45.0604270729271,26.6910977910978,26.6032467532468,22.5402777777778,40.6848124098124,32.0536075036075,24.7874098124098,24.5537518037518,17.3515512265512,51.1398906648907,49.5490773115773,28.9651237651238,28.82224997225,24.0953268953269,45.0436091686092,40.7441891441891,25.4160284160284,24.7156038406038,24.3911421911422,49.2662684537685,38.0795843045843,30.5392371517372,25.3600371850372,23.3846792096792,49.434299034299,36.7371989121989,26.7855907980908,24.4628010878011,22.6287573537574,42.194647019647,39.5234376734377,23.7469419469419,22.8684787434787,22.310150960151,33.7166666666667,33.3126623376623,16.6457431457431,15.4630952380952,15.4497474747475,33.8001803751804,33.4091991341991,15.4533189033189,15.2952380952381,13.977380952381,42.8483405483405,40.4795815295815,22.7185064935065,18.5823953823954,16.4488816738817,31.6630952380952,30.922619047619,15.452380952381,14.5166666666667,13.1583333333333,45.6904206904207,39.9593545343545,21.5668081918082,19.6726412476412,18.7164946164946,43.4355133428663,40.2922012627895,23.1476043564279,22.4376484626485,20.041055023408,51.0896298146298,46.9502386502387,25.0852647352647,24.6659756909757,23.9489316239316,45.3202713952714,41.923470973471,28.2408702408702,23.7796231546232,18.9066156066156,43.4894130379424,42.4446248196248,29.3187950937951,22.8286817757406,17.7250615397674,48.8258824508825,48.4873501498502,25.2406690531691,24.7090298590299,22.5052572427572,40.8186688311688,32.2147546897547,21.2680555555556,16.0061327561328,15.9544191919192,46.5033966033966,35.5589688089688,23.3261821511822,20.3582833832834,20.110434010434,33.1738095238095,28.1964285714286,13.0428571428571,12.4107142857143,11.847619047619,33.3138888888889,27.7170634920635,12.675,12.1428571428571,11.6218253968254,34.5361111111111,29.190873015873,14.093253968254,12.8809523809524,12.1690476190476,36.671984959485,34.6903152403152,21.1319347319347,16.82524003774,16.2474025974026,36.0825396825397,28.8952380952381,16.2063492063492,15.0428571428571,13.4404761904762,43.9970265845266,41.7984876234876,27.1804778554779,20.9828615828616,20.3484015984016,46.2228923853924,44.6305555555556,28.5108197358197,20.3356768231768,20.0699439449439,44.583436008436,41.8043956043956,24.2442113442113,21.7384143634144,18.2797924297924,38.5835137085137,32.9700937950938,17.4440115440115,17.1134920634921,14.6243506493506,41.1159312909313,35.5990786990787,19.4836885336885,18.1232017982018,15.3308441558442,35.1313492063492,27.5019841269841,18.0539682539683,14.5321428571429,12.6265873015873,38.9565934065934,30.9721916971917,19.9984126984127,16.3255494505494,14.7706349206349,46.6965049656226,35.5399548164254,24.1154725992961,22.3218062982769,18.8842479416009,38.2363636363636,35.0234126984127,21.850468975469,16.5250721500721,16.4475108225108,37.7617826617827,35.9903846153846,19.0242368742369,16.2904456654457,14.487148962149,38.3142857142857,31.2988095238095,18.0198412698413,15.7857142857143,14.372619047619,42.4759601509601,34.2152583527584,21.8150738150738,15.9842823842824,15.5931374181374,46.6440892440892,43.4914474414474,23.7364357864358,23.493561993562,20.096756021756,45.4554667554668,45.4090687090687,26.034126984127,24.8790598290598,22.1488289488289,43.609151959152,42.8379093129093,30.2489121989122,26.8362554112554,22.9707070707071,39.9339993339993,30.0461788211788,21.7162504162504,16.4108474858475,15.8028110778111,38.3527056277056,36.5507215007215,19.4521284271284,17.7958152958153,17.2388528138528,49.8577579283462,46.5305571879101,26.8975238813474,22.8950551899081,22.587651319269,39.7031440781441,35.5779914529915,21.147619047619,19.6964438339438,16.9244047619048,39.6726911976912,36.8309163059163,23.1091630591631,18.7273629148629,18.6602272727273,37.3844932844933,33.8236568986569,19.4101648351648,16.9909645909646,16.989590964591,37.206376956377,37.1628121878122,20.0038156288156,18.1159257409257,16.5688145188145,48.6616355866356,43.14864996115,26.9828282828283,25.1817834942835,22.7418081918082,59.2993945596887,51.1867261565404,34.9577209555151,34.6455796740239,30.3021942410874,49.5325110347169,49.201173173232,28.1074028912264,27.8889721389721,22.937944000444,50.800013222072,46.3234353881413,25.8688914027149,25.477886002886,23.093450993451,48.592316017316,46.1921051171051,31.376751026751,26.1630785880786,25.350419025419,43.753058379529,42.7659988704106,24.4123179108473,24.046455505279,22.0957072339425,47.8445637695638,43.8864663114663,29.049802974803,19.8219696969697,18.8553751803752,50.0204337329337,46.7584845709846,27.8758241758242,22.1766247641248,21.6913197913198,50.1133490692314,44.0853674103674,28.4966033966034,23.3215452847806,23.1932984499161,52.6442257089316,45.3419617963736,27.8536574536575,22.4395117953941,21.0855821466116,51.1959029360732,45.189155735905,28.2569505657741,22.198535107823,22.1626354510642,42.0599206349206,33.8622655122655,20.3424603174603,19.4530303030303,16.0062049062049,42.5742590742591,37.7547813297813,23.2388084138084,16.9089188589189,15.8150738150738,50.1113525363525,44.9533272283272,28.0812576312576,22.7372211122211,21.8442085692086,42.1617299367299,41.8430236430236,20.0319902319902,19.4701021201021,18.7368548118548,37.97886002886,35.5686507936508,19.4433982683983,17.9224025974026,15.6357864357864,41.6092851592852,35.3834443334443,19.9926434676435,19.9777361527362,17.9348928848929,37.9860084360084,35.1312687312687,18.8951076701077,18.7765318015318,17.3071428571429,39.1072871572872,32.9404761904762,23.3837301587302,16.803354978355,16.3310606060606,40.4763236763237,32.6101981351981,27.6092102342102,25.1421023421023,24.048285048285,37.5789488289488,36.813875013875,27.4644189144189,24.8482989232989,24.437678987679,43.2565725940726,32.3820304695305,31.3258325008325,27.3139596514597,26.2574009324009,27.3781746031746,26.9571428571429,20.0805555555556,14.331746031746,13.4611111111111,28.4872655122655,25.2253968253968,19.8013347763348,16.5963924963925,12.4582251082251,40.9017704517705,29.603663003663,29.3476911976912,23.6567737817738,21.6225996225996,29.2633477633478,25.7901154401154,22.6970779220779,19.2496392496392,16.6266594516595,37.2545870795871,29.6250305250305,27.1693833943834,23.8173215673216,22.2284576534577,36.7339826839827,28.9115079365079,26.5071428571429,22.672113997114,20.0006493506494,34.9048534798535,29.0098595848596,28.0688339438339,22.4212759462759,18.7626984126984,36.4940836940837,29.2281746031746,27.803354978355,23.3786796536797,21.7892496392496,41.8131424131424,30.2298174048174,29.0353285603286,27.3098207348207,25.930217005217,47.6547369297369,34.5698218448218,32.7783882783883,27.3175824175824,27.1077145077145,45.0921162171162,33.7537698412698,31.9179029304029,31.5196234321234,27.5220404595405,36.6619047619048,27.4424603174603,26.1515873015873,22.0305555555556,19.7238095238095,38.062987012987,27.3460317460317,25.9606060606061,22.145670995671,18.9886002886003,42.3004467754468,31.4952561327561,30.5102966477966,29.0035755910756,24.9521742146742,37.7455627705628,27.6291486291486,25.8546176046176,24.0542207792208,20.6119769119769,36.0925324675325,28.5529942279942,27.5421717171717,23.0700937950938,20.237481962482,44.9402861027861,34.2151667776668,33.6041000666001,24.9466866466866,20.913653013653,39.7582167832168,31.6603951603952,31.105994005994,22.5139749139749,17.8093101343101,38.9850566100566,29.6240315240315,29.3010517260517,21.933238983239,16.3401542901543,34.6833333333333,24.5833333333333,24.1154761904762,20.1746031746032,17.8746031746032,34.3360028860029,25.9511904761905,24.775,21.6085497835498,19.3523448773449,37.9200965700966,27.6383116883117,24.6131146631147,22.0568181818182,21.278021978022,33.5801587301587,24.3511904761905,23.9142857142857,20.2297619047619,18.0253968253968,35.659126984127,26.0349206349206,25.627380952381,21.0952380952381,19.0015873015873,35.1545093795094,25.9518398268398,21.8439754689755,21.6111832611833,18.9024891774892,42.1657703407703,32.6043928293928,31.2623404373404,23.7180874680875,21.3798368298368,42.4355616605617,33.6047313797314,30.6721916971917,23.9076617826618,19.9926434676435,42.8408508158508,30.6957653457653,28.5968337218337,20.5278360528361,19.4522089022089,43.8770340770341,30.3017898767899,29.2968337218337,23.8897047397047,18.9422521922522,32.5717171717172,24.2857142857143,21.8195887445887,20.359126984127,18.0050505050505,48.4659561843385,34.2631056851645,33.7201497032379,25.5343952616011,22.1878382238676,49.3293276168276,35.1306152181152,33.3525335775336,26.7550518925519,25.1739621489622,41.524136974137,30.1973304473304,28.7580280830281,22.6092268842269,22.5600455100455,35.4078282828283,27.4559523809524,25.5722222222222,23.0395021645022,20.7015512265512,45.6411519036519,34.0004911754912,30.5989746364746,28.8616605616606,25.6653388278388,40.7537545787546,28.4157120657121,28.1196608946609,25.2760739260739,23.7532106782107,50.0122932622933,35.1526903651904,34.6532259407259,30.1523823398823,29.9050505050505,47.2318736818737,34.3195679320679,32.1453685203685,27.784897047397,27.4784743034743,39.7006493506493,28.1031385281385,27.1689393939394,21.2516594516595,19.9507215007215,44.3550144300144,36.6139804639805,27.9168220668221,27.6480796980797,24.9757936507937,46.1982947607948,36.2775696525697,30.8598013098013,27.9725621600622,27.1547064047064,46.0036955691367,36.2070327548269,28.1217878526702,26.9020257520258,22.6027703505645,44.055525030525,34.1907592407592,27.771978021978,23.0546731046731,20.8441003441003,54.6760739260739,40.5189393939394,36.2433483183483,28.9412087912088,26.4598401598402,37.3619963369963,29.7110500610501,22.8034188034188,22.3220695970696,21.0688034188034,50.9516136641137,35.3995268620269,34.6035797535798,26.4064477189477,23.1882659007659,42.5226356976357,33.7188616938617,32.2370268620269,25.0037629037629,22.398618048618,53.3242056146468,38.9419284147225,31.8776472710296,31.552886002886,26.2244719332955,36.6566738816739,30.7953823953824,25.3648268398268,18.7027777777778,17.2936507936508,52.7263215542627,41.7262301424066,34.7675845396434,32.2287434787435,26.5211308299544,51.5666132070544,39.1927054154995,32.6492895992896,31.8682261366085,26.5620013972955,55.2217143967144,37.9621045621046,37.0146159396159,30.781191031191,25.0210178710179,41.5181734931735,30.2177183927184,28.7529276279276,19.3883366633367,17.0753635253635,48.4545263559969,41.0185226538168,29.9681540681541,27.1781039222216,24.1945995181289,53.2607689695925,48.8054812834225,35.3556241144476,29.4441755956462,28.924636311401,53.5428577141812,47.720993467317,33.5488309076544,30.3247216019275,28.0903682102212,50.765959040959,41.5195290004114,31.0447212917801,30.9014013764014,25.8871809562986,43.3895821498763,37.0788899009487,27.9160080115962,24.238853956501,19.1310444457503,43.6612373737374,35.5108405483405,28.2737012987013,23.766847041847,17.8289682539683],[0.162698412698413,0.148809523809524,0.0972222222222222,0.0734126984126984,0.0892857142857143,0.140255009107468,0.140255009107468,0.0910746812386157,0.087431693989071,0.107468123861566,0.15843621399177,0.146090534979424,0.102880658436214,0.088477366255144,0.0925925925925926,0.148063781321185,0.152619589977221,0.0979498861047836,0.0911161731207289,0.0888382687927107,0.16452442159383,0.138817480719794,0.105398457583548,0.089974293059126,0.0925449871465296,0.167848699763593,0.132387706855792,0.113475177304965,0.0851063829787234,0.0874704491725768,0.167010309278351,0.136082474226804,0.109278350515464,0.0845360824742268,0.088659793814433,0.155361050328228,0.135667396061269,0.105032822757112,0.087527352297593,0.0853391684901532,0.161735700197239,0.126232741617357,0.108481262327416,0.0788954635108481,0.0966469428007889,0.182389937106918,0.132075471698113,0.10062893081761,0.0817610062893082,0.0922431865828092,0.163594470046083,0.119815668202765,0.117511520737327,0.0852534562211982,0.0967741935483871,0.15938864628821,0.122270742358079,0.11353711790393,0.102620087336245,0.074235807860262,0.175600739371534,0.151571164510166,0.0942698706099815,0.0720887245841035,0.0739371534195934,0.161228406909789,0.140115163147793,0.101727447216891,0.0844529750479846,0.0921305182341651,0.159633027522936,0.152293577981651,0.0972477064220184,0.0825688073394495,0.0715596330275229,0.172680412371134,0.134020618556701,0.0902061855670103,0.103092783505155,0.0850515463917526,0.156312625250501,0.158316633266533,0.0861723446893788,0.094188376753507,0.0801603206412826,0.172690763052209,0.146586345381526,0.0903614457831325,0.0763052208835341,0.0863453815261044,0.165120593692022,0.152133580705009,0.0816326530612245,0.0834879406307978,0.0871985157699443,0.17439293598234,0.152317880794702,0.0728476821192053,0.0816777041942605,0.0927152317880795,0.16403162055336,0.171936758893281,0.0790513833992095,0.0770750988142292,0.0909090909090909,0.176100628930818,0.147798742138365,0.0911949685534591,0.0723270440251572,0.0817610062893082,0.172690763052209,0.150602409638554,0.0943775100401606,0.0843373493975904,0.0742971887550201,0.152542372881356,0.144067796610169,0.0903954802259887,0.0819209039548023,0.0790960451977401,0.179487179487179,0.128205128205128,0.0897435897435897,0.0948717948717949,0.0820512820512821,0.15650406504065,0.148373983739837,0.0833333333333333,0.0792682926829268,0.0995934959349594,0.148148148148148,0.15843621399177,0.0925925925925926,0.0967078189300412,0.10082304526749,0.153225806451613,0.141129032258065,0.0826612903225806,0.0826612903225806,0.094758064516129,0.151750972762646,0.151750972762646,0.0856031128404669,0.0836575875486381,0.0856031128404669,0.14638783269962,0.138783269961977,0.096958174904943,0.0874524714828897,0.100760456273764,0.14484126984127,0.150793650793651,0.0992063492063492,0.0912698412698413,0.0853174603174603,0.152215799614644,0.159922928709056,0.0867052023121387,0.0886319845857418,0.0809248554913295,0.165399239543726,0.159695817490494,0.0722433460076046,0.0798479087452472,0.0836501901140684,0.160896130346232,0.167006109979633,0.0794297352342159,0.0896130346232179,0.0936863543788187,0.160427807486631,0.163101604278075,0.0935828877005348,0.0828877005347594,0.0748663101604278,0.159493670886076,0.151898734177215,0.0886075949367089,0.0784810126582278,0.0835443037974684,0.161504424778761,0.154867256637168,0.084070796460177,0.081858407079646,0.079646017699115,0.161220043572985,0.163398692810458,0.108932461873638,0.093681917211329,0.0631808278867102,0.183800623052959,0.152647975077882,0.102803738317757,0.0841121495327103,0.0841121495327103,0.158974358974359,0.151282051282051,0.0974358974358974,0.0794871794871795,0.0846153846153846,0.145719489981785,0.114754098360656,0.103825136612022,0.112932604735883,0.0892531876138433,0.153005464480874,0.1183970856102,0.100182149362477,0.111111111111111,0.0947176684881603,0.146067415730337,0.129213483146067,0.0973782771535581,0.101123595505618,0.0842696629213483,0.16504854368932,0.130097087378641,0.0970873786407767,0.0854368932038835,0.0932038834951456,0.168278529980658,0.121856866537718,0.119922630560928,0.0928433268858801,0.0967117988394584,0.14922480620155,0.131782945736434,0.104651162790698,0.0852713178294574,0.0968992248062016,0.167701863354037,0.109730848861284,0.115942028985507,0.0973084886128364,0.0890269151138716,0.175519630484988,0.113163972286374,0.110854503464203,0.0993071593533487,0.0900692840646651,0.179245283018868,0.106132075471698,0.120283018867925,0.0943396226415094,0.0990566037735849,0.172549019607843,0.127450980392157,0.12156862745098,0.111764705882353,0.105882352941176,0.162109375,0.125,0.12890625,0.103515625,0.091796875,0.16195856873823,0.128060263653484,0.12241054613936,0.112994350282486,0.109227871939736,0.185011709601874,0.133489461358314,0.124121779859485,0.100702576112412,0.0772833723653396,0.177083333333333,0.1328125,0.114583333333333,0.0963541666666667,0.09375,0.172330097087379,0.128640776699029,0.118932038834951,0.0995145631067961,0.0995145631067961,0.182692307692308,0.137019230769231,0.115384615384615,0.110576923076923,0.0985576923076923,0.175903614457831,0.144578313253012,0.113253012048193,0.101204819277108,0.0771084337349398,0.163440860215054,0.129032258064516,0.10752688172043,0.118279569892473,0.0752688172043011,0.186046511627907,0.174418604651163,0.104651162790698,0.0813953488372093,0.0697674418604651,0.175105485232068,0.118143459915612,0.118143459915612,0.10337552742616,0.0759493670886076,0.175403225806452,0.118951612903226,0.120967741935484,0.0987903225806452,0.0786290322580645,0.165009940357853,0.127236580516899,0.113320079522863,0.111332007952286,0.0795228628230616,0.16304347826087,0.16304347826087,0.0782608695652174,0.0760869565217391,0.0652173913043478,0.160664819944598,0.135734072022161,0.10803324099723,0.0775623268698061,0.074792243767313,0.146282973621103,0.15347721822542,0.0959232613908873,0.0911270983213429,0.0959232613908873,0.151515151515152,0.146005509641873,0.101928374655647,0.0881542699724518,0.0826446280991736,0.164588528678304,0.14713216957606,0.0947630922693267,0.0897755610972569,0.0922693266832918,0.182890855457227,0.138643067846608,0.100294985250737,0.079646017699115,0.0825958702064897,0.173789173789174,0.142450142450142,0.102564102564103,0.0883190883190883,0.0883190883190883,0.159663865546218,0.162464985994398,0.0840336134453782,0.106442577030812,0.0812324929971989,0.180555555555556,0.152777777777778,0.108333333333333,0.0916666666666667,0.0722222222222222,0.176470588235294,0.157894736842105,0.0990712074303406,0.0804953560371517,0.0712074303405573,0.179347826086957,0.14945652173913,0.103260869565217,0.0951086956521739,0.0978260869565217,0.198324022346369,0.125698324022346,0.0865921787709497,0.0977653631284916,0.0865921787709497,0.196013289036545,0.136212624584718,0.0897009966777409,0.079734219269103,0.0863787375415282,0.176943699731903,0.13941018766756,0.0804289544235925,0.107238605898123,0.0911528150134048,0.147482014388489,0.142086330935252,0.0899280575539568,0.0899280575539568,0.0755395683453237,0.139004149377593,0.141078838174274,0.107883817427386,0.0892116182572614,0.105809128630705,0.182481751824818,0.128953771289538,0.109489051094891,0.0924574209245742,0.0875912408759124,0.158102766798419,0.154150197628458,0.0849802371541502,0.0810276679841897,0.0988142292490119,0.164456233421751,0.137931034482759,0.111405835543767,0.10079575596817,0.106100795755968,0.141831238779174,0.149012567324955,0.0843806104129264,0.0843806104129264,0.0789946140035907,0.15450643776824,0.148068669527897,0.11587982832618,0.0836909871244635,0.0879828326180258,0.160416666666667,0.11875,0.108333333333333,0.0875,0.0916666666666667,0.170626349892009,0.123110151187905,0.0928725701943845,0.0863930885529158,0.0928725701943845,0.165450121654501,0.153284671532847,0.0924574209245742,0.0997566909975669,0.0948905109489051,0.168253968253968,0.180952380952381,0.0793650793650794,0.0825396825396825,0.073015873015873,0.177993527508091,0.187702265372168,0.0744336569579288,0.0711974110032362,0.0679611650485437,0.170918367346939,0.176020408163265,0.0969387755102041,0.0739795918367347,0.0637755102040816,0.168918918918919,0.182432432432432,0.0743243243243243,0.0777027027027027,0.0641891891891892,0.185929648241206,0.163316582914573,0.085427135678392,0.0829145728643216,0.0728643216080402,0.163507109004739,0.154028436018957,0.0900473933649289,0.0829383886255924,0.0853080568720379,0.17578125,0.14453125,0.076171875,0.08984375,0.0859375,0.164113785557987,0.150984682713348,0.0962800875273523,0.0940919037199125,0.074398249452954,0.160714285714286,0.154017857142857,0.0982142857142857,0.0848214285714286,0.0691964285714286,0.15863453815261,0.15863453815261,0.0823293172690763,0.0943775100401606,0.0783132530120482,0.172774869109948,0.141361256544503,0.0863874345549738,0.0863874345549738,0.0706806282722513,0.187347931873479,0.131386861313869,0.0875912408759124,0.0924574209245742,0.0924574209245742,0.197841726618705,0.165467625899281,0.0683453237410072,0.0719424460431655,0.0647482014388489,0.189393939393939,0.166666666666667,0.0643939393939394,0.0757575757575758,0.0909090909090909,0.197879858657244,0.159010600706714,0.0848056537102474,0.0671378091872792,0.0671378091872792,0.165730337078652,0.146067415730337,0.098314606741573,0.0955056179775281,0.0730337078651685,0.188741721854305,0.162251655629139,0.0827814569536424,0.0993377483443709,0.0695364238410596,0.157777777777778,0.148888888888889,0.0977777777777778,0.0777777777777778,0.0911111111111111,0.158995815899582,0.148535564853556,0.100418410041841,0.0836820083682008,0.0711297071129707,0.16331096196868,0.158836689038031,0.0894854586129754,0.0827740492170022,0.0805369127516778,0.178362573099415,0.152046783625731,0.0847953216374269,0.0906432748538012,0.0730994152046784,0.171428571428571,0.150649350649351,0.0831168831168831,0.0805194805194805,0.0675324675324675,0.181229773462783,0.13915857605178,0.0938511326860841,0.0776699029126214,0.087378640776699,0.172910662824208,0.141210374639769,0.103746397694524,0.0749279538904899,0.0893371757925072,0.188995215311005,0.141148325358852,0.0909090909090909,0.102870813397129,0.0813397129186603,0.179271708683473,0.15406162464986,0.100840336134454,0.0728291316526611,0.0700280112044818,0.171745152354571,0.163434903047091,0.0831024930747922,0.0775623268698061,0.0831024930747922,0.182080924855491,0.141618497109827,0.0895953757225433,0.0751445086705202,0.0809248554913295,0.177377892030848,0.146529562982005,0.0925449871465296,0.0796915167095116,0.0822622107969152,0.159914712153518,0.155650319829424,0.0874200426439232,0.0788912579957356,0.0874200426439232,0.15071283095723,0.158859470468432,0.0916496945010183,0.0814663951120163,0.0814663951120163,0.137214137214137,0.147609147609148,0.0997920997920998,0.0956340956340956,0.0831600831600832,0.189111747851003,0.134670487106017,0.103151862464183,0.0859598853868195,0.0888252148997135,0.163434903047091,0.160664819944598,0.0803324099722992,0.124653739612188,0.0803324099722992,0.164634146341463,0.158536585365854,0.0894308943089431,0.0873983739837398,0.0873983739837398,0.163265306122449,0.135204081632653,0.0892857142857143,0.0892857142857143,0.0994897959183673,0.155612244897959,0.153061224489796,0.0943877551020408,0.0790816326530612,0.086734693877551,0.170868347338936,0.134453781512605,0.0896358543417367,0.0812324929971989,0.0784313725490196,0.159029649595687,0.150943396226415,0.0835579514824798,0.0862533692722372,0.0754716981132075,0.165644171779141,0.147239263803681,0.0858895705521472,0.081799591002045,0.0940695296523517,0.144817073170732,0.134146341463415,0.0884146341463415,0.0853658536585366,0.0929878048780488,0.166058394160584,0.142335766423358,0.0857664233576642,0.0839416058394161,0.0839416058394161,0.154425612052731,0.148775894538606,0.0772128060263653,0.0790960451977401,0.0847457627118644,0.140417457305503,0.146110056925996,0.094876660341556,0.0891840607210626,0.0891840607210626,0.156652360515021,0.152360515021459,0.105150214592275,0.0858369098712446,0.0793991416309013,0.172340425531915,0.148936170212766,0.0957446808510638,0.074468085106383,0.0702127659574468,0.170974155069582,0.147117296222664,0.0874751491053678,0.0775347912524851,0.0755467196819085,0.173387096774194,0.137096774193548,0.092741935483871,0.0907258064516129,0.094758064516129,0.179282868525896,0.139442231075697,0.0876494023904383,0.0796812749003984,0.0836653386454183,0.169291338582677,0.139763779527559,0.0885826771653543,0.078740157480315,0.0866141732283465,0.191256830601093,0.144808743169399,0.0983606557377049,0.10655737704918,0.092896174863388,0.165394402035623,0.155216284987277,0.104325699745547,0.0814249363867685,0.0763358778625954,0.166666666666667,0.144578313253012,0.0923694779116466,0.0863453815261044,0.0963855421686747,0.173076923076923,0.163461538461538,0.0745192307692308,0.0889423076923077,0.0865384615384615,0.176795580110497,0.157458563535912,0.0939226519337017,0.0856353591160221,0.102209944751381,0.169191919191919,0.136363636363636,0.0833333333333333,0.0984848484848485,0.0732323232323232,0.165775401069519,0.144385026737968,0.0882352941176471,0.0935828877005348,0.0989304812834225,0.1875,0.133152173913043,0.103260869565217,0.0815217391304348,0.0842391304347826,0.15421686746988,0.12289156626506,0.12289156626506,0.120481927710843,0.106024096385542,0.160671462829736,0.15347721822542,0.107913669064748,0.11031175059952,0.11031175059952,0.168141592920354,0.119469026548673,0.123893805309735,0.110619469026549,0.108407079646018,0.145985401459854,0.160583941605839,0.124087591240876,0.12043795620438,0.0948905109489051,0.165384615384615,0.15,0.123076923076923,0.111538461538462,0.0615384615384615,0.167095115681234,0.136246786632391,0.131105398457584,0.131105398457584,0.10025706940874,0.154362416107383,0.13758389261745,0.12751677852349,0.110738255033557,0.10738255033557,0.16010498687664,0.139107611548556,0.115485564304462,0.123359580052493,0.141732283464567,0.158904109589041,0.13972602739726,0.115068493150685,0.123287671232877,0.13972602739726,0.156593406593407,0.145604395604396,0.120879120879121,0.126373626373626,0.0934065934065934,0.145118733509235,0.134564643799472,0.12664907651715,0.12401055408971,0.137203166226913,0.154394299287411,0.118764845605701,0.130641330166271,0.128266033254157,0.140142517814727,0.174468085106383,0.140425531914894,0.121276595744681,0.102127659574468,0.112765957446809,0.166666666666667,0.128205128205128,0.113247863247863,0.138888888888889,0.128205128205128,0.162464985994398,0.137254901960784,0.120448179271709,0.112044817927171,0.140056022408964,0.171270718232044,0.129834254143646,0.116022099447514,0.132596685082873,0.11878453038674,0.163218390804598,0.128735632183908,0.126436781609195,0.140229885057471,0.11264367816092,0.160326086956522,0.138586956521739,0.108695652173913,0.119565217391304,0.14945652173913,0.14945652173913,0.141304347826087,0.122282608695652,0.122282608695652,0.138586956521739,0.172566371681416,0.126106194690265,0.123893805309735,0.110619469026549,0.0995575221238938,0.1640625,0.15625,0.140625,0.109375,0.078125,0.178082191780822,0.134246575342466,0.13972602739726,0.117808219178082,0.0684931506849315,0.1625,0.1375,0.11875,0.128125,0.1375,0.14792899408284,0.144970414201183,0.115384615384615,0.124260355029586,0.136094674556213,0.179271708683473,0.126050420168067,0.117647058823529,0.126050420168067,0.128851540616246,0.169278996865204,0.134796238244514,0.115987460815047,0.122257053291536,0.0909090909090909,0.151603498542274,0.122448979591837,0.139941690962099,0.119533527696793,0.137026239067055,0.16012084592145,0.126888217522659,0.114803625377644,0.132930513595166,0.0996978851963746,0.172169811320755,0.113207547169811,0.132075471698113,0.108490566037736,0.089622641509434,0.171084337349398,0.125301204819277,0.127710843373494,0.127710843373494,0.0795180722891566,0.179220779220779,0.132467532467532,0.122077922077922,0.0961038961038961,0.0727272727272727,0.179292929292929,0.126262626262626,0.128787878787879,0.106060606060606,0.0681818181818182,0.166123778501629,0.130293159609121,0.120521172638436,0.130293159609121,0.0977198697068404,0.174107142857143,0.127232142857143,0.133928571428571,0.107142857142857,0.0825892857142857,0.182417582417582,0.131868131868132,0.127472527472527,0.103296703296703,0.114285714285714,0.18,0.125,0.115,0.1075,0.0975,0.153846153846154,0.118131868131868,0.120879120879121,0.134615384615385,0.129120879120879,0.175824175824176,0.136263736263736,0.107692307692308,0.12967032967033,0.105494505494505,0.168292682926829,0.119512195121951,0.104878048780488,0.136585365853659,0.121951219512195,0.185483870967742,0.122983870967742,0.120967741935484,0.11491935483871,0.108870967741935,0.172340425531915,0.131914893617021,0.108510638297872,0.123404255319149,0.106382978723404,0.162087912087912,0.129120879120879,0.126373626373626,0.123626373626374,0.0989010989010989,0.164835164835165,0.12967032967033,0.103296703296703,0.12967032967033,0.101098901098901,0.169133192389006,0.12262156448203,0.112050739957717,0.107822410147992,0.116279069767442,0.16331096196868,0.134228187919463,0.125279642058166,0.116331096196868,0.0917225950782998,0.169117647058824,0.134803921568627,0.127450980392157,0.120098039215686,0.0882352941176471,0.165413533834586,0.12781954887218,0.12218045112782,0.107142857142857,0.0921052631578947,0.164804469273743,0.128491620111732,0.122905027932961,0.111731843575419,0.103351955307263,0.175,0.127083333333333,0.122916666666667,0.10625,0.0895833333333333,0.167832167832168,0.118881118881119,0.13986013986014,0.114219114219114,0.0909090909090909,0.171102661596958,0.119771863117871,0.115969581749049,0.104562737642586,0.0741444866920152,0.164739884393064,0.138728323699422,0.124277456647399,0.0982658959537572,0.0838150289017341,0.151459854014599,0.131386861313869,0.109489051094891,0.111313868613139,0.0748175182481752,0.157894736842105,0.12406015037594,0.0996240601503759,0.112781954887218,0.103383458646617,0.178368121442125,0.119544592030361,0.119544592030361,0.111954459203036,0.0891840607210626,0.180371352785146,0.148541114058355,0.114058355437666,0.0954907161803713,0.0716180371352785,0.156941649899396,0.130784708249497,0.0945674044265594,0.0925553319919517,0.0985915492957746,0.142857142857143,0.132773109243697,0.0974789915966387,0.0974789915966387,0.0873949579831933,0.146757679180887,0.133105802047782,0.0921501706484642,0.0921501706484642,0.0972696245733788,0.152830188679245,0.128301886792453,0.10188679245283,0.0905660377358491,0.1,0.175059952038369,0.143884892086331,0.115107913669065,0.0863309352517986,0.0839328537170264,0.174447174447174,0.142506142506143,0.117936117936118,0.0884520884520884,0.0786240786240786],[0.180374584300577,0.160346803216839,0.0878196312311836,0.0865994915633905,0.0853318863246661,0.164712503737297,0.160204030965672,0.107155397114152,0.0934710710967062,0.0909014356236765,0.16992375369241,0.165352091937913,0.107086901489887,0.102714035549856,0.0864116397698487,0.169299922980905,0.16037426558899,0.106569640311972,0.101359195224226,0.0841083933108473,0.19406906684811,0.144325618699195,0.110573190413737,0.105246740098676,0.0919384209817012,0.182602604114232,0.144107413610585,0.119125946874361,0.0985429651391596,0.0855612909524115,0.186622895155056,0.148312742782232,0.116909997338804,0.0944274520910035,0.0877115206581947,0.177891557077077,0.14597713330745,0.116900311017958,0.099347091654784,0.0828728754068121,0.183680413823512,0.14061761245994,0.117112088753762,0.09129308752289,0.0891949369085286,0.196495398538037,0.144609790502189,0.108728587705036,0.0909025552959028,0.0893837196772792,0.180724823642301,0.14040673412635,0.123366985402109,0.0946329611618868,0.0918824700120276,0.182487770129618,0.139860936436319,0.123184367032792,0.0949173484896042,0.086331909560256,0.183938147770635,0.172165102241244,0.100237133612768,0.0766256679962264,0.076205186991989,0.173600207925952,0.172056669736179,0.111265617044952,0.0853743503042978,0.0753369562914221,0.17712184174369,0.166420806084672,0.105435894637575,0.0826097385341083,0.0754565042800337,0.191992431718459,0.146173898399926,0.0985233690713143,0.0868475639023584,0.0780039975245455,0.168378105399963,0.165009540146152,0.0930570441499403,0.0882841303606331,0.0825430489364916,0.179956124572913,0.166067336961498,0.0946307646125164,0.0904767677577897,0.088880452475343,0.179314980490952,0.16745396264022,0.0958253709626924,0.0836659237762803,0.0737093546066881,0.178574815950561,0.165648378570844,0.0884150419935708,0.087376539961033,0.0853329021321069,0.17897890684338,0.174784204486913,0.0946426099409595,0.0825360341097751,0.0747091053137393,0.199292615596963,0.167218771566598,0.095382591442374,0.0777626811594203,0.0743939786059351,0.185371436146984,0.168455439532082,0.100075188396356,0.0818810042350188,0.0758803088638855,0.171859685968597,0.16792804280428,0.0978076379066478,0.0873562356235624,0.084977783492635,0.200003771481044,0.147538698675062,0.0978502558048013,0.0834238488783943,0.0797269775678867,0.170710740191964,0.16089371039447,0.0953970697079011,0.092013316736564,0.0858979262061528,0.168529599546391,0.164948178894074,0.101035453973887,0.100839303731095,0.0906267602629543,0.169646285386428,0.159547668209595,0.0948092912378627,0.0939667242188251,0.0865339890065165,0.171351442096123,0.162851333064099,0.097302106876575,0.0899750367835474,0.0857539328284009,0.174642169173419,0.145494908255325,0.10592580644664,0.0938380292546959,0.0888384281613448,0.169206057032559,0.157606521271843,0.111757102763686,0.09520224884952,0.0875191395046991,0.167101891985589,0.164375969436447,0.0966340630664005,0.0934468095741744,0.0794795808622956,0.183137777538819,0.173243100456642,0.0843956535362785,0.0842066835556419,0.0802607452347036,0.173360901780495,0.173071916787259,0.0880246063240518,0.0805711283992245,0.0801665114511695,0.182079516395554,0.177469464497766,0.0920071673609409,0.0871116435974927,0.0793888108746599,0.174899881641455,0.1733949446309,0.0936220957569272,0.084714480276278,0.0811626700390745,0.174406801697638,0.168819062743366,0.0927933288491057,0.0895415009956843,0.0773500625094251,0.174718318136786,0.17038277605133,0.110025777476373,0.083330137253632,0.0746625737091472,0.186274761476918,0.173319642322338,0.104413211825611,0.0850896333376118,0.0823535703589612,0.174588744588745,0.171883116883117,0.0997979797979798,0.0833757215007215,0.0781998556998557,0.169393262634449,0.13712861058437,0.114293667040893,0.0951932883313616,0.0930959146367179,0.171098252353776,0.140509073564165,0.110256286807892,0.0978067286080642,0.0927835868889586,0.169438223328735,0.147992782186477,0.114840121155593,0.0934196773993309,0.0921282149223326,0.192037480710047,0.140889389978406,0.108360884300499,0.0903835524762125,0.0868644167446874,0.189959925954324,0.13797870064599,0.126715493242104,0.0997872233010733,0.0929024866155274,0.173880426831996,0.147283794290654,0.111546408163536,0.0988573941936029,0.0877571849615084,0.186662737622897,0.136892144385798,0.128881392185663,0.0839429819343736,0.0837945656839819,0.18457053643389,0.137984674630637,0.12411865796959,0.0957806168986293,0.0837845958963971,0.189755117128535,0.134143476073856,0.126851237136047,0.0944616213603555,0.0876801351484896,0.187607120062477,0.132953797194869,0.12902353103246,0.103236674040245,0.0912515758051472,0.184801922079502,0.135162218169336,0.13137224084733,0.100085842390113,0.0867865428363649,0.181110532229293,0.134803191644844,0.128826843456792,0.103472765520958,0.0911828752620491,0.19074331212696,0.135358526867961,0.134456877853104,0.0951343322412505,0.0820909000154283,0.188475605295882,0.138380513495721,0.125941774559286,0.100287104088947,0.0831980103869505,0.185105058481682,0.134062822699186,0.127501070358213,0.100070324096298,0.0888206430414223,0.193395683953624,0.145606396464766,0.123154146759297,0.1036265951502,0.0846121689469329,0.180912349299446,0.151393349780447,0.119309997051933,0.0918164750422815,0.071063631708793,0.183936408473816,0.14665335489436,0.114471215376412,0.110812274849968,0.0733852222401623,0.201672335600907,0.172070191713049,0.112530921459493,0.0810090702947846,0.0767084106369821,0.19594665799201,0.135540654899658,0.123259783548288,0.0940000116133928,0.0815251212141648,0.195261753616634,0.134426748106451,0.123083323341888,0.0915550381290524,0.0830333827990583,0.189088533527955,0.139731852435288,0.121040357071098,0.0978441791280851,0.0823345330578604,0.194634352575529,0.171704918175506,0.0865170994582759,0.0803513479984068,0.0787610211139623,0.172963735372494,0.159313327926467,0.104254045494921,0.0866006256517205,0.0755628934461051,0.172749191718835,0.164842839348445,0.0985282621256925,0.0893214803279043,0.0796623042182936,0.17405864246058,0.166547173568965,0.0901655783011715,0.087551404742688,0.0837906914178101,0.17672447040518,0.166951833581545,0.0932032736910786,0.0890593146690708,0.0784132349542549,0.185318480434162,0.160509242257314,0.0993899702125923,0.0819847390541478,0.0723140327253438,0.192701327489357,0.155571388987848,0.11324268693346,0.0802242229923028,0.0777140841978747,0.185546585546586,0.172871395598668,0.0943079443079443,0.0851090760181669,0.0833349287894743,0.198037694013304,0.172771970576849,0.110629113433991,0.0777735543589202,0.0742667089008552,0.198230679061778,0.162840778524425,0.106472615855994,0.0799003052354259,0.0771096642410315,0.192338801549328,0.16938178780284,0.106311232627022,0.0944368497000076,0.0824162679425837,0.209747686953569,0.140209076054664,0.102332321817616,0.0856886441445265,0.0843227442492148,0.213618685840908,0.155333966445078,0.094813005924117,0.0801677746122191,0.0796318907430019,0.193199898341742,0.157572346224828,0.0946926202245351,0.0827175844906341,0.0815625863498204,0.170493990791021,0.154000619842204,0.102314086720027,0.0902450501460402,0.0866340205449116,0.173866108828515,0.155554460159723,0.112210001777671,0.0973248242985085,0.0894040431164491,0.200902423678996,0.147307440691389,0.11416833347419,0.102649206662222,0.0831697827359433,0.179306165457245,0.162087867168802,0.0960111431334453,0.0956951322059236,0.081080135891287,0.190561182247365,0.150133992991136,0.116100280151802,0.115005863249423,0.0812719027004741,0.168500463475752,0.163258903827273,0.0954369811041969,0.0949662272561778,0.0793915218956405,0.17458763243647,0.157923213737167,0.0985117380466218,0.0957969141108676,0.0945393108183806,0.185910446995353,0.143696544545601,0.115242404346178,0.0956982535284422,0.0882440724893555,0.192726312024558,0.143224947026117,0.104427254573453,0.0953715442019536,0.0882212762329721,0.183057036961592,0.171468276240511,0.103023609314282,0.0992124891257212,0.0967902427772276,0.184748858447489,0.18253513609678,0.0912095514835241,0.0847292889758643,0.0846561505465615,0.188301840530253,0.18612367205682,0.0860909131104117,0.0852102400848919,0.0778684175620109,0.193883893883894,0.183165527283174,0.102798671916319,0.0840832370244135,0.0744293288410935,0.183023671896504,0.178743462703,0.0893201211120286,0.0839113680154143,0.0760597302504817,0.20397509236795,0.178389975599797,0.0962803937134294,0.0878242912841127,0.0835557795379224,0.184048785351128,0.170729666367752,0.0980830693068978,0.0950747816213918,0.0849197246754575,0.181813629233558,0.167082699822913,0.0892714047518318,0.0877792729216217,0.0852275146759133,0.178778190908368,0.165378583721779,0.111403827380159,0.0938052195448645,0.0745823100852687,0.174656277260813,0.170460340641064,0.117746165035322,0.0916814529146209,0.0711849861034836,0.178196651280593,0.17696113193376,0.0921192301210549,0.0901789410913498,0.0821359753385301,0.188975318662819,0.149142382822938,0.0984632201646091,0.0741024664635776,0.0738630518144407,0.201750093724063,0.154268845158216,0.101198187206864,0.0883222706433119,0.0872470022144642,0.202279326364692,0.171929442508711,0.0795296167247387,0.0756750871080139,0.0722415795586527,0.212190375088464,0.176541805681933,0.0807324840764331,0.0773430391264786,0.0740243655848751,0.207424090757424,0.175320558653892,0.0846441679775013,0.0773630773630774,0.0730873730873731,0.180650172214212,0.170888252415346,0.104098200649925,0.0828829558509361,0.0800364659970571,0.20501443001443,0.164177489177489,0.0920815295815296,0.0854707792207792,0.076366341991342,0.175988106338106,0.16719395049395,0.108721911421911,0.0839314463314463,0.0813936063936064,0.175086713581032,0.169055134680135,0.107995529302347,0.0770290788756698,0.0760225149429695,0.179410205265336,0.168226944082075,0.0975622186889793,0.0874785286254099,0.0735605329166697,0.196854661778131,0.168214764260683,0.0890000588980181,0.0873137350178167,0.0746140339252584,0.189038764556006,0.163673925053235,0.0895801771663841,0.0833250657388588,0.0704866397969846,0.195717822876597,0.153214396250608,0.100579210328514,0.0809590131317151,0.070343104744219,0.196254878622637,0.156031192429177,0.100747671024749,0.0822445816148587,0.0744112590460198,0.199557713528302,0.151880148788143,0.103057575210667,0.0953923346080209,0.0807019142803456,0.18789367880277,0.172105222105222,0.107373311918766,0.0812042857497403,0.0808231490049672,0.18375563339067,0.175135691559049,0.0925753619184276,0.0792722416810008,0.0704970752416008,0.193506493506494,0.158074795574796,0.0910092993426327,0.0797258297258297,0.0725889850889851,0.193512346929203,0.15587817017202,0.0993853021187873,0.0728213320468446,0.0710393504243163,0.179746008647743,0.167597099967042,0.0914698874236447,0.0905339575859807,0.077444146519291,0.168042390962909,0.167870863989163,0.0962444620485286,0.0919743431758219,0.0818810682026948,0.164252926399819,0.161348057675741,0.113931872688935,0.101078174806988,0.0865186706994617,0.200170422726814,0.150607412637488,0.108853385545115,0.0822598871471052,0.079212085603063,0.18663117093774,0.177862391731005,0.0946575592560994,0.0865976413421669,0.0838873616245879,0.183976966525263,0.171699473018119,0.0992528556507285,0.0844835984867459,0.0833492668607711,0.179652235647711,0.16098638666512,0.0956905839258781,0.0891241802440897,0.0765810170221935,0.179514439808557,0.166655729891024,0.104566348683996,0.084739198709787,0.0844354175236528,0.183707583707584,0.166209616209616,0.0953816453816454,0.0834936834936835,0.0834869334869335,0.176752384590864,0.176545426070367,0.0950300029872476,0.0860614049450154,0.0787117079278599,0.18056265523798,0.160106307833581,0.100121811810124,0.0934388997932597,0.0843851880957632,0.16798695342688,0.145004889961871,0.0990303709787962,0.0981461180567251,0.0858419100314091,0.165660572022465,0.164552418639572,0.0940046919439011,0.0932741543109436,0.0767155317740602,0.174870957735188,0.159461051250056,0.089049540112616,0.0877035662749948,0.0794955283767676,0.168430904739397,0.160111282901578,0.108758235794631,0.0906865808945532,0.0878697366565651,0.169585497595074,0.165759685544227,0.0946213872513462,0.0932033159119342,0.0856422761005524,0.184017552959861,0.168794101197947,0.11173001144155,0.076238344988345,0.0725206737706738,0.180905727786379,0.1691084432947,0.100816723963198,0.0802047911903246,0.0784496194984441,0.183565381205976,0.161484862309038,0.104383162624921,0.0854269058050571,0.0849571371791798,0.190739948220767,0.164282470276716,0.100919048745136,0.0813025789688194,0.0763970367630853,0.183497859985926,0.161968300128692,0.101279392708868,0.0795646419635234,0.0794359693586532,0.202211156898657,0.162799353424353,0.09780028998779,0.0935241841491841,0.0769529082029082,0.192208844579048,0.170450480044159,0.104915613606359,0.0763382341260445,0.071399881783629,0.182888147942892,0.164063238059588,0.102486341719918,0.0829825588037267,0.0797233889387174,0.180951630629742,0.179583792459329,0.0859742070042499,0.0835626700433567,0.0804156858877889,0.18436339819835,0.172663353367237,0.0943854284873702,0.0870019543563233,0.0759018759018759,0.186588722687377,0.158670153961634,0.0896531097203743,0.0895862607746016,0.0804255286318067,0.179179285075511,0.165713531751268,0.0891278663684324,0.0885685462336406,0.0816374663072776,0.187116206494197,0.157609933925723,0.111883876357561,0.0803988276476315,0.0781390459620125,0.174091714736876,0.14025891671053,0.118749291329936,0.108138074589687,0.103433484078645,0.160937682350959,0.157661134963062,0.117620637749117,0.106416697744321,0.104658154122822,0.172336942605867,0.129012073583787,0.124804113549133,0.108820556380317,0.104611159093231,0.169001077797374,0.166402116402116,0.123954046639232,0.0884675680971977,0.0830932784636488,0.183788809756552,0.162744495647721,0.127750546944095,0.107073499976726,0.0803756458595168,0.186340639871392,0.134868624162474,0.133702465593126,0.107775734768901,0.0985084265266498,0.16818015955947,0.148219054253537,0.130442976563666,0.110630110630111,0.0955555140899969,0.172875114058409,0.137471139327288,0.126076025031942,0.110521213769474,0.103148295375674,0.177031241850519,0.139332568368713,0.127745266781411,0.109263199986092,0.0963886715693945,0.168622480579002,0.14014424920222,0.135598231612724,0.108315342735633,0.0906410551338088,0.170135588317406,0.136261886261886,0.129619370528461,0.108991513536968,0.101581583399765,0.177550498569607,0.128364405115997,0.123292265648954,0.115965268513039,0.110107078578416,0.183287449729757,0.132960853249315,0.126070724147647,0.105067624683009,0.104260440414287,0.174100834815121,0.130323435680579,0.123235146449432,0.121697387768816,0.10626270447699,0.18015678015678,0.134852384852385,0.128509028509029,0.108258258258258,0.0969228969228969,0.184771781616442,0.132747726922484,0.126022359517505,0.107503257260539,0.0921776713038849,0.174434832063698,0.129877344877345,0.125815656279574,0.119602373571446,0.102895563771852,0.18060077880652,0.132196883393056,0.123706304328314,0.115091965450817,0.098621899100368,0.172691542906854,0.13661719726313,0.131780725919482,0.11038322389997,0.0968300572367558,0.179044964552933,0.136315405488712,0.133880876759363,0.0993891898274368,0.0833213267476216,0.18321758886275,0.145900438527167,0.143345594497668,0.10375103646993,0.0820705536143324,0.187879790891839,0.142766416983284,0.141209887836394,0.10570235654573,0.0787477315188159,0.187477477477477,0.132882882882883,0.130353925353925,0.109051909051909,0.0966194766194766,0.176989705597953,0.133769023073147,0.12770618556701,0.111384277234793,0.0997543550378602,0.186339540884995,0.135814799451163,0.120948966403512,0.108387312932767,0.104560304560305,0.182006280380264,0.131984772228675,0.129616724738676,0.109646405987869,0.0976986277799286,0.18147138414314,0.132493234783311,0.130419241487944,0.107354901248031,0.0967001898299608,0.184538106979052,0.136230130324619,0.114666537894884,0.113444531554768,0.0992256649736965,0.177914642788061,0.137571277761151,0.131908609440255,0.100076318430749,0.0902102819824339,0.182518544776609,0.144536479052608,0.131923405149212,0.102828652828653,0.0859898643769612,0.196969429038395,0.141129955612714,0.131479695272799,0.0943808554153382,0.0894354432285467,0.196758000345444,0.135882465815201,0.131375935972349,0.107128720805851,0.0849428349428349,0.182474606004018,0.136054421768707,0.12223859240666,0.114056733804633,0.100868630280395,0.194642394314613,0.137602834076966,0.135422287964811,0.102547772134944,0.0891077840315969,0.19536367373001,0.139131149378674,0.132089241891222,0.105960601554661,0.0996988599958897,0.184551719885053,0.134210357543691,0.127813458146791,0.100485452818786,0.100266868933536,0.171052310545064,0.132637451115712,0.123537305421363,0.111301942823682,0.100007493848074,0.180757037242186,0.134655410596005,0.121184057966236,0.114303606184794,0.101644906248867,0.177190237298933,0.123546574198748,0.122259395194178,0.109895973591626,0.103274829035699,0.183195213414994,0.128764433572126,0.126934893555773,0.110448286959276,0.10954230954231,0.181661052622591,0.131998338200261,0.123636032770648,0.106864988643835,0.105686439628747,0.191790576573185,0.135763954242215,0.131250914946567,0.102665021505601,0.0963802971049348,0.175663423485206,0.145005863223685,0.110561671551771,0.109497345338929,0.0989140342605689,0.176666519161739,0.138728755841567,0.118010712465779,0.106969644971557,0.103842089501745,0.185125535489484,0.145702345089847,0.113166148300484,0.108257648901512,0.0909568223362755,0.192382205373472,0.149304625505499,0.121275013196411,0.100675428404686,0.0910222722449797,0.187890288405752,0.139240341559929,0.124547588722846,0.0994543257429855,0.0909272857726466,0.183147040867629,0.145642402260049,0.111781464722641,0.109421909789557,0.103278448131389,0.192270240241938,0.133583120234064,0.130579546239924,0.099646972524331,0.0875028901915694,0.177547539447331,0.140788566571448,0.134601364768379,0.104399845109657,0.0935224135641672,0.185153491717524,0.135215029217787,0.110686275246631,0.109558631954465,0.0910571942128315,0.185134716574111,0.155532234320113,0.128105186059732,0.0944584736251403,0.087341670675004,0.176342212556063,0.139552609171928,0.116279546955329,0.107788439728239,0.0886994342138942,0.17720485638163,0.13468283647938,0.112196871475222,0.109512804593156,0.0912783553171667,0.191409755274573,0.13158441789291,0.128300228560194,0.106693903054388,0.0867279648908765,0.194464512848588,0.141534980762147,0.134674134088654,0.0908118813271038,0.0799782834911641,0.177164630186461,0.149976316832968,0.109572775386304,0.0993714951452343,0.0884628867207639,0.165149671223543,0.151334825685031,0.109629842215342,0.0912997692888254,0.0896887947640342,0.168373766396796,0.150066017192821,0.105499468263064,0.0953607597544889,0.0883344912271105,0.175055031175721,0.143170789656591,0.107050763075104,0.10655655647035,0.0892661412286159,0.185822621626879,0.158796102359523,0.119554638165294,0.103806655059962,0.0819316678618858,0.191077625267997,0.155408492552913,0.123736110716417,0.104012459701738,0.078026119273384]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>variables<\/th>\n      <th>total<\/th>\n      <th>ponderado<\/th>\n      <th>importancia_caso<\/th>\n      <th>importancia_ponderada<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="agrupando" class="level3">
<h3 class="anchored" data-anchor-id="agrupando">Agrupando</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1">tabla_diag_boston <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xtabs</span>(ponderado <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> id<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> variables, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data=</span> importancia_individual)</span>
<span id="cb29-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(tabla_diag_boston)</span>
<span id="cb29-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      variables</span></span>
<span id="cb29-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; id         age     crim      dis    indus    lstat      nox  ptratio       rm</span></span>
<span id="cb29-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   100 18.34266  0.00000  0.00000 21.95556 37.81429 17.20397  0.00000 38.40952</span></span>
<span id="cb29-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   108  0.00000  0.00000 28.51039 27.88223 50.73328 34.23095  0.00000 41.07002</span></span>
<span id="cb29-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   110 27.78868  0.00000 29.29312  0.00000 51.24393 33.02176  0.00000 42.08247</span></span>
<span id="cb29-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   111  0.00000  0.00000 27.27855 33.53332 49.47596 26.90144  0.00000 43.21389</span></span>
<span id="cb29-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   112  0.00000  0.00000 24.53920 25.53335 54.25059 30.61195  0.00000 39.80125</span></span>
<span id="cb29-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   119  0.00000  0.00000 26.33785 28.28968 53.85364 35.92384  0.00000 39.11696</span></span>
<span id="cb29-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      variables</span></span>
<span id="cb29-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; id         tax</span></span>
<span id="cb29-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   100  0.00000</span></span>
<span id="cb29-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   108  0.00000</span></span>
<span id="cb29-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   110  0.00000</span></span>
<span id="cb29-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   111  0.00000</span></span>
<span id="cb29-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   112  0.00000</span></span>
<span id="cb29-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   119  0.00000</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1">res_ca <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> FactoMineR<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">CA</span>(tabla_diag_boston, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">graph =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb30-2"></span>
<span id="cb30-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fviz_ca</span>(res_ca)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-30-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/29/explicatividad_no_usual/index_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Podemos hacer un <a href="http://www.sthda.com/english/articles/31-principal-component-methods-in-r-practical-guide/117-hcpc-hierarchical-clustering-on-principal-components-essentials/">HCPC</a> usando las dimensiones obtenidas. Lo que hace es un cluster jerárquico usando las dimensiones obtenidas en la estructura factorial.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1">res_hcpc <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">HCPC</span>(res_ca, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">graph =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb31-2"></span>
<span id="cb31-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fviz_cluster</span>(res_hcpc,</span>
<span id="cb31-4">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">repel =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Avoid label overlapping</span></span>
<span id="cb31-5">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.clust.cent =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Show cluster centers</span></span>
<span id="cb31-6">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">palette =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jco"</span>,         <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Color palette see ?ggpubr::ggpar</span></span>
<span id="cb31-7">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ggtheme =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>(),</span>
<span id="cb31-8">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Factor map"</span></span>
<span id="cb31-9">             )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-31-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/29/explicatividad_no_usual/index_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(res_hcpc, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">choice =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"3D.map"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-32-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/29/explicatividad_no_usual/index_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Una utilidad interesante es la descripción de las variables de los clusters. Dónde nos dice cuales son la variables más importantes para cada uno.</p>
<p>Cuando en un cluster su <code>Intern %</code> para una variable se desvíe mucho de <code>glob %</code> quiere decir que en esa variable la distribución es distinta de en la población general y por tanto es una variables que caracteriza al cluster.</p>
<p>En este caso estaremos encontrando grupos de individuos con mismas variables importantes en el randomForest.</p>
<p>Claramente se ven grupos dónde es muy importante la variable de criminalidad o la edad</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1">res_hcpc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>desc.var</span>
<span id="cb33-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; $`1`</span></span>
<span id="cb33-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          Intern %    glob % Intern freq Glob freq        p.value     v.test</span></span>
<span id="cb33-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; crim    15.592962  2.127929    642.8840   657.2566  0.000000e+00        Inf</span></span>
<span id="cb33-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; nox     20.157813 12.416539    831.0888  3835.1142  2.807733e-52  15.215104</span></span>
<span id="cb33-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; dis     11.939900  9.329212    492.2715  2881.5271  2.572108e-09   5.956809</span></span>
<span id="cb33-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; rm      20.191263 25.487484    832.4679  7872.3559  1.117021e-17  -8.561196</span></span>
<span id="cb33-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; age      4.411035  7.568723    181.8631  2337.7625  1.230524e-18  -8.811891</span></span>
<span id="cb33-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; tax      0.000000  1.001897      0.0000   309.4575  9.327733e-20  -9.096514</span></span>
<span id="cb33-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; ptratio  0.000000  3.118072      0.0000   963.0835  2.250504e-61 -16.529487</span></span>
<span id="cb33-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; indus    0.000000 10.860935      0.0000  3354.6328 2.069270e-222 -31.835808</span></span>
<span id="cb33-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb33-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; $`2`</span></span>
<span id="cb33-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;         Intern %    glob % Intern freq Glob freq        p.value     v.test</span></span>
<span id="cb33-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; age     14.32559  7.568723    803.0250  2337.7625  7.150050e-85  19.521920</span></span>
<span id="cb33-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; nox     19.56112 12.416539   1096.5037  3835.1142  9.886451e-65  16.989118</span></span>
<span id="cb33-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; dis     15.61069  9.329212    875.0616  2881.5271  3.449026e-63  16.779470</span></span>
<span id="cb33-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; rm      21.85203 25.487484   1224.9213  7872.3559  2.382720e-12  -7.010027</span></span>
<span id="cb33-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; tax      0.00000  1.001897      0.0000   309.4575  1.880511e-27 -10.855366</span></span>
<span id="cb33-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; crim     0.00000  2.127929      0.0000   657.2566  2.961603e-58 -16.090764</span></span>
<span id="cb33-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; ptratio  0.00000  3.118072      0.0000   963.0835  1.146579e-85 -19.615212</span></span>
<span id="cb33-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; indus    0.00000 10.860935      0.0000  3354.6328 2.480702e-311 -37.718398</span></span>
<span id="cb33-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb33-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; $`3`</span></span>
<span id="cb33-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;         Intern %    glob % Intern freq Glob freq        p.value     v.test</span></span>
<span id="cb33-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; dis     14.41601  9.329212    885.4575  2881.5271  7.965757e-48  14.528753</span></span>
<span id="cb33-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; indus   15.72645 10.860935    965.9468  3354.6328  4.377749e-39  13.078362</span></span>
<span id="cb33-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; nox     17.05504 12.416539   1047.5513  3835.1142  1.891207e-32  11.860817</span></span>
<span id="cb33-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; rm      24.28797 25.487484   1491.8110  7872.3559  1.531797e-02  -2.424773</span></span>
<span id="cb33-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; tax      0.00000  1.001897      0.0000   309.4575  2.402280e-30 -11.448146</span></span>
<span id="cb33-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; crim     0.00000  2.127929      0.0000   657.2566  1.885153e-64 -16.951216</span></span>
<span id="cb33-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; ptratio  0.00000  3.118072      0.0000   963.0835  8.318594e-95 -20.657729</span></span>
<span id="cb33-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; age      0.00000  7.568723      0.0000  2337.7625 1.165375e-235 -32.779199</span></span>
<span id="cb33-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb33-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; $`4`</span></span>
<span id="cb33-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          Intern %    glob % Intern freq Glob freq        p.value     v.test</span></span>
<span id="cb33-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; age     13.713854  7.568723    994.4487  2337.7625 7.010364e-100  21.214544</span></span>
<span id="cb33-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; indus   15.980898 10.860935   1158.8415  3354.6328  3.363370e-53  15.353354</span></span>
<span id="cb33-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; rm      27.297454 25.487484   1979.4522  7872.3559  6.332137e-05   4.000079</span></span>
<span id="cb33-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; nox     11.031380 12.416539    799.9313  3835.1142  3.337066e-05  -4.149154</span></span>
<span id="cb33-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; tax      0.000000  1.001897      0.0000   309.4575  1.541120e-36 -12.624810</span></span>
<span id="cb33-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; crim     0.000000  2.127929      0.0000   657.2566  1.026729e-77 -18.661061</span></span>
<span id="cb33-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; dis      3.479402  9.329212    252.3059  2881.5271 1.613296e-102 -21.498348</span></span>
<span id="cb33-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; ptratio  0.000000  3.118072      0.0000   963.0835 2.246449e-114 -22.730329</span></span>
<span id="cb33-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb33-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; $`5`</span></span>
<span id="cb33-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;           Intern %    glob % Intern freq Glob freq        p.value     v.test</span></span>
<span id="cb33-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; ptratio 13.4631336  3.118072   731.46909   963.0835  0.000000e+00        Inf</span></span>
<span id="cb33-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; indus   16.0021844 10.860935   869.41894  3354.6328  2.134777e-37  12.779485</span></span>
<span id="cb33-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; rm      30.0450942 25.487484  1632.38800  7872.3559  6.922077e-17   8.348354</span></span>
<span id="cb33-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; age      5.9723379  7.568723   324.48468  2337.7625  4.791243e-07  -5.034489</span></span>
<span id="cb33-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; dis      5.8922388  9.329212   320.13279  2881.5271  6.783780e-24 -10.079838</span></span>
<span id="cb33-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; tax      0.0000000  1.001897     0.00000   309.4575  1.567007e-26 -10.659939</span></span>
<span id="cb33-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; crim     0.2645368  2.127929    14.37262   657.2566  4.931237e-37 -12.714201</span></span>
<span id="cb33-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; nox      1.1050567 12.416539    60.03913  3835.1142 3.406088e-250 -33.783844</span></span>
<span id="cb33-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb33-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; $`6`</span></span>
<span id="cb33-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          Intern %    glob % Intern freq Glob freq        p.value     v.test</span></span>
<span id="cb33-59"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; tax     13.270152  1.001897   309.45748   309.4575  0.000000e+00        Inf</span></span>
<span id="cb33-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; ptratio  9.932087  3.118072   231.61443   963.0835  3.328525e-58  16.083531</span></span>
<span id="cb33-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; indus   15.455762 10.860935   360.42551  3354.6328  2.442145e-12   7.006580</span></span>
<span id="cb33-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; rm      30.502626 25.487484   711.31557  7872.3559  1.684450e-08   5.641633</span></span>
<span id="cb33-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; crim     0.000000  2.127929     0.00000   657.2566  4.470886e-23  -9.892856</span></span>
<span id="cb33-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; dis      2.414161  9.329212    56.29780  2881.5271  1.144880e-43 -13.857568</span></span>
<span id="cb33-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; age      1.455459  7.568723    33.94103  2337.7625  5.050710e-44 -13.916197</span></span>
<span id="cb33-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; nox      0.000000 12.416539     0.00000  3835.1142 2.015379e-140 -25.227201</span></span>
<span id="cb33-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb33-68"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; attr(,"class")</span></span>
<span id="cb33-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "descfreq" "list"</span></span></code></pre></div>
</details>
</div>
<p>Y por supuesto tenemos los datos con el cluster asignado y los valores de cada variable (no son los valores originales de las variables , sino la importancia ponderada que tenían con el procedimiento descrito para cada observación )</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1">res_hcpc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>data.clust <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb34-2">         dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(clust, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">everything</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb34-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_sample</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prop =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb34-4">    DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-287449a47154afb275ba" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-287449a47154afb275ba">{"x":{"filter":"none","vertical":false,"data":[["296","487","121","7","154","464","474","189","425","123","250","351","352","428","416","246","315","269","24","409","58","399","308","302","345","431","226","266","275","2","133","182","17","301","245","447","281","220","111","72","424","43","89","355","170","458","381","218","201","423","316","485","378","119","297","80","30","235","418","404","100"],["4","2","3","3","2","2","2","5","3","2","6","6","5","2","1","4","3","4","3","1","5","1","5","5","5","2","4","4","5","5","1","5","3","5","4","1","4","3","3","3","2","5","5","5","2","2","2","3","5","2","3","3","1","3","4","4","4","4","2","1","4"],[20.096756021756,25.0210178710179,0,0,24.1449966699967,27.9725621600622,21.0688034188034,0,0,22.3312517547812,0,17.9348928848929,0,18.0050505050505,0,22.8286817757406,0,13.4404761904762,0,0,14.3083333333333,0,16.5688145188145,22.8950551899081,0,22.1878382238676,13.977380952381,16.2474025974026,14.6243506493506,0,0,0,0,17.2388528138528,23.7796231546232,29.9050505050505,14.5321428571429,0,0,0,19.9926434676435,0,0,0,22.6681135041429,19.9507215007215,19.2496392496392,0,14.0694444444444,21.3798368298368,0,0,21.6225996225996,0,22.1488289488289,22.6119407553231,23.5526101349631,19.6726412476412,18.0253968253968,0,18.3426587301587],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,19.3523448773449,0,0,0,0,20.913653013653,0,19.7238095238095,0,0,0,0,0,0,0,0,26.4886252636253,0,0,0,0,30.1523823398823,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23.6567737817738,0,0,0,0,0,0,20.6119769119769,0],[0,30.781191031191,24.8352833441069,27.2249799692911,19.7146353646354,27.1547064047064,22.8034188034188,16.0849567099567,20.5278360528361,22.3708046855106,0,0,17.3071428571429,20.359126984127,21.6085497835498,0,22.7418081918082,15.0428571428571,21.0082739156269,24.9466866466866,0,22.0305555555556,0,0,15.8150738150738,25.5343952616011,0,16.82524003774,0,24.3260378510378,30.0588383838384,18.6011480349716,20.5645021645022,0,0,0,12.6265873015873,22.6287573537574,27.2785458006046,24.2879717504718,23.9076617826618,24.2339937839938,0,16.3310606060606,24.9945254092313,21.2516594516595,16.6266594516595,25.4160284160284,0,23.7180874680875,30.3021942410874,32.2287434787435,0,26.337854955502,0,0,0,0,20.2297619047619,24.0542207792208,0],[23.493561993562,0,27.9766425567896,32.0930414356885,0,0,0,22.7051587301587,19.4522089022089,0,25.2406690531691,19.9926434676435,18.8951076701077,0,0,29.3187950937951,25.1817834942835,16.2063492063492,25.1844877344877,0,17.5503968253968,0,20.0038156288156,26.8975238813474,23.2388084138084,0,15.2952380952381,21.1319347319347,17.4440115440115,23.9880591630592,0,23.0063492063492,24.7823232323232,19.4521284271284,28.2408702408702,0,18.0539682539683,24.4628010878011,33.533315377433,27.0775016650017,0,25.5441586191586,18.4676684426684,23.3837301587302,0,0,0,24.3911421911422,16.6396825396825,0,34.6455796740239,26.5211308299544,0,28.2896778058543,24.8790598290598,27.4923909423909,23.9528233204704,21.5668081918082,0,0,21.9555555555556],[46.6440892440892,55.2217143967144,49.2081607934549,49.3313948693206,45.0611943611944,46.1982947607948,37.3619963369963,31.1920634920635,42.8408508158508,49.7456195765019,48.8258824508825,35.3834443334443,35.1312687312687,32.5717171717172,34.3360028860029,43.4894130379424,48.6616355866356,28.8952380952381,45.0955097190391,44.9402861027861,30.768253968254,36.6619047619048,37.206376956377,46.5305571879101,37.7547813297813,48.4659561843385,33.8001803751804,34.6903152403152,32.9700937950938,49.9637598512599,52.6126096126096,38.4908029878618,41.3938311688312,36.5507215007215,45.3202713952714,50.0122932622933,27.5019841269841,49.434299034299,49.4759612119906,45.1659326784327,42.4355616605617,46.2197899322899,38.6008574758575,32.9404761904762,53.3064587373411,39.7006493506493,29.2633477633478,45.0436091686092,27.2611111111111,42.1657703407703,59.2993945596887,52.7263215542627,40.9017704517705,53.8536390080508,45.4554667554668,47.5404882699,51.7765375147728,45.6904206904207,33.5801587301587,37.7455627705628,37.8142857142857],[23.7364357864358,37.0146159396159,31.5676335102806,27.9945857934635,28.6949161949162,30.8598013098013,22.3220695970696,0,28.5968337218337,34.3468910174793,0,0,0,21.8195887445887,25.9511904761905,17.7250615397674,26.9828282828283,0,29.6342288430524,33.6041000666001,0,27.4424603174603,0,0,0,33.7201497032379,15.4533189033189,0,0,0,37.424198024198,0,26.0562770562771,0,18.9066156066156,34.6532259407259,0,26.7855907980908,26.9014387573211,27.0249333999334,30.6721916971917,0,19.5055194805195,0,33.6017472723355,28.1031385281385,22.6970779220779,24.7156038406038,0,31.2623404373404,34.9577209555151,34.7675845396434,29.603663003663,35.9238423341365,26.034126984127,26.5856173238526,28.649982860277,18.7164946164946,24.3511904761905,27.6291486291486,17.2039682539683],[0,0,0,0,0,0,0,15.5816738816739,0,0,24.7090298590299,0,18.7765318015318,0,0,0,0,0,0,0,13.6884920634921,0,18.1159257409257,22.587651319269,16.9089188589189,0,0,0,17.1134920634921,23.6369325119325,0,20.8565656565657,0,17.7958152958153,0,0,0,0,0,0,0,22.6580669330669,16.8304279054279,16.803354978355,0,0,0,0,13.9753968253968,0,0,0,0,0,0,0,0,0,0,0,0],[43.4914474414474,37.9621045621046,41.681313784255,47.9811072742187,33.9262903762904,36.2775696525697,29.7110500610501,38.6366161616162,30.6957653457653,36.4817564788153,48.4873501498502,41.6092851592852,37.9860084360084,24.2857142857143,24.775,42.4446248196248,43.14864996115,36.0825396825397,37.0052032934386,34.2151667776668,36.6698412698413,26.1515873015873,37.1628121878122,49.8577579283462,42.5742590742591,34.2631056851645,33.4091991341991,36.671984959485,38.5835137085137,44.4160644910645,39.1603271728272,40.336936266348,39.2115079365079,38.3527056277056,41.923470973471,35.1526903651904,35.1313492063492,36.7371989121989,43.2138923984512,44.2061119436119,33.6047313797314,45.2951187701188,37.6235264735265,39.1072871572872,36.6985022330611,27.1689393939394,25.7901154401154,40.7441891441891,37.4900793650794,32.6043928293928,51.1867261565404,41.7262301424066,29.3476911976912,39.1169616331381,45.4090687090687,46.7649633046692,38.1046797973269,39.9593545343545,23.9142857142857,25.8546176046176,38.4095238095238],[0,0,0,0,0,0,0,0,0,0,22.5052572427572,19.9777361527362,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>clust<\/th>\n      <th>age<\/th>\n      <th>crim<\/th>\n      <th>dis<\/th>\n      <th>indus<\/th>\n      <th>lstat<\/th>\n      <th>nox<\/th>\n      <th>ptratio<\/th>\n      <th>rm<\/th>\n      <th>tax<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8,9,10]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Si unimos con el dataset original</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1">test_df_with_cluster <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  res_hcpc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>data.clust <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb35-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rownames_to_column</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb35-3">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(id, clust)</span>
<span id="cb35-4"></span>
<span id="cb35-5">unido <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> test_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb35-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rownames_to_column</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb35-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">inner_join</span>(test_df_with_cluster, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>)</span></code></pre></div>
</details>
</div>
<p>Y efectivamente vemos que el cluster 1 tiene mucho más ratio de criminalidad, y además es la variable más importante para ese grupo en relación con la variable dependiente <code>medv</code>. No causa sorpresa ver que es justo en ese cluster dónde el precio de la propiedad es más bajo</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1">unido <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb36-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(clust) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb36-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">across</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(lstat,crim, age, black, medv), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> mean, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">median =</span> median), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.names =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{.col}_{.fn}"</span> )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb36-4">    DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-909d8facf4db1004d42f" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-909d8facf4db1004d42f">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],["1","2","3","4","5","6"],[21.8767857142857,17.3883783783784,12.7932432432432,11.1577083333333,6.569,5.86375],[20.93,15.79,11.69,9.965,5.85,6.17],[16.9166767857143,9.62652648648649,1.18672108108108,0.679979791666667,0.05824075,0.064505],[10.40037,5.20177,0.25356,0.18319,0.049775,0.051705],[96.7821428571429,87.3108108108108,62.4918918918919,66.975,42.2775,27.8375],[98,89.1,69.1,67.35,36.55,22.6],[304.185,274.395135135135,358.92972972973,388.824791666667,390.538,391.125],[378.45,352.58,389.15,391.87,393.995,393.71],[13.1142857142857,18.4810810810811,21.027027027027,26.1354166666667,27.6025,26.46875],[11.45,19.1,21.7,21.45,28.3,24.9]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>clust<\/th>\n      <th>lstat_mean<\/th>\n      <th>lstat_median<\/th>\n      <th>crim_mean<\/th>\n      <th>crim_median<\/th>\n      <th>age_mean<\/th>\n      <th>age_median<\/th>\n      <th>black_mean<\/th>\n      <th>black_median<\/th>\n      <th>medv_mean<\/th>\n      <th>medv_median<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8,9,10,11]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Carlos en el <a href="https://www.datanalytics.com/2020/10/14/explicacion-de-los-scorings-de-ciertos-modelos/">post</a> que inspira este, comenta que este tipo de procedimientos sería útil para aquellas de las observaciones con un mayor score predicho. En este ejemplo se podría aplicar para clusterizar las observaciones con un mayor valor predicho del valor de la propiedad.</p>
</section>
</section>
<section id="nota" class="level2">
<h2 class="anchored" data-anchor-id="nota">Nota</h2>
<blockquote class="blockquote">
<p>Hice el código deprisa y corriendo, es claramente mejorable y podría ir mucho más rápido. El objetivo era mostrar como se puede obtener variables importantes a nivel de observación en este tipo de modelos, simplemente recorriendo por qué camino ha ido cada observación en cada árbol</p>
</blockquote>
<blockquote class="blockquote">
<p>Estaría chulo representar espacialmente la distribución de los clusters obtenidos</p>
</blockquote>


</section>

 ]]></description>
  <category>estadística</category>
  <category>ranger</category>
  <category>Explicatividad</category>
  <category>2023</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/29/explicatividad_no_usual/index.html</guid>
  <pubDate>Sat, 28 Jan 2023 23:00:00 GMT</pubDate>
  <media:content url="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/29/explicatividad_no_usual" medium="image"/>
</item>
<item>
  <title>Una regresión de poisson, plagiando a Carlos</title>
  <dc:creator>José Luis Cañadas Reche</dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/21/regresion-poisson-brms/index.html</link>
  <description><![CDATA[ 



<p>Me llamó la atención ayer el excelente post de Carlos sobre <a href="https://www.datanalytics.com/2023/01/18/regresion-poisson-numpyro/">regresión de poisson casi trivival con numpyro</a> y le dije que iba a ver si podía replicarlo usando <code>brms</code> u otra cosa que se comunique con <a href="https://mc-stan.org/">stan</a>. También estuve bicheando su código que tiene colgado <a href="https://github.com/cjgb/datanalytics_code/blob/main/exercise_numpyro_00.ipynb">aquí</a></p>
<p>Lo primero, es que se trata de un ejercicio relativamente común, que es la de estimar el punto en que una serie de datos cambia de tendencia. Existen cosas como <a href="https://facebook.github.io/prophet/">prophet</a> (que por debajo es Stan) o librerías como <code>mcp</code> <code>cmp</code> o <code>changepoint</code> en R específicas para este tipo de cosas. Pero a Carlos le gusta , con buen criterio, especificar directamente el modelo.</p>
<p>He de reconocer que me ha gustado la sintaxis de <code>numpyro</code></p>
<p>Bueno vamos al lío.</p>
<section id="datos-y-librerías" class="level2">
<h2 class="anchored" data-anchor-id="datos-y-librerías">Datos y librerías</h2>
<p>Voy implementar los dos primeros modelos que hay en el notebook de Carlos usando la función <code>ulam</code> de la librería <a href="https://github.com/rmcelreath/rethinking"><code>rethinking</code></a> de Richard McElreath. Dicha librería es un interfaz, incompleto aunque didáctico, de hacer modelos bayesianos con Stan.<br>
El último modelo, el que detecta el punto de cambio no he sido capaz de hacerlo con esta librería, pero se podría hacer usando <code>stan</code> directamente, como <a href="https://mc-stan.org/docs/2_21/stan-users-guide/change-point-section.html">aquí</a>.</p>
<p>Los datos, aunque él ha puesto la variable del tiempo de 1 a 23, yo la voy a poner de 1999 a 2021, porque intuía a qué datos se refería y que los he buscado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(rethinking) </span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(cmdstanr)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(brms)</span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># por si uso splines</span></span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(mgcv)</span>
<span id="cb1-7"></span>
<span id="cb1-8"></span>
<span id="cb1-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># uso cmdstan como backend para stan desde R en vez de rstan</span></span>
<span id="cb1-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set_cmdstan_path</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/home/jose/cmdstan"</span>)</span>
<span id="cb1-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set_ulam_cmdstan</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"></span>
<span id="cb2-2">d  <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb2-3">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">54</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">63</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">54</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">71</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">72</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">57</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">69</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">71</span>, </span>
<span id="cb2-4">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">76</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">57</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">73</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">62</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">51</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">54</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">55</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">49</span>, </span>
<span id="cb2-5">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">53</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">56</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">49</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">48</span>),</span>
<span id="cb2-6"></span>
<span id="cb2-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">t =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1999</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2021</span></span>
<span id="cb2-8"></span>
<span id="cb2-9">)</span></code></pre></div>
</div>
</section>
<section id="modelo-lambda-constante" class="level2">
<h2 class="anchored" data-anchor-id="modelo-lambda-constante">Modelo lambda constante</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">m0 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ulam</span>(</span>
<span id="cb3-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">alist</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poisson</span>(lambda),</span>
<span id="cb3-3">          lambda <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> a    ,</span>
<span id="cb3-4">          a <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb3-5">          ) ,</span>
<span id="cb3-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> d,</span>
<span id="cb3-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chains =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb3-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cores =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> ,</span>
<span id="cb3-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb3-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">iter =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3000</span></span>
<span id="cb3-11">    </span>
<span id="cb3-12">)</span>
<span id="cb3-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Running MCMC with 2 parallel chains, with 1 thread(s) per chain...</span></span>
<span id="cb3-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb3-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:    1 / 3000 [  0%]  (Warmup) </span></span>
<span id="cb3-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  100 / 3000 [  3%]  (Warmup) </span></span>
<span id="cb3-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  200 / 3000 [  6%]  (Warmup) </span></span>
<span id="cb3-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  300 / 3000 [ 10%]  (Warmup) </span></span>
<span id="cb3-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  400 / 3000 [ 13%]  (Warmup) </span></span>
<span id="cb3-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  500 / 3000 [ 16%]  (Warmup) </span></span>
<span id="cb3-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  600 / 3000 [ 20%]  (Warmup) </span></span>
<span id="cb3-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  700 / 3000 [ 23%]  (Warmup) </span></span>
<span id="cb3-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  800 / 3000 [ 26%]  (Warmup) </span></span>
<span id="cb3-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  900 / 3000 [ 30%]  (Warmup) </span></span>
<span id="cb3-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1000 / 3000 [ 33%]  (Warmup) </span></span>
<span id="cb3-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1100 / 3000 [ 36%]  (Warmup) </span></span>
<span id="cb3-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1200 / 3000 [ 40%]  (Warmup) </span></span>
<span id="cb3-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1300 / 3000 [ 43%]  (Warmup) </span></span>
<span id="cb3-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1400 / 3000 [ 46%]  (Warmup) </span></span>
<span id="cb3-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1500 / 3000 [ 50%]  (Warmup) </span></span>
<span id="cb3-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1501 / 3000 [ 50%]  (Sampling) </span></span>
<span id="cb3-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1600 / 3000 [ 53%]  (Sampling) </span></span>
<span id="cb3-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1700 / 3000 [ 56%]  (Sampling) </span></span>
<span id="cb3-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1800 / 3000 [ 60%]  (Sampling) </span></span>
<span id="cb3-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1900 / 3000 [ 63%]  (Sampling) </span></span>
<span id="cb3-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2000 / 3000 [ 66%]  (Sampling) </span></span>
<span id="cb3-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2100 / 3000 [ 70%]  (Sampling) </span></span>
<span id="cb3-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2200 / 3000 [ 73%]  (Sampling) </span></span>
<span id="cb3-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2300 / 3000 [ 76%]  (Sampling) </span></span>
<span id="cb3-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2400 / 3000 [ 80%]  (Sampling) </span></span>
<span id="cb3-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2500 / 3000 [ 83%]  (Sampling) </span></span>
<span id="cb3-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2600 / 3000 [ 86%]  (Sampling) </span></span>
<span id="cb3-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2700 / 3000 [ 90%]  (Sampling) </span></span>
<span id="cb3-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2800 / 3000 [ 93%]  (Sampling) </span></span>
<span id="cb3-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2900 / 3000 [ 96%]  (Sampling) </span></span>
<span id="cb3-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3000 / 3000 [100%]  (Sampling) </span></span>
<span id="cb3-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:    1 / 3000 [  0%]  (Warmup) </span></span>
<span id="cb3-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  100 / 3000 [  3%]  (Warmup) </span></span>
<span id="cb3-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  200 / 3000 [  6%]  (Warmup) </span></span>
<span id="cb3-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  300 / 3000 [ 10%]  (Warmup) </span></span>
<span id="cb3-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  400 / 3000 [ 13%]  (Warmup) </span></span>
<span id="cb3-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  500 / 3000 [ 16%]  (Warmup) </span></span>
<span id="cb3-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  600 / 3000 [ 20%]  (Warmup) </span></span>
<span id="cb3-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  700 / 3000 [ 23%]  (Warmup) </span></span>
<span id="cb3-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  800 / 3000 [ 26%]  (Warmup) </span></span>
<span id="cb3-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  900 / 3000 [ 30%]  (Warmup) </span></span>
<span id="cb3-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1000 / 3000 [ 33%]  (Warmup) </span></span>
<span id="cb3-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1100 / 3000 [ 36%]  (Warmup) </span></span>
<span id="cb3-59"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1200 / 3000 [ 40%]  (Warmup) </span></span>
<span id="cb3-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1300 / 3000 [ 43%]  (Warmup) </span></span>
<span id="cb3-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1400 / 3000 [ 46%]  (Warmup) </span></span>
<span id="cb3-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1500 / 3000 [ 50%]  (Warmup) </span></span>
<span id="cb3-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1501 / 3000 [ 50%]  (Sampling) </span></span>
<span id="cb3-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1600 / 3000 [ 53%]  (Sampling) </span></span>
<span id="cb3-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1700 / 3000 [ 56%]  (Sampling) </span></span>
<span id="cb3-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1800 / 3000 [ 60%]  (Sampling) </span></span>
<span id="cb3-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1900 / 3000 [ 63%]  (Sampling) </span></span>
<span id="cb3-68"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2000 / 3000 [ 66%]  (Sampling) </span></span>
<span id="cb3-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2100 / 3000 [ 70%]  (Sampling) </span></span>
<span id="cb3-70"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2200 / 3000 [ 73%]  (Sampling) </span></span>
<span id="cb3-71"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2300 / 3000 [ 76%]  (Sampling) </span></span>
<span id="cb3-72"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2400 / 3000 [ 80%]  (Sampling) </span></span>
<span id="cb3-73"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2500 / 3000 [ 83%]  (Sampling) </span></span>
<span id="cb3-74"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2600 / 3000 [ 86%]  (Sampling) </span></span>
<span id="cb3-75"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2700 / 3000 [ 90%]  (Sampling) </span></span>
<span id="cb3-76"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2800 / 3000 [ 93%]  (Sampling) </span></span>
<span id="cb3-77"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2900 / 3000 [ 96%]  (Sampling) </span></span>
<span id="cb3-78"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3000 / 3000 [100%]  (Sampling) </span></span>
<span id="cb3-79"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 finished in 0.0 seconds.</span></span>
<span id="cb3-80"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 finished in 0.0 seconds.</span></span>
<span id="cb3-81"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb3-82"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Both chains finished successfully.</span></span>
<span id="cb3-83"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Mean chain execution time: 0.0 seconds.</span></span>
<span id="cb3-84"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Total execution time: 0.4 seconds.</span></span>
<span id="cb3-85"></span>
<span id="cb3-86"></span>
<span id="cb3-87"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">precis</span>(m0)</span>
<span id="cb3-88"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;            result</span></span>
<span id="cb3-89"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; mean    58.976852</span></span>
<span id="cb3-90"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sd       1.542638</span></span>
<span id="cb3-91"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5.5%    56.450528</span></span>
<span id="cb3-92"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 94.5%   61.456426</span></span>
<span id="cb3-93"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; n_eff 1004.327368</span></span>
<span id="cb3-94"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Rhat     1.000203</span></span></code></pre></div>
</div>
</section>
<section id="modelo-dónde-lambda-es-una-recta" class="level2">
<h2 class="anchored" data-anchor-id="modelo-dónde-lambda-es-una-recta">Modelo dónde lambda es una recta</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">m1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ulam</span>(</span>
<span id="cb4-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">alist</span>(</span>
<span id="cb4-3">        y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poisson</span>(lambda),</span>
<span id="cb4-4">        lambda <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> a <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> b <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> t   ,</span>
<span id="cb4-5">        a <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb4-6">        b <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb4-7">        </span>
<span id="cb4-8">    ) ,</span>
<span id="cb4-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> d,</span>
<span id="cb4-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chains =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb4-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cores =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> ,</span>
<span id="cb4-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb4-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">iter =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3000</span></span>
<span id="cb4-14">    </span>
<span id="cb4-15">)</span>
<span id="cb4-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Running MCMC with 2 parallel chains, with 1 thread(s) per chain...</span></span>
<span id="cb4-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb4-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:    1 / 3000 [  0%]  (Warmup) </span></span>
<span id="cb4-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  100 / 3000 [  3%]  (Warmup) </span></span>
<span id="cb4-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  200 / 3000 [  6%]  (Warmup) </span></span>
<span id="cb4-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  300 / 3000 [ 10%]  (Warmup) </span></span>
<span id="cb4-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  400 / 3000 [ 13%]  (Warmup) </span></span>
<span id="cb4-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  500 / 3000 [ 16%]  (Warmup) </span></span>
<span id="cb4-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:    1 / 3000 [  0%]  (Warmup) </span></span>
<span id="cb4-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  100 / 3000 [  3%]  (Warmup) </span></span>
<span id="cb4-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  200 / 3000 [  6%]  (Warmup) </span></span>
<span id="cb4-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  300 / 3000 [ 10%]  (Warmup) </span></span>
<span id="cb4-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  400 / 3000 [ 13%]  (Warmup) </span></span>
<span id="cb4-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  500 / 3000 [ 16%]  (Warmup) </span></span>
<span id="cb4-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  600 / 3000 [ 20%]  (Warmup) </span></span>
<span id="cb4-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  600 / 3000 [ 20%]  (Warmup) </span></span>
<span id="cb4-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  700 / 3000 [ 23%]  (Warmup) </span></span>
<span id="cb4-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  800 / 3000 [ 26%]  (Warmup) </span></span>
<span id="cb4-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  900 / 3000 [ 30%]  (Warmup) </span></span>
<span id="cb4-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1000 / 3000 [ 33%]  (Warmup) </span></span>
<span id="cb4-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1100 / 3000 [ 36%]  (Warmup) </span></span>
<span id="cb4-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1200 / 3000 [ 40%]  (Warmup) </span></span>
<span id="cb4-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1300 / 3000 [ 43%]  (Warmup) </span></span>
<span id="cb4-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1400 / 3000 [ 46%]  (Warmup) </span></span>
<span id="cb4-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1500 / 3000 [ 50%]  (Warmup) </span></span>
<span id="cb4-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1501 / 3000 [ 50%]  (Sampling) </span></span>
<span id="cb4-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1600 / 3000 [ 53%]  (Sampling) </span></span>
<span id="cb4-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1700 / 3000 [ 56%]  (Sampling) </span></span>
<span id="cb4-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1800 / 3000 [ 60%]  (Sampling) </span></span>
<span id="cb4-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1900 / 3000 [ 63%]  (Sampling) </span></span>
<span id="cb4-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2000 / 3000 [ 66%]  (Sampling) </span></span>
<span id="cb4-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2100 / 3000 [ 70%]  (Sampling) </span></span>
<span id="cb4-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2200 / 3000 [ 73%]  (Sampling) </span></span>
<span id="cb4-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2300 / 3000 [ 76%]  (Sampling) </span></span>
<span id="cb4-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2400 / 3000 [ 80%]  (Sampling) </span></span>
<span id="cb4-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2500 / 3000 [ 83%]  (Sampling) </span></span>
<span id="cb4-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2600 / 3000 [ 86%]  (Sampling) </span></span>
<span id="cb4-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2700 / 3000 [ 90%]  (Sampling) </span></span>
<span id="cb4-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2800 / 3000 [ 93%]  (Sampling) </span></span>
<span id="cb4-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2900 / 3000 [ 96%]  (Sampling) </span></span>
<span id="cb4-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3000 / 3000 [100%]  (Sampling) </span></span>
<span id="cb4-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  700 / 3000 [ 23%]  (Warmup) </span></span>
<span id="cb4-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  800 / 3000 [ 26%]  (Warmup) </span></span>
<span id="cb4-59"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  900 / 3000 [ 30%]  (Warmup) </span></span>
<span id="cb4-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1000 / 3000 [ 33%]  (Warmup) </span></span>
<span id="cb4-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1100 / 3000 [ 36%]  (Warmup) </span></span>
<span id="cb4-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1200 / 3000 [ 40%]  (Warmup) </span></span>
<span id="cb4-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1300 / 3000 [ 43%]  (Warmup) </span></span>
<span id="cb4-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1400 / 3000 [ 46%]  (Warmup) </span></span>
<span id="cb4-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1500 / 3000 [ 50%]  (Warmup) </span></span>
<span id="cb4-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1501 / 3000 [ 50%]  (Sampling) </span></span>
<span id="cb4-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1600 / 3000 [ 53%]  (Sampling) </span></span>
<span id="cb4-68"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1700 / 3000 [ 56%]  (Sampling) </span></span>
<span id="cb4-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1800 / 3000 [ 60%]  (Sampling) </span></span>
<span id="cb4-70"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1900 / 3000 [ 63%]  (Sampling) </span></span>
<span id="cb4-71"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2000 / 3000 [ 66%]  (Sampling) </span></span>
<span id="cb4-72"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2100 / 3000 [ 70%]  (Sampling) </span></span>
<span id="cb4-73"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2200 / 3000 [ 73%]  (Sampling) </span></span>
<span id="cb4-74"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2300 / 3000 [ 76%]  (Sampling) </span></span>
<span id="cb4-75"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2400 / 3000 [ 80%]  (Sampling) </span></span>
<span id="cb4-76"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2500 / 3000 [ 83%]  (Sampling) </span></span>
<span id="cb4-77"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2600 / 3000 [ 86%]  (Sampling) </span></span>
<span id="cb4-78"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2700 / 3000 [ 90%]  (Sampling) </span></span>
<span id="cb4-79"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2800 / 3000 [ 93%]  (Sampling) </span></span>
<span id="cb4-80"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2900 / 3000 [ 96%]  (Sampling) </span></span>
<span id="cb4-81"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3000 / 3000 [100%]  (Sampling) </span></span>
<span id="cb4-82"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 finished in 0.2 seconds.</span></span>
<span id="cb4-83"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 finished in 0.2 seconds.</span></span>
<span id="cb4-84"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb4-85"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Both chains finished successfully.</span></span>
<span id="cb4-86"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Mean chain execution time: 0.2 seconds.</span></span>
<span id="cb4-87"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Total execution time: 0.3 seconds.</span></span>
<span id="cb4-88"></span>
<span id="cb4-89"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">precis</span>(m1)</span>
<span id="cb4-90"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;            mean          sd         5.5%        94.5%    n_eff    Rhat4</span></span>
<span id="cb4-91"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; a 60.2808693333 5.071538760 52.390828500 68.641990000 454.4379 1.005453</span></span>
<span id="cb4-92"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; b -0.0007081383 0.002636486 -0.005088067  0.003417291 452.2575 1.005254</span></span></code></pre></div>
</div>
</section>
<section id="modelo-para-detectar-el-punto-de-cambio." class="level2">
<h2 class="anchored" data-anchor-id="modelo-para-detectar-el-punto-de-cambio.">Modelo para detectar el punto de cambio.</h2>
<p>La verdad que me habría gustado seguir usando <code>ulam</code> para el modelo pero he sido incapaz de replicar este cacho de código de <code>numpyro</code></p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> model02(t, datos):</span>
<span id="cb5-2"></span>
<span id="cb5-3">  knot <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> numpyro.sample(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"knot"</span>, dist.Normal(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(t)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(t)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb5-4"></span>
<span id="cb5-5">  a0 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> numpyro.sample(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"a0"</span>, dist.Normal(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>))</span>
<span id="cb5-6">  b0 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> numpyro.sample(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b0"</span>, dist.Normal( <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb5-7"></span>
<span id="cb5-8">  b1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> numpyro.sample(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b1"</span>, dist.Normal(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))  </span>
<span id="cb5-9"></span>
<span id="cb5-10">  λ <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> a0 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> t <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> b0 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> jnp.where(t <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> knot, (t <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> knot) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> b1, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb5-11"></span>
<span id="cb5-12">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> numpyro.plate(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data"</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(t)):</span>
<span id="cb5-13">    numpyro.sample(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"obs"</span>, dist.Poisson(λ), obs<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>datos)</span>
<span id="cb5-14"></span></code></pre></div>
<p>El problema reside en <code>jnp.where(t &gt; knot, (t - knot) * b1, 0)</code> , para resolverlo habría que programar directamente en <code>stan</code> o que <code>ulam</code> pudiera usar la función <a href="https://mc-stan.org/docs/2_26/functions-reference/logical-functions.html"><code>step</code></a> de Stan, que si x es menor que 0 vale 0 y 1 en otro caso. El código en <code>ulam</code> si funcionara sería así</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">m2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ulam</span>(</span>
<span id="cb6-2">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">alist</span>(</span>
<span id="cb6-3">            y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poisson</span>(lambda),</span>
<span id="cb6-4">            lambda <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> b0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>  b1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> t <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> b2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> (t <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> knot) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">step</span>(t <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> knot) ,</span>
<span id="cb6-5">            knot <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">23</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">23</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>),</span>
<span id="cb6-6">            b0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb6-7">            b1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb6-8">            b2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb6-9"></span>
<span id="cb6-10">        ) ,</span>
<span id="cb6-11">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data=</span>d, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chains=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cores=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> , <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, </span>
<span id="cb6-12">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">iter =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3000</span>)</span></code></pre></div>
</div>
<p>pero no funciona , así que vamos a ver como sería usando <code>brms</code>. <code>brms</code> tiene una sintaxis digamos que peculiar, y su objetivo es parecerse a la especificación que se hace en R de los modelos lineales con <code>lm</code> y la que se hace con <code>lme4</code>. Es decir sería algo similar a esto</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"></span>
<span id="cb7-2"> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">brm</span>( y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> x1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> x2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> var_efecto_aleatorio) , </span>
<span id="cb7-3">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poisson</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"identity"</span>), </span>
<span id="cb7-4">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df)</span></code></pre></div>
</div>
<p>dónde no se especifican los <img src="https://latex.codecogs.com/png.latex?%5Cbeta_i"> de forma explícita. Pero también tiene sintaxis para hacerlo explícito. Veamos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Datos en dataframe</span></span>
<span id="cb8-2">df  <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> d<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">t =</span> d<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>t)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">bform <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bf</span>(</span>
<span id="cb9-2">  y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> b0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> b1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> t <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb9-3">  </span>
<span id="cb9-4">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># brms si acepta la función step de Stan </span></span>
<span id="cb9-5">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># cuando t-change &gt;= 0  entonces step(t-change) = 1, es decir, cuanto t &gt; change y 0 en otro caso     </span></span>
<span id="cb9-6">  b2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> (t<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>change) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">step</span>( t <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> change),</span>
<span id="cb9-7">  </span>
<span id="cb9-8">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Hay que poner que estime el "intercept" de los parámetros y el nl = TRUE para que brms sepa que son parámetros</span></span>
<span id="cb9-9">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># y no variables en los datos </span></span>
<span id="cb9-10">  b0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb9-11">  b1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, </span>
<span id="cb9-12">  b2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb9-13">  change <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, </span>
<span id="cb9-14">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nl =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb9-15">)</span></code></pre></div>
</div>
<p>Especificamos las priors. En brms se escriben las priors y se “concatenan” mediante <code>+</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">bprior <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">prior</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nlpar =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b0"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-2">          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">prior</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nlpar =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b1"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-3">          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">prior</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nlpar =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b2"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-4">         <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># para el cambio ponemos como media la mitad del intervalo y unos 5 años de desviación típica</span></span>
<span id="cb10-5">          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">prior</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>( <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2010</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">23</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nlpar =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"change"</span>)</span></code></pre></div>
</div>
<p>Y ya podemos escribir el modelo en brms que lo compilara a stan y hace el mcmc</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">mbrm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb11-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">brm</span>(</span>
<span id="cb11-3">        bform,</span>
<span id="cb11-4">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poisson</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"identity"</span>), <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pongo de link la identidad en vez del log por hacer como en el post original</span></span>
<span id="cb11-5">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prior =</span> bprior,</span>
<span id="cb11-6">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df,</span>
<span id="cb11-7">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">backend =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cmdstanr"</span>,</span>
<span id="cb11-8">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cores =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>,</span>
<span id="cb11-9">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chains =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>,</span>
<span id="cb11-10">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">iter =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4000</span>,</span>
<span id="cb11-11">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">warmup =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span></span>
<span id="cb11-12">    )</span>
<span id="cb11-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Running MCMC with 6 parallel chains...</span></span>
<span id="cb11-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb11-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:    1 / 4000 [  0%]  (Warmup) </span></span>
<span id="cb11-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  100 / 4000 [  2%]  (Warmup) </span></span>
<span id="cb11-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  200 / 4000 [  5%]  (Warmup) </span></span>
<span id="cb11-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:    1 / 4000 [  0%]  (Warmup) </span></span>
<span id="cb11-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  100 / 4000 [  2%]  (Warmup) </span></span>
<span id="cb11-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  200 / 4000 [  5%]  (Warmup) </span></span>
<span id="cb11-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:    1 / 4000 [  0%]  (Warmup) </span></span>
<span id="cb11-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:    1 / 4000 [  0%]  (Warmup) </span></span>
<span id="cb11-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:    1 / 4000 [  0%]  (Warmup) </span></span>
<span id="cb11-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:    1 / 4000 [  0%]  (Warmup) </span></span>
<span id="cb11-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  100 / 4000 [  2%]  (Warmup) </span></span>
<span id="cb11-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  200 / 4000 [  5%]  (Warmup) </span></span>
<span id="cb11-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  100 / 4000 [  2%]  (Warmup) </span></span>
<span id="cb11-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  300 / 4000 [  7%]  (Warmup) </span></span>
<span id="cb11-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  100 / 4000 [  2%]  (Warmup) </span></span>
<span id="cb11-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  200 / 4000 [  5%]  (Warmup) </span></span>
<span id="cb11-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  200 / 4000 [  5%]  (Warmup) </span></span>
<span id="cb11-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  300 / 4000 [  7%]  (Warmup) </span></span>
<span id="cb11-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  100 / 4000 [  2%]  (Warmup) </span></span>
<span id="cb11-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  200 / 4000 [  5%]  (Warmup) </span></span>
<span id="cb11-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  300 / 4000 [  7%]  (Warmup) </span></span>
<span id="cb11-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  400 / 4000 [ 10%]  (Warmup) </span></span>
<span id="cb11-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  300 / 4000 [  7%]  (Warmup) </span></span>
<span id="cb11-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  400 / 4000 [ 10%]  (Warmup) </span></span>
<span id="cb11-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  400 / 4000 [ 10%]  (Warmup) </span></span>
<span id="cb11-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  500 / 4000 [ 12%]  (Warmup) </span></span>
<span id="cb11-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  501 / 4000 [ 12%]  (Sampling) </span></span>
<span id="cb11-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  300 / 4000 [  7%]  (Warmup) </span></span>
<span id="cb11-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  400 / 4000 [ 10%]  (Warmup) </span></span>
<span id="cb11-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  500 / 4000 [ 12%]  (Warmup) </span></span>
<span id="cb11-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  501 / 4000 [ 12%]  (Sampling) </span></span>
<span id="cb11-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  600 / 4000 [ 15%]  (Sampling) </span></span>
<span id="cb11-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  300 / 4000 [  7%]  (Warmup) </span></span>
<span id="cb11-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  500 / 4000 [ 12%]  (Warmup) </span></span>
<span id="cb11-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  501 / 4000 [ 12%]  (Sampling) </span></span>
<span id="cb11-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  700 / 4000 [ 17%]  (Sampling) </span></span>
<span id="cb11-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  800 / 4000 [ 20%]  (Sampling) </span></span>
<span id="cb11-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  900 / 4000 [ 22%]  (Sampling) </span></span>
<span id="cb11-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1000 / 4000 [ 25%]  (Sampling) </span></span>
<span id="cb11-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  500 / 4000 [ 12%]  (Warmup) </span></span>
<span id="cb11-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  501 / 4000 [ 12%]  (Sampling) </span></span>
<span id="cb11-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  600 / 4000 [ 15%]  (Sampling) </span></span>
<span id="cb11-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  700 / 4000 [ 17%]  (Sampling) </span></span>
<span id="cb11-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  800 / 4000 [ 20%]  (Sampling) </span></span>
<span id="cb11-59"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  600 / 4000 [ 15%]  (Sampling) </span></span>
<span id="cb11-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  700 / 4000 [ 17%]  (Sampling) </span></span>
<span id="cb11-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1100 / 4000 [ 27%]  (Sampling) </span></span>
<span id="cb11-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1200 / 4000 [ 30%]  (Sampling) </span></span>
<span id="cb11-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1300 / 4000 [ 32%]  (Sampling) </span></span>
<span id="cb11-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  600 / 4000 [ 15%]  (Sampling) </span></span>
<span id="cb11-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  900 / 4000 [ 22%]  (Sampling) </span></span>
<span id="cb11-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1000 / 4000 [ 25%]  (Sampling) </span></span>
<span id="cb11-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1100 / 4000 [ 27%]  (Sampling) </span></span>
<span id="cb11-68"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1200 / 4000 [ 30%]  (Sampling) </span></span>
<span id="cb11-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  800 / 4000 [ 20%]  (Sampling) </span></span>
<span id="cb11-70"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  900 / 4000 [ 22%]  (Sampling) </span></span>
<span id="cb11-71"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1400 / 4000 [ 35%]  (Sampling) </span></span>
<span id="cb11-72"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1500 / 4000 [ 37%]  (Sampling) </span></span>
<span id="cb11-73"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1600 / 4000 [ 40%]  (Sampling) </span></span>
<span id="cb11-74"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1700 / 4000 [ 42%]  (Sampling) </span></span>
<span id="cb11-75"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1300 / 4000 [ 32%]  (Sampling) </span></span>
<span id="cb11-76"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1400 / 4000 [ 35%]  (Sampling) </span></span>
<span id="cb11-77"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1500 / 4000 [ 37%]  (Sampling) </span></span>
<span id="cb11-78"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1600 / 4000 [ 40%]  (Sampling) </span></span>
<span id="cb11-79"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1000 / 4000 [ 25%]  (Sampling) </span></span>
<span id="cb11-80"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1100 / 4000 [ 27%]  (Sampling) </span></span>
<span id="cb11-81"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1200 / 4000 [ 30%]  (Sampling) </span></span>
<span id="cb11-82"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1800 / 4000 [ 45%]  (Sampling) </span></span>
<span id="cb11-83"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1900 / 4000 [ 47%]  (Sampling) </span></span>
<span id="cb11-84"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2000 / 4000 [ 50%]  (Sampling) </span></span>
<span id="cb11-85"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2100 / 4000 [ 52%]  (Sampling) </span></span>
<span id="cb11-86"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1700 / 4000 [ 42%]  (Sampling) </span></span>
<span id="cb11-87"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1800 / 4000 [ 45%]  (Sampling) </span></span>
<span id="cb11-88"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1900 / 4000 [ 47%]  (Sampling) </span></span>
<span id="cb11-89"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2000 / 4000 [ 50%]  (Sampling) </span></span>
<span id="cb11-90"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  400 / 4000 [ 10%]  (Warmup) </span></span>
<span id="cb11-91"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1300 / 4000 [ 32%]  (Sampling) </span></span>
<span id="cb11-92"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1400 / 4000 [ 35%]  (Sampling) </span></span>
<span id="cb11-93"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2200 / 4000 [ 55%]  (Sampling) </span></span>
<span id="cb11-94"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2300 / 4000 [ 57%]  (Sampling) </span></span>
<span id="cb11-95"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2400 / 4000 [ 60%]  (Sampling) </span></span>
<span id="cb11-96"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2100 / 4000 [ 52%]  (Sampling) </span></span>
<span id="cb11-97"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2200 / 4000 [ 55%]  (Sampling) </span></span>
<span id="cb11-98"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2300 / 4000 [ 57%]  (Sampling) </span></span>
<span id="cb11-99"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2400 / 4000 [ 60%]  (Sampling) </span></span>
<span id="cb11-100"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1500 / 4000 [ 37%]  (Sampling) </span></span>
<span id="cb11-101"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1600 / 4000 [ 40%]  (Sampling) </span></span>
<span id="cb11-102"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2500 / 4000 [ 62%]  (Sampling) </span></span>
<span id="cb11-103"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2600 / 4000 [ 65%]  (Sampling) </span></span>
<span id="cb11-104"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2700 / 4000 [ 67%]  (Sampling) </span></span>
<span id="cb11-105"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2500 / 4000 [ 62%]  (Sampling) </span></span>
<span id="cb11-106"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2600 / 4000 [ 65%]  (Sampling) </span></span>
<span id="cb11-107"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2700 / 4000 [ 67%]  (Sampling) </span></span>
<span id="cb11-108"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2800 / 4000 [ 70%]  (Sampling) </span></span>
<span id="cb11-109"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1700 / 4000 [ 42%]  (Sampling) </span></span>
<span id="cb11-110"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1800 / 4000 [ 45%]  (Sampling) </span></span>
<span id="cb11-111"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1900 / 4000 [ 47%]  (Sampling) </span></span>
<span id="cb11-112"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2800 / 4000 [ 70%]  (Sampling) </span></span>
<span id="cb11-113"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2900 / 4000 [ 72%]  (Sampling) </span></span>
<span id="cb11-114"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3000 / 4000 [ 75%]  (Sampling) </span></span>
<span id="cb11-115"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2900 / 4000 [ 72%]  (Sampling) </span></span>
<span id="cb11-116"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3000 / 4000 [ 75%]  (Sampling) </span></span>
<span id="cb11-117"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3100 / 4000 [ 77%]  (Sampling) </span></span>
<span id="cb11-118"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3200 / 4000 [ 80%]  (Sampling) </span></span>
<span id="cb11-119"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2000 / 4000 [ 50%]  (Sampling) </span></span>
<span id="cb11-120"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2100 / 4000 [ 52%]  (Sampling) </span></span>
<span id="cb11-121"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2200 / 4000 [ 55%]  (Sampling) </span></span>
<span id="cb11-122"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3100 / 4000 [ 77%]  (Sampling) </span></span>
<span id="cb11-123"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3200 / 4000 [ 80%]  (Sampling) </span></span>
<span id="cb11-124"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3300 / 4000 [ 82%]  (Sampling) </span></span>
<span id="cb11-125"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3400 / 4000 [ 85%]  (Sampling) </span></span>
<span id="cb11-126"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3300 / 4000 [ 82%]  (Sampling) </span></span>
<span id="cb11-127"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3400 / 4000 [ 85%]  (Sampling) </span></span>
<span id="cb11-128"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3500 / 4000 [ 87%]  (Sampling) </span></span>
<span id="cb11-129"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  500 / 4000 [ 12%]  (Warmup) </span></span>
<span id="cb11-130"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  501 / 4000 [ 12%]  (Sampling) </span></span>
<span id="cb11-131"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  600 / 4000 [ 15%]  (Sampling) </span></span>
<span id="cb11-132"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2300 / 4000 [ 57%]  (Sampling) </span></span>
<span id="cb11-133"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2400 / 4000 [ 60%]  (Sampling) </span></span>
<span id="cb11-134"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2500 / 4000 [ 62%]  (Sampling) </span></span>
<span id="cb11-135"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3500 / 4000 [ 87%]  (Sampling) </span></span>
<span id="cb11-136"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3600 / 4000 [ 90%]  (Sampling) </span></span>
<span id="cb11-137"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3700 / 4000 [ 92%]  (Sampling) </span></span>
<span id="cb11-138"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  700 / 4000 [ 17%]  (Sampling) </span></span>
<span id="cb11-139"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  400 / 4000 [ 10%]  (Warmup) </span></span>
<span id="cb11-140"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3600 / 4000 [ 90%]  (Sampling) </span></span>
<span id="cb11-141"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3700 / 4000 [ 92%]  (Sampling) </span></span>
<span id="cb11-142"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3800 / 4000 [ 95%]  (Sampling) </span></span>
<span id="cb11-143"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3900 / 4000 [ 97%]  (Sampling) </span></span>
<span id="cb11-144"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  700 / 4000 [ 17%]  (Sampling) </span></span>
<span id="cb11-145"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  800 / 4000 [ 20%]  (Sampling) </span></span>
<span id="cb11-146"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  900 / 4000 [ 22%]  (Sampling) </span></span>
<span id="cb11-147"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2600 / 4000 [ 65%]  (Sampling) </span></span>
<span id="cb11-148"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2700 / 4000 [ 67%]  (Sampling) </span></span>
<span id="cb11-149"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2800 / 4000 [ 70%]  (Sampling) </span></span>
<span id="cb11-150"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3800 / 4000 [ 95%]  (Sampling) </span></span>
<span id="cb11-151"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3900 / 4000 [ 97%]  (Sampling) </span></span>
<span id="cb11-152"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 4000 / 4000 [100%]  (Sampling) </span></span>
<span id="cb11-153"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 4000 / 4000 [100%]  (Sampling) </span></span>
<span id="cb11-154"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1000 / 4000 [ 25%]  (Sampling) </span></span>
<span id="cb11-155"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1100 / 4000 [ 27%]  (Sampling) </span></span>
<span id="cb11-156"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1200 / 4000 [ 30%]  (Sampling) </span></span>
<span id="cb11-157"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 finished in 2.5 seconds.</span></span>
<span id="cb11-158"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 finished in 2.3 seconds.</span></span>
<span id="cb11-159"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2900 / 4000 [ 72%]  (Sampling) </span></span>
<span id="cb11-160"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3000 / 4000 [ 75%]  (Sampling) </span></span>
<span id="cb11-161"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3100 / 4000 [ 77%]  (Sampling) </span></span>
<span id="cb11-162"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3200 / 4000 [ 80%]  (Sampling) </span></span>
<span id="cb11-163"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1300 / 4000 [ 32%]  (Sampling) </span></span>
<span id="cb11-164"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1400 / 4000 [ 35%]  (Sampling) </span></span>
<span id="cb11-165"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1500 / 4000 [ 37%]  (Sampling) </span></span>
<span id="cb11-166"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1600 / 4000 [ 40%]  (Sampling) </span></span>
<span id="cb11-167"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1700 / 4000 [ 42%]  (Sampling) </span></span>
<span id="cb11-168"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3300 / 4000 [ 82%]  (Sampling) </span></span>
<span id="cb11-169"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3400 / 4000 [ 85%]  (Sampling) </span></span>
<span id="cb11-170"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3500 / 4000 [ 87%]  (Sampling) </span></span>
<span id="cb11-171"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  500 / 4000 [ 12%]  (Warmup) </span></span>
<span id="cb11-172"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  501 / 4000 [ 12%]  (Sampling) </span></span>
<span id="cb11-173"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1800 / 4000 [ 45%]  (Sampling) </span></span>
<span id="cb11-174"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1900 / 4000 [ 47%]  (Sampling) </span></span>
<span id="cb11-175"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2000 / 4000 [ 50%]  (Sampling) </span></span>
<span id="cb11-176"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2100 / 4000 [ 52%]  (Sampling) </span></span>
<span id="cb11-177"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3600 / 4000 [ 90%]  (Sampling) </span></span>
<span id="cb11-178"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3700 / 4000 [ 92%]  (Sampling) </span></span>
<span id="cb11-179"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3800 / 4000 [ 95%]  (Sampling) </span></span>
<span id="cb11-180"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3900 / 4000 [ 97%]  (Sampling) </span></span>
<span id="cb11-181"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  600 / 4000 [ 15%]  (Sampling) </span></span>
<span id="cb11-182"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  700 / 4000 [ 17%]  (Sampling) </span></span>
<span id="cb11-183"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2200 / 4000 [ 55%]  (Sampling) </span></span>
<span id="cb11-184"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2300 / 4000 [ 57%]  (Sampling) </span></span>
<span id="cb11-185"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2400 / 4000 [ 60%]  (Sampling) </span></span>
<span id="cb11-186"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2500 / 4000 [ 62%]  (Sampling) </span></span>
<span id="cb11-187"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2600 / 4000 [ 65%]  (Sampling) </span></span>
<span id="cb11-188"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 4000 / 4000 [100%]  (Sampling) </span></span>
<span id="cb11-189"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  800 / 4000 [ 20%]  (Sampling) </span></span>
<span id="cb11-190"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  900 / 4000 [ 22%]  (Sampling) </span></span>
<span id="cb11-191"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2700 / 4000 [ 67%]  (Sampling) </span></span>
<span id="cb11-192"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2800 / 4000 [ 70%]  (Sampling) </span></span>
<span id="cb11-193"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2900 / 4000 [ 72%]  (Sampling) </span></span>
<span id="cb11-194"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3000 / 4000 [ 75%]  (Sampling) </span></span>
<span id="cb11-195"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3100 / 4000 [ 77%]  (Sampling) </span></span>
<span id="cb11-196"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 finished in 2.9 seconds.</span></span>
<span id="cb11-197"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  800 / 4000 [ 20%]  (Sampling) </span></span>
<span id="cb11-198"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1000 / 4000 [ 25%]  (Sampling) </span></span>
<span id="cb11-199"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1100 / 4000 [ 27%]  (Sampling) </span></span>
<span id="cb11-200"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3200 / 4000 [ 80%]  (Sampling) </span></span>
<span id="cb11-201"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3300 / 4000 [ 82%]  (Sampling) </span></span>
<span id="cb11-202"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3400 / 4000 [ 85%]  (Sampling) </span></span>
<span id="cb11-203"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3500 / 4000 [ 87%]  (Sampling) </span></span>
<span id="cb11-204"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3600 / 4000 [ 90%]  (Sampling) </span></span>
<span id="cb11-205"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1200 / 4000 [ 30%]  (Sampling) </span></span>
<span id="cb11-206"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1300 / 4000 [ 32%]  (Sampling) </span></span>
<span id="cb11-207"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3700 / 4000 [ 92%]  (Sampling) </span></span>
<span id="cb11-208"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3800 / 4000 [ 95%]  (Sampling) </span></span>
<span id="cb11-209"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3900 / 4000 [ 97%]  (Sampling) </span></span>
<span id="cb11-210"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 4000 / 4000 [100%]  (Sampling) </span></span>
<span id="cb11-211"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 finished in 3.0 seconds.</span></span>
<span id="cb11-212"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1400 / 4000 [ 35%]  (Sampling) </span></span>
<span id="cb11-213"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1500 / 4000 [ 37%]  (Sampling) </span></span>
<span id="cb11-214"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1600 / 4000 [ 40%]  (Sampling) </span></span>
<span id="cb11-215"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1700 / 4000 [ 42%]  (Sampling) </span></span>
<span id="cb11-216"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1800 / 4000 [ 45%]  (Sampling) </span></span>
<span id="cb11-217"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  900 / 4000 [ 22%]  (Sampling) </span></span>
<span id="cb11-218"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1900 / 4000 [ 47%]  (Sampling) </span></span>
<span id="cb11-219"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2000 / 4000 [ 50%]  (Sampling) </span></span>
<span id="cb11-220"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2100 / 4000 [ 52%]  (Sampling) </span></span>
<span id="cb11-221"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2200 / 4000 [ 55%]  (Sampling) </span></span>
<span id="cb11-222"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2300 / 4000 [ 57%]  (Sampling) </span></span>
<span id="cb11-223"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2400 / 4000 [ 60%]  (Sampling) </span></span>
<span id="cb11-224"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2500 / 4000 [ 62%]  (Sampling) </span></span>
<span id="cb11-225"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2600 / 4000 [ 65%]  (Sampling) </span></span>
<span id="cb11-226"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2700 / 4000 [ 67%]  (Sampling) </span></span>
<span id="cb11-227"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1000 / 4000 [ 25%]  (Sampling) </span></span>
<span id="cb11-228"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2800 / 4000 [ 70%]  (Sampling) </span></span>
<span id="cb11-229"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2900 / 4000 [ 72%]  (Sampling) </span></span>
<span id="cb11-230"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3000 / 4000 [ 75%]  (Sampling) </span></span>
<span id="cb11-231"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3100 / 4000 [ 77%]  (Sampling) </span></span>
<span id="cb11-232"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3200 / 4000 [ 80%]  (Sampling) </span></span>
<span id="cb11-233"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3300 / 4000 [ 82%]  (Sampling) </span></span>
<span id="cb11-234"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3400 / 4000 [ 85%]  (Sampling) </span></span>
<span id="cb11-235"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3500 / 4000 [ 87%]  (Sampling) </span></span>
<span id="cb11-236"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3600 / 4000 [ 90%]  (Sampling) </span></span>
<span id="cb11-237"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3700 / 4000 [ 92%]  (Sampling) </span></span>
<span id="cb11-238"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3800 / 4000 [ 95%]  (Sampling) </span></span>
<span id="cb11-239"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3900 / 4000 [ 97%]  (Sampling) </span></span>
<span id="cb11-240"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 4000 / 4000 [100%]  (Sampling) </span></span>
<span id="cb11-241"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 finished in 4.4 seconds.</span></span>
<span id="cb11-242"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1100 / 4000 [ 27%]  (Sampling) </span></span>
<span id="cb11-243"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1200 / 4000 [ 30%]  (Sampling) </span></span>
<span id="cb11-244"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1300 / 4000 [ 32%]  (Sampling) </span></span>
<span id="cb11-245"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1400 / 4000 [ 35%]  (Sampling) </span></span>
<span id="cb11-246"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1500 / 4000 [ 37%]  (Sampling) </span></span>
<span id="cb11-247"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1600 / 4000 [ 40%]  (Sampling) </span></span>
<span id="cb11-248"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1700 / 4000 [ 42%]  (Sampling) </span></span>
<span id="cb11-249"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1800 / 4000 [ 45%]  (Sampling) </span></span>
<span id="cb11-250"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1900 / 4000 [ 47%]  (Sampling) </span></span>
<span id="cb11-251"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2000 / 4000 [ 50%]  (Sampling) </span></span>
<span id="cb11-252"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2100 / 4000 [ 52%]  (Sampling) </span></span>
<span id="cb11-253"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2200 / 4000 [ 55%]  (Sampling) </span></span>
<span id="cb11-254"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2300 / 4000 [ 57%]  (Sampling) </span></span>
<span id="cb11-255"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2400 / 4000 [ 60%]  (Sampling) </span></span>
<span id="cb11-256"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2500 / 4000 [ 62%]  (Sampling) </span></span>
<span id="cb11-257"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2600 / 4000 [ 65%]  (Sampling) </span></span>
<span id="cb11-258"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2700 / 4000 [ 67%]  (Sampling) </span></span>
<span id="cb11-259"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2800 / 4000 [ 70%]  (Sampling) </span></span>
<span id="cb11-260"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2900 / 4000 [ 72%]  (Sampling) </span></span>
<span id="cb11-261"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3000 / 4000 [ 75%]  (Sampling) </span></span>
<span id="cb11-262"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3100 / 4000 [ 77%]  (Sampling) </span></span>
<span id="cb11-263"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3200 / 4000 [ 80%]  (Sampling) </span></span>
<span id="cb11-264"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3300 / 4000 [ 82%]  (Sampling) </span></span>
<span id="cb11-265"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3400 / 4000 [ 85%]  (Sampling) </span></span>
<span id="cb11-266"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3500 / 4000 [ 87%]  (Sampling) </span></span>
<span id="cb11-267"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3600 / 4000 [ 90%]  (Sampling) </span></span>
<span id="cb11-268"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3700 / 4000 [ 92%]  (Sampling) </span></span>
<span id="cb11-269"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3800 / 4000 [ 95%]  (Sampling) </span></span>
<span id="cb11-270"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3900 / 4000 [ 97%]  (Sampling) </span></span>
<span id="cb11-271"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 4000 / 4000 [100%]  (Sampling) </span></span>
<span id="cb11-272"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 finished in 18.0 seconds.</span></span>
<span id="cb11-273"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb11-274"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; All 6 chains finished successfully.</span></span>
<span id="cb11-275"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Mean chain execution time: 5.5 seconds.</span></span>
<span id="cb11-276"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Total execution time: 18.1 seconds.</span></span></code></pre></div>
</div>
<p>Y bueno, no ha tardado mucho, unos 3 segundos por cadena.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(mbrm)</span>
<span id="cb12-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  Family: poisson </span></span>
<span id="cb12-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   Links: mu = identity </span></span>
<span id="cb12-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Formula: y ~ b0 + b1 * t + b2 * (t - change) * step(t - change) </span></span>
<span id="cb12-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          b0 ~ 1</span></span>
<span id="cb12-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          b1 ~ 1</span></span>
<span id="cb12-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          b2 ~ 1</span></span>
<span id="cb12-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          change ~ 1</span></span>
<span id="cb12-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    Data: df (Number of observations: 23) </span></span>
<span id="cb12-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   Draws: 6 chains, each with iter = 4000; warmup = 500; thin = 1;</span></span>
<span id="cb12-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          total post-warmup draws = 21000</span></span>
<span id="cb12-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb12-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Population-Level Effects: </span></span>
<span id="cb12-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;                  Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS</span></span>
<span id="cb12-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; b0_Intercept        50.33     22.21     1.59    69.57 1.40       13       10</span></span>
<span id="cb12-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; b1_Intercept         0.01      0.01    -0.00     0.03 1.37       13       23</span></span>
<span id="cb12-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; b2_Intercept        -1.07      0.48    -1.93    -0.32 1.00     8488     8579</span></span>
<span id="cb12-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; change_Intercept  2008.67      3.31  2002.91  2014.20 1.00     9493     7851</span></span>
<span id="cb12-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb12-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Draws were sampled using sample(hmc). For each parameter, Bulk_ESS</span></span>
<span id="cb12-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; and Tail_ESS are effective sample size measures, and Rhat is the potential</span></span>
<span id="cb12-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; scale reduction factor on split chains (at convergence, Rhat = 1).</span></span></code></pre></div>
</div>
<p>Podemos pintar la curva media estimada y su intervalo de credibilidad</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">conditional_effects</span>(mbrm),</span>
<span id="cb13-2">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">points =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-12-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/21/regresion-poisson-brms/index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>También la posterior predict function de los diferentes puntos. Evidentemente esto tiene más variabilidad que la posterior predict de la media condicionada que era el gráfico anterior.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">conditional_effects</span>(mbrm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"posterior_predict"</span>),</span>
<span id="cb14-2">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">points =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-13-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/21/regresion-poisson-brms/index_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Y básicamente, obtenermos los mismo resultados que Carlos con numpyro.</p>
<p>Podemos obtener un histograma de la posterior del punto de cambio</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">punto_cambio_posterior <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_draws_df</span>(mbrm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variable =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b_change_Intercept"</span>)</span>
<span id="cb15-2"></span>
<span id="cb15-3">ggplot2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(punto_cambio_posterior, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span>b_change_Intercept ))   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-4">    ggplot2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_histogram</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-14-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/21/regresion-poisson-brms/index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">posterior <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_draws_df</span>(mbrm)</span>
<span id="cb16-2"></span>
<span id="cb16-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(posterior)</span>
<span id="cb16-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A draws_df: 6 iterations, 1 chains, and 6 variables</span></span>
<span id="cb16-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   b_b0_Intercept b_b1_Intercept b_b2_Intercept b_change_Intercept lprior lp__</span></span>
<span id="cb16-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1             52        0.00607          -1.33               2010   -9.0  -87</span></span>
<span id="cb16-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2             69       -0.00512          -0.56               2006   -9.1  -89</span></span>
<span id="cb16-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3             61        0.00087          -0.40               2006   -7.3  -87</span></span>
<span id="cb16-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4             63       -0.00099          -0.48               2006   -7.5  -86</span></span>
<span id="cb16-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5             59        0.00275          -1.17               2006   -7.9  -85</span></span>
<span id="cb16-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6             58        0.00339          -1.18               2006   -8.1  -86</span></span>
<span id="cb16-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # ... hidden reserved variables {'.chain', '.iteration', '.draw'}</span></span>
<span id="cb16-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(posterior)</span>
<span id="cb16-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 21000     9</span></span></code></pre></div>
</div>
<p>Pintando las posterior predict directamente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"></span>
<span id="cb17-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Muy old R base, pero es que es la hora de comer y no tengo azúcar en el cerebro</span></span>
<span id="cb17-3"></span>
<span id="cb17-4">n_samples <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10000</span></span>
<span id="cb17-5">idx_sample <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(posterior), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> n_samples, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replace =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb17-6"></span>
<span id="cb17-7">posterior_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>(posterior)</span>
<span id="cb17-8"></span>
<span id="cb17-9"></span>
<span id="cb17-10">make_curve_functions <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(fila) {</span>
<span id="cb17-11">    </span>
<span id="cb17-12">    b0     <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  posterior_df[fila, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b_b0_Intercept"</span>]</span>
<span id="cb17-13">    b1     <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  posterior_df[fila, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b_b1_Intercept"</span>]</span>
<span id="cb17-14">    b2     <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  posterior_df[fila, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b_b2_Intercept"</span>]</span>
<span id="cb17-15">    change <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  posterior_df[fila, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b_change_Intercept"</span>]</span>
<span id="cb17-16">    lambda <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> b0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> b1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> t <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(t <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> change, (t<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>change) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> b2, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) </span>
<span id="cb17-17">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(lambda)</span>
<span id="cb17-18">    </span>
<span id="cb17-19">}</span>
<span id="cb17-20"></span>
<span id="cb17-21"></span>
<span id="cb17-22">t <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>t</span>
<span id="cb17-23"></span>
<span id="cb17-24">res <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sapply</span>(idx_sample, make_curve_functions)</span>
<span id="cb17-25"></span>
<span id="cb17-26"></span>
<span id="cb17-27"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(t, res[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pch =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">19</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> scales<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">alpha</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lightblue"</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylim =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">80</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"l"</span>)</span>
<span id="cb17-28"></span>
<span id="cb17-29"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (id <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n_samples) {</span>
<span id="cb17-30">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">points</span>(t, res[,id], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pch =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">19</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> scales<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">alpha</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lightblue"</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"l"</span>)</span>
<span id="cb17-31">    </span>
<span id="cb17-32">}</span>
<span id="cb17-33"></span>
<span id="cb17-34"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">points</span>(t, df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pch =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">19</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-16-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/21/regresion-poisson-brms/index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Una cosa interesante de <code>brms</code> es que nos construye código en Stan que luego nosotros podemos modificar</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_stancode</span>(bform, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prior=</span> bprior, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poisson</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"identity"</span>))</span>
<span id="cb18-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; // generated with brms 2.19.0</span></span>
<span id="cb18-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; functions {</span></span>
<span id="cb18-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; }</span></span>
<span id="cb18-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; data {</span></span>
<span id="cb18-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   int&lt;lower=1&gt; N;  // total number of observations</span></span>
<span id="cb18-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   int Y[N];  // response variable</span></span>
<span id="cb18-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   int&lt;lower=1&gt; K_b0;  // number of population-level effects</span></span>
<span id="cb18-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   matrix[N, K_b0] X_b0;  // population-level design matrix</span></span>
<span id="cb18-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   int&lt;lower=1&gt; K_b1;  // number of population-level effects</span></span>
<span id="cb18-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   matrix[N, K_b1] X_b1;  // population-level design matrix</span></span>
<span id="cb18-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   int&lt;lower=1&gt; K_b2;  // number of population-level effects</span></span>
<span id="cb18-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   matrix[N, K_b2] X_b2;  // population-level design matrix</span></span>
<span id="cb18-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   int&lt;lower=1&gt; K_change;  // number of population-level effects</span></span>
<span id="cb18-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   matrix[N, K_change] X_change;  // population-level design matrix</span></span>
<span id="cb18-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   // covariate vectors for non-linear functions</span></span>
<span id="cb18-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   int C_1[N];</span></span>
<span id="cb18-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   int prior_only;  // should the likelihood be ignored?</span></span>
<span id="cb18-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; }</span></span>
<span id="cb18-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; transformed data {</span></span>
<span id="cb18-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; }</span></span>
<span id="cb18-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; parameters {</span></span>
<span id="cb18-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   vector[K_b0] b_b0;  // population-level effects</span></span>
<span id="cb18-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   vector[K_b1] b_b1;  // population-level effects</span></span>
<span id="cb18-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   vector[K_b2] b_b2;  // population-level effects</span></span>
<span id="cb18-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   vector[K_change] b_change;  // population-level effects</span></span>
<span id="cb18-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; }</span></span>
<span id="cb18-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; transformed parameters {</span></span>
<span id="cb18-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   real lprior = 0;  // prior contributions to the log posterior</span></span>
<span id="cb18-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   lprior += normal_lpdf(b_b0 | 60, 5);</span></span>
<span id="cb18-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   lprior += normal_lpdf(b_b1 | 0, 1);</span></span>
<span id="cb18-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   lprior += normal_lpdf(b_b2 | 0, 1);</span></span>
<span id="cb18-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   lprior += normal_lpdf(b_change | 2010, 23/4);</span></span>
<span id="cb18-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; }</span></span>
<span id="cb18-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; model {</span></span>
<span id="cb18-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   // likelihood including constants</span></span>
<span id="cb18-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   if (!prior_only) {</span></span>
<span id="cb18-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     // initialize linear predictor term</span></span>
<span id="cb18-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     vector[N] nlp_b0 = rep_vector(0.0, N);</span></span>
<span id="cb18-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     // initialize linear predictor term</span></span>
<span id="cb18-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     vector[N] nlp_b1 = rep_vector(0.0, N);</span></span>
<span id="cb18-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     // initialize linear predictor term</span></span>
<span id="cb18-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     vector[N] nlp_b2 = rep_vector(0.0, N);</span></span>
<span id="cb18-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     // initialize linear predictor term</span></span>
<span id="cb18-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     vector[N] nlp_change = rep_vector(0.0, N);</span></span>
<span id="cb18-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     // initialize non-linear predictor term</span></span>
<span id="cb18-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     vector[N] mu;</span></span>
<span id="cb18-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     nlp_b0 += X_b0 * b_b0;</span></span>
<span id="cb18-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     nlp_b1 += X_b1 * b_b1;</span></span>
<span id="cb18-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     nlp_b2 += X_b2 * b_b2;</span></span>
<span id="cb18-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     nlp_change += X_change * b_change;</span></span>
<span id="cb18-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     for (n in 1:N) {</span></span>
<span id="cb18-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       // compute non-linear predictor values</span></span>
<span id="cb18-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       mu[n] = (nlp_b0[n] + nlp_b1[n] * C_1[n] + nlp_b2[n] * (C_1[n] - nlp_change[n]) * step(C_1[n] - nlp_change[n]));</span></span>
<span id="cb18-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     }</span></span>
<span id="cb18-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     target += poisson_lpmf(Y | mu);</span></span>
<span id="cb18-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   }</span></span>
<span id="cb18-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   // priors including constants</span></span>
<span id="cb18-59"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   target += lprior;</span></span>
<span id="cb18-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; }</span></span>
<span id="cb18-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; generated quantities {</span></span>
<span id="cb18-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; }</span></span></code></pre></div>
</div>
<section id="notas" class="level3">
<h3 class="anchored" data-anchor-id="notas">Notas</h3>
<p>Una forma fácil de ajustar estos datos es usando splines.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">m_spline  <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">brm</span>(</span>
<span id="cb19-2">                 y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">s</span>(t), </span>
<span id="cb19-3">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poisson</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"identity"</span>), </span>
<span id="cb19-4">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df, </span>
<span id="cb19-5">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">backend=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cmdstanr"</span></span>
<span id="cb19-6">)</span>
<span id="cb19-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Running MCMC with 4 sequential chains...</span></span>
<span id="cb19-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb19-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:    1 / 2000 [  0%]  (Warmup) </span></span>
<span id="cb19-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  100 / 2000 [  5%]  (Warmup) </span></span>
<span id="cb19-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  200 / 2000 [ 10%]  (Warmup) </span></span>
<span id="cb19-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  300 / 2000 [ 15%]  (Warmup) </span></span>
<span id="cb19-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  400 / 2000 [ 20%]  (Warmup) </span></span>
<span id="cb19-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  500 / 2000 [ 25%]  (Warmup) </span></span>
<span id="cb19-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  600 / 2000 [ 30%]  (Warmup) </span></span>
<span id="cb19-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  700 / 2000 [ 35%]  (Warmup) </span></span>
<span id="cb19-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  800 / 2000 [ 40%]  (Warmup) </span></span>
<span id="cb19-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  900 / 2000 [ 45%]  (Warmup) </span></span>
<span id="cb19-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1000 / 2000 [ 50%]  (Warmup) </span></span>
<span id="cb19-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1001 / 2000 [ 50%]  (Sampling) </span></span>
<span id="cb19-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1100 / 2000 [ 55%]  (Sampling) </span></span>
<span id="cb19-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1200 / 2000 [ 60%]  (Sampling) </span></span>
<span id="cb19-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1300 / 2000 [ 65%]  (Sampling) </span></span>
<span id="cb19-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1400 / 2000 [ 70%]  (Sampling) </span></span>
<span id="cb19-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1500 / 2000 [ 75%]  (Sampling) </span></span>
<span id="cb19-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1600 / 2000 [ 80%]  (Sampling) </span></span>
<span id="cb19-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1700 / 2000 [ 85%]  (Sampling) </span></span>
<span id="cb19-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1800 / 2000 [ 90%]  (Sampling) </span></span>
<span id="cb19-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1900 / 2000 [ 95%]  (Sampling) </span></span>
<span id="cb19-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2000 / 2000 [100%]  (Sampling) </span></span>
<span id="cb19-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 finished in 0.3 seconds.</span></span>
<span id="cb19-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:    1 / 2000 [  0%]  (Warmup) </span></span>
<span id="cb19-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  100 / 2000 [  5%]  (Warmup) </span></span>
<span id="cb19-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  200 / 2000 [ 10%]  (Warmup) </span></span>
<span id="cb19-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  300 / 2000 [ 15%]  (Warmup) </span></span>
<span id="cb19-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  400 / 2000 [ 20%]  (Warmup) </span></span>
<span id="cb19-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  500 / 2000 [ 25%]  (Warmup) </span></span>
<span id="cb19-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  600 / 2000 [ 30%]  (Warmup) </span></span>
<span id="cb19-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  700 / 2000 [ 35%]  (Warmup) </span></span>
<span id="cb19-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  800 / 2000 [ 40%]  (Warmup) </span></span>
<span id="cb19-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  900 / 2000 [ 45%]  (Warmup) </span></span>
<span id="cb19-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1000 / 2000 [ 50%]  (Warmup) </span></span>
<span id="cb19-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1001 / 2000 [ 50%]  (Sampling) </span></span>
<span id="cb19-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1100 / 2000 [ 55%]  (Sampling) </span></span>
<span id="cb19-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1200 / 2000 [ 60%]  (Sampling) </span></span>
<span id="cb19-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1300 / 2000 [ 65%]  (Sampling) </span></span>
<span id="cb19-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1400 / 2000 [ 70%]  (Sampling) </span></span>
<span id="cb19-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1500 / 2000 [ 75%]  (Sampling) </span></span>
<span id="cb19-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1600 / 2000 [ 80%]  (Sampling) </span></span>
<span id="cb19-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1700 / 2000 [ 85%]  (Sampling) </span></span>
<span id="cb19-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1800 / 2000 [ 90%]  (Sampling) </span></span>
<span id="cb19-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1900 / 2000 [ 95%]  (Sampling) </span></span>
<span id="cb19-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2000 / 2000 [100%]  (Sampling) </span></span>
<span id="cb19-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 finished in 0.4 seconds.</span></span>
<span id="cb19-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:    1 / 2000 [  0%]  (Warmup) </span></span>
<span id="cb19-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  100 / 2000 [  5%]  (Warmup) </span></span>
<span id="cb19-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  200 / 2000 [ 10%]  (Warmup) </span></span>
<span id="cb19-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  300 / 2000 [ 15%]  (Warmup) </span></span>
<span id="cb19-59"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  400 / 2000 [ 20%]  (Warmup) </span></span>
<span id="cb19-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  500 / 2000 [ 25%]  (Warmup) </span></span>
<span id="cb19-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  600 / 2000 [ 30%]  (Warmup) </span></span>
<span id="cb19-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  700 / 2000 [ 35%]  (Warmup) </span></span>
<span id="cb19-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  800 / 2000 [ 40%]  (Warmup) </span></span>
<span id="cb19-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  900 / 2000 [ 45%]  (Warmup) </span></span>
<span id="cb19-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1000 / 2000 [ 50%]  (Warmup) </span></span>
<span id="cb19-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1001 / 2000 [ 50%]  (Sampling) </span></span>
<span id="cb19-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1100 / 2000 [ 55%]  (Sampling) </span></span>
<span id="cb19-68"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1200 / 2000 [ 60%]  (Sampling) </span></span>
<span id="cb19-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1300 / 2000 [ 65%]  (Sampling) </span></span>
<span id="cb19-70"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1400 / 2000 [ 70%]  (Sampling) </span></span>
<span id="cb19-71"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1500 / 2000 [ 75%]  (Sampling) </span></span>
<span id="cb19-72"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1600 / 2000 [ 80%]  (Sampling) </span></span>
<span id="cb19-73"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1700 / 2000 [ 85%]  (Sampling) </span></span>
<span id="cb19-74"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1800 / 2000 [ 90%]  (Sampling) </span></span>
<span id="cb19-75"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1900 / 2000 [ 95%]  (Sampling) </span></span>
<span id="cb19-76"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2000 / 2000 [100%]  (Sampling) </span></span>
<span id="cb19-77"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 finished in 0.3 seconds.</span></span>
<span id="cb19-78"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:    1 / 2000 [  0%]  (Warmup) </span></span>
<span id="cb19-79"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  100 / 2000 [  5%]  (Warmup) </span></span>
<span id="cb19-80"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  200 / 2000 [ 10%]  (Warmup) </span></span>
<span id="cb19-81"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  300 / 2000 [ 15%]  (Warmup) </span></span>
<span id="cb19-82"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  400 / 2000 [ 20%]  (Warmup) </span></span>
<span id="cb19-83"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  500 / 2000 [ 25%]  (Warmup) </span></span>
<span id="cb19-84"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  600 / 2000 [ 30%]  (Warmup) </span></span>
<span id="cb19-85"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  700 / 2000 [ 35%]  (Warmup) </span></span>
<span id="cb19-86"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  800 / 2000 [ 40%]  (Warmup) </span></span>
<span id="cb19-87"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  900 / 2000 [ 45%]  (Warmup) </span></span>
<span id="cb19-88"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1000 / 2000 [ 50%]  (Warmup) </span></span>
<span id="cb19-89"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1001 / 2000 [ 50%]  (Sampling) </span></span>
<span id="cb19-90"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1100 / 2000 [ 55%]  (Sampling) </span></span>
<span id="cb19-91"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1200 / 2000 [ 60%]  (Sampling) </span></span>
<span id="cb19-92"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1300 / 2000 [ 65%]  (Sampling) </span></span>
<span id="cb19-93"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1400 / 2000 [ 70%]  (Sampling) </span></span>
<span id="cb19-94"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1500 / 2000 [ 75%]  (Sampling) </span></span>
<span id="cb19-95"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1600 / 2000 [ 80%]  (Sampling) </span></span>
<span id="cb19-96"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1700 / 2000 [ 85%]  (Sampling) </span></span>
<span id="cb19-97"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1800 / 2000 [ 90%]  (Sampling) </span></span>
<span id="cb19-98"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1900 / 2000 [ 95%]  (Sampling) </span></span>
<span id="cb19-99"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2000 / 2000 [100%]  (Sampling) </span></span>
<span id="cb19-100"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 finished in 0.3 seconds.</span></span>
<span id="cb19-101"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb19-102"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; All 4 chains finished successfully.</span></span>
<span id="cb19-103"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Mean chain execution time: 0.3 seconds.</span></span>
<span id="cb19-104"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Total execution time: 1.9 seconds.</span></span>
<span id="cb19-105"></span>
<span id="cb19-106"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(m_spline)</span>
<span id="cb19-107"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  Family: poisson </span></span>
<span id="cb19-108"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   Links: mu = identity </span></span>
<span id="cb19-109"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Formula: y ~ s(t) </span></span>
<span id="cb19-110"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    Data: df (Number of observations: 23) </span></span>
<span id="cb19-111"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   Draws: 4 chains, each with iter = 2000; warmup = 1000; thin = 1;</span></span>
<span id="cb19-112"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          total post-warmup draws = 4000</span></span>
<span id="cb19-113"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb19-114"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Smooth Terms: </span></span>
<span id="cb19-115"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;           Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS</span></span>
<span id="cb19-116"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sds(st_1)    12.78      7.77     1.41    30.74 1.00     1376     1528</span></span>
<span id="cb19-117"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb19-118"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Population-Level Effects: </span></span>
<span id="cb19-119"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;           Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS</span></span>
<span id="cb19-120"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Intercept    58.83      1.57    55.82    61.89 1.00     3590     2668</span></span>
<span id="cb19-121"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; st_1         -3.76     31.71   -56.38    67.67 1.00      906      572</span></span>
<span id="cb19-122"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb19-123"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Draws were sampled using sample(hmc). For each parameter, Bulk_ESS</span></span>
<span id="cb19-124"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; and Tail_ESS are effective sample size measures, and Rhat is the potential</span></span>
<span id="cb19-125"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; scale reduction factor on split chains (at convergence, Rhat = 1).</span></span>
<span id="cb19-126"></span>
<span id="cb19-127"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">conditional_smooths</span>(m_spline, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"posterior_predict"</span>) </span>
<span id="cb19-128">    ) </span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-18-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/21/regresion-poisson-brms/index_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Y tendríamos la posterior del spline , pero la verdad, ahora no tengo ganas de buscar como interpretar ese spline para traducir a punto de cambio de tendencia.</p>
<p>Por otro lado, leyendo por ahí he visto una implementación un pelín diferente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">bform_alt <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bf</span>(</span>
<span id="cb20-2">    y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> b0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-3">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># aqui es donde cambia un poco</span></span>
<span id="cb20-4">        b1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> (t <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> change) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">step</span>(change <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> t) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-5">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># post cambio</span></span>
<span id="cb20-6">        b2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> (t <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> change) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">step</span>(t <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> change),</span>
<span id="cb20-7">    b0 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> b1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> b2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> change <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb20-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nl =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb20-9">)</span>
<span id="cb20-10"></span>
<span id="cb20-11">bprior <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">prior</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nlpar =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b0"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">prior</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nlpar =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b1"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">prior</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nlpar =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b2"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">prior</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2010</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">23</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nlpar =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"change"</span>)</span>
<span id="cb20-15"></span>
<span id="cb20-16"></span>
<span id="cb20-17">mbrm_alt <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb20-18">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">brm</span>(</span>
<span id="cb20-19">        bform_alt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poisson</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"identity"</span>),</span>
<span id="cb20-20">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prior =</span> bprior,</span>
<span id="cb20-21">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df,</span>
<span id="cb20-22">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">backend =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cmdstanr"</span>,</span>
<span id="cb20-23">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cores =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>,</span>
<span id="cb20-24">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chains =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>,</span>
<span id="cb20-25">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">iter =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4000</span>,</span>
<span id="cb20-26">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">warmup =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span></span>
<span id="cb20-27">    )</span>
<span id="cb20-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Running MCMC with 6 parallel chains...</span></span>
<span id="cb20-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb20-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:    1 / 4000 [  0%]  (Warmup) </span></span>
<span id="cb20-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  100 / 4000 [  2%]  (Warmup) </span></span>
<span id="cb20-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:    1 / 4000 [  0%]  (Warmup) </span></span>
<span id="cb20-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  100 / 4000 [  2%]  (Warmup) </span></span>
<span id="cb20-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:    1 / 4000 [  0%]  (Warmup) </span></span>
<span id="cb20-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:    1 / 4000 [  0%]  (Warmup) </span></span>
<span id="cb20-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:    1 / 4000 [  0%]  (Warmup) </span></span>
<span id="cb20-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:    1 / 4000 [  0%]  (Warmup) </span></span>
<span id="cb20-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  200 / 4000 [  5%]  (Warmup) </span></span>
<span id="cb20-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  200 / 4000 [  5%]  (Warmup) </span></span>
<span id="cb20-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  100 / 4000 [  2%]  (Warmup) </span></span>
<span id="cb20-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  200 / 4000 [  5%]  (Warmup) </span></span>
<span id="cb20-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  100 / 4000 [  2%]  (Warmup) </span></span>
<span id="cb20-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  100 / 4000 [  2%]  (Warmup) </span></span>
<span id="cb20-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  200 / 4000 [  5%]  (Warmup) </span></span>
<span id="cb20-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  100 / 4000 [  2%]  (Warmup) </span></span>
<span id="cb20-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  200 / 4000 [  5%]  (Warmup) </span></span>
<span id="cb20-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  200 / 4000 [  5%]  (Warmup) </span></span>
<span id="cb20-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  300 / 4000 [  7%]  (Warmup) </span></span>
<span id="cb20-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  400 / 4000 [ 10%]  (Warmup) </span></span>
<span id="cb20-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  500 / 4000 [ 12%]  (Warmup) </span></span>
<span id="cb20-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  501 / 4000 [ 12%]  (Sampling) </span></span>
<span id="cb20-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  300 / 4000 [  7%]  (Warmup) </span></span>
<span id="cb20-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  600 / 4000 [ 15%]  (Sampling) </span></span>
<span id="cb20-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  700 / 4000 [ 17%]  (Sampling) </span></span>
<span id="cb20-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  800 / 4000 [ 20%]  (Sampling) </span></span>
<span id="cb20-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration:  900 / 4000 [ 22%]  (Sampling) </span></span>
<span id="cb20-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1000 / 4000 [ 25%]  (Sampling) </span></span>
<span id="cb20-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1100 / 4000 [ 27%]  (Sampling) </span></span>
<span id="cb20-59"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1200 / 4000 [ 30%]  (Sampling) </span></span>
<span id="cb20-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  300 / 4000 [  7%]  (Warmup) </span></span>
<span id="cb20-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1300 / 4000 [ 32%]  (Sampling) </span></span>
<span id="cb20-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1400 / 4000 [ 35%]  (Sampling) </span></span>
<span id="cb20-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1500 / 4000 [ 37%]  (Sampling) </span></span>
<span id="cb20-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1600 / 4000 [ 40%]  (Sampling) </span></span>
<span id="cb20-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1700 / 4000 [ 42%]  (Sampling) </span></span>
<span id="cb20-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1800 / 4000 [ 45%]  (Sampling) </span></span>
<span id="cb20-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 1900 / 4000 [ 47%]  (Sampling) </span></span>
<span id="cb20-68"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  300 / 4000 [  7%]  (Warmup) </span></span>
<span id="cb20-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  400 / 4000 [ 10%]  (Warmup) </span></span>
<span id="cb20-70"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  400 / 4000 [ 10%]  (Warmup) </span></span>
<span id="cb20-71"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  300 / 4000 [  7%]  (Warmup) </span></span>
<span id="cb20-72"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2000 / 4000 [ 50%]  (Sampling) </span></span>
<span id="cb20-73"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2100 / 4000 [ 52%]  (Sampling) </span></span>
<span id="cb20-74"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2200 / 4000 [ 55%]  (Sampling) </span></span>
<span id="cb20-75"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2300 / 4000 [ 57%]  (Sampling) </span></span>
<span id="cb20-76"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2400 / 4000 [ 60%]  (Sampling) </span></span>
<span id="cb20-77"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2500 / 4000 [ 62%]  (Sampling) </span></span>
<span id="cb20-78"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  500 / 4000 [ 12%]  (Warmup) </span></span>
<span id="cb20-79"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  501 / 4000 [ 12%]  (Sampling) </span></span>
<span id="cb20-80"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  600 / 4000 [ 15%]  (Sampling) </span></span>
<span id="cb20-81"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  700 / 4000 [ 17%]  (Sampling) </span></span>
<span id="cb20-82"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  500 / 4000 [ 12%]  (Warmup) </span></span>
<span id="cb20-83"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  501 / 4000 [ 12%]  (Sampling) </span></span>
<span id="cb20-84"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  600 / 4000 [ 15%]  (Sampling) </span></span>
<span id="cb20-85"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  700 / 4000 [ 17%]  (Sampling) </span></span>
<span id="cb20-86"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  400 / 4000 [ 10%]  (Warmup) </span></span>
<span id="cb20-87"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2600 / 4000 [ 65%]  (Sampling) </span></span>
<span id="cb20-88"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2700 / 4000 [ 67%]  (Sampling) </span></span>
<span id="cb20-89"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2800 / 4000 [ 70%]  (Sampling) </span></span>
<span id="cb20-90"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 2900 / 4000 [ 72%]  (Sampling) </span></span>
<span id="cb20-91"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3000 / 4000 [ 75%]  (Sampling) </span></span>
<span id="cb20-92"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3100 / 4000 [ 77%]  (Sampling) </span></span>
<span id="cb20-93"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3200 / 4000 [ 80%]  (Sampling) </span></span>
<span id="cb20-94"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  800 / 4000 [ 20%]  (Sampling) </span></span>
<span id="cb20-95"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration:  900 / 4000 [ 22%]  (Sampling) </span></span>
<span id="cb20-96"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1000 / 4000 [ 25%]  (Sampling) </span></span>
<span id="cb20-97"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1100 / 4000 [ 27%]  (Sampling) </span></span>
<span id="cb20-98"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1200 / 4000 [ 30%]  (Sampling) </span></span>
<span id="cb20-99"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  300 / 4000 [  7%]  (Warmup) </span></span>
<span id="cb20-100"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  400 / 4000 [ 10%]  (Warmup) </span></span>
<span id="cb20-101"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  800 / 4000 [ 20%]  (Sampling) </span></span>
<span id="cb20-102"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration:  900 / 4000 [ 22%]  (Sampling) </span></span>
<span id="cb20-103"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1000 / 4000 [ 25%]  (Sampling) </span></span>
<span id="cb20-104"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1100 / 4000 [ 27%]  (Sampling) </span></span>
<span id="cb20-105"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  500 / 4000 [ 12%]  (Warmup) </span></span>
<span id="cb20-106"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  501 / 4000 [ 12%]  (Sampling) </span></span>
<span id="cb20-107"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  600 / 4000 [ 15%]  (Sampling) </span></span>
<span id="cb20-108"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  700 / 4000 [ 17%]  (Sampling) </span></span>
<span id="cb20-109"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  800 / 4000 [ 20%]  (Sampling) </span></span>
<span id="cb20-110"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration:  900 / 4000 [ 22%]  (Sampling) </span></span>
<span id="cb20-111"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3300 / 4000 [ 82%]  (Sampling) </span></span>
<span id="cb20-112"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3400 / 4000 [ 85%]  (Sampling) </span></span>
<span id="cb20-113"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3500 / 4000 [ 87%]  (Sampling) </span></span>
<span id="cb20-114"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3600 / 4000 [ 90%]  (Sampling) </span></span>
<span id="cb20-115"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3700 / 4000 [ 92%]  (Sampling) </span></span>
<span id="cb20-116"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3800 / 4000 [ 95%]  (Sampling) </span></span>
<span id="cb20-117"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 3900 / 4000 [ 97%]  (Sampling) </span></span>
<span id="cb20-118"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1300 / 4000 [ 32%]  (Sampling) </span></span>
<span id="cb20-119"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1400 / 4000 [ 35%]  (Sampling) </span></span>
<span id="cb20-120"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1500 / 4000 [ 37%]  (Sampling) </span></span>
<span id="cb20-121"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1600 / 4000 [ 40%]  (Sampling) </span></span>
<span id="cb20-122"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1700 / 4000 [ 42%]  (Sampling) </span></span>
<span id="cb20-123"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1800 / 4000 [ 45%]  (Sampling) </span></span>
<span id="cb20-124"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  500 / 4000 [ 12%]  (Warmup) </span></span>
<span id="cb20-125"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  501 / 4000 [ 12%]  (Sampling) </span></span>
<span id="cb20-126"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  600 / 4000 [ 15%]  (Sampling) </span></span>
<span id="cb20-127"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  700 / 4000 [ 17%]  (Sampling) </span></span>
<span id="cb20-128"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  800 / 4000 [ 20%]  (Sampling) </span></span>
<span id="cb20-129"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration:  900 / 4000 [ 22%]  (Sampling) </span></span>
<span id="cb20-130"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1200 / 4000 [ 30%]  (Sampling) </span></span>
<span id="cb20-131"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1300 / 4000 [ 32%]  (Sampling) </span></span>
<span id="cb20-132"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1400 / 4000 [ 35%]  (Sampling) </span></span>
<span id="cb20-133"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1500 / 4000 [ 37%]  (Sampling) </span></span>
<span id="cb20-134"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1600 / 4000 [ 40%]  (Sampling) </span></span>
<span id="cb20-135"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1000 / 4000 [ 25%]  (Sampling) </span></span>
<span id="cb20-136"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1100 / 4000 [ 27%]  (Sampling) </span></span>
<span id="cb20-137"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1200 / 4000 [ 30%]  (Sampling) </span></span>
<span id="cb20-138"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1300 / 4000 [ 32%]  (Sampling) </span></span>
<span id="cb20-139"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1400 / 4000 [ 35%]  (Sampling) </span></span>
<span id="cb20-140"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1500 / 4000 [ 37%]  (Sampling) </span></span>
<span id="cb20-141"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 Iteration: 4000 / 4000 [100%]  (Sampling) </span></span>
<span id="cb20-142"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 1 finished in 1.4 seconds.</span></span>
<span id="cb20-143"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  400 / 4000 [ 10%]  (Warmup) </span></span>
<span id="cb20-144"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 1900 / 4000 [ 47%]  (Sampling) </span></span>
<span id="cb20-145"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2000 / 4000 [ 50%]  (Sampling) </span></span>
<span id="cb20-146"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2100 / 4000 [ 52%]  (Sampling) </span></span>
<span id="cb20-147"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2200 / 4000 [ 55%]  (Sampling) </span></span>
<span id="cb20-148"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2300 / 4000 [ 57%]  (Sampling) </span></span>
<span id="cb20-149"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2400 / 4000 [ 60%]  (Sampling) </span></span>
<span id="cb20-150"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1000 / 4000 [ 25%]  (Sampling) </span></span>
<span id="cb20-151"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1100 / 4000 [ 27%]  (Sampling) </span></span>
<span id="cb20-152"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1200 / 4000 [ 30%]  (Sampling) </span></span>
<span id="cb20-153"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1300 / 4000 [ 32%]  (Sampling) </span></span>
<span id="cb20-154"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1400 / 4000 [ 35%]  (Sampling) </span></span>
<span id="cb20-155"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1700 / 4000 [ 42%]  (Sampling) </span></span>
<span id="cb20-156"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1800 / 4000 [ 45%]  (Sampling) </span></span>
<span id="cb20-157"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 1900 / 4000 [ 47%]  (Sampling) </span></span>
<span id="cb20-158"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2000 / 4000 [ 50%]  (Sampling) </span></span>
<span id="cb20-159"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2100 / 4000 [ 52%]  (Sampling) </span></span>
<span id="cb20-160"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1600 / 4000 [ 40%]  (Sampling) </span></span>
<span id="cb20-161"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1700 / 4000 [ 42%]  (Sampling) </span></span>
<span id="cb20-162"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1800 / 4000 [ 45%]  (Sampling) </span></span>
<span id="cb20-163"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 1900 / 4000 [ 47%]  (Sampling) </span></span>
<span id="cb20-164"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2000 / 4000 [ 50%]  (Sampling) </span></span>
<span id="cb20-165"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2500 / 4000 [ 62%]  (Sampling) </span></span>
<span id="cb20-166"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2600 / 4000 [ 65%]  (Sampling) </span></span>
<span id="cb20-167"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2700 / 4000 [ 67%]  (Sampling) </span></span>
<span id="cb20-168"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2800 / 4000 [ 70%]  (Sampling) </span></span>
<span id="cb20-169"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 2900 / 4000 [ 72%]  (Sampling) </span></span>
<span id="cb20-170"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3000 / 4000 [ 75%]  (Sampling) </span></span>
<span id="cb20-171"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1500 / 4000 [ 37%]  (Sampling) </span></span>
<span id="cb20-172"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1600 / 4000 [ 40%]  (Sampling) </span></span>
<span id="cb20-173"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1700 / 4000 [ 42%]  (Sampling) </span></span>
<span id="cb20-174"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1800 / 4000 [ 45%]  (Sampling) </span></span>
<span id="cb20-175"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 1900 / 4000 [ 47%]  (Sampling) </span></span>
<span id="cb20-176"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2000 / 4000 [ 50%]  (Sampling) </span></span>
<span id="cb20-177"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2200 / 4000 [ 55%]  (Sampling) </span></span>
<span id="cb20-178"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2300 / 4000 [ 57%]  (Sampling) </span></span>
<span id="cb20-179"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2400 / 4000 [ 60%]  (Sampling) </span></span>
<span id="cb20-180"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2500 / 4000 [ 62%]  (Sampling) </span></span>
<span id="cb20-181"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2600 / 4000 [ 65%]  (Sampling) </span></span>
<span id="cb20-182"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2700 / 4000 [ 67%]  (Sampling) </span></span>
<span id="cb20-183"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2100 / 4000 [ 52%]  (Sampling) </span></span>
<span id="cb20-184"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2200 / 4000 [ 55%]  (Sampling) </span></span>
<span id="cb20-185"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2300 / 4000 [ 57%]  (Sampling) </span></span>
<span id="cb20-186"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2400 / 4000 [ 60%]  (Sampling) </span></span>
<span id="cb20-187"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2500 / 4000 [ 62%]  (Sampling) </span></span>
<span id="cb20-188"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2600 / 4000 [ 65%]  (Sampling) </span></span>
<span id="cb20-189"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2700 / 4000 [ 67%]  (Sampling) </span></span>
<span id="cb20-190"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  500 / 4000 [ 12%]  (Warmup) </span></span>
<span id="cb20-191"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  501 / 4000 [ 12%]  (Sampling) </span></span>
<span id="cb20-192"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  600 / 4000 [ 15%]  (Sampling) </span></span>
<span id="cb20-193"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  700 / 4000 [ 17%]  (Sampling) </span></span>
<span id="cb20-194"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  800 / 4000 [ 20%]  (Sampling) </span></span>
<span id="cb20-195"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration:  900 / 4000 [ 22%]  (Sampling) </span></span>
<span id="cb20-196"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1000 / 4000 [ 25%]  (Sampling) </span></span>
<span id="cb20-197"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1100 / 4000 [ 27%]  (Sampling) </span></span>
<span id="cb20-198"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3100 / 4000 [ 77%]  (Sampling) </span></span>
<span id="cb20-199"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3200 / 4000 [ 80%]  (Sampling) </span></span>
<span id="cb20-200"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3300 / 4000 [ 82%]  (Sampling) </span></span>
<span id="cb20-201"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3400 / 4000 [ 85%]  (Sampling) </span></span>
<span id="cb20-202"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3500 / 4000 [ 87%]  (Sampling) </span></span>
<span id="cb20-203"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3600 / 4000 [ 90%]  (Sampling) </span></span>
<span id="cb20-204"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2100 / 4000 [ 52%]  (Sampling) </span></span>
<span id="cb20-205"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2200 / 4000 [ 55%]  (Sampling) </span></span>
<span id="cb20-206"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2300 / 4000 [ 57%]  (Sampling) </span></span>
<span id="cb20-207"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2400 / 4000 [ 60%]  (Sampling) </span></span>
<span id="cb20-208"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2500 / 4000 [ 62%]  (Sampling) </span></span>
<span id="cb20-209"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2600 / 4000 [ 65%]  (Sampling) </span></span>
<span id="cb20-210"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2800 / 4000 [ 70%]  (Sampling) </span></span>
<span id="cb20-211"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 2900 / 4000 [ 72%]  (Sampling) </span></span>
<span id="cb20-212"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3000 / 4000 [ 75%]  (Sampling) </span></span>
<span id="cb20-213"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3100 / 4000 [ 77%]  (Sampling) </span></span>
<span id="cb20-214"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3200 / 4000 [ 80%]  (Sampling) </span></span>
<span id="cb20-215"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2800 / 4000 [ 70%]  (Sampling) </span></span>
<span id="cb20-216"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 2900 / 4000 [ 72%]  (Sampling) </span></span>
<span id="cb20-217"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3000 / 4000 [ 75%]  (Sampling) </span></span>
<span id="cb20-218"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3100 / 4000 [ 77%]  (Sampling) </span></span>
<span id="cb20-219"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3200 / 4000 [ 80%]  (Sampling) </span></span>
<span id="cb20-220"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3300 / 4000 [ 82%]  (Sampling) </span></span>
<span id="cb20-221"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1200 / 4000 [ 30%]  (Sampling) </span></span>
<span id="cb20-222"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1300 / 4000 [ 32%]  (Sampling) </span></span>
<span id="cb20-223"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1400 / 4000 [ 35%]  (Sampling) </span></span>
<span id="cb20-224"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1500 / 4000 [ 37%]  (Sampling) </span></span>
<span id="cb20-225"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1600 / 4000 [ 40%]  (Sampling) </span></span>
<span id="cb20-226"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1700 / 4000 [ 42%]  (Sampling) </span></span>
<span id="cb20-227"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1800 / 4000 [ 45%]  (Sampling) </span></span>
<span id="cb20-228"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 1900 / 4000 [ 47%]  (Sampling) </span></span>
<span id="cb20-229"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3700 / 4000 [ 92%]  (Sampling) </span></span>
<span id="cb20-230"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3800 / 4000 [ 95%]  (Sampling) </span></span>
<span id="cb20-231"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 3900 / 4000 [ 97%]  (Sampling) </span></span>
<span id="cb20-232"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 Iteration: 4000 / 4000 [100%]  (Sampling) </span></span>
<span id="cb20-233"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2700 / 4000 [ 67%]  (Sampling) </span></span>
<span id="cb20-234"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2800 / 4000 [ 70%]  (Sampling) </span></span>
<span id="cb20-235"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 2900 / 4000 [ 72%]  (Sampling) </span></span>
<span id="cb20-236"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3000 / 4000 [ 75%]  (Sampling) </span></span>
<span id="cb20-237"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3100 / 4000 [ 77%]  (Sampling) </span></span>
<span id="cb20-238"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3300 / 4000 [ 82%]  (Sampling) </span></span>
<span id="cb20-239"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3400 / 4000 [ 85%]  (Sampling) </span></span>
<span id="cb20-240"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3500 / 4000 [ 87%]  (Sampling) </span></span>
<span id="cb20-241"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3600 / 4000 [ 90%]  (Sampling) </span></span>
<span id="cb20-242"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3700 / 4000 [ 92%]  (Sampling) </span></span>
<span id="cb20-243"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3800 / 4000 [ 95%]  (Sampling) </span></span>
<span id="cb20-244"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3400 / 4000 [ 85%]  (Sampling) </span></span>
<span id="cb20-245"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3500 / 4000 [ 87%]  (Sampling) </span></span>
<span id="cb20-246"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3600 / 4000 [ 90%]  (Sampling) </span></span>
<span id="cb20-247"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3700 / 4000 [ 92%]  (Sampling) </span></span>
<span id="cb20-248"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3800 / 4000 [ 95%]  (Sampling) </span></span>
<span id="cb20-249"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 3900 / 4000 [ 97%]  (Sampling) </span></span>
<span id="cb20-250"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 3 finished in 1.7 seconds.</span></span>
<span id="cb20-251"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2000 / 4000 [ 50%]  (Sampling) </span></span>
<span id="cb20-252"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2100 / 4000 [ 52%]  (Sampling) </span></span>
<span id="cb20-253"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2200 / 4000 [ 55%]  (Sampling) </span></span>
<span id="cb20-254"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2300 / 4000 [ 57%]  (Sampling) </span></span>
<span id="cb20-255"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2400 / 4000 [ 60%]  (Sampling) </span></span>
<span id="cb20-256"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2500 / 4000 [ 62%]  (Sampling) </span></span>
<span id="cb20-257"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2600 / 4000 [ 65%]  (Sampling) </span></span>
<span id="cb20-258"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2700 / 4000 [ 67%]  (Sampling) </span></span>
<span id="cb20-259"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3200 / 4000 [ 80%]  (Sampling) </span></span>
<span id="cb20-260"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3300 / 4000 [ 82%]  (Sampling) </span></span>
<span id="cb20-261"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3400 / 4000 [ 85%]  (Sampling) </span></span>
<span id="cb20-262"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3500 / 4000 [ 87%]  (Sampling) </span></span>
<span id="cb20-263"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3600 / 4000 [ 90%]  (Sampling) </span></span>
<span id="cb20-264"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3700 / 4000 [ 92%]  (Sampling) </span></span>
<span id="cb20-265"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 3900 / 4000 [ 97%]  (Sampling) </span></span>
<span id="cb20-266"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 Iteration: 4000 / 4000 [100%]  (Sampling) </span></span>
<span id="cb20-267"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 Iteration: 4000 / 4000 [100%]  (Sampling) </span></span>
<span id="cb20-268"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 5 finished in 1.7 seconds.</span></span>
<span id="cb20-269"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 6 finished in 1.6 seconds.</span></span>
<span id="cb20-270"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2800 / 4000 [ 70%]  (Sampling) </span></span>
<span id="cb20-271"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 2900 / 4000 [ 72%]  (Sampling) </span></span>
<span id="cb20-272"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3000 / 4000 [ 75%]  (Sampling) </span></span>
<span id="cb20-273"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3100 / 4000 [ 77%]  (Sampling) </span></span>
<span id="cb20-274"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3200 / 4000 [ 80%]  (Sampling) </span></span>
<span id="cb20-275"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3300 / 4000 [ 82%]  (Sampling) </span></span>
<span id="cb20-276"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3400 / 4000 [ 85%]  (Sampling) </span></span>
<span id="cb20-277"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3800 / 4000 [ 95%]  (Sampling) </span></span>
<span id="cb20-278"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 3900 / 4000 [ 97%]  (Sampling) </span></span>
<span id="cb20-279"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 Iteration: 4000 / 4000 [100%]  (Sampling) </span></span>
<span id="cb20-280"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 4 finished in 1.8 seconds.</span></span>
<span id="cb20-281"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3500 / 4000 [ 87%]  (Sampling) </span></span>
<span id="cb20-282"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3600 / 4000 [ 90%]  (Sampling) </span></span>
<span id="cb20-283"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3700 / 4000 [ 92%]  (Sampling) </span></span>
<span id="cb20-284"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3800 / 4000 [ 95%]  (Sampling) </span></span>
<span id="cb20-285"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 3900 / 4000 [ 97%]  (Sampling) </span></span>
<span id="cb20-286"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 Iteration: 4000 / 4000 [100%]  (Sampling) </span></span>
<span id="cb20-287"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Chain 2 finished in 2.0 seconds.</span></span>
<span id="cb20-288"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb20-289"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; All 6 chains finished successfully.</span></span>
<span id="cb20-290"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Mean chain execution time: 1.7 seconds.</span></span>
<span id="cb20-291"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Total execution time: 2.2 seconds.</span></span></code></pre></div>
</div>
<p>Y sale prácticamente lo mismo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(mbrm_alt)</span>
<span id="cb21-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  Family: poisson </span></span>
<span id="cb21-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   Links: mu = identity </span></span>
<span id="cb21-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Formula: y ~ b0 + b1 * (t - change) * step(change - t) + b2 * (t - change) * step(t - change) </span></span>
<span id="cb21-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          b0 ~ 1</span></span>
<span id="cb21-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          b1 ~ 1</span></span>
<span id="cb21-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          b2 ~ 1</span></span>
<span id="cb21-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          change ~ 1</span></span>
<span id="cb21-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    Data: df (Number of observations: 23) </span></span>
<span id="cb21-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   Draws: 6 chains, each with iter = 4000; warmup = 500; thin = 1;</span></span>
<span id="cb21-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          total post-warmup draws = 21000</span></span>
<span id="cb21-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb21-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Population-Level Effects: </span></span>
<span id="cb21-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;                  Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS</span></span>
<span id="cb21-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; b0_Intercept        63.38      2.92    57.00    68.66 1.00     7444     7067</span></span>
<span id="cb21-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; b1_Intercept         0.50      0.68    -0.71     1.92 1.00     6217     7902</span></span>
<span id="cb21-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; b2_Intercept        -1.05      0.42    -1.90    -0.27 1.00     8058     8853</span></span>
<span id="cb21-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; change_Intercept  2007.95      2.88  2002.84  2014.69 1.00     7429     6453</span></span>
<span id="cb21-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb21-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Draws were sampled using sample(hmc). For each parameter, Bulk_ESS</span></span>
<span id="cb21-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; and Tail_ESS are effective sample size measures, and Rhat is the potential</span></span>
<span id="cb21-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; scale reduction factor on split chains (at convergence, Rhat = 1).</span></span></code></pre></div>
</div>
<p>Me queda pendiente hacerlo con Turing.jl Saludos</p>


</section>
</section>

 ]]></description>
  <category>estadística</category>
  <category>brms</category>
  <category>análisis bayesiano</category>
  <category>2023</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/21/regresion-poisson-brms/index.html</guid>
  <pubDate>Fri, 20 Jan 2023 23:00:00 GMT</pubDate>
  <media:content url="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/21/regresion-poisson-brms/imagen_post.png" medium="image" type="image/png"/>
</item>
<item>
  <title>Cachitos 2022. Tercera parte</title>
  <dc:creator>José Luis Cañadas Reche</dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index.html</link>
  <description><![CDATA[ 



<p>Vamos ya con la última entrada del cachitos de este año. Las anteriores, las tenemos en <a href="../../../../2023/01/02/cachitos-2022-primera-parte/">esta</a> y <a href="../../../../2023/01/03/cachitos-2022-segunda-parte/">esta otra</a></p>
<p>El csv con el texto de los rótulos para 2022 lo tenemos en este <a href="https://drive.google.com/file/d/1S2Qm_Xv0UGshbwUpAWeF-nGX2JbZp7RV/view?usp=share_link">enlace</a></p>
<p>Vamos al lío</p>
<section id="librerías" class="level2">
<h2 class="anchored" data-anchor-id="librerías">Librerías</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"></span>
<span id="cb1-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">suppressPackageStartupMessages</span>({</span>
<span id="cb1-3">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse) </span>
<span id="cb1-4">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidytext)</span>
<span id="cb1-5">        </span>
<span id="cb1-6">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(magick)</span>
<span id="cb1-7">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(RColorBrewer)</span>
<span id="cb1-8">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(wordcloud)</span>
<span id="cb1-9">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(topicmodels)</span>
<span id="cb1-10">        </span>
<span id="cb1-11">        }</span>
<span id="cb1-12">    )</span></code></pre></div>
</div>
</section>
<section id="lectura-de-datos-y-vistazo-datos" class="level2">
<h2 class="anchored" data-anchor-id="lectura-de-datos-y-vistazo-datos">Lectura de datos, y vistazo datos</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">root_directory <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/media/hd1/canadasreche@gmail.com/public/proyecto_cachitos/"</span></span>
<span id="cb2-2">anno <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2022"</span></span></code></pre></div>
</div>
<p>Leemos el csv. Uso DT y así podéis ver todos los datos o buscar cosas, por ejemplo <code>emérito</code> o <code>Ayuso</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">subtitulos_proces <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{root_directory}{anno}_txt_unido.csv"</span>))</span>
<span id="cb3-2"></span>
<span id="cb3-3">subtitulos_proces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb3-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(texto, n_fichero, n_caracteres) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb3-5">  DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>()</span></code></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-709277a1ead6331117f9" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-709277a1ead6331117f9">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488"],["bienvenidos si estáis todos es porque habéis recordado que tras los cuartos van tu banco hacienda y el rey emérito","bueno si eres colchonero al menos estás acostumbrado a los disgustos","faella carrá jn e el amor todo es empezar 3","en cachitos como en el amor y en el rascar todo es empezar os quedan tres horas de canciones buenas y chistes malos","esta actuación contiene más latigazos cervicales 32 que una colisión en cadena","la oración pagana que todos hemos rezado mucha ms","la oración pagana que todos hemos rezado muchas más veces de las que nos gustaría reconocer","aquel año el cádiz descendió a 2 b y creemos que bisbal no tuvo nada que ver","ha llegado ya el momento de abrir el melón de que este muchacho canta raro","ana y zzoilo n amour remix","él sube un tema a redes ella lo escucha y publica unos versos en twitter él le propone una colaboración","y fueron felices y zzoilo pasó de los karaokes k a tener un éxito sonando en medio mundo","la letra contiene palabras de amor en 6 idiomas sl una navaja suiza para ligar durante un erasmus","tamante soy un superman","en 2022 el youtuber míster jágger le recordó la letra de la canción palabra por palabra","lo que está claro es que david sí tiene una doble identidad por la noche estrella del pop por el día marca de colonias","ágata lys abrió mentalidades blusas y braguetas en la españa del posfranquismo","hi en el año 75 esta actuación debió de traer mucha cola","a la versión para adultos del personaje de blake edwards podría titularse la manguera rosa","camilo sesto robando protagonismo a los tenderos en 4 la feria de artesanía iberoamericana ñ","en el siglo xv otros españoles con ese mismo peinado a ya les habrían robado el puesto entero","que sí señor que canta muy bonito pero si no piensa comprar le importaría apartarse","para la escena anterior no se han utilizado dobles de riesgo dónde íbamos a encontrar a uno con ese bigotillo","espera que parece que se ha quedado con ganas de más","por alguna razón tú también estás un conteniendo la respiración en casa","por favor que pasen las asistencias para el cachito anterior","cuando 3 sudamericanos podían poner españa a sus pies sin jugar como delanteros","el de la pandereta tiene un trabajo muy sencillo pero no acaba de dar con la tecla en el grupo le llaman alberto casero","la orquesta gente joven fue posponiendo el cambio de nombre como el psoe con la ley trans","y ey e 6 años de conservatorio para gri","entellas luna y el toro 2 e","con tony lopez voz de oro sobran las presentaciones","el toro estaría enamorado de la luna pero el de decorados no lo debió de entender bien","como veis no es imprescindible ponerse reguetón para estar en la tica un ratillo","hace chacachá entonces podemos llamarlo y q tren de altas prestaciones de extremadura","aaa pad f olino radio orquesta","con movimientos parecidos al tiro liro los seguidores de bolsonaro llaman a los marcianos para frenar a lula","los míticos kin laría a la voz y manolo gas a la batuta recuperaron otros temones como la vaca lechera","te river lando el viejo rock","mayte river sería la hermana de mike rios desde luego ambos eran hijos del rock","debieron traducir la letra con el google translate de la época el collins no phil sino el diccionario","mejor nos vamos a las genuinas fuentes del rock","y lee lewis eat balls of fire di","este año dijimos adiós al último grande de la edad dorada del rock and roll","momento para sacar las cerillas y quemar el piano del comedor más vale que tus suegros sean muy fanáticos de the killer","je sigue sputnik st century boy","no a todo el mundo le favorece tanto un gato electrocutado en la cabeza","de imagen y de mensaje iban sobrados pp como samantha hudson pero con musicón","es sara socas no es de aquella batalla de gallos que no tampoco","un paseo trilingúe y canalla por el raval y sin final feliz hit de un grupo que mereció más reconocimiento oh shie","cualquier que haya caminado por el centro de barna ha oído esta cantinela comercial cerveza beer","lio aragón batita de ron 4","dedicado a los médicos de familia que y en este momento se están dando al alcohol","será esto pasarse de apología del pimplar te preguntas con una copa en la mano","nevadas volcanes inundaciones maría jiménez hace tiempo que convivimos con las fuerzas de la naturaleza","si trabajara en una oficina se llamaría despecho","una canción de juan gabriel muy contagiosa y con varias mutaciones el covid mexicano","cuando el camarero se viene arriba a después de cerrar el karaoke","especialista en cantar canciones bonitas poniendo cara de abrir la carta de iberdrola","este año varios artistas grabaron una versión benéfica para celebrar el 75 cumpleaños de víctor manuel","22 el grupo de schródinger para muchos son mocedades y el consorcio al mismo tiempo mo","la canción perfecta para responder al telefonillo cuando te digan soy yo","sigue siendo la canción española más puntuada en eurovisión","la letra parece escrita a cul a","la letra parece escrita a cuatro manos entre nicolás copérnico y tamara falcó","fabio capello siempre fue e as de traje que de chándal 7 a","tranquilos es sólo un efecto de cámara o podéis beberos ese ch bm","ms voz en drre voz en directo","si te has propuesto empezar el año comiendo 5 piezas de fruta al día ya sólo te quedan 4 de nada","sobrino del gran manolo caracol mejoró la canción original de cecilia el himno de interflora","señora de rocio jurado valga la redundancia","rocío ya cumplía la ley de transparencia 23 años antes de su aproba","rito fernández de la mochila azul","como queriendo revelar donde había estado todo ese tiempo en 2015 grabó la canción debajo del sombrero","él tiene 53 años la canción más de 40 y la de la mochila suponemos que una hernia discal","este es el tipo de kiko que nos gusta que nos pongan junto a la caña","en 2022 cayeron los muros de metacrilato ya sólo llevamos mascarilla en transporte orgías y atracos","por cierto nosotros también echamos mucho de menos la hora musa","carmel la primera amy winehouse tenía pinta de ser más de clase de pádel que de rehab","an r8b británico blanco e imperecedero como el porridge o tetreimt e","no soportaba la lluvia porque claramente era más de soul","si tuviera sólo una pizca más de clase habría que aplicarle la ley celaá","ve sí sty springfield i y y 1 of a preacher man","la nana con la que se duermen las gemelas del ex obispo de solsona","aretha franklin también hija de un predicador rechazó grabarla","después de escuchar este temazo terminó haciendo su propia versión veleta franklin","fue uno de los primeros éxitos internacionales del reggae él es el desmond del que habla ob la di ob la da","do diga se llamaba luces en la o","el programa se llamaba luces en la noche pues ni una cosa ni la otra","howwstoppers ve nothing but a house party","es muy raro ver actuar con tanta coordinación a quienes están a la izquierda","dos de los miembros eran hermanos de la estrella de atlantic records solomon burke","puro northern soul amenizando la zona de jardinería de un leroy merlin","los enemigos titularon dónde su versión de este hit del más infravalorado de los cantantes de soul","tex eligió mal a su archienemigo james brown no sólo sedujo a su novia también le disparó en un club","ctor explosion s feo chaval","con faldas y a lo loco la banda más cafre y sinvergúenza del garage punk patrio y","hipervitaminada de la canción una re one ugly child de larry bright","como feos de pleno derecho por eso somos guionistas vamos a ofendernos un poco y ahora seguimos","el eslabón perdido entre led zeppelin y el homo eructus","el sevilla inventó el movimiento body positive aunque él probablemente no sepa ni qué significa","así serían los habitantes de la aldea de astérix y obélix si las cantimploras llevaran rebujito","no os confundáis esto es john wayne de los enemigos los enemigos de john wayne eran los indios","es una canción doblemente cinéfila centrada en john wayne pero inspirada en una frase de la chaqueta metálica","e en cachitos somos muy devotos hemos hecho j cientos de veces el camino de josele santiago","hoy en megaestructuras tupé de loquillo","en estos años fue cuando el loco escoltado por sabino se cayó en la marmita del rock sigue alli desde entonces","isabel il murió sin saber que tenía unos nietos en murcia que hacen que harry parezca un santo","oes del silencio roe de leyenda","este fue su primer single todo ha cambiado mucho todo menos el presentador de este programa jordi hurtado","los únicos héroes a los que marvel todavía no ha sobreexplotado","manolo no gana para disgustos primero fue lo del carro y ahora wilma tampoco le abre la puerta","atención a las sorprendentes voces del coro de guitarristas castrati","ahora ya sabéis cual era la temperatura exacta en la escuela de calor","somos fieles seguidores de la doctrina de auserón el a pop tol santiago","como teodoro garcía egea empezaron triunfando con huesos","he aquí la precuela de la flaca de jarabe de palo","quimi portet y manolo garcía amarraron este proyecto en la puerta del baile para arrancar el último de la fila","dad jardín 4 e casa es suya","estos talking heads madrileños son uno de los grupos más infravalorados de la movida","su casa es suya hoy en día la letra pertenece al género de ciencia ficción","itam go 14 daldas mojadas","a la guitarra eléctrica rafa callejo fundador de la banda y coautor de esta canción fallecido en 2022","4 el río bravo la valla el estrecho el canal de la mancha el atlántico el tema lleva siglos de plena actualidad","el estribillo guarda un sorprendente parecido con la canción pensamiento de la banda de stephen stills manassas á","los ochenta la década en la que los pianos de cola servían para apoyar el sintetizador","ya está bien con la bromita devolvedle a rafa las gafas de ver de lejos","ana nuria dimas y víctor cucart hermanos residentes en gandía y con récord de asistencia a catequesis","al español le falta una palabra para definir esta sensación entre grima y ternura grímural","una canción del compositor cubano rené touzet que ha tenido más versiones que el fraude de las mascarillas","y 4 a elsa fue pareja de valerio lazarov harían falta 2 ef muchos tiovivos para marearla","si la azafata monta este show en pleno vuelo es momento de empezar a sospechar que algo va mal","as y oundations 1ld me up buttercup","una arriesgadísima realización que combina el plano secuencia con el contrapicado o plano papada","si quieres conservar intacta tu vajilla jamás sientes a un trombonista a la mesa","cuando las tanxugueiras fueron hacía mucho que andrés do barro había vuelto","logró cuatro números uno cantando en gallego durante la dictadura y no fue gracias a sus coreografías","su especialidad versiones guatequeras de folk iberoamericano a la madre de joaquín prat le molaban","décadas después los latinos se vengarían enviándonos el reguetón","jpo latidos a virgen de la macarena","estamos casi seguros de que los asuntos de ligar con hembras serranas no los lleva la virgen de la macarena","bastante lío ha tenido este año con la mudanza de queipo de llano","no queda ni rastro de este grupo en interne el algoritmo también está programado para ol debe ser que far traumas","ntores de híspalis 1e no nos falte de ná","la primera comunión 7 de macarena olona rena olona","las sevillanas ya no se sostienen sobre el televisor pero é aún podemos meter a 25 dentro de él chúpate esa progreso","desafortunadamente pascual gonzález compositor y fundador del grupo sí nos faltará desde este año","el sol de méxico contribuyó bastante al calentamiento global de la chavalería","el teclista está en tierra de nadie era el toni cantó de la banda","k astley ver gonna give you up","este tema lleva 15 años siendo un meme de internet se llama rickroll y aparece cuando menos te lo esperas","con el año político que llevan rick astley es ahora mismo la única fuente de estabilidad social en reino unido","í en la portada de su único álbum iba exactamente con esa ropa se titulaba pienso quedarme soltero mal no iba","tiene mérito lograr un one hict wonder llamándote carlos pérez y teniendo aspecto de haber liderado la fuga de la modelo","rdaliso a no yo no sé estar","en realidad todos estaban esperando a que cantase la de yo no te pido la luna era demasiado pedir","en algunas cenas de nochevieja también se respira esa calma tensa","la historia interminaaaaaaaablececee nananaaaanananadá en español más que cantarse se tararea","el pasado verano murió el director de la película asi que este año no diremos que molaba más el libro","right between the eyes entrecejo a cargo del grupo wax cera un himno en los centros de estética","en los 80 el mismo oucfe te valía igual para fundar una startup de informática que una banda de éxito","la letra le dice a bruce springsteen que hay algo más que coches y chicas se referiría al fútbol no","paddy mcaloon dijo de sí mismo que era el mejor compositor de reino unido así que un poco de luis padrique también es","hombreras mechas americanas remangadas la única forma de ir más ochenteros era disfrazarse de naranjito","pasaron de boy band pionera filfs de manual","7 si algo ha quedado claro 40 años después es que duran duran duran","nosotros no encendimos el fuego estaba así cuando llegué y tú más el argumentario completo de una sesión de control","la letra incluye referencias a 118 políticos artistas o eventos se canta siguiendo el índice de la larousse","joel hoy parece otro señor pero sigue vivo algo que sólo pueden decir 4 de las más de 60 personas que menciona","se abre el telón y aparece una paella enorme con un trocito minúsculo de carne en el medio cómo se llama el cantante","el rótulo anterior no lo cobramos porque nos lo dictó nuestro cuñado","the cardigans las rebequitas el grupo favorito de tu madre cuando refresca","abba roxette europe the cardigans qué buenos los suecos para montar grupos y qué vagos para montar muebles","crees que tu cena familiar ha sido tensa piensa que 4 en la mesa de los gallagher ponen cuchillos de plástico","liam introdujo en el pop la postura del jubilado opinando sobre una obra en la vía pública","el batería acaba de pillar el chiste de paul mccartney","si no te suenan es porque llegaron tarde al britpop y eran demasiado blanditos para el indie","rsailor ha ur to the floor","pa así eran las fiestas de nochevieja a antes de la ley antitabaco","el mayor éxito de imbruglia es en realidad una versión de una desconocida banda estadounidense ednaswap 4","midge fue líder de ultravox y como veis domina el arte o del falsete el santiago abascal escocés","la marca swatch introdujo esta canción en una campaña desde entonces funcionó como un reloj","en la familia de los himnos lgtbi este tema está junto a a quién le importa pero con un pelín más de hartura","al algoritmo que sabe lo que nos gusta o no nos gusta en este mundo raphael le vuelve loco","édith piaf le cambió algo la letra y convirtió este vals en una de sus canciones más famosas la foule","estos guitarristas fueron pioneros en dar la espalda al público mucho antes que los planetas","que la posproducción no os engañe fallecido en 2022 manolo sanlúcar fue uno de los guitarristas más grandes","en su guitarra cabía una banda al completo y era capaz de tocarla bien hasta cuando se sentaba al piano","grecas estoy amando locamente","su carrera meteórica tiene luces y como se ve bastantes sombras","iconos de vivir la vida locamentí en realidad su historia va de música mujeres y desigualdad","además de un histórico guitarrista sanlúcar de barrameda dio al mundo a estas seis amigas íntimas que lo petaron sin rubor","si le quitáis la cámara lenta podéis ver una coreografía de melody","niños no os preocupéis que en cuanto terminen la actuación los reyes magos se ponen con lo de los regalos","el pelo de amina simboliza este año la lucha contra tanto alí y mustafá cegado por el velo del machismo y la intolerancia","garlochí no es una variante de sarandonga sino el término caló para decir corazón","si anne igartiburu se hubiera criado en triana se despediría con un hasta mañana garloch","un portento vocal apodada la voz de cristal de la copla que falleció en 2022","más que una feria era una fiera en los escenarios de hecho inspiró el peinado de teen wolf","el tercer padre de la rumba siempre salía con su piano se conoce que tenía ganas de bailar acumuladas","arriba con él yo me voy mañana los franco fear josé antonio","su hombre blandengue ha servido para una campaña del ministerio de igualdad a ver cuándo le toca a la mandanga","la herencia de el fary es infinita y tampoco un o ho","tobago sonó en la despedida de albert rivera del bufete de abogados donde trabaj donde estaba","lo de mezclar ropa de calle con ropa de estar por casa no lo inventó rosalía","anskiy elardor hi aque preventivo de la urss","después de todo el año pensándolo tenemos algunas respuestas ninguna buena","mn poner resistiré y salir al balcón a aplaudir a los militares","recuperar el lema de la transición a follar que el mundo se va a acabar","sacar del armario las camisetas pacifistas y morir contento teniendo razón","82 negarlo todo y seguir viviendo no como el resto de borregos que creen a los medios manipuladores","de la magia del directo se encargaba directamente uno disfrazado de tamariz","el difunto vocalista juan antonio canta reapareció con el genial y surrealista rap de los 40 limones","no si os parece le pagamos el vuelo a rosalía desde miami para salir 30 segundos gestión de recursos se llama","cuando ginebras se vayan a vivir con las kardashian pondremos versiones de su paco y carmela","el morro que le echaron en esta versión lo han aplicado al resto de temas musicales personales y políticos","por el pelo y la afinación parece manel navarro pero no es coral alonso siendo punki en los 80","añ en galicia antes de abel caballero los conciertos y se hacian de día porque no existía la luz la creó él","para creadores vigueses antón reixa 8 co llevando al absurdo el concepto de economía sumergida","luego en la sgae ya descubriría que otra economía sumergida es posible cantó y le echaron no les moló la movida viguesa","uno de los grandes compositores patrios lo mismo sonaba en una feria que en el hilo musical del dentista","su primer disco se llamó juan carlos calderón presenta a juan carlos calderón lba bien de autoestima","in paulyoung ve ls in the air","el cantante se nos parece un poco al rubio de cruz y raya también lo veis o estamos locos","estaban tan seguros de que la canción era un pepínaco que hacían música disco vestidos como un contable de los 70","miguel gallardo como su propio nombre indica para nosotros que le está ofreciendo un viaje a cuenca","disculpe un momento voy a consultar disponibilidad","el autor del éxito nuestra playa muy lejos de su zona de confort","como les ocurre a los esquimales con el blanco emilio josé conoce cientos de palabras para decir empalagar","apuntad los ingredientes para este pastel de carne e vozarrón épica teatralidad sudor y chorreras e","el videoclip de este tema fue dirigido por michael bay y por supuesto incluye persecuciones y un helicóptero","si tenemos mejor clima que los británicos pero nuestro grupo de 3 hermanos es café quijano","el del medio de los bee gees se me ha aparecido en sueños y cuando me he fijado mejor era quique san francisco","el pop boloñés puede ser tan bueno como su salsa","esta leyenda de la música italiana cultivó con éxito el look llevo 15 días durmiendo en un ford fiesta","la coreografía viene a recordarnos que el","una versión del marinaio de gianni morandi en la gran voz de una cantante muy familiarizada con la sensación de mareo","víctor abundancia y su banda enteramente h7 ompuesta por extras de miami vice compuesta por ia","y o el de contabilidad tras perder la cuenta de los cubatas que ha pedido en el karaoke","íbamos a poner la gasolina pero estaba carísima","que no os despiste el traje y el peinado a raya en realidad el discurso es el mismo que el de daddy yankee","francisco eligió el nombre artístico cuando los buenos aún no estaban pillados como los que llegaron primero a hotmail","mitad señor mitad correcaminos un centauro de marca acme","y después de la versión junto a ojete calor es imposible escucharla sin echar de menos al calcetín con ojos","n bilirrubina 5d guerra","e asise hacen los niños y en la república dominicana","bien ha llegado el momento de huir del primo soltero y que este año se ha apuntado a clases de salsa","padre de la salsa intelectual además de un gran cantante blades es probablemente el mejor contante","h este himno de más de 7 minutos forma parte de siembra z el disco más vendido de la historia de la salsa","lo más viral del covid después del covid claro","sus fans se debatían entre la admiración y la envidia que producía comprobar que ellos si tenían terraza","necesitaron una pandemia mundial para dar el pelotazo a almeida le bastó con un saque de honor","paulina llevando al extremo la clásica pesadilla de salir de casa sin pantalones","ñ una interpretación para quitarse el sombrero","si no veis a la cantante tranquilos todo en orden e es que lleva un traje de camuflaje","se puso noelía porque llamarse chayanna era dar demasiadas pistas","tuvo un éxito fugaz y efimero suponemos que ahora vive preguntándose si alguien la llamará","han pasado 20 años y seguimos sin pillar la metáfora por aclararnos le quiere ride como a su bike","aquel verano trabajaron más que un camarero en la feria de abi","a excelente resumen de la filosofía del colegio mayor ahuja y bastante mejor para cantar a coro desde las ventanas","antes de hacer dúo con pajares fue payaso cómico y cantante y este fue el hit de su primer disco romance del ajo","ahora psicólogos de instagram es cuando pensáis mn en ese niño interior adorado y vuestra fe se tambalea","tampoco os fieis de la primera impresión más o menos así veían a españa antes de ganar el eurobasket 2022","rebruno quiero hacer pipí papá","11d id no os preocupéis la tele pública respeta vuestras e vejigas aunque no tenga anuncios","nano y su banda vid el gnomo","efectivamente david hay hierbas que pueden curar de qué tarro las cogiste por curiosidad","claudio biern el walt disney español que en paz descanse debió de ver naves en llamas más allá de orión","los hermanos que hicieron la sintonía de don quijote se atrevieron con el musical xanadú que ya era una fantasía","lo protagonizó olivia newton john que también participó en su banda sonora entre otras muchas cosas","abad 1981 ho racio pinchadiscos h","aunque la perdimos este año siempre nos quedará su música sus pelis y su marioneta","tras su fallecimiento muchos descubrieron que era muchísimo más que grease especialmente en lo musical","en españa causaba furor a ese señor de provincias ferretero y de finde","ya en el 77 estaba clara la necesidad del uso generoso en las discotecas del corta el rollo","f max b jugaba con esa figura del macho alfa una ironía que se pillaba en esa época a ver qué tal en esta","mientras en otra dimensión triana canta yl abre la puerta niña","fue una forrest gump de la historia del arte y la música en su peli salen dalí bowie coco chanel","a coro 500 16 la virginidad miguel bosé","idación tony ma manero ersexy girl","me 20 años después de que este tema saliera en un anuncio lb lanzándolos a la fama los barceloneses han dicho adéu","su sonido disco funk se ha ido refinando ee en paralelo al refinamiento de su barbero yz","aquí los padres del italo disco perpetuando el tópico del español ladrón son 678 casos aislados","uno de los hermanos la bionda el de la chaquetilla masterchef carmelo falleció este año","más tarde produjeron vamos a la playa y no tengo dinero dos de los mejores uooos de la historia de la música","vaya nuestro apoyo a todos los currantes pero esta vez un poquito más a los de ryanair y vueling","así han recibido in the navy los presupuestos de este año","esta no es la profe de fama casi seguro ni siquiera la de fama a bailar","delia pasó del anonimato a la fama tras salir en un anuncio de tabaco en que pasaba del anonimato a la fama","fallecida este año irene cara dejó dos temazos de oscar este por fama y otro por flashdance","desde la atrevida ignorancia de algún panfleto le definieron como transformista supremacista asturiano","los frioleros del mundo al menos lo reconocemos un poco superior sí que es","os reiréis pero la postura de ángel beato aguanta terremotos de magnitud 5","muchos españoles hemos estado cantando 30 año nada es igual que una sirena es nadas","en esta la versión original en alemán los globos no eran rojos pero el final era el mismo apocalipsis nuclear","los de nena llaman a kiss fm plan dorado de pensiones","hay canciones que encapsulan un tiempo y un lugar esta delicia es una de ellas","para diferenciarse de los espontáneos los de b movie se ponían todos mechas","el que está menos nervioso es vince clarke ex depeche mode que aprovecha el play back para tocar temas de ismael serrano","el vocalista andy bell usa la coreo del dúo dinámico soy como el junco que se dobla pero siempre sigue en pie","me tienes aquí colgado es originalmente de las supremes hoy se canta en los centros médicos de la comunidad de madrid","triunfó con kids in america y teloneó a michael jackson dos datos que seguramente no están relacionados","a minnelli 4 sing my mind ans 1","perderá la cabeza pero siempre sabremos donde encontrar a este portento de mujer que nos está mirando a todos","entre el público tenéis a concha velasco agradecida y emocionada","esta canción igual lo notáis la produjeron pet shop boys que saben siempre cuando hacen falta como ahora mismo","suburbia habla en parte de los disturbios de la época de thatcher la versión original de liz truss","que la gorra trumpista no os confunda chris lowe no se mueve ni para invadir el capitolio","su otro single se llamó mi chica tiene un lío con satán lógicamente se convirtieron en un grupo de culto","en su momento fue algo futurista hoy como mucho puede verse como el futuro de podemos","a flores mo me las maravillaía yo","así estamos los españoles pensando en la luz la comida el alquiler y la hipoteca del 2023","podéis probar a hacer esto con el último polvorón bastante mejor que pamplona","lo de comprar el rollo de que jovanotti era un rapero clásico fue una bajada de pantalones en toda regía","habrá visto desaparecer a los dinosaurios pero jordi hurtado al fondo está flipando también","como el príncipe de bel air pero sin darle un puñetazo a nadie","el sobrino de peret saboreó todos los géneros al ser el rumbero de la época con menos complejos","y aquí veis a rishi sunak cuando su mujer le dijo que se llevaba la residencia fiscal fuera de reino unido","el mismo mensaje que el ne me quitte pas 22 pero con la sensibilidad de una baguette","dm ubleyou ase don t go","cec no viene de los productores clivillés y cole sino de su helado preferido cookies 8 cream se ve que era light","los que estuvimos en aquellas discotecas todavía vemos estas clases de zumba con estrés postraumático","ría jesús y su acordeón s pajaritos","está claro que el acordeón fue una apuesta arriesgada pero hay que pensar que la única competencia era chanquete","por supuesto hubo peli se tituló los pajaritos pero no la dirigió hitchcockito como hubiera sido lógico","la coreografía en este caso está basada en artes marciales inventadas lo cual traía consigo un agradable olor a gimnasio","igaboys om boom boom boom","si vais a hacer esta coreografía ojo que los vecinos no se esperan una clase de aeróbic a estas horas","vengaboys viene de un español que decía siempre venga lo de hacer de vengadores puede que venga de otra cosa","como bien sabe ben affleck jlo garantiza el propósito estrella de año nuevo gracias a la dieta del cucurucho","ha demostrado hasta donde llega el poderío latino y lo importante que es leer las cosas antes de firmarlas","la voz que le hace los coros a jennifer lopez se parece muchísimo a la de jennifer lopez","uh eh samantha qué sorpresa el rótulo de hace un rato era de coña eh lo tuyo mola todo la música también","y se entiende perfectamente los disfraces de ardilla pp lo que más","antha hudson masiado coño","nos ha pedido pedro sánchez que os digamos que esta subida también es culpa de la guerra en ucrania","izquierda derecha como veis tienen la postura tan sólidamente definida como el gobierno respecto al sahara","este era el simio más contagioso my antes de la viruela del mono","y la coreografía que hizo llorar a darwin","en 2002 era muy pronto para saber que la canción hablaba de corinna larsen","en el juzgado del corazón de civera las órdenes de detención llevan coreografía","id civera e la detengan","21 años después no se trata tanto de querer como de pode","azúcar no tan moreno con ellas nos ocurre como con andy 8 lucas seguimos sin saber quién es quién","a sigue siendo muy divertido escucharla en alguna 2","curiosamente este año la nochevieja ha caído en saturday night","esta coreografía sigue instalada en alguna parte de tu memoria justo al lado del teléfono fijo de tus padres","a e mula abierta quiero más y","jóvenes guapos populares rimas consonantes parecía un plan perfecto","sin embargo su fulgor se extinguió antes de tiempo como les va a pasar a esas bengalas","yote dax jw 4 perra lorazón","le vimos mucho durante aquel verano pero no tanto como los dependientes del territorio vaquero de el corte inglés","el encuentro entre las dos culturas no volvería a ser tan x estrecho hasta dos años después en la cumbre de las azores","aaa nivel de inglés ketchup","si entonces hubiera existido tiktok hoy dominarían el mundo","estuvo prohibida en los colegios católicos hondureños aseguraban que era una invitación a ser hereje","mayonesa y chocolate hemos comido cosas peores al llegar a casa después de la fiesta de nochevieja","la mayonesa no se les cortó de los vaqueros no podemos decir lo mismo","este famosísimo baile consiste en anexionarse a la pareja como putin a una península del mar negro","aunque no os estéis fijando el tema es un descarado plagio de llorando se fue de la banda boliviana los kjarkas","la relación entre rufián y borrás tiene menos roces","bastan dos acordes para que tu cerebro reproduzca entera esta canción lo dificil es sacársela luego","sería el momento de sacar la versión navideña s sabor turrón","no dirás que no es doble negacionismo","venga que esta nos la sabemos todos de mario conde al dioni","luego se cortó la coleta y empezó a desubicarse un poco a otros también les ha pasado","en este año de huracanes aquí tenéis a otro el eva","con ese tiro de cámara no hay manera de hacer chistes ñ sobre el gorro de juan los realizadores ya no respetan nada n los realizadores ya no respetan nada","con ese tiro de cámara no hay manera de hacer chistes sobre el gorro de juan los realizadores ya no respetan nada","mr nada más dejar la fábrica de coches ya se notaba que los tubos de escape iban a dar problemas","mia 48 12 discos llevan y no han dejado de fruncir el ceño ni una estrofa","quién iba a saber que el resto de canciones se iban a parecer tanto a esta","sin documentos es mejor no quedarse q entreespaña y marruecos","say hasta ahora sólo ha tocado una nota ya tiene que ser un teclado bueno","quín sabina to entre caballeros","sabina pactó con unos ladrones hacerles esta copla y cumplió como lo del cgpj pero con gente responsable","esta canción la ha versionado hace un rato évole así que mandamos nuestras disculpas sinceras a joaquín","advertencia ha llegado el momento de guardar la sidra el gaitero y sacar el kalimotxo","coherencia honestidad y esa pinta de acabar de desembarcar de la perla negra di sí a el drogas","dentes y boikot neras de vivir","dos grandes exponentes del punk rock nacional homenajeando a su padre complejo de edipo","en el público sólo el de la camiseta de platero sabía a qué venía","tero y tu voce de tu cuerpo","fito cabrales el peso pesado más ligero del rock español","él ya llevaba boina y usaba micrófonos cuando villarejo aún era honrado","20 años después de su separación sigue sin haber una sola verbena de pueblo sin platero","la verdad es que dorothy está rarísima después de pegar el estirón","en pilones de varios pueblos de españa se han hallado restos de djs que se negaron a pinchar esto en las fiestas","sabes cómo se llama el cantante de los suaves a yosi","la libertad liando al pueblo py","del califato de córdoba tomaron el nombre y probablemente también su amor por el cuero","es incomprensible que los negacionistas no usaran este tema para protestar por las mascarillas","en 2017 estados unidos les vetó la entrada al pais trump no podía soportar la comparación con semejante pelaso","qpolicia que quede claro que esta canción es para autoconsumo","por su potencial adictivo este estribillo debería ser catalogado como droga dura","mari carmen patrona de la verbena y la cha m e madre de todos los juerguistas de españa","10 años tratando de escribir la frase perfecta y jamás hen lograremos algo tan eficaz como este estribillo","y ahora que hemos localizado a la prima de mari carmen del hermano de ayuso sabéis algo","la publicidad subliminal de la época era como la canción rudimentaria z","el country nunca volvió a ser lo mismo después de este disco lado ponti country la pared sr","lao y maa a ese era hermano del gran wyomin","ua já 1 lo de wyoming era verdad ff","de los doscientos hitazos de este grupo este es el que inspiró todos los temas de ska p","mucho antes del punk los fundadores del grupo cantaban en el coro los peque","siempre se dijo que habían llevadi","ef siempre se dijo que habían llevado el fenómeno fan y le 4 n público más joven aun e a un público más joven aunque esto es pasarse","ñ los hispanoargentinos nos trajeron hedonismo l rock y la talla slim fire","entre la chiquillada podéis ver a ariel rot intentando vender un país para educarlo no lo compramos y ahora mira","su otro nombre speed tampoco era muy original en euskadi ya puestos con los tópicos haberse llamado abstinencia","cuando se suicidó con 44 años no existía el 024 recibe 300 llamadas al día ni más ni menos","que mañana es domingo qué mala suerte con los festivos este año","y no solo las judías todas las legumbres en general están por las nubes","en su último disco se han disfrazado de star wars ángeles de leia y dioni de maestro jedi","en esta época él aún era pablo escobar","a es chimberos vacas del pueblo ya se han escapao","este fue más o menos el argumentario en defensa de las macrogranjas","transitando la fina línea que separa a danny zuko att del protagonista de una peli de eloy de la iglesia","f olivia newton john allá donde estés mt no hace falta que veas esto","boney m y tigretó n las mejores fuentes de grasas saturadas de nuestra infancia","free the nipple bobby farrell ha lavado menos camisetas que iggy pop","una cosa más ni olvido ni perdón para el creativo responsable del jingle care carrefoooou","a medio camino entre lola flores y beyoncé inventó el arte de bailar como si caminaras sobre brasas incandescentes","desde 2013 tina es ciudadana suiza allí disfruta de sus paisajes alpinos y un poco también de su régimen fiscal","en la mente de algunos de vosotros esta canción termina con ay que me meo coa","indiscutible número uno en la escala pantene","no solo han puesto música a la cuenta atrás del planeta y también contribuyeron a ella con un ingente consumo de laca","mark knopfler el hijo no reconocido de miliki","fue el primer sencillo de dire straits la ha tocado tanto que esa stratocaster podría hacer el punteo de memoria","a pesar de su título la canción contiene un 0 de swing","steaqua ll barbie gin ú","un producto danés que te has comido muchas 1 más veces que sus galletas de mantequilla","este 2023 la canción cumple 25 años y tú igual jh deberías empezar a pensar en tu próstata","en realidad ella era italiana no gala","fue un tema pionero del eurodisco y con los años se ha convertido en un infalible himno de estadio","vamos ya que va quedando poco sacad la mermelada","desde el bulo que lo situaba escondido en un armario pasó una década hasta que por fin salió de él","si se os cierra la ventanita del amor preguntad a tamara falcó que os la abre en un nanosegundo","4 an tan agarrotado como el no rompas más mi corazón pm pero con volantes caribeños en las mangas","el baile de chayanne es un arte marcial milenario con el que 4 puedes matar en segundos sobre todo a ti mismo","cuando te queda bien un pantalón de cuero marrón es que te queda bien todo","s que no que esta e no era de gloria estefan","con esta chapan todos los congresos de cardiología aquí es cuando se pierden los papers","bailes exagerados jóvenes felices en bañador y emojis animados aquí nació instagram","mí por muy hedonista que parezca esta canción es una joya filológica de la cultura garífuna de los esclavos del caribe p","esta la ponen indefectiblemente en todas las bodas es cuando el novio rentabiliza la barra libre","la letra es una reflexión nietzscheana sobre la espiritualidad y el deseo lacaniano de arrimar cebolleta","vale el batería no es imprescindible aquí pero habéis visto un ordenador que sonría tanto mirando a la de rojo","ahora es cuando os vais levantando a bailar si no tenéis un tiburón vale un langostino","no lo creereis pero cuando la compuso nelson zapata curraba en pfizer en los ensayos de lo que sería la viagra","en los últimos años cuando alguien pronuncia locomía suele referirse al gluten","sufrieron homofobia sin siquiera salir del armario en los años en los que españa se creía moderna m","esas hombreras nos habrían venido muy bien para mantener la distancia social durante la pandemia","espérate que el que estaba descoyuntándose en realidad es el que toca las congas","el padre del electro mandinga perteneció a una estirpe de griots ancestrales narradores de historias","no solo de marley vive el reggae jimmy triunfó t","no solo de marley vive el reggae jimmy triunfó tras protagonizar la película jamaicana the harder they come","el realizador ha querido tener una deferencia con todos aquellos que a estas alturas ya vais del revés","no hagáis bromitas que nos conocemos el humo es artificial","ol 4 the gang lebration","la canción vale para una fiesta o para pasar la aspiradora lo importante es la actitud y que esté limpia la casa","pues él irá fresquito pero en españa esa camisa sin una buena cadena de oro no luce ni la mitad","el kool de la banda no es el cantante sino el del bajo de juguete que obviamente si lleva cadenita a","o man sound co samba mix","n no te fíes de las apariencias no son 2 sino","catar no es una democracia sino una monarquía absoluta sin respeto por los derechos humanos dos","el esfuerzo del coreógrafo es inútil la única forma de bailar esto es haciendo el trenecito","como en el govern de la gene el bajito lleva la voz cantante lla no para de llamar la atención pero se le ve el plumero y ella no pa p pl","el compositor de la canción es el padre de uno de los de daft punk nadie sabe de cúal","en este caso no podemos asegurar que para esta grabación no haya muerto algún que otro loro","peret seleccionador del equipo nacional de rumba catalana un séquito de verdaderos gitanos de la calle de la cera","defensa en línea con trivote atacante y un 9 no muy guapo pero con un envidiable juego de piernas","freestyle rumbero si les llama c tangana se le suben a la mesa antes del primer plato","los mugs gigantes de mr wonderful no son","mucho champagne hace falta para ser feliz con esos señores mirando","alter ego de marc parrot quien terminó por cansarse del personaje y recuperó al artista","7 conocemos el significado de abanibí pero el de sarandonga sigue siendo un misterio insondable","ah y creemos que aboebé es como los listos llaman ahora al aceite de oliva","esta va para los que estáis solos en casa viéndonos o sea que no estáis solos o sea que no va por vosotros","entonces se la dedicamos a víctor y a tania catedráticos del petardeo por tomarse tan en serio lo de no tomarse en serio","macaulay hoy en día igual se parece más a los ladrones de la peli que a sí mismo de pequeño","a 1 es your mother know sna","g 1 cachitos es como el roscón de reyes a a siempre suele llevar abba dentro","la canción habla de una joven enamorada de un hombre mayor un día más en la oficina para le","esta sí que se la sabe tu madre y tu hija","no fue a eurovisión pero da tal subidón que dan ganas de tener cientos de hijos la generación bandini","mn si hay algún retoño fruto de esta noche llamadle peret o lola","nuestro propósito para este año recurrir más a la risa y mucho menos a la prisa y a la visa","y ll que el mundo se va a acabar"],["00000018.jpg.subtitulo.tif.txt","00000021.jpg.subtitulo.tif.txt","00000024.jpg.subtitulo.tif.txt","00000025.jpg.subtitulo.tif.txt","00000026.jpg.subtitulo.tif.txt","00000029.jpg.subtitulo.tif.txt","00000030.jpg.subtitulo.tif.txt","00000031.jpg.subtitulo.tif.txt","00000032.jpg.subtitulo.tif.txt","00000038.jpg.subtitulo.tif.txt","00000039.jpg.subtitulo.tif.txt","00000040.jpg.subtitulo.tif.txt","00000042.jpg.subtitulo.tif.txt","00000050.jpg.subtitulo.tif.txt","00000051.jpg.subtitulo.tif.txt","00000052.jpg.subtitulo.tif.txt","00000056.jpg.subtitulo.tif.txt","00000058.jpg.subtitulo.tif.txt","00000059.jpg.subtitulo.tif.txt","00000064.jpg.subtitulo.tif.txt","00000065.jpg.subtitulo.tif.txt","00000066.jpg.subtitulo.tif.txt","00000071.jpg.subtitulo.tif.txt","00000072.jpg.subtitulo.tif.txt","00000075.jpg.subtitulo.tif.txt","00000080.jpg.subtitulo.tif.txt","00000082.jpg.subtitulo.tif.txt","00000083.jpg.subtitulo.tif.txt","00000086.jpg.subtitulo.tif.txt","00000088.jpg.subtitulo.tif.txt","00000093.jpg.subtitulo.tif.txt","00000094.jpg.subtitulo.tif.txt","00000095.jpg.subtitulo.tif.txt","00000099.jpg.subtitulo.tif.txt","00000100.jpg.subtitulo.tif.txt","00000104.jpg.subtitulo.tif.txt","00000105.jpg.subtitulo.tif.txt","00000106.jpg.subtitulo.tif.txt","00000111.jpg.subtitulo.tif.txt","00000112.jpg.subtitulo.tif.txt","00000113.jpg.subtitulo.tif.txt","00000114.jpg.subtitulo.tif.txt","00000117.jpg.subtitulo.tif.txt","00000118.jpg.subtitulo.tif.txt","00000119.jpg.subtitulo.tif.txt","00000125.jpg.subtitulo.tif.txt","00000126.jpg.subtitulo.tif.txt","00000127.jpg.subtitulo.tif.txt","00000131.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000141.jpg.subtitulo.tif.txt","00000144.jpg.subtitulo.tif.txt","00000145.jpg.subtitulo.tif.txt","00000146.jpg.subtitulo.tif.txt","00000153.jpg.subtitulo.tif.txt","00000155.jpg.subtitulo.tif.txt","00000156.jpg.subtitulo.tif.txt","00000159.jpg.subtitulo.tif.txt","00000161.jpg.subtitulo.tif.txt","00000162.jpg.subtitulo.tif.txt","00000168.jpg.subtitulo.tif.txt","00000169.jpg.subtitulo.tif.txt","00000171.jpg.subtitulo.tif.txt","00000174.jpg.subtitulo.tif.txt","00000175.jpg.subtitulo.tif.txt","00000176.jpg.subtitulo.tif.txt","00000178.jpg.subtitulo.tif.txt","00000181.jpg.subtitulo.tif.txt","00000186.jpg.subtitulo.tif.txt","00000187.jpg.subtitulo.tif.txt","00000192.jpg.subtitulo.tif.txt","00000193.jpg.subtitulo.tif.txt","00000200.jpg.subtitulo.tif.txt","00000201.jpg.subtitulo.tif.txt","00000202.jpg.subtitulo.tif.txt","00000208.jpg.subtitulo.tif.txt","00000209.jpg.subtitulo.tif.txt","00000211.jpg.subtitulo.tif.txt","00000217.jpg.subtitulo.tif.txt","00000218.jpg.subtitulo.tif.txt","00000224.jpg.subtitulo.tif.txt","00000225.jpg.subtitulo.tif.txt","00000228.jpg.subtitulo.tif.txt","00000229.jpg.subtitulo.tif.txt","00000230.jpg.subtitulo.tif.txt","00000231.jpg.subtitulo.tif.txt","00000236.jpg.subtitulo.tif.txt","00000237.jpg.subtitulo.tif.txt","00000238.jpg.subtitulo.tif.txt","00000241.jpg.subtitulo.tif.txt","00000242.jpg.subtitulo.tif.txt","00000243.jpg.subtitulo.tif.txt","00000244.jpg.subtitulo.tif.txt","00000248.jpg.subtitulo.tif.txt","00000250.jpg.subtitulo.tif.txt","00000255.jpg.subtitulo.tif.txt","00000256.jpg.subtitulo.tif.txt","00000257.jpg.subtitulo.tif.txt","00000258.jpg.subtitulo.tif.txt","00000261.jpg.subtitulo.tif.txt","00000262.jpg.subtitulo.tif.txt","00000264.jpg.subtitulo.tif.txt","00000269.jpg.subtitulo.tif.txt","00000270.jpg.subtitulo.tif.txt","00000271.jpg.subtitulo.tif.txt","00000276.jpg.subtitulo.tif.txt","00000278.jpg.subtitulo.tif.txt","00000284.jpg.subtitulo.tif.txt","00000289.jpg.subtitulo.tif.txt","00000290.jpg.subtitulo.tif.txt","00000291.jpg.subtitulo.tif.txt","00000297.jpg.subtitulo.tif.txt","00000298.jpg.subtitulo.tif.txt","00000304.jpg.subtitulo.tif.txt","00000305.jpg.subtitulo.tif.txt","00000311.jpg.subtitulo.tif.txt","00000313.jpg.subtitulo.tif.txt","00000314.jpg.subtitulo.tif.txt","00000317.jpg.subtitulo.tif.txt","00000318.jpg.subtitulo.tif.txt","00000319.jpg.subtitulo.tif.txt","00000323.jpg.subtitulo.tif.txt","00000324.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000326.jpg.subtitulo.tif.txt","00000332.jpg.subtitulo.tif.txt","00000333.jpg.subtitulo.tif.txt","00000339.jpg.subtitulo.tif.txt","00000341.jpg.subtitulo.tif.txt","00000346.jpg.subtitulo.tif.txt","00000347.jpg.subtitulo.tif.txt","00000349.jpg.subtitulo.tif.txt","00000354.jpg.subtitulo.tif.txt","00000355.jpg.subtitulo.tif.txt","00000356.jpg.subtitulo.tif.txt","00000363.jpg.subtitulo.tif.txt","00000364.jpg.subtitulo.tif.txt","00000367.jpg.subtitulo.tif.txt","00000368.jpg.subtitulo.tif.txt","00000371.jpg.subtitulo.tif.txt","00000372.jpg.subtitulo.tif.txt","00000373.jpg.subtitulo.tif.txt","00000374.jpg.subtitulo.tif.txt","00000376.jpg.subtitulo.tif.txt","00000377.jpg.subtitulo.tif.txt","00000378.jpg.subtitulo.tif.txt","00000379.jpg.subtitulo.tif.txt","00000383.jpg.subtitulo.tif.txt","00000385.jpg.subtitulo.tif.txt","00000389.jpg.subtitulo.tif.txt","00000390.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000401.jpg.subtitulo.tif.txt","00000402.jpg.subtitulo.tif.txt","00000403.jpg.subtitulo.tif.txt","00000410.jpg.subtitulo.tif.txt","00000411.jpg.subtitulo.tif.txt","00000414.jpg.subtitulo.tif.txt","00000415.jpg.subtitulo.tif.txt","00000423.jpg.subtitulo.tif.txt","00000424.jpg.subtitulo.tif.txt","00000431.jpg.subtitulo.tif.txt","00000432.jpg.subtitulo.tif.txt","00000433.jpg.subtitulo.tif.txt","00000436.jpg.subtitulo.tif.txt","00000438.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000445.jpg.subtitulo.tif.txt","00000454.jpg.subtitulo.tif.txt","00000455.jpg.subtitulo.tif.txt","00000459.jpg.subtitulo.tif.txt","00000460.jpg.subtitulo.tif.txt","00000466.jpg.subtitulo.tif.txt","00000467.jpg.subtitulo.tif.txt","00000468.jpg.subtitulo.tif.txt","00000475.jpg.subtitulo.tif.txt","00000476.jpg.subtitulo.tif.txt","00000483.jpg.subtitulo.tif.txt","00000484.jpg.subtitulo.tif.txt","00000491.jpg.subtitulo.tif.txt","00000492.jpg.subtitulo.tif.txt","00000499.jpg.subtitulo.tif.txt","00000501.jpg.subtitulo.tif.txt","00000505.jpg.subtitulo.tif.txt","00000506.jpg.subtitulo.tif.txt","00000508.jpg.subtitulo.tif.txt","00000509.jpg.subtitulo.tif.txt","00000510.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00000516.jpg.subtitulo.tif.txt","00000522.jpg.subtitulo.tif.txt","00000523.jpg.subtitulo.tif.txt","00000529.jpg.subtitulo.tif.txt","00000530.jpg.subtitulo.tif.txt","00000537.jpg.subtitulo.tif.txt","00000538.jpg.subtitulo.tif.txt","00000543.jpg.subtitulo.tif.txt","00000545.jpg.subtitulo.tif.txt","00000551.jpg.subtitulo.tif.txt","00000552.jpg.subtitulo.tif.txt","00000557.jpg.subtitulo.tif.txt","00000558.jpg.subtitulo.tif.txt","00000561.jpg.subtitulo.tif.txt","00000562.jpg.subtitulo.tif.txt","00000563.jpg.subtitulo.tif.txt","00000564.jpg.subtitulo.tif.txt","00000565.jpg.subtitulo.tif.txt","00000566.jpg.subtitulo.tif.txt","00000570.jpg.subtitulo.tif.txt","00000571.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00000576.jpg.subtitulo.tif.txt","00000577.jpg.subtitulo.tif.txt","00000583.jpg.subtitulo.tif.txt","00000585.jpg.subtitulo.tif.txt","00000590.jpg.subtitulo.tif.txt","00000592.jpg.subtitulo.tif.txt","00000597.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000603.jpg.subtitulo.tif.txt","00000604.jpg.subtitulo.tif.txt","00000605.jpg.subtitulo.tif.txt","00000612.jpg.subtitulo.tif.txt","00000613.jpg.subtitulo.tif.txt","00000621.jpg.subtitulo.tif.txt","00000622.jpg.subtitulo.tif.txt","00000628.jpg.subtitulo.tif.txt","00000630.jpg.subtitulo.tif.txt","00000633.jpg.subtitulo.tif.txt","00000634.jpg.subtitulo.tif.txt","00000642.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000648.jpg.subtitulo.tif.txt","00000649.jpg.subtitulo.tif.txt","00000656.jpg.subtitulo.tif.txt","00000657.jpg.subtitulo.tif.txt","00000663.jpg.subtitulo.tif.txt","00000670.jpg.subtitulo.tif.txt","00000671.jpg.subtitulo.tif.txt","00000672.jpg.subtitulo.tif.txt","00000680.jpg.subtitulo.tif.txt","00000686.jpg.subtitulo.tif.txt","00000687.jpg.subtitulo.tif.txt","00000688.jpg.subtitulo.tif.txt","00000694.jpg.subtitulo.tif.txt","00000696.jpg.subtitulo.tif.txt","00000703.jpg.subtitulo.tif.txt","00000705.jpg.subtitulo.tif.txt","00000706.jpg.subtitulo.tif.txt","00000709.jpg.subtitulo.tif.txt","00000710.jpg.subtitulo.tif.txt","00000715.jpg.subtitulo.tif.txt","00000716.jpg.subtitulo.tif.txt","00000718.jpg.subtitulo.tif.txt","00000723.jpg.subtitulo.tif.txt","00000725.jpg.subtitulo.tif.txt","00000729.jpg.subtitulo.tif.txt","00000730.jpg.subtitulo.tif.txt","00000733.jpg.subtitulo.tif.txt","00000735.jpg.subtitulo.tif.txt","00000738.jpg.subtitulo.tif.txt","00000739.jpg.subtitulo.tif.txt","00000742.jpg.subtitulo.tif.txt","00000743.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000752.jpg.subtitulo.tif.txt","00000753.jpg.subtitulo.tif.txt","00000756.jpg.subtitulo.tif.txt","00000757.jpg.subtitulo.tif.txt","00000761.jpg.subtitulo.tif.txt","00000762.jpg.subtitulo.tif.txt","00000771.jpg.subtitulo.tif.txt","00000772.jpg.subtitulo.tif.txt","00000775.jpg.subtitulo.tif.txt","00000776.jpg.subtitulo.tif.txt","00000777.jpg.subtitulo.tif.txt","00000783.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000785.jpg.subtitulo.tif.txt","00000791.jpg.subtitulo.tif.txt","00000792.jpg.subtitulo.tif.txt","00000793.jpg.subtitulo.tif.txt","00000798.jpg.subtitulo.tif.txt","00000800.jpg.subtitulo.tif.txt","00000803.jpg.subtitulo.tif.txt","00000804.jpg.subtitulo.tif.txt","00000805.jpg.subtitulo.tif.txt","00000814.jpg.subtitulo.tif.txt","00000815.jpg.subtitulo.tif.txt","00000820.jpg.subtitulo.tif.txt","00000821.jpg.subtitulo.tif.txt","00000828.jpg.subtitulo.tif.txt","00000829.jpg.subtitulo.tif.txt","00000834.jpg.subtitulo.tif.txt","00000835.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00000846.jpg.subtitulo.tif.txt","00000848.jpg.subtitulo.tif.txt","00000853.jpg.subtitulo.tif.txt","00000854.jpg.subtitulo.tif.txt","00000855.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000862.jpg.subtitulo.tif.txt","00000863.jpg.subtitulo.tif.txt","00000866.jpg.subtitulo.tif.txt","00000867.jpg.subtitulo.tif.txt","00000871.jpg.subtitulo.tif.txt","00000872.jpg.subtitulo.tif.txt","00000873.jpg.subtitulo.tif.txt","00000876.jpg.subtitulo.tif.txt","00000880.jpg.subtitulo.tif.txt","00000883.jpg.subtitulo.tif.txt","00000884.jpg.subtitulo.tif.txt","00000889.jpg.subtitulo.tif.txt","00000891.jpg.subtitulo.tif.txt","00000892.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000899.jpg.subtitulo.tif.txt","00000908.jpg.subtitulo.tif.txt","00000909.jpg.subtitulo.tif.txt","00000910.jpg.subtitulo.tif.txt","00000917.jpg.subtitulo.tif.txt","00000924.jpg.subtitulo.tif.txt","00000925.jpg.subtitulo.tif.txt","00000926.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000932.jpg.subtitulo.tif.txt","00000933.jpg.subtitulo.tif.txt","00000938.jpg.subtitulo.tif.txt","00000939.jpg.subtitulo.tif.txt","00000940.jpg.subtitulo.tif.txt","00000945.jpg.subtitulo.tif.txt","00000946.jpg.subtitulo.tif.txt","00000949.jpg.subtitulo.tif.txt","00000951.jpg.subtitulo.tif.txt","00000954.jpg.subtitulo.tif.txt","00000955.jpg.subtitulo.tif.txt","00000956.jpg.subtitulo.tif.txt","00000959.jpg.subtitulo.tif.txt","00000960.jpg.subtitulo.tif.txt","00000961.jpg.subtitulo.tif.txt","00000965.jpg.subtitulo.tif.txt","00000966.jpg.subtitulo.tif.txt","00000968.jpg.subtitulo.tif.txt","00000969.jpg.subtitulo.tif.txt","00000970.jpg.subtitulo.tif.txt","00000976.jpg.subtitulo.tif.txt","00000977.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000981.jpg.subtitulo.tif.txt","00000982.jpg.subtitulo.tif.txt","00000983.jpg.subtitulo.tif.txt","00000987.jpg.subtitulo.tif.txt","00000988.jpg.subtitulo.tif.txt","00000994.jpg.subtitulo.tif.txt","00000995.jpg.subtitulo.tif.txt","00000997.jpg.subtitulo.tif.txt","00001001.jpg.subtitulo.tif.txt","00001003.jpg.subtitulo.tif.txt","00001005.jpg.subtitulo.tif.txt","00001006.jpg.subtitulo.tif.txt","00001008.jpg.subtitulo.tif.txt","00001010.jpg.subtitulo.tif.txt","00001011.jpg.subtitulo.tif.txt","00001012.jpg.subtitulo.tif.txt","00001015.jpg.subtitulo.tif.txt","00001016.jpg.subtitulo.tif.txt","00001019.jpg.subtitulo.tif.txt","00001026.jpg.subtitulo.tif.txt","00001027.jpg.subtitulo.tif.txt","00001030.jpg.subtitulo.tif.txt","00001031.jpg.subtitulo.tif.txt","00001032.jpg.subtitulo.tif.txt","00001035.jpg.subtitulo.tif.txt","00001036.jpg.subtitulo.tif.txt","00001040.jpg.subtitulo.tif.txt","00001041.jpg.subtitulo.tif.txt","00001042.jpg.subtitulo.tif.txt","00001044.jpg.subtitulo.tif.txt","00001045.jpg.subtitulo.tif.txt","00001046.jpg.subtitulo.tif.txt","00001047.jpg.subtitulo.tif.txt","00001051.jpg.subtitulo.tif.txt","00001052.jpg.subtitulo.tif.txt","00001056.jpg.subtitulo.tif.txt","00001057.jpg.subtitulo.tif.txt","00001060.jpg.subtitulo.tif.txt","00001061.jpg.subtitulo.tif.txt","00001062.jpg.subtitulo.tif.txt","00001065.jpg.subtitulo.tif.txt","00001067.jpg.subtitulo.tif.txt","00001070.jpg.subtitulo.tif.txt","00001071.jpg.subtitulo.tif.txt","00001072.jpg.subtitulo.tif.txt","00001075.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001080.jpg.subtitulo.tif.txt","00001084.jpg.subtitulo.tif.txt","00001086.jpg.subtitulo.tif.txt","00001087.jpg.subtitulo.tif.txt","00001091.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001093.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001099.jpg.subtitulo.tif.txt","00001103.jpg.subtitulo.tif.txt","00001107.jpg.subtitulo.tif.txt","00001108.jpg.subtitulo.tif.txt","00001112.jpg.subtitulo.tif.txt","00001114.jpg.subtitulo.tif.txt","00001117.jpg.subtitulo.tif.txt","00001118.jpg.subtitulo.tif.txt","00001122.jpg.subtitulo.tif.txt","00001123.jpg.subtitulo.tif.txt","00001126.jpg.subtitulo.tif.txt","00001127.jpg.subtitulo.tif.txt","00001128.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001132.jpg.subtitulo.tif.txt","00001133.jpg.subtitulo.tif.txt","00001135.jpg.subtitulo.tif.txt","00001137.jpg.subtitulo.tif.txt","00001141.jpg.subtitulo.tif.txt","00001142.jpg.subtitulo.tif.txt","00001143.jpg.subtitulo.tif.txt","00001146.jpg.subtitulo.tif.txt","00001147.jpg.subtitulo.tif.txt","00001149.jpg.subtitulo.tif.txt","00001152.jpg.subtitulo.tif.txt","00001153.jpg.subtitulo.tif.txt","00001157.jpg.subtitulo.tif.txt","00001158.jpg.subtitulo.tif.txt","00001160.jpg.subtitulo.tif.txt","00001161.jpg.subtitulo.tif.txt","00001167.jpg.subtitulo.tif.txt","00001168.jpg.subtitulo.tif.txt","00001172.jpg.subtitulo.tif.txt","00001173.jpg.subtitulo.tif.txt","00001176.jpg.subtitulo.tif.txt","00001178.jpg.subtitulo.tif.txt","00001182.jpg.subtitulo.tif.txt","00001187.jpg.subtitulo.tif.txt","00001189.jpg.subtitulo.tif.txt","00001192.jpg.subtitulo.tif.txt","00001194.jpg.subtitulo.tif.txt","00001197.jpg.subtitulo.tif.txt","00001199.jpg.subtitulo.tif.txt","00001200.jpg.subtitulo.tif.txt","00001206.jpg.subtitulo.tif.txt","00001207.jpg.subtitulo.tif.txt","00001211.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001213.jpg.subtitulo.tif.txt","00001214.jpg.subtitulo.tif.txt","00001221.jpg.subtitulo.tif.txt","00001222.jpg.subtitulo.tif.txt","00001223.jpg.subtitulo.tif.txt","00001225.jpg.subtitulo.tif.txt","00001229.jpg.subtitulo.tif.txt","00001230.jpg.subtitulo.tif.txt","00001231.jpg.subtitulo.tif.txt","00001232.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001238.jpg.subtitulo.tif.txt","00001239.jpg.subtitulo.tif.txt","00001243.jpg.subtitulo.tif.txt","00001244.jpg.subtitulo.tif.txt","00001245.jpg.subtitulo.tif.txt","00001252.jpg.subtitulo.tif.txt","00001253.jpg.subtitulo.tif.txt","00001259.jpg.subtitulo.tif.txt","00001260.jpg.subtitulo.tif.txt","00001262.jpg.subtitulo.tif.txt","00001265.jpg.subtitulo.tif.txt","00001266.jpg.subtitulo.tif.txt","00001267.jpg.subtitulo.tif.txt","00001275.jpg.subtitulo.tif.txt","00001276.jpg.subtitulo.tif.txt","00001277.jpg.subtitulo.tif.txt","00001281.jpg.subtitulo.tif.txt","00001282.jpg.subtitulo.tif.txt","00001283.jpg.subtitulo.tif.txt","00001289.jpg.subtitulo.tif.txt","00001290.jpg.subtitulo.tif.txt"],[120,75,50,121,90,52,97,83,81,33,107,94,101,31,89,123,82,63,97,98,104,108,117,55,81,68,82,125,93,46,31,56,90,90,92,41,111,107,35,87,107,50,35,78,125,37,77,82,74,126,102,32,86,86,110,55,93,73,95,108,91,76,72,34,79,66,73,36,101,97,51,77,39,111,96,71,103,69,92,82,61,75,53,72,67,89,113,37,74,46,84,85,74,103,106,34,85,76,104,58,101,98,105,116,108,55,118,97,37,110,66,101,70,74,77,62,54,113,32,86,82,31,107,124,124,93,78,108,94,109,101,97,46,104,92,88,104,105,68,42,112,70,124,43,64,128,105,82,71,35,111,114,120,126,31,105,67,104,109,105,105,106,124,114,49,72,128,114,115,123,71,79,115,116,95,57,94,34,70,110,104,95,113,95,107,98,112,110,34,74,98,129,72,116,124,93,96,85,97,105,66,119,60,99,79,51,77,75,78,89,103,78,107,113,96,111,99,116,101,124,113,106,31,94,119,104,57,70,117,114,113,94,116,50,107,52,128,105,96,63,110,124,63,114,39,65,104,106,115,56,107,98,83,52,98,69,107,105,72,117,122,111,109,34,102,36,95,120,118,106,43,88,105,74,96,110,74,101,42,41,125,98,100,93,118,103,62,81,110,100,113,78,78,97,115,59,82,79,125,115,123,109,40,120,68,118,104,93,111,91,38,93,83,107,97,76,98,109,90,33,117,110,38,116,113,130,41,105,116,112,111,91,119,76,32,102,119,70,44,79,82,31,66,111,58,66,111,36,74,96,35,117,130,36,68,112,112,73,107,117,54,103,67,45,64,89,56,160,120,99,79,78,67,80,35,109,105,89,99,36,91,68,33,59,74,91,71,115,70,34,96,97,114,64,84,97,113,92,78,100,50,46,91,79,39,142,81,119,117,97,70,80,92,42,63,75,107,74,83,72,99,118,114,84,50,126,49,115,59,31,89,100,48,106,53,106,98,115,116,82,51,91,93,125,100,115,120,90,115,83,103,99,84,113,51,114,107,62,32,117,99,105,31,54,101,100,150,100,101,117,107,93,46,69,90,109,81,113,125,99,33,87,101,44,105,68,95,37]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>texto<\/th>\n      <th>n_fichero<\/th>\n      <th>n_caracteres<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Pues nos valdría con esto para buscar términos polémicos.</p>
</section>
<section id="algo-de-minería-de-texto" class="level2">
<h2 class="anchored" data-anchor-id="algo-de-minería-de-texto">Algo de minería de texto</h2>
<p>Quitamos stopwords y tokenizamos de forma que tengamos cada palabra en una fila manteniendo de qué rótulo proviene</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"></span>
<span id="cb4-2">to_remove <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(tm<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stopwords</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"es"</span>),</span>
<span id="cb4-3">               <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"110"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"4"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"7"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"10"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ñ"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"of"</span>,</span>
<span id="cb4-4">               <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"á"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"i"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"the"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"3"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"p"</span>,</span>
<span id="cb4-5">               <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ee"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"uu"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mm"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ema"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zz"</span>,</span>
<span id="cb4-6">               <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"wr"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"wop"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"wy"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"xi"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"xl"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"xt"</span>,</span>
<span id="cb4-7">               <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"xte"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yí"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"your"</span>)</span>
<span id="cb4-8"></span>
<span id="cb4-9"></span>
<span id="cb4-10"></span>
<span id="cb4-11">subtitulos_proces_one_word <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtitulos_proces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unnest_tokens</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">input =</span> texto,</span>
<span id="cb4-13">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">output =</span> word) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span> word <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> to_remove) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-15">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nchar</span>(word) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb4-16"></span>
<span id="cb4-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Se nos quedan 3766 filas/palabras de los 488 rótulos</span></span>
<span id="cb4-18"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(subtitulos_proces_one_word)</span>
<span id="cb4-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 3766    5</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>(subtitulos_proces_one_word)</span></code></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-f1a8ab91e5c2acab9beb" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f1a8ab91e5c2acab9beb">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783","784","785","786","787","788","789","790","791","792","793","794","795","796","797","798","799","800","801","802","803","804","805","806","807","808","809","810","811","812","813","814","815","816","817","818","819","820","821","822","823","824","825","826","827","828","829","830","831","832","833","834","835","836","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","870","871","872","873","874","875","876","877","878","879","880","881","882","883","884","885","886","887","888","889","890","891","892","893","894","895","896","897","898","899","900","901","902","903","904","905","906","907","908","909","910","911","912","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","930","931","932","933","934","935","936","937","938","939","940","941","942","943","944","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","970","971","972","973","974","975","976","977","978","979","980","981","982","983","984","985","986","987","988","989","990","991","992","993","994","995","996","997","998","999","1000","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1012","1013","1014","1015","1016","1017","1018","1019","1020","1021","1022","1023","1024","1025","1026","1027","1028","1029","1030","1031","1032","1033","1034","1035","1036","1037","1038","1039","1040","1041","1042","1043","1044","1045","1046","1047","1048","1049","1050","1051","1052","1053","1054","1055","1056","1057","1058","1059","1060","1061","1062","1063","1064","1065","1066","1067","1068","1069","1070","1071","1072","1073","1074","1075","1076","1077","1078","1079","1080","1081","1082","1083","1084","1085","1086","1087","1088","1089","1090","1091","1092","1093","1094","1095","1096","1097","1098","1099","1100","1101","1102","1103","1104","1105","1106","1107","1108","1109","1110","1111","1112","1113","1114","1115","1116","1117","1118","1119","1120","1121","1122","1123","1124","1125","1126","1127","1128","1129","1130","1131","1132","1133","1134","1135","1136","1137","1138","1139","1140","1141","1142","1143","1144","1145","1146","1147","1148","1149","1150","1151","1152","1153","1154","1155","1156","1157","1158","1159","1160","1161","1162","1163","1164","1165","1166","1167","1168","1169","1170","1171","1172","1173","1174","1175","1176","1177","1178","1179","1180","1181","1182","1183","1184","1185","1186","1187","1188","1189","1190","1191","1192","1193","1194","1195","1196","1197","1198","1199","1200","1201","1202","1203","1204","1205","1206","1207","1208","1209","1210","1211","1212","1213","1214","1215","1216","1217","1218","1219","1220","1221","1222","1223","1224","1225","1226","1227","1228","1229","1230","1231","1232","1233","1234","1235","1236","1237","1238","1239","1240","1241","1242","1243","1244","1245","1246","1247","1248","1249","1250","1251","1252","1253","1254","1255","1256","1257","1258","1259","1260","1261","1262","1263","1264","1265","1266","1267","1268","1269","1270","1271","1272","1273","1274","1275","1276","1277","1278","1279","1280","1281","1282","1283","1284","1285","1286","1287","1288","1289","1290","1291","1292","1293","1294","1295","1296","1297","1298","1299","1300","1301","1302","1303","1304","1305","1306","1307","1308","1309","1310","1311","1312","1313","1314","1315","1316","1317","1318","1319","1320","1321","1322","1323","1324","1325","1326","1327","1328","1329","1330","1331","1332","1333","1334","1335","1336","1337","1338","1339","1340","1341","1342","1343","1344","1345","1346","1347","1348","1349","1350","1351","1352","1353","1354","1355","1356","1357","1358","1359","1360","1361","1362","1363","1364","1365","1366","1367","1368","1369","1370","1371","1372","1373","1374","1375","1376","1377","1378","1379","1380","1381","1382","1383","1384","1385","1386","1387","1388","1389","1390","1391","1392","1393","1394","1395","1396","1397","1398","1399","1400","1401","1402","1403","1404","1405","1406","1407","1408","1409","1410","1411","1412","1413","1414","1415","1416","1417","1418","1419","1420","1421","1422","1423","1424","1425","1426","1427","1428","1429","1430","1431","1432","1433","1434","1435","1436","1437","1438","1439","1440","1441","1442","1443","1444","1445","1446","1447","1448","1449","1450","1451","1452","1453","1454","1455","1456","1457","1458","1459","1460","1461","1462","1463","1464","1465","1466","1467","1468","1469","1470","1471","1472","1473","1474","1475","1476","1477","1478","1479","1480","1481","1482","1483","1484","1485","1486","1487","1488","1489","1490","1491","1492","1493","1494","1495","1496","1497","1498","1499","1500","1501","1502","1503","1504","1505","1506","1507","1508","1509","1510","1511","1512","1513","1514","1515","1516","1517","1518","1519","1520","1521","1522","1523","1524","1525","1526","1527","1528","1529","1530","1531","1532","1533","1534","1535","1536","1537","1538","1539","1540","1541","1542","1543","1544","1545","1546","1547","1548","1549","1550","1551","1552","1553","1554","1555","1556","1557","1558","1559","1560","1561","1562","1563","1564","1565","1566","1567","1568","1569","1570","1571","1572","1573","1574","1575","1576","1577","1578","1579","1580","1581","1582","1583","1584","1585","1586","1587","1588","1589","1590","1591","1592","1593","1594","1595","1596","1597","1598","1599","1600","1601","1602","1603","1604","1605","1606","1607","1608","1609","1610","1611","1612","1613","1614","1615","1616","1617","1618","1619","1620","1621","1622","1623","1624","1625","1626","1627","1628","1629","1630","1631","1632","1633","1634","1635","1636","1637","1638","1639","1640","1641","1642","1643","1644","1645","1646","1647","1648","1649","1650","1651","1652","1653","1654","1655","1656","1657","1658","1659","1660","1661","1662","1663","1664","1665","1666","1667","1668","1669","1670","1671","1672","1673","1674","1675","1676","1677","1678","1679","1680","1681","1682","1683","1684","1685","1686","1687","1688","1689","1690","1691","1692","1693","1694","1695","1696","1697","1698","1699","1700","1701","1702","1703","1704","1705","1706","1707","1708","1709","1710","1711","1712","1713","1714","1715","1716","1717","1718","1719","1720","1721","1722","1723","1724","1725","1726","1727","1728","1729","1730","1731","1732","1733","1734","1735","1736","1737","1738","1739","1740","1741","1742","1743","1744","1745","1746","1747","1748","1749","1750","1751","1752","1753","1754","1755","1756","1757","1758","1759","1760","1761","1762","1763","1764","1765","1766","1767","1768","1769","1770","1771","1772","1773","1774","1775","1776","1777","1778","1779","1780","1781","1782","1783","1784","1785","1786","1787","1788","1789","1790","1791","1792","1793","1794","1795","1796","1797","1798","1799","1800","1801","1802","1803","1804","1805","1806","1807","1808","1809","1810","1811","1812","1813","1814","1815","1816","1817","1818","1819","1820","1821","1822","1823","1824","1825","1826","1827","1828","1829","1830","1831","1832","1833","1834","1835","1836","1837","1838","1839","1840","1841","1842","1843","1844","1845","1846","1847","1848","1849","1850","1851","1852","1853","1854","1855","1856","1857","1858","1859","1860","1861","1862","1863","1864","1865","1866","1867","1868","1869","1870","1871","1872","1873","1874","1875","1876","1877","1878","1879","1880","1881","1882","1883","1884","1885","1886","1887","1888","1889","1890","1891","1892","1893","1894","1895","1896","1897","1898","1899","1900","1901","1902","1903","1904","1905","1906","1907","1908","1909","1910","1911","1912","1913","1914","1915","1916","1917","1918","1919","1920","1921","1922","1923","1924","1925","1926","1927","1928","1929","1930","1931","1932","1933","1934","1935","1936","1937","1938","1939","1940","1941","1942","1943","1944","1945","1946","1947","1948","1949","1950","1951","1952","1953","1954","1955","1956","1957","1958","1959","1960","1961","1962","1963","1964","1965","1966","1967","1968","1969","1970","1971","1972","1973","1974","1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023","2024","2025","2026","2027","2028","2029","2030","2031","2032","2033","2034","2035","2036","2037","2038","2039","2040","2041","2042","2043","2044","2045","2046","2047","2048","2049","2050","2051","2052","2053","2054","2055","2056","2057","2058","2059","2060","2061","2062","2063","2064","2065","2066","2067","2068","2069","2070","2071","2072","2073","2074","2075","2076","2077","2078","2079","2080","2081","2082","2083","2084","2085","2086","2087","2088","2089","2090","2091","2092","2093","2094","2095","2096","2097","2098","2099","2100","2101","2102","2103","2104","2105","2106","2107","2108","2109","2110","2111","2112","2113","2114","2115","2116","2117","2118","2119","2120","2121","2122","2123","2124","2125","2126","2127","2128","2129","2130","2131","2132","2133","2134","2135","2136","2137","2138","2139","2140","2141","2142","2143","2144","2145","2146","2147","2148","2149","2150","2151","2152","2153","2154","2155","2156","2157","2158","2159","2160","2161","2162","2163","2164","2165","2166","2167","2168","2169","2170","2171","2172","2173","2174","2175","2176","2177","2178","2179","2180","2181","2182","2183","2184","2185","2186","2187","2188","2189","2190","2191","2192","2193","2194","2195","2196","2197","2198","2199","2200","2201","2202","2203","2204","2205","2206","2207","2208","2209","2210","2211","2212","2213","2214","2215","2216","2217","2218","2219","2220","2221","2222","2223","2224","2225","2226","2227","2228","2229","2230","2231","2232","2233","2234","2235","2236","2237","2238","2239","2240","2241","2242","2243","2244","2245","2246","2247","2248","2249","2250","2251","2252","2253","2254","2255","2256","2257","2258","2259","2260","2261","2262","2263","2264","2265","2266","2267","2268","2269","2270","2271","2272","2273","2274","2275","2276","2277","2278","2279","2280","2281","2282","2283","2284","2285","2286","2287","2288","2289","2290","2291","2292","2293","2294","2295","2296","2297","2298","2299","2300","2301","2302","2303","2304","2305","2306","2307","2308","2309","2310","2311","2312","2313","2314","2315","2316","2317","2318","2319","2320","2321","2322","2323","2324","2325","2326","2327","2328","2329","2330","2331","2332","2333","2334","2335","2336","2337","2338","2339","2340","2341","2342","2343","2344","2345","2346","2347","2348","2349","2350","2351","2352","2353","2354","2355","2356","2357","2358","2359","2360","2361","2362","2363","2364","2365","2366","2367","2368","2369","2370","2371","2372","2373","2374","2375","2376","2377","2378","2379","2380","2381","2382","2383","2384","2385","2386","2387","2388","2389","2390","2391","2392","2393","2394","2395","2396","2397","2398","2399","2400","2401","2402","2403","2404","2405","2406","2407","2408","2409","2410","2411","2412","2413","2414","2415","2416","2417","2418","2419","2420","2421","2422","2423","2424","2425","2426","2427","2428","2429","2430","2431","2432","2433","2434","2435","2436","2437","2438","2439","2440","2441","2442","2443","2444","2445","2446","2447","2448","2449","2450","2451","2452","2453","2454","2455","2456","2457","2458","2459","2460","2461","2462","2463","2464","2465","2466","2467","2468","2469","2470","2471","2472","2473","2474","2475","2476","2477","2478","2479","2480","2481","2482","2483","2484","2485","2486","2487","2488","2489","2490","2491","2492","2493","2494","2495","2496","2497","2498","2499","2500","2501","2502","2503","2504","2505","2506","2507","2508","2509","2510","2511","2512","2513","2514","2515","2516","2517","2518","2519","2520","2521","2522","2523","2524","2525","2526","2527","2528","2529","2530","2531","2532","2533","2534","2535","2536","2537","2538","2539","2540","2541","2542","2543","2544","2545","2546","2547","2548","2549","2550","2551","2552","2553","2554","2555","2556","2557","2558","2559","2560","2561","2562","2563","2564","2565","2566","2567","2568","2569","2570","2571","2572","2573","2574","2575","2576","2577","2578","2579","2580","2581","2582","2583","2584","2585","2586","2587","2588","2589","2590","2591","2592","2593","2594","2595","2596","2597","2598","2599","2600","2601","2602","2603","2604","2605","2606","2607","2608","2609","2610","2611","2612","2613","2614","2615","2616","2617","2618","2619","2620","2621","2622","2623","2624","2625","2626","2627","2628","2629","2630","2631","2632","2633","2634","2635","2636","2637","2638","2639","2640","2641","2642","2643","2644","2645","2646","2647","2648","2649","2650","2651","2652","2653","2654","2655","2656","2657","2658","2659","2660","2661","2662","2663","2664","2665","2666","2667","2668","2669","2670","2671","2672","2673","2674","2675","2676","2677","2678","2679","2680","2681","2682","2683","2684","2685","2686","2687","2688","2689","2690","2691","2692","2693","2694","2695","2696","2697","2698","2699","2700","2701","2702","2703","2704","2705","2706","2707","2708","2709","2710","2711","2712","2713","2714","2715","2716","2717","2718","2719","2720","2721","2722","2723","2724","2725","2726","2727","2728","2729","2730","2731","2732","2733","2734","2735","2736","2737","2738","2739","2740","2741","2742","2743","2744","2745","2746","2747","2748","2749","2750","2751","2752","2753","2754","2755","2756","2757","2758","2759","2760","2761","2762","2763","2764","2765","2766","2767","2768","2769","2770","2771","2772","2773","2774","2775","2776","2777","2778","2779","2780","2781","2782","2783","2784","2785","2786","2787","2788","2789","2790","2791","2792","2793","2794","2795","2796","2797","2798","2799","2800","2801","2802","2803","2804","2805","2806","2807","2808","2809","2810","2811","2812","2813","2814","2815","2816","2817","2818","2819","2820","2821","2822","2823","2824","2825","2826","2827","2828","2829","2830","2831","2832","2833","2834","2835","2836","2837","2838","2839","2840","2841","2842","2843","2844","2845","2846","2847","2848","2849","2850","2851","2852","2853","2854","2855","2856","2857","2858","2859","2860","2861","2862","2863","2864","2865","2866","2867","2868","2869","2870","2871","2872","2873","2874","2875","2876","2877","2878","2879","2880","2881","2882","2883","2884","2885","2886","2887","2888","2889","2890","2891","2892","2893","2894","2895","2896","2897","2898","2899","2900","2901","2902","2903","2904","2905","2906","2907","2908","2909","2910","2911","2912","2913","2914","2915","2916","2917","2918","2919","2920","2921","2922","2923","2924","2925","2926","2927","2928","2929","2930","2931","2932","2933","2934","2935","2936","2937","2938","2939","2940","2941","2942","2943","2944","2945","2946","2947","2948","2949","2950","2951","2952","2953","2954","2955","2956","2957","2958","2959","2960","2961","2962","2963","2964","2965","2966","2967","2968","2969","2970","2971","2972","2973","2974","2975","2976","2977","2978","2979","2980","2981","2982","2983","2984","2985","2986","2987","2988","2989","2990","2991","2992","2993","2994","2995","2996","2997","2998","2999","3000","3001","3002","3003","3004","3005","3006","3007","3008","3009","3010","3011","3012","3013","3014","3015","3016","3017","3018","3019","3020","3021","3022","3023","3024","3025","3026","3027","3028","3029","3030","3031","3032","3033","3034","3035","3036","3037","3038","3039","3040","3041","3042","3043","3044","3045","3046","3047","3048","3049","3050","3051","3052","3053","3054","3055","3056","3057","3058","3059","3060","3061","3062","3063","3064","3065","3066","3067","3068","3069","3070","3071","3072","3073","3074","3075","3076","3077","3078","3079","3080","3081","3082","3083","3084","3085","3086","3087","3088","3089","3090","3091","3092","3093","3094","3095","3096","3097","3098","3099","3100","3101","3102","3103","3104","3105","3106","3107","3108","3109","3110","3111","3112","3113","3114","3115","3116","3117","3118","3119","3120","3121","3122","3123","3124","3125","3126","3127","3128","3129","3130","3131","3132","3133","3134","3135","3136","3137","3138","3139","3140","3141","3142","3143","3144","3145","3146","3147","3148","3149","3150","3151","3152","3153","3154","3155","3156","3157","3158","3159","3160","3161","3162","3163","3164","3165","3166","3167","3168","3169","3170","3171","3172","3173","3174","3175","3176","3177","3178","3179","3180","3181","3182","3183","3184","3185","3186","3187","3188","3189","3190","3191","3192","3193","3194","3195","3196","3197","3198","3199","3200","3201","3202","3203","3204","3205","3206","3207","3208","3209","3210","3211","3212","3213","3214","3215","3216","3217","3218","3219","3220","3221","3222","3223","3224","3225","3226","3227","3228","3229","3230","3231","3232","3233","3234","3235","3236","3237","3238","3239","3240","3241","3242","3243","3244","3245","3246","3247","3248","3249","3250","3251","3252","3253","3254","3255","3256","3257","3258","3259","3260","3261","3262","3263","3264","3265","3266","3267","3268","3269","3270","3271","3272","3273","3274","3275","3276","3277","3278","3279","3280","3281","3282","3283","3284","3285","3286","3287","3288","3289","3290","3291","3292","3293","3294","3295","3296","3297","3298","3299","3300","3301","3302","3303","3304","3305","3306","3307","3308","3309","3310","3311","3312","3313","3314","3315","3316","3317","3318","3319","3320","3321","3322","3323","3324","3325","3326","3327","3328","3329","3330","3331","3332","3333","3334","3335","3336","3337","3338","3339","3340","3341","3342","3343","3344","3345","3346","3347","3348","3349","3350","3351","3352","3353","3354","3355","3356","3357","3358","3359","3360","3361","3362","3363","3364","3365","3366","3367","3368","3369","3370","3371","3372","3373","3374","3375","3376","3377","3378","3379","3380","3381","3382","3383","3384","3385","3386","3387","3388","3389","3390","3391","3392","3393","3394","3395","3396","3397","3398","3399","3400","3401","3402","3403","3404","3405","3406","3407","3408","3409","3410","3411","3412","3413","3414","3415","3416","3417","3418","3419","3420","3421","3422","3423","3424","3425","3426","3427","3428","3429","3430","3431","3432","3433","3434","3435","3436","3437","3438","3439","3440","3441","3442","3443","3444","3445","3446","3447","3448","3449","3450","3451","3452","3453","3454","3455","3456","3457","3458","3459","3460","3461","3462","3463","3464","3465","3466","3467","3468","3469","3470","3471","3472","3473","3474","3475","3476","3477","3478","3479","3480","3481","3482","3483","3484","3485","3486","3487","3488","3489","3490","3491","3492","3493","3494","3495","3496","3497","3498","3499","3500","3501","3502","3503","3504","3505","3506","3507","3508","3509","3510","3511","3512","3513","3514","3515","3516","3517","3518","3519","3520","3521","3522","3523","3524","3525","3526","3527","3528","3529","3530","3531","3532","3533","3534","3535","3536","3537","3538","3539","3540","3541","3542","3543","3544","3545","3546","3547","3548","3549","3550","3551","3552","3553","3554","3555","3556","3557","3558","3559","3560","3561","3562","3563","3564","3565","3566","3567","3568","3569","3570","3571","3572","3573","3574","3575","3576","3577","3578","3579","3580","3581","3582","3583","3584","3585","3586","3587","3588","3589","3590","3591","3592","3593","3594","3595","3596","3597","3598","3599","3600","3601","3602","3603","3604","3605","3606","3607","3608","3609","3610","3611","3612","3613","3614","3615","3616","3617","3618","3619","3620","3621","3622","3623","3624","3625","3626","3627","3628","3629","3630","3631","3632","3633","3634","3635","3636","3637","3638","3639","3640","3641","3642","3643","3644","3645","3646","3647","3648","3649","3650","3651","3652","3653","3654","3655","3656","3657","3658","3659","3660","3661","3662","3663","3664","3665","3666","3667","3668","3669","3670","3671","3672","3673","3674","3675","3676","3677","3678","3679","3680","3681","3682","3683","3684","3685","3686","3687","3688","3689","3690","3691","3692","3693","3694","3695","3696","3697","3698","3699","3700","3701","3702","3703","3704","3705","3706","3707","3708","3709","3710","3711","3712","3713","3714","3715","3716","3717","3718","3719","3720","3721","3722","3723","3724","3725","3726","3727","3728","3729","3730","3731","3732","3733","3734","3735","3736","3737","3738","3739","3740","3741","3742","3743","3744","3745","3746","3747","3748","3749","3750","3751","3752","3753","3754","3755","3756","3757","3758","3759","3760","3761","3762","3763","3764","3765","3766"],[18,18,18,18,18,18,18,18,18,18,21,21,21,21,21,21,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,29,29,29,29,29,30,30,30,30,30,30,30,31,31,31,31,31,31,31,32,32,32,32,32,32,32,38,38,38,38,39,39,39,39,39,39,39,39,39,40,40,40,40,40,40,40,40,40,42,42,42,42,42,42,42,42,42,42,50,50,51,51,51,51,51,51,51,51,51,52,52,52,52,52,52,52,52,52,52,56,56,56,56,56,56,56,56,58,58,58,58,58,58,58,58,59,59,59,59,59,59,59,59,59,64,64,64,64,64,64,64,64,65,65,65,65,65,65,65,65,66,66,66,66,66,66,66,66,71,71,71,71,71,71,71,71,71,72,72,72,72,75,75,75,75,75,80,80,80,80,80,82,82,82,82,82,82,82,83,83,83,83,83,83,83,83,83,83,86,86,86,86,86,86,86,86,86,88,88,88,88,93,93,93,94,94,94,94,94,94,95,95,95,95,95,95,95,99,99,99,99,99,99,100,100,100,100,100,100,100,100,100,104,104,104,104,104,105,105,105,105,105,105,105,105,105,105,106,106,106,106,106,106,106,106,106,106,106,111,111,111,111,112,112,112,112,112,112,112,112,112,113,113,113,113,113,113,113,113,113,113,114,114,114,114,114,117,117,117,117,117,117,118,118,118,118,118,118,118,118,118,118,119,119,119,119,119,119,119,119,119,119,125,125,125,125,125,125,126,126,126,126,126,127,127,127,127,127,127,127,127,131,131,131,131,131,131,140,140,140,140,140,140,140,140,140,140,140,140,141,141,141,141,141,141,141,141,141,144,144,144,144,145,145,145,145,145,145,146,146,146,146,146,146,153,153,153,153,153,153,153,153,153,153,155,155,155,155,155,156,156,156,156,156,156,156,156,159,159,159,159,159,159,161,161,161,161,161,161,161,161,161,162,162,162,162,162,162,162,162,162,162,162,168,168,168,168,168,168,168,168,169,169,169,169,169,171,171,171,171,171,174,174,174,174,175,175,175,175,175,175,175,175,175,176,176,176,176,176,176,178,178,178,178,178,178,178,178,181,181,181,181,181,186,186,186,186,186,186,186,186,186,186,187,187,187,187,187,187,187,187,187,187,192,192,192,192,192,193,193,193,193,193,193,193,200,200,200,200,201,201,201,201,201,201,201,201,202,202,202,202,202,202,202,202,208,208,208,208,208,208,209,209,209,209,209,209,209,209,209,209,211,211,211,211,211,217,217,217,217,217,217,217,217,217,218,218,218,218,218,218,218,224,224,224,224,225,225,225,225,225,225,225,228,228,228,228,228,229,229,229,229,229,229,230,230,230,230,230,230,231,231,231,231,231,231,231,231,231,236,236,236,236,236,236,236,236,236,236,237,237,237,237,238,238,238,238,238,238,241,241,241,241,241,241,242,242,242,242,242,242,243,243,243,243,243,243,243,243,244,244,244,244,244,244,244,244,248,248,248,248,248,248,248,248,250,250,250,250,250,250,250,250,250,250,250,255,255,255,255,256,256,256,256,256,256,256,256,257,257,257,257,257,257,257,257,258,258,258,258,258,258,258,258,261,261,261,261,261,261,262,262,262,262,262,262,262,262,262,264,264,264,264,264,264,264,264,264,269,269,269,269,269,269,269,269,270,270,270,270,270,270,270,270,270,270,271,271,271,271,271,271,271,271,276,276,276,276,278,278,278,278,278,278,278,278,278,278,284,284,284,284,284,284,284,284,284,284,289,289,289,289,290,290,290,290,290,290,290,290,291,291,291,291,291,297,297,297,297,297,297,297,297,297,297,298,298,298,298,298,298,304,304,304,304,304,304,305,305,305,305,305,305,305,311,311,311,311,311,311,313,313,313,313,313,314,314,314,314,314,314,314,314,314,314,314,317,317,317,318,318,318,318,318,318,319,319,319,319,319,319,319,319,323,323,323,323,323,324,324,324,324,324,324,324,324,324,324,325,325,325,325,325,325,325,325,325,325,325,325,326,326,326,326,326,326,326,326,326,326,332,332,332,332,332,332,332,333,333,333,333,333,333,333,339,339,339,339,339,339,339,339,339,339,339,341,341,341,341,341,341,341,341,346,346,346,346,346,346,346,346,347,347,347,347,347,347,347,347,347,349,349,349,349,349,349,349,349,349,349,349,354,354,354,354,354,355,355,355,355,355,355,355,355,356,356,356,356,356,356,356,356,356,363,363,363,363,363,363,364,364,364,364,364,364,364,364,367,367,367,367,367,367,367,367,367,368,368,368,368,368,368,371,371,371,371,372,372,372,372,372,372,372,372,372,373,373,373,373,373,373,374,374,374,374,374,374,374,374,374,374,374,376,376,376,376,376,377,377,377,377,377,377,378,378,378,378,378,378,378,378,378,378,379,379,379,379,379,379,379,379,383,383,383,383,383,383,383,385,385,385,385,385,385,389,389,389,389,389,389,390,390,390,390,390,390,390,390,390,390,390,391,391,391,391,391,391,391,391,391,391,391,391,391,396,396,396,396,396,396,396,396,396,396,396,396,397,397,397,397,397,397,397,397,397,397,397,397,397,401,401,402,402,402,402,402,402,402,403,403,403,403,403,410,410,410,410,410,410,411,411,411,411,411,411,411,411,411,411,414,414,414,414,414,414,414,414,414,414,414,415,415,415,415,415,415,415,415,415,415,423,423,423,423,423,423,423,423,424,424,424,424,424,424,424,424,424,424,424,431,431,431,431,431,431,431,431,431,431,432,432,432,432,432,432,433,433,433,433,433,433,433,433,433,436,436,436,436,436,436,436,436,438,438,438,438,438,438,438,438,438,438,438,439,439,439,439,439,439,439,439,439,439,439,439,444,444,444,444,444,444,444,444,444,444,444,444,445,445,445,445,445,454,454,454,454,454,454,455,455,455,455,455,455,455,455,455,455,455,459,459,459,459,459,459,459,459,459,459,460,460,460,460,460,460,460,460,460,466,466,466,466,466,466,467,467,467,467,467,467,467,467,468,468,468,468,475,475,475,475,475,475,476,476,476,476,476,476,476,476,476,483,483,483,483,483,483,483,483,483,483,484,484,484,484,484,484,484,484,491,491,491,491,491,491,491,491,491,492,492,492,492,492,492,492,492,499,499,499,499,499,499,499,499,499,501,501,501,501,501,501,505,505,505,505,505,505,505,505,506,506,506,506,506,506,506,506,506,508,508,508,509,509,509,509,509,509,510,510,510,510,510,510,510,510,510,510,514,514,514,514,514,514,514,514,514,514,514,514,516,516,516,516,516,516,516,516,522,522,522,522,522,522,522,522,522,523,523,523,523,523,523,523,523,523,523,523,529,529,529,529,529,529,529,529,530,530,530,530,530,530,530,530,537,537,537,537,537,537,537,537,538,538,538,538,538,538,538,538,543,543,543,543,543,543,543,543,543,543,545,545,545,545,545,545,545,551,551,551,551,551,551,551,551,551,551,552,552,552,552,552,557,557,557,557,557,557,557,557,558,558,558,558,558,558,558,561,561,561,561,561,561,562,562,562,562,562,562,563,563,563,563,563,563,563,564,564,564,564,564,564,564,565,565,565,565,565,565,565,566,566,566,566,566,566,566,566,566,570,570,570,570,570,570,571,571,571,571,571,571,571,571,571,571,571,574,574,574,574,574,574,574,574,574,574,574,574,576,576,576,576,576,576,576,576,577,577,577,577,577,577,577,577,577,583,583,583,583,583,583,583,583,583,585,585,585,585,585,585,585,585,585,585,590,590,590,590,590,590,590,590,590,590,592,592,592,592,592,592,592,592,592,592,592,597,597,597,597,597,597,597,597,597,598,598,598,598,598,598,598,598,598,598,598,598,598,603,603,603,603,603,603,604,604,604,604,604,604,604,605,605,605,605,605,605,605,605,605,605,612,612,612,612,612,612,612,612,613,613,613,613,613,621,621,621,621,621,621,622,622,622,622,622,622,622,622,622,622,628,628,628,628,628,628,628,628,628,630,630,630,630,630,630,630,630,630,633,633,633,633,633,633,633,633,634,634,634,634,634,634,634,634,634,634,642,642,642,642,642,642,642,643,643,643,643,643,643,643,643,643,643,643,643,648,648,648,649,649,649,649,649,649,649,649,649,649,656,656,656,656,656,656,656,656,656,656,656,657,657,657,657,657,657,657,663,663,663,663,670,670,670,670,670,670,670,670,670,671,671,671,671,671,671,671,671,671,671,672,672,672,672,672,672,672,680,680,680,680,680,680,680,680,680,680,680,686,686,686,687,687,687,687,687,688,688,688,688,688,688,688,688,688,688,694,694,694,694,694,694,694,694,694,694,696,696,696,696,696,696,696,696,696,703,703,703,703,703,705,705,705,705,705,705,705,705,706,706,706,706,706,706,706,706,706,709,709,709,709,709,709,709,709,710,710,710,715,715,715,715,715,715,715,715,716,716,716,716,716,716,716,718,718,718,718,718,718,718,718,718,718,723,723,723,723,723,723,723,723,723,723,725,725,725,725,725,725,729,729,729,729,729,729,729,729,729,729,729,730,730,730,730,730,730,730,730,730,730,730,733,733,733,733,733,733,733,733,733,733,735,735,735,735,735,735,735,735,735,735,735,738,738,738,738,738,739,739,739,739,739,739,739,739,739,742,742,742,742,743,743,743,743,743,743,743,743,744,744,744,744,744,744,744,744,744,744,744,744,744,752,752,752,752,752,752,752,752,752,753,753,753,753,753,753,753,753,753,756,756,756,756,756,757,757,757,757,757,757,757,757,761,761,761,761,761,761,761,762,762,762,762,762,762,762,771,771,771,771,771,771,771,771,772,772,772,772,772,772,772,772,772,772,775,775,775,775,775,775,775,775,776,776,776,776,776,776,776,776,776,776,776,777,777,777,777,777,777,783,783,783,783,783,783,784,784,784,784,784,784,784,784,784,784,784,784,785,785,785,785,785,785,785,785,785,791,791,791,791,791,791,791,791,791,791,791,792,792,792,792,792,792,792,793,793,793,793,793,793,793,793,793,793,798,798,798,798,798,798,798,800,800,800,800,800,800,803,803,803,803,803,803,803,804,804,804,804,804,804,804,804,804,804,804,805,805,805,805,805,805,805,805,805,805,814,814,814,814,814,814,814,814,815,815,815,815,815,820,820,820,820,820,820,820,821,821,821,821,821,821,821,828,828,828,828,828,828,828,828,828,829,829,829,829,829,829,829,834,834,834,834,834,835,835,835,835,835,840,840,840,840,840,840,840,840,840,840,840,840,840,840,841,841,841,841,841,841,841,841,841,841,841,841,846,846,846,846,846,846,846,846,846,846,848,848,848,848,848,848,848,848,848,848,848,853,853,853,853,853,854,854,854,854,854,854,854,854,855,855,855,855,855,857,857,857,857,857,857,857,857,857,857,857,857,857,862,862,862,862,862,862,862,862,862,862,863,863,863,863,863,863,863,863,866,866,866,866,866,866,866,866,866,867,867,867,867,867,867,867,871,871,871,872,872,872,872,872,872,872,872,873,873,873,873,873,873,873,873,876,876,876,876,876,876,876,876,876,880,880,880,880,880,880,880,883,883,883,883,883,883,884,884,884,884,884,884,884,884,884,889,889,889,889,889,889,889,889,889,889,889,891,891,891,891,891,891,891,891,892,892,892,892,892,897,897,897,897,897,897,897,897,897,897,897,897,899,899,899,899,899,899,899,899,908,908,908,908,909,909,909,909,909,909,909,909,910,910,910,910,910,910,910,917,917,917,917,917,917,917,917,917,917,917,924,924,924,924,924,925,925,925,925,925,925,925,925,925,925,926,926,926,926,926,926,926,926,926,926,926,930,930,930,930,930,930,930,930,930,930,930,930,930,932,932,932,932,932,932,932,932,933,933,933,933,933,933,933,933,933,938,938,938,938,938,938,938,938,938,938,938,939,939,939,939,939,940,940,940,940,945,945,945,945,945,945,945,945,946,946,946,946,946,946,946,946,946,946,949,949,949,949,949,951,951,951,951,954,954,954,954,954,954,954,955,955,955,955,955,955,955,956,956,956,959,959,959,959,959,959,960,960,960,960,960,960,960,960,960,960,961,961,961,961,965,965,965,965,965,965,966,966,966,966,966,966,966,966,966,966,966,968,968,968,969,969,969,969,969,969,969,969,970,970,970,970,970,970,970,976,976,976,976,976,977,977,977,977,977,977,977,977,978,978,978,978,978,978,978,978,978,978,978,978,981,981,981,981,982,982,982,982,982,982,982,983,983,983,983,983,983,983,983,987,987,987,987,987,987,987,987,987,987,988,988,988,988,988,988,994,994,994,994,994,994,994,994,994,995,995,995,995,995,995,995,995,995,997,997,997,997,997,1001,1001,1001,1001,1001,1001,1001,1001,1001,1001,1003,1003,1003,1003,1003,1003,1005,1005,1005,1006,1006,1006,1006,1006,1008,1008,1008,1008,1008,1008,1010,1010,1010,1010,1011,1011,1011,1011,1011,1011,1011,1011,1011,1011,1011,1012,1012,1012,1012,1012,1012,1012,1012,1012,1015,1015,1015,1015,1015,1015,1015,1015,1015,1015,1016,1016,1016,1016,1016,1016,1016,1016,1016,1019,1019,1019,1019,1019,1019,1019,1026,1026,1026,1026,1026,1027,1027,1027,1027,1027,1027,1027,1027,1030,1030,1030,1030,1031,1031,1031,1031,1031,1031,1031,1031,1031,1032,1032,1032,1032,1032,1032,1032,1032,1032,1032,1035,1035,1035,1035,1035,1035,1035,1035,1036,1036,1036,1036,1036,1036,1036,1036,1036,1040,1040,1040,1040,1041,1041,1041,1041,1041,1041,1041,1041,1041,1041,1042,1042,1042,1042,1042,1042,1044,1044,1044,1045,1045,1045,1045,1045,1045,1045,1046,1046,1046,1046,1046,1046,1046,1047,1047,1047,1047,1047,1047,1047,1047,1047,1047,1051,1051,1051,1051,1051,1051,1052,1052,1052,1052,1052,1052,1052,1052,1052,1052,1056,1056,1056,1056,1056,1056,1057,1057,1057,1057,1060,1060,1060,1060,1060,1060,1060,1061,1061,1061,1061,1061,1061,1062,1062,1062,1062,1062,1062,1062,1062,1062,1062,1062,1065,1065,1065,1065,1065,1067,1067,1067,1067,1067,1067,1067,1067,1070,1070,1070,1070,1070,1070,1070,1070,1071,1071,1071,1071,1071,1071,1071,1071,1071,1071,1071,1072,1072,1072,1072,1072,1072,1072,1072,1075,1075,1075,1075,1075,1076,1076,1076,1076,1076,1076,1076,1076,1076,1076,1076,1076,1080,1080,1080,1080,1080,1084,1084,1084,1084,1084,1086,1086,1086,1086,1086,1086,1087,1087,1087,1087,1087,1087,1091,1091,1091,1092,1092,1092,1092,1092,1092,1092,1092,1092,1092,1092,1092,1092,1093,1093,1093,1093,1093,1093,1093,1094,1094,1094,1094,1094,1094,1094,1094,1094,1094,1094,1094,1099,1099,1099,1099,1099,1099,1099,1099,1099,1099,1103,1103,1103,1103,1103,1103,1103,1103,1103,1103,1107,1107,1107,1107,1107,1107,1108,1108,1108,1108,1108,1108,1112,1112,1112,1112,1112,1112,1112,1112,1112,1112,1114,1114,1114,1114,1117,1117,1117,1117,1118,1118,1118,1118,1122,1122,1122,1122,1122,1122,1122,1122,1122,1122,1122,1123,1123,1123,1123,1123,1123,1123,1123,1126,1126,1126,1126,1126,1126,1126,1127,1127,1127,1127,1127,1127,1127,1127,1127,1128,1128,1128,1128,1128,1128,1128,1128,1130,1130,1130,1130,1130,1130,1130,1130,1130,1130,1130,1130,1132,1132,1132,1132,1132,1132,1132,1132,1132,1132,1133,1133,1133,1133,1133,1133,1135,1135,1135,1135,1137,1137,1137,1137,1137,1137,1137,1137,1137,1137,1141,1141,1141,1141,1141,1142,1142,1142,1142,1142,1142,1142,1142,1142,1142,1143,1143,1143,1143,1143,1146,1146,1146,1146,1147,1147,1147,1147,1147,1147,1147,1149,1149,1149,1149,1149,1149,1149,1149,1149,1149,1149,1152,1152,1152,1153,1153,1153,1153,1153,1153,1153,1153,1157,1157,1157,1157,1157,1158,1158,1158,1158,1158,1158,1158,1158,1160,1160,1160,1160,1160,1160,1160,1160,1160,1161,1161,1161,1161,1161,1161,1161,1161,1161,1167,1167,1167,1167,1167,1167,1167,1167,1167,1168,1168,1168,1168,1168,1168,1168,1172,1172,1173,1173,1173,1173,1173,1173,1176,1176,1176,1176,1176,1176,1176,1176,1176,1176,1178,1178,1178,1178,1178,1178,1178,1178,1178,1182,1182,1182,1182,1182,1182,1182,1182,1187,1187,1187,1187,1187,1187,1187,1187,1189,1189,1189,1189,1189,1189,1189,1189,1189,1192,1192,1192,1192,1192,1192,1192,1192,1194,1194,1194,1194,1194,1194,1194,1194,1197,1197,1197,1197,1197,1197,1197,1197,1199,1199,1199,1199,1199,1199,1199,1199,1199,1200,1200,1200,1200,1200,1200,1200,1206,1206,1206,1206,1206,1207,1207,1207,1207,1207,1207,1207,1207,1207,1211,1211,1211,1211,1211,1211,1212,1212,1212,1212,1212,1212,1212,1212,1212,1212,1212,1212,1212,1213,1213,1213,1213,1213,1213,1213,1213,1214,1214,1214,1214,1214,1221,1221,1221,1222,1222,1222,1222,1222,1222,1222,1222,1222,1223,1223,1223,1223,1223,1223,1223,1223,1223,1223,1225,1225,1225,1225,1225,1225,1225,1225,1225,1225,1229,1229,1229,1229,1229,1230,1230,1230,1231,1231,1231,1231,1231,1231,1231,1231,1231,1232,1232,1232,1232,1232,1232,1232,1232,1236,1236,1236,1236,1236,1236,1236,1236,1236,1236,1236,1236,1236,1238,1238,1238,1238,1238,1238,1238,1238,1239,1239,1239,1239,1239,1239,1239,1243,1243,1243,1243,1243,1243,1243,1243,1243,1243,1243,1244,1244,1244,1244,1244,1244,1244,1244,1245,1245,1245,1245,1245,1245,1245,1245,1245,1252,1252,1252,1252,1253,1253,1253,1253,1253,1253,1253,1259,1259,1259,1259,1259,1259,1259,1259,1259,1260,1260,1260,1260,1260,1260,1260,1262,1262,1262,1262,1262,1262,1262,1262,1265,1265,1265,1265,1265,1265,1266,1266,1266,1266,1266,1266,1266,1266,1266,1266,1266,1267,1267,1267,1267,1267,1267,1267,1267,1267,1275,1275,1275,1276,1276,1276,1276,1276,1276,1276,1276,1277,1277,1277,1277,1277,1277,1277,1277,1281,1281,1281,1282,1282,1282,1282,1282,1282,1282,1282,1282,1282,1282,1283,1283,1283,1283,1283,1283,1283,1283,1283,1289,1289,1289,1289,1289,1289,1289,1290,1290,1290,1290],["00000018.jpg.subtitulo.tif.txt","00000018.jpg.subtitulo.tif.txt","00000018.jpg.subtitulo.tif.txt","00000018.jpg.subtitulo.tif.txt","00000018.jpg.subtitulo.tif.txt","00000018.jpg.subtitulo.tif.txt","00000018.jpg.subtitulo.tif.txt","00000018.jpg.subtitulo.tif.txt","00000018.jpg.subtitulo.tif.txt","00000018.jpg.subtitulo.tif.txt","00000021.jpg.subtitulo.tif.txt","00000021.jpg.subtitulo.tif.txt","00000021.jpg.subtitulo.tif.txt","00000021.jpg.subtitulo.tif.txt","00000021.jpg.subtitulo.tif.txt","00000021.jpg.subtitulo.tif.txt","00000024.jpg.subtitulo.tif.txt","00000024.jpg.subtitulo.tif.txt","00000024.jpg.subtitulo.tif.txt","00000024.jpg.subtitulo.tif.txt","00000024.jpg.subtitulo.tif.txt","00000025.jpg.subtitulo.tif.txt","00000025.jpg.subtitulo.tif.txt","00000025.jpg.subtitulo.tif.txt","00000025.jpg.subtitulo.tif.txt","00000025.jpg.subtitulo.tif.txt","00000025.jpg.subtitulo.tif.txt","00000025.jpg.subtitulo.tif.txt","00000025.jpg.subtitulo.tif.txt","00000025.jpg.subtitulo.tif.txt","00000025.jpg.subtitulo.tif.txt","00000025.jpg.subtitulo.tif.txt","00000026.jpg.subtitulo.tif.txt","00000026.jpg.subtitulo.tif.txt","00000026.jpg.subtitulo.tif.txt","00000026.jpg.subtitulo.tif.txt","00000026.jpg.subtitulo.tif.txt","00000026.jpg.subtitulo.tif.txt","00000026.jpg.subtitulo.tif.txt","00000029.jpg.subtitulo.tif.txt","00000029.jpg.subtitulo.tif.txt","00000029.jpg.subtitulo.tif.txt","00000029.jpg.subtitulo.tif.txt","00000029.jpg.subtitulo.tif.txt","00000030.jpg.subtitulo.tif.txt","00000030.jpg.subtitulo.tif.txt","00000030.jpg.subtitulo.tif.txt","00000030.jpg.subtitulo.tif.txt","00000030.jpg.subtitulo.tif.txt","00000030.jpg.subtitulo.tif.txt","00000030.jpg.subtitulo.tif.txt","00000031.jpg.subtitulo.tif.txt","00000031.jpg.subtitulo.tif.txt","00000031.jpg.subtitulo.tif.txt","00000031.jpg.subtitulo.tif.txt","00000031.jpg.subtitulo.tif.txt","00000031.jpg.subtitulo.tif.txt","00000031.jpg.subtitulo.tif.txt","00000032.jpg.subtitulo.tif.txt","00000032.jpg.subtitulo.tif.txt","00000032.jpg.subtitulo.tif.txt","00000032.jpg.subtitulo.tif.txt","00000032.jpg.subtitulo.tif.txt","00000032.jpg.subtitulo.tif.txt","00000032.jpg.subtitulo.tif.txt","00000038.jpg.subtitulo.tif.txt","00000038.jpg.subtitulo.tif.txt","00000038.jpg.subtitulo.tif.txt","00000038.jpg.subtitulo.tif.txt","00000039.jpg.subtitulo.tif.txt","00000039.jpg.subtitulo.tif.txt","00000039.jpg.subtitulo.tif.txt","00000039.jpg.subtitulo.tif.txt","00000039.jpg.subtitulo.tif.txt","00000039.jpg.subtitulo.tif.txt","00000039.jpg.subtitulo.tif.txt","00000039.jpg.subtitulo.tif.txt","00000039.jpg.subtitulo.tif.txt","00000040.jpg.subtitulo.tif.txt","00000040.jpg.subtitulo.tif.txt","00000040.jpg.subtitulo.tif.txt","00000040.jpg.subtitulo.tif.txt","00000040.jpg.subtitulo.tif.txt","00000040.jpg.subtitulo.tif.txt","00000040.jpg.subtitulo.tif.txt","00000040.jpg.subtitulo.tif.txt","00000040.jpg.subtitulo.tif.txt","00000042.jpg.subtitulo.tif.txt","00000042.jpg.subtitulo.tif.txt","00000042.jpg.subtitulo.tif.txt","00000042.jpg.subtitulo.tif.txt","00000042.jpg.subtitulo.tif.txt","00000042.jpg.subtitulo.tif.txt","00000042.jpg.subtitulo.tif.txt","00000042.jpg.subtitulo.tif.txt","00000042.jpg.subtitulo.tif.txt","00000042.jpg.subtitulo.tif.txt","00000050.jpg.subtitulo.tif.txt","00000050.jpg.subtitulo.tif.txt","00000051.jpg.subtitulo.tif.txt","00000051.jpg.subtitulo.tif.txt","00000051.jpg.subtitulo.tif.txt","00000051.jpg.subtitulo.tif.txt","00000051.jpg.subtitulo.tif.txt","00000051.jpg.subtitulo.tif.txt","00000051.jpg.subtitulo.tif.txt","00000051.jpg.subtitulo.tif.txt","00000051.jpg.subtitulo.tif.txt","00000052.jpg.subtitulo.tif.txt","00000052.jpg.subtitulo.tif.txt","00000052.jpg.subtitulo.tif.txt","00000052.jpg.subtitulo.tif.txt","00000052.jpg.subtitulo.tif.txt","00000052.jpg.subtitulo.tif.txt","00000052.jpg.subtitulo.tif.txt","00000052.jpg.subtitulo.tif.txt","00000052.jpg.subtitulo.tif.txt","00000052.jpg.subtitulo.tif.txt","00000056.jpg.subtitulo.tif.txt","00000056.jpg.subtitulo.tif.txt","00000056.jpg.subtitulo.tif.txt","00000056.jpg.subtitulo.tif.txt","00000056.jpg.subtitulo.tif.txt","00000056.jpg.subtitulo.tif.txt","00000056.jpg.subtitulo.tif.txt","00000056.jpg.subtitulo.tif.txt","00000058.jpg.subtitulo.tif.txt","00000058.jpg.subtitulo.tif.txt","00000058.jpg.subtitulo.tif.txt","00000058.jpg.subtitulo.tif.txt","00000058.jpg.subtitulo.tif.txt","00000058.jpg.subtitulo.tif.txt","00000058.jpg.subtitulo.tif.txt","00000058.jpg.subtitulo.tif.txt","00000059.jpg.subtitulo.tif.txt","00000059.jpg.subtitulo.tif.txt","00000059.jpg.subtitulo.tif.txt","00000059.jpg.subtitulo.tif.txt","00000059.jpg.subtitulo.tif.txt","00000059.jpg.subtitulo.tif.txt","00000059.jpg.subtitulo.tif.txt","00000059.jpg.subtitulo.tif.txt","00000059.jpg.subtitulo.tif.txt","00000064.jpg.subtitulo.tif.txt","00000064.jpg.subtitulo.tif.txt","00000064.jpg.subtitulo.tif.txt","00000064.jpg.subtitulo.tif.txt","00000064.jpg.subtitulo.tif.txt","00000064.jpg.subtitulo.tif.txt","00000064.jpg.subtitulo.tif.txt","00000064.jpg.subtitulo.tif.txt","00000065.jpg.subtitulo.tif.txt","00000065.jpg.subtitulo.tif.txt","00000065.jpg.subtitulo.tif.txt","00000065.jpg.subtitulo.tif.txt","00000065.jpg.subtitulo.tif.txt","00000065.jpg.subtitulo.tif.txt","00000065.jpg.subtitulo.tif.txt","00000065.jpg.subtitulo.tif.txt","00000066.jpg.subtitulo.tif.txt","00000066.jpg.subtitulo.tif.txt","00000066.jpg.subtitulo.tif.txt","00000066.jpg.subtitulo.tif.txt","00000066.jpg.subtitulo.tif.txt","00000066.jpg.subtitulo.tif.txt","00000066.jpg.subtitulo.tif.txt","00000066.jpg.subtitulo.tif.txt","00000071.jpg.subtitulo.tif.txt","00000071.jpg.subtitulo.tif.txt","00000071.jpg.subtitulo.tif.txt","00000071.jpg.subtitulo.tif.txt","00000071.jpg.subtitulo.tif.txt","00000071.jpg.subtitulo.tif.txt","00000071.jpg.subtitulo.tif.txt","00000071.jpg.subtitulo.tif.txt","00000071.jpg.subtitulo.tif.txt","00000072.jpg.subtitulo.tif.txt","00000072.jpg.subtitulo.tif.txt","00000072.jpg.subtitulo.tif.txt","00000072.jpg.subtitulo.tif.txt","00000075.jpg.subtitulo.tif.txt","00000075.jpg.subtitulo.tif.txt","00000075.jpg.subtitulo.tif.txt","00000075.jpg.subtitulo.tif.txt","00000075.jpg.subtitulo.tif.txt","00000080.jpg.subtitulo.tif.txt","00000080.jpg.subtitulo.tif.txt","00000080.jpg.subtitulo.tif.txt","00000080.jpg.subtitulo.tif.txt","00000080.jpg.subtitulo.tif.txt","00000082.jpg.subtitulo.tif.txt","00000082.jpg.subtitulo.tif.txt","00000082.jpg.subtitulo.tif.txt","00000082.jpg.subtitulo.tif.txt","00000082.jpg.subtitulo.tif.txt","00000082.jpg.subtitulo.tif.txt","00000082.jpg.subtitulo.tif.txt","00000083.jpg.subtitulo.tif.txt","00000083.jpg.subtitulo.tif.txt","00000083.jpg.subtitulo.tif.txt","00000083.jpg.subtitulo.tif.txt","00000083.jpg.subtitulo.tif.txt","00000083.jpg.subtitulo.tif.txt","00000083.jpg.subtitulo.tif.txt","00000083.jpg.subtitulo.tif.txt","00000083.jpg.subtitulo.tif.txt","00000083.jpg.subtitulo.tif.txt","00000086.jpg.subtitulo.tif.txt","00000086.jpg.subtitulo.tif.txt","00000086.jpg.subtitulo.tif.txt","00000086.jpg.subtitulo.tif.txt","00000086.jpg.subtitulo.tif.txt","00000086.jpg.subtitulo.tif.txt","00000086.jpg.subtitulo.tif.txt","00000086.jpg.subtitulo.tif.txt","00000086.jpg.subtitulo.tif.txt","00000088.jpg.subtitulo.tif.txt","00000088.jpg.subtitulo.tif.txt","00000088.jpg.subtitulo.tif.txt","00000088.jpg.subtitulo.tif.txt","00000093.jpg.subtitulo.tif.txt","00000093.jpg.subtitulo.tif.txt","00000093.jpg.subtitulo.tif.txt","00000094.jpg.subtitulo.tif.txt","00000094.jpg.subtitulo.tif.txt","00000094.jpg.subtitulo.tif.txt","00000094.jpg.subtitulo.tif.txt","00000094.jpg.subtitulo.tif.txt","00000094.jpg.subtitulo.tif.txt","00000095.jpg.subtitulo.tif.txt","00000095.jpg.subtitulo.tif.txt","00000095.jpg.subtitulo.tif.txt","00000095.jpg.subtitulo.tif.txt","00000095.jpg.subtitulo.tif.txt","00000095.jpg.subtitulo.tif.txt","00000095.jpg.subtitulo.tif.txt","00000099.jpg.subtitulo.tif.txt","00000099.jpg.subtitulo.tif.txt","00000099.jpg.subtitulo.tif.txt","00000099.jpg.subtitulo.tif.txt","00000099.jpg.subtitulo.tif.txt","00000099.jpg.subtitulo.tif.txt","00000100.jpg.subtitulo.tif.txt","00000100.jpg.subtitulo.tif.txt","00000100.jpg.subtitulo.tif.txt","00000100.jpg.subtitulo.tif.txt","00000100.jpg.subtitulo.tif.txt","00000100.jpg.subtitulo.tif.txt","00000100.jpg.subtitulo.tif.txt","00000100.jpg.subtitulo.tif.txt","00000100.jpg.subtitulo.tif.txt","00000104.jpg.subtitulo.tif.txt","00000104.jpg.subtitulo.tif.txt","00000104.jpg.subtitulo.tif.txt","00000104.jpg.subtitulo.tif.txt","00000104.jpg.subtitulo.tif.txt","00000105.jpg.subtitulo.tif.txt","00000105.jpg.subtitulo.tif.txt","00000105.jpg.subtitulo.tif.txt","00000105.jpg.subtitulo.tif.txt","00000105.jpg.subtitulo.tif.txt","00000105.jpg.subtitulo.tif.txt","00000105.jpg.subtitulo.tif.txt","00000105.jpg.subtitulo.tif.txt","00000105.jpg.subtitulo.tif.txt","00000105.jpg.subtitulo.tif.txt","00000106.jpg.subtitulo.tif.txt","00000106.jpg.subtitulo.tif.txt","00000106.jpg.subtitulo.tif.txt","00000106.jpg.subtitulo.tif.txt","00000106.jpg.subtitulo.tif.txt","00000106.jpg.subtitulo.tif.txt","00000106.jpg.subtitulo.tif.txt","00000106.jpg.subtitulo.tif.txt","00000106.jpg.subtitulo.tif.txt","00000106.jpg.subtitulo.tif.txt","00000106.jpg.subtitulo.tif.txt","00000111.jpg.subtitulo.tif.txt","00000111.jpg.subtitulo.tif.txt","00000111.jpg.subtitulo.tif.txt","00000111.jpg.subtitulo.tif.txt","00000112.jpg.subtitulo.tif.txt","00000112.jpg.subtitulo.tif.txt","00000112.jpg.subtitulo.tif.txt","00000112.jpg.subtitulo.tif.txt","00000112.jpg.subtitulo.tif.txt","00000112.jpg.subtitulo.tif.txt","00000112.jpg.subtitulo.tif.txt","00000112.jpg.subtitulo.tif.txt","00000112.jpg.subtitulo.tif.txt","00000113.jpg.subtitulo.tif.txt","00000113.jpg.subtitulo.tif.txt","00000113.jpg.subtitulo.tif.txt","00000113.jpg.subtitulo.tif.txt","00000113.jpg.subtitulo.tif.txt","00000113.jpg.subtitulo.tif.txt","00000113.jpg.subtitulo.tif.txt","00000113.jpg.subtitulo.tif.txt","00000113.jpg.subtitulo.tif.txt","00000113.jpg.subtitulo.tif.txt","00000114.jpg.subtitulo.tif.txt","00000114.jpg.subtitulo.tif.txt","00000114.jpg.subtitulo.tif.txt","00000114.jpg.subtitulo.tif.txt","00000114.jpg.subtitulo.tif.txt","00000117.jpg.subtitulo.tif.txt","00000117.jpg.subtitulo.tif.txt","00000117.jpg.subtitulo.tif.txt","00000117.jpg.subtitulo.tif.txt","00000117.jpg.subtitulo.tif.txt","00000117.jpg.subtitulo.tif.txt","00000118.jpg.subtitulo.tif.txt","00000118.jpg.subtitulo.tif.txt","00000118.jpg.subtitulo.tif.txt","00000118.jpg.subtitulo.tif.txt","00000118.jpg.subtitulo.tif.txt","00000118.jpg.subtitulo.tif.txt","00000118.jpg.subtitulo.tif.txt","00000118.jpg.subtitulo.tif.txt","00000118.jpg.subtitulo.tif.txt","00000118.jpg.subtitulo.tif.txt","00000119.jpg.subtitulo.tif.txt","00000119.jpg.subtitulo.tif.txt","00000119.jpg.subtitulo.tif.txt","00000119.jpg.subtitulo.tif.txt","00000119.jpg.subtitulo.tif.txt","00000119.jpg.subtitulo.tif.txt","00000119.jpg.subtitulo.tif.txt","00000119.jpg.subtitulo.tif.txt","00000119.jpg.subtitulo.tif.txt","00000119.jpg.subtitulo.tif.txt","00000125.jpg.subtitulo.tif.txt","00000125.jpg.subtitulo.tif.txt","00000125.jpg.subtitulo.tif.txt","00000125.jpg.subtitulo.tif.txt","00000125.jpg.subtitulo.tif.txt","00000125.jpg.subtitulo.tif.txt","00000126.jpg.subtitulo.tif.txt","00000126.jpg.subtitulo.tif.txt","00000126.jpg.subtitulo.tif.txt","00000126.jpg.subtitulo.tif.txt","00000126.jpg.subtitulo.tif.txt","00000127.jpg.subtitulo.tif.txt","00000127.jpg.subtitulo.tif.txt","00000127.jpg.subtitulo.tif.txt","00000127.jpg.subtitulo.tif.txt","00000127.jpg.subtitulo.tif.txt","00000127.jpg.subtitulo.tif.txt","00000127.jpg.subtitulo.tif.txt","00000127.jpg.subtitulo.tif.txt","00000131.jpg.subtitulo.tif.txt","00000131.jpg.subtitulo.tif.txt","00000131.jpg.subtitulo.tif.txt","00000131.jpg.subtitulo.tif.txt","00000131.jpg.subtitulo.tif.txt","00000131.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000141.jpg.subtitulo.tif.txt","00000141.jpg.subtitulo.tif.txt","00000141.jpg.subtitulo.tif.txt","00000141.jpg.subtitulo.tif.txt","00000141.jpg.subtitulo.tif.txt","00000141.jpg.subtitulo.tif.txt","00000141.jpg.subtitulo.tif.txt","00000141.jpg.subtitulo.tif.txt","00000141.jpg.subtitulo.tif.txt","00000144.jpg.subtitulo.tif.txt","00000144.jpg.subtitulo.tif.txt","00000144.jpg.subtitulo.tif.txt","00000144.jpg.subtitulo.tif.txt","00000145.jpg.subtitulo.tif.txt","00000145.jpg.subtitulo.tif.txt","00000145.jpg.subtitulo.tif.txt","00000145.jpg.subtitulo.tif.txt","00000145.jpg.subtitulo.tif.txt","00000145.jpg.subtitulo.tif.txt","00000146.jpg.subtitulo.tif.txt","00000146.jpg.subtitulo.tif.txt","00000146.jpg.subtitulo.tif.txt","00000146.jpg.subtitulo.tif.txt","00000146.jpg.subtitulo.tif.txt","00000146.jpg.subtitulo.tif.txt","00000153.jpg.subtitulo.tif.txt","00000153.jpg.subtitulo.tif.txt","00000153.jpg.subtitulo.tif.txt","00000153.jpg.subtitulo.tif.txt","00000153.jpg.subtitulo.tif.txt","00000153.jpg.subtitulo.tif.txt","00000153.jpg.subtitulo.tif.txt","00000153.jpg.subtitulo.tif.txt","00000153.jpg.subtitulo.tif.txt","00000153.jpg.subtitulo.tif.txt","00000155.jpg.subtitulo.tif.txt","00000155.jpg.subtitulo.tif.txt","00000155.jpg.subtitulo.tif.txt","00000155.jpg.subtitulo.tif.txt","00000155.jpg.subtitulo.tif.txt","00000156.jpg.subtitulo.tif.txt","00000156.jpg.subtitulo.tif.txt","00000156.jpg.subtitulo.tif.txt","00000156.jpg.subtitulo.tif.txt","00000156.jpg.subtitulo.tif.txt","00000156.jpg.subtitulo.tif.txt","00000156.jpg.subtitulo.tif.txt","00000156.jpg.subtitulo.tif.txt","00000159.jpg.subtitulo.tif.txt","00000159.jpg.subtitulo.tif.txt","00000159.jpg.subtitulo.tif.txt","00000159.jpg.subtitulo.tif.txt","00000159.jpg.subtitulo.tif.txt","00000159.jpg.subtitulo.tif.txt","00000161.jpg.subtitulo.tif.txt","00000161.jpg.subtitulo.tif.txt","00000161.jpg.subtitulo.tif.txt","00000161.jpg.subtitulo.tif.txt","00000161.jpg.subtitulo.tif.txt","00000161.jpg.subtitulo.tif.txt","00000161.jpg.subtitulo.tif.txt","00000161.jpg.subtitulo.tif.txt","00000161.jpg.subtitulo.tif.txt","00000162.jpg.subtitulo.tif.txt","00000162.jpg.subtitulo.tif.txt","00000162.jpg.subtitulo.tif.txt","00000162.jpg.subtitulo.tif.txt","00000162.jpg.subtitulo.tif.txt","00000162.jpg.subtitulo.tif.txt","00000162.jpg.subtitulo.tif.txt","00000162.jpg.subtitulo.tif.txt","00000162.jpg.subtitulo.tif.txt","00000162.jpg.subtitulo.tif.txt","00000162.jpg.subtitulo.tif.txt","00000168.jpg.subtitulo.tif.txt","00000168.jpg.subtitulo.tif.txt","00000168.jpg.subtitulo.tif.txt","00000168.jpg.subtitulo.tif.txt","00000168.jpg.subtitulo.tif.txt","00000168.jpg.subtitulo.tif.txt","00000168.jpg.subtitulo.tif.txt","00000168.jpg.subtitulo.tif.txt","00000169.jpg.subtitulo.tif.txt","00000169.jpg.subtitulo.tif.txt","00000169.jpg.subtitulo.tif.txt","00000169.jpg.subtitulo.tif.txt","00000169.jpg.subtitulo.tif.txt","00000171.jpg.subtitulo.tif.txt","00000171.jpg.subtitulo.tif.txt","00000171.jpg.subtitulo.tif.txt","00000171.jpg.subtitulo.tif.txt","00000171.jpg.subtitulo.tif.txt","00000174.jpg.subtitulo.tif.txt","00000174.jpg.subtitulo.tif.txt","00000174.jpg.subtitulo.tif.txt","00000174.jpg.subtitulo.tif.txt","00000175.jpg.subtitulo.tif.txt","00000175.jpg.subtitulo.tif.txt","00000175.jpg.subtitulo.tif.txt","00000175.jpg.subtitulo.tif.txt","00000175.jpg.subtitulo.tif.txt","00000175.jpg.subtitulo.tif.txt","00000175.jpg.subtitulo.tif.txt","00000175.jpg.subtitulo.tif.txt","00000175.jpg.subtitulo.tif.txt","00000176.jpg.subtitulo.tif.txt","00000176.jpg.subtitulo.tif.txt","00000176.jpg.subtitulo.tif.txt","00000176.jpg.subtitulo.tif.txt","00000176.jpg.subtitulo.tif.txt","00000176.jpg.subtitulo.tif.txt","00000178.jpg.subtitulo.tif.txt","00000178.jpg.subtitulo.tif.txt","00000178.jpg.subtitulo.tif.txt","00000178.jpg.subtitulo.tif.txt","00000178.jpg.subtitulo.tif.txt","00000178.jpg.subtitulo.tif.txt","00000178.jpg.subtitulo.tif.txt","00000178.jpg.subtitulo.tif.txt","00000181.jpg.subtitulo.tif.txt","00000181.jpg.subtitulo.tif.txt","00000181.jpg.subtitulo.tif.txt","00000181.jpg.subtitulo.tif.txt","00000181.jpg.subtitulo.tif.txt","00000186.jpg.subtitulo.tif.txt","00000186.jpg.subtitulo.tif.txt","00000186.jpg.subtitulo.tif.txt","00000186.jpg.subtitulo.tif.txt","00000186.jpg.subtitulo.tif.txt","00000186.jpg.subtitulo.tif.txt","00000186.jpg.subtitulo.tif.txt","00000186.jpg.subtitulo.tif.txt","00000186.jpg.subtitulo.tif.txt","00000186.jpg.subtitulo.tif.txt","00000187.jpg.subtitulo.tif.txt","00000187.jpg.subtitulo.tif.txt","00000187.jpg.subtitulo.tif.txt","00000187.jpg.subtitulo.tif.txt","00000187.jpg.subtitulo.tif.txt","00000187.jpg.subtitulo.tif.txt","00000187.jpg.subtitulo.tif.txt","00000187.jpg.subtitulo.tif.txt","00000187.jpg.subtitulo.tif.txt","00000187.jpg.subtitulo.tif.txt","00000192.jpg.subtitulo.tif.txt","00000192.jpg.subtitulo.tif.txt","00000192.jpg.subtitulo.tif.txt","00000192.jpg.subtitulo.tif.txt","00000192.jpg.subtitulo.tif.txt","00000193.jpg.subtitulo.tif.txt","00000193.jpg.subtitulo.tif.txt","00000193.jpg.subtitulo.tif.txt","00000193.jpg.subtitulo.tif.txt","00000193.jpg.subtitulo.tif.txt","00000193.jpg.subtitulo.tif.txt","00000193.jpg.subtitulo.tif.txt","00000200.jpg.subtitulo.tif.txt","00000200.jpg.subtitulo.tif.txt","00000200.jpg.subtitulo.tif.txt","00000200.jpg.subtitulo.tif.txt","00000201.jpg.subtitulo.tif.txt","00000201.jpg.subtitulo.tif.txt","00000201.jpg.subtitulo.tif.txt","00000201.jpg.subtitulo.tif.txt","00000201.jpg.subtitulo.tif.txt","00000201.jpg.subtitulo.tif.txt","00000201.jpg.subtitulo.tif.txt","00000201.jpg.subtitulo.tif.txt","00000202.jpg.subtitulo.tif.txt","00000202.jpg.subtitulo.tif.txt","00000202.jpg.subtitulo.tif.txt","00000202.jpg.subtitulo.tif.txt","00000202.jpg.subtitulo.tif.txt","00000202.jpg.subtitulo.tif.txt","00000202.jpg.subtitulo.tif.txt","00000202.jpg.subtitulo.tif.txt","00000208.jpg.subtitulo.tif.txt","00000208.jpg.subtitulo.tif.txt","00000208.jpg.subtitulo.tif.txt","00000208.jpg.subtitulo.tif.txt","00000208.jpg.subtitulo.tif.txt","00000208.jpg.subtitulo.tif.txt","00000209.jpg.subtitulo.tif.txt","00000209.jpg.subtitulo.tif.txt","00000209.jpg.subtitulo.tif.txt","00000209.jpg.subtitulo.tif.txt","00000209.jpg.subtitulo.tif.txt","00000209.jpg.subtitulo.tif.txt","00000209.jpg.subtitulo.tif.txt","00000209.jpg.subtitulo.tif.txt","00000209.jpg.subtitulo.tif.txt","00000209.jpg.subtitulo.tif.txt","00000211.jpg.subtitulo.tif.txt","00000211.jpg.subtitulo.tif.txt","00000211.jpg.subtitulo.tif.txt","00000211.jpg.subtitulo.tif.txt","00000211.jpg.subtitulo.tif.txt","00000217.jpg.subtitulo.tif.txt","00000217.jpg.subtitulo.tif.txt","00000217.jpg.subtitulo.tif.txt","00000217.jpg.subtitulo.tif.txt","00000217.jpg.subtitulo.tif.txt","00000217.jpg.subtitulo.tif.txt","00000217.jpg.subtitulo.tif.txt","00000217.jpg.subtitulo.tif.txt","00000217.jpg.subtitulo.tif.txt","00000218.jpg.subtitulo.tif.txt","00000218.jpg.subtitulo.tif.txt","00000218.jpg.subtitulo.tif.txt","00000218.jpg.subtitulo.tif.txt","00000218.jpg.subtitulo.tif.txt","00000218.jpg.subtitulo.tif.txt","00000218.jpg.subtitulo.tif.txt","00000224.jpg.subtitulo.tif.txt","00000224.jpg.subtitulo.tif.txt","00000224.jpg.subtitulo.tif.txt","00000224.jpg.subtitulo.tif.txt","00000225.jpg.subtitulo.tif.txt","00000225.jpg.subtitulo.tif.txt","00000225.jpg.subtitulo.tif.txt","00000225.jpg.subtitulo.tif.txt","00000225.jpg.subtitulo.tif.txt","00000225.jpg.subtitulo.tif.txt","00000225.jpg.subtitulo.tif.txt","00000228.jpg.subtitulo.tif.txt","00000228.jpg.subtitulo.tif.txt","00000228.jpg.subtitulo.tif.txt","00000228.jpg.subtitulo.tif.txt","00000228.jpg.subtitulo.tif.txt","00000229.jpg.subtitulo.tif.txt","00000229.jpg.subtitulo.tif.txt","00000229.jpg.subtitulo.tif.txt","00000229.jpg.subtitulo.tif.txt","00000229.jpg.subtitulo.tif.txt","00000229.jpg.subtitulo.tif.txt","00000230.jpg.subtitulo.tif.txt","00000230.jpg.subtitulo.tif.txt","00000230.jpg.subtitulo.tif.txt","00000230.jpg.subtitulo.tif.txt","00000230.jpg.subtitulo.tif.txt","00000230.jpg.subtitulo.tif.txt","00000231.jpg.subtitulo.tif.txt","00000231.jpg.subtitulo.tif.txt","00000231.jpg.subtitulo.tif.txt","00000231.jpg.subtitulo.tif.txt","00000231.jpg.subtitulo.tif.txt","00000231.jpg.subtitulo.tif.txt","00000231.jpg.subtitulo.tif.txt","00000231.jpg.subtitulo.tif.txt","00000231.jpg.subtitulo.tif.txt","00000236.jpg.subtitulo.tif.txt","00000236.jpg.subtitulo.tif.txt","00000236.jpg.subtitulo.tif.txt","00000236.jpg.subtitulo.tif.txt","00000236.jpg.subtitulo.tif.txt","00000236.jpg.subtitulo.tif.txt","00000236.jpg.subtitulo.tif.txt","00000236.jpg.subtitulo.tif.txt","00000236.jpg.subtitulo.tif.txt","00000236.jpg.subtitulo.tif.txt","00000237.jpg.subtitulo.tif.txt","00000237.jpg.subtitulo.tif.txt","00000237.jpg.subtitulo.tif.txt","00000237.jpg.subtitulo.tif.txt","00000238.jpg.subtitulo.tif.txt","00000238.jpg.subtitulo.tif.txt","00000238.jpg.subtitulo.tif.txt","00000238.jpg.subtitulo.tif.txt","00000238.jpg.subtitulo.tif.txt","00000238.jpg.subtitulo.tif.txt","00000241.jpg.subtitulo.tif.txt","00000241.jpg.subtitulo.tif.txt","00000241.jpg.subtitulo.tif.txt","00000241.jpg.subtitulo.tif.txt","00000241.jpg.subtitulo.tif.txt","00000241.jpg.subtitulo.tif.txt","00000242.jpg.subtitulo.tif.txt","00000242.jpg.subtitulo.tif.txt","00000242.jpg.subtitulo.tif.txt","00000242.jpg.subtitulo.tif.txt","00000242.jpg.subtitulo.tif.txt","00000242.jpg.subtitulo.tif.txt","00000243.jpg.subtitulo.tif.txt","00000243.jpg.subtitulo.tif.txt","00000243.jpg.subtitulo.tif.txt","00000243.jpg.subtitulo.tif.txt","00000243.jpg.subtitulo.tif.txt","00000243.jpg.subtitulo.tif.txt","00000243.jpg.subtitulo.tif.txt","00000243.jpg.subtitulo.tif.txt","00000244.jpg.subtitulo.tif.txt","00000244.jpg.subtitulo.tif.txt","00000244.jpg.subtitulo.tif.txt","00000244.jpg.subtitulo.tif.txt","00000244.jpg.subtitulo.tif.txt","00000244.jpg.subtitulo.tif.txt","00000244.jpg.subtitulo.tif.txt","00000244.jpg.subtitulo.tif.txt","00000248.jpg.subtitulo.tif.txt","00000248.jpg.subtitulo.tif.txt","00000248.jpg.subtitulo.tif.txt","00000248.jpg.subtitulo.tif.txt","00000248.jpg.subtitulo.tif.txt","00000248.jpg.subtitulo.tif.txt","00000248.jpg.subtitulo.tif.txt","00000248.jpg.subtitulo.tif.txt","00000250.jpg.subtitulo.tif.txt","00000250.jpg.subtitulo.tif.txt","00000250.jpg.subtitulo.tif.txt","00000250.jpg.subtitulo.tif.txt","00000250.jpg.subtitulo.tif.txt","00000250.jpg.subtitulo.tif.txt","00000250.jpg.subtitulo.tif.txt","00000250.jpg.subtitulo.tif.txt","00000250.jpg.subtitulo.tif.txt","00000250.jpg.subtitulo.tif.txt","00000250.jpg.subtitulo.tif.txt","00000255.jpg.subtitulo.tif.txt","00000255.jpg.subtitulo.tif.txt","00000255.jpg.subtitulo.tif.txt","00000255.jpg.subtitulo.tif.txt","00000256.jpg.subtitulo.tif.txt","00000256.jpg.subtitulo.tif.txt","00000256.jpg.subtitulo.tif.txt","00000256.jpg.subtitulo.tif.txt","00000256.jpg.subtitulo.tif.txt","00000256.jpg.subtitulo.tif.txt","00000256.jpg.subtitulo.tif.txt","00000256.jpg.subtitulo.tif.txt","00000257.jpg.subtitulo.tif.txt","00000257.jpg.subtitulo.tif.txt","00000257.jpg.subtitulo.tif.txt","00000257.jpg.subtitulo.tif.txt","00000257.jpg.subtitulo.tif.txt","00000257.jpg.subtitulo.tif.txt","00000257.jpg.subtitulo.tif.txt","00000257.jpg.subtitulo.tif.txt","00000258.jpg.subtitulo.tif.txt","00000258.jpg.subtitulo.tif.txt","00000258.jpg.subtitulo.tif.txt","00000258.jpg.subtitulo.tif.txt","00000258.jpg.subtitulo.tif.txt","00000258.jpg.subtitulo.tif.txt","00000258.jpg.subtitulo.tif.txt","00000258.jpg.subtitulo.tif.txt","00000261.jpg.subtitulo.tif.txt","00000261.jpg.subtitulo.tif.txt","00000261.jpg.subtitulo.tif.txt","00000261.jpg.subtitulo.tif.txt","00000261.jpg.subtitulo.tif.txt","00000261.jpg.subtitulo.tif.txt","00000262.jpg.subtitulo.tif.txt","00000262.jpg.subtitulo.tif.txt","00000262.jpg.subtitulo.tif.txt","00000262.jpg.subtitulo.tif.txt","00000262.jpg.subtitulo.tif.txt","00000262.jpg.subtitulo.tif.txt","00000262.jpg.subtitulo.tif.txt","00000262.jpg.subtitulo.tif.txt","00000262.jpg.subtitulo.tif.txt","00000264.jpg.subtitulo.tif.txt","00000264.jpg.subtitulo.tif.txt","00000264.jpg.subtitulo.tif.txt","00000264.jpg.subtitulo.tif.txt","00000264.jpg.subtitulo.tif.txt","00000264.jpg.subtitulo.tif.txt","00000264.jpg.subtitulo.tif.txt","00000264.jpg.subtitulo.tif.txt","00000264.jpg.subtitulo.tif.txt","00000269.jpg.subtitulo.tif.txt","00000269.jpg.subtitulo.tif.txt","00000269.jpg.subtitulo.tif.txt","00000269.jpg.subtitulo.tif.txt","00000269.jpg.subtitulo.tif.txt","00000269.jpg.subtitulo.tif.txt","00000269.jpg.subtitulo.tif.txt","00000269.jpg.subtitulo.tif.txt","00000270.jpg.subtitulo.tif.txt","00000270.jpg.subtitulo.tif.txt","00000270.jpg.subtitulo.tif.txt","00000270.jpg.subtitulo.tif.txt","00000270.jpg.subtitulo.tif.txt","00000270.jpg.subtitulo.tif.txt","00000270.jpg.subtitulo.tif.txt","00000270.jpg.subtitulo.tif.txt","00000270.jpg.subtitulo.tif.txt","00000270.jpg.subtitulo.tif.txt","00000271.jpg.subtitulo.tif.txt","00000271.jpg.subtitulo.tif.txt","00000271.jpg.subtitulo.tif.txt","00000271.jpg.subtitulo.tif.txt","00000271.jpg.subtitulo.tif.txt","00000271.jpg.subtitulo.tif.txt","00000271.jpg.subtitulo.tif.txt","00000271.jpg.subtitulo.tif.txt","00000276.jpg.subtitulo.tif.txt","00000276.jpg.subtitulo.tif.txt","00000276.jpg.subtitulo.tif.txt","00000276.jpg.subtitulo.tif.txt","00000278.jpg.subtitulo.tif.txt","00000278.jpg.subtitulo.tif.txt","00000278.jpg.subtitulo.tif.txt","00000278.jpg.subtitulo.tif.txt","00000278.jpg.subtitulo.tif.txt","00000278.jpg.subtitulo.tif.txt","00000278.jpg.subtitulo.tif.txt","00000278.jpg.subtitulo.tif.txt","00000278.jpg.subtitulo.tif.txt","00000278.jpg.subtitulo.tif.txt","00000284.jpg.subtitulo.tif.txt","00000284.jpg.subtitulo.tif.txt","00000284.jpg.subtitulo.tif.txt","00000284.jpg.subtitulo.tif.txt","00000284.jpg.subtitulo.tif.txt","00000284.jpg.subtitulo.tif.txt","00000284.jpg.subtitulo.tif.txt","00000284.jpg.subtitulo.tif.txt","00000284.jpg.subtitulo.tif.txt","00000284.jpg.subtitulo.tif.txt","00000289.jpg.subtitulo.tif.txt","00000289.jpg.subtitulo.tif.txt","00000289.jpg.subtitulo.tif.txt","00000289.jpg.subtitulo.tif.txt","00000290.jpg.subtitulo.tif.txt","00000290.jpg.subtitulo.tif.txt","00000290.jpg.subtitulo.tif.txt","00000290.jpg.subtitulo.tif.txt","00000290.jpg.subtitulo.tif.txt","00000290.jpg.subtitulo.tif.txt","00000290.jpg.subtitulo.tif.txt","00000290.jpg.subtitulo.tif.txt","00000291.jpg.subtitulo.tif.txt","00000291.jpg.subtitulo.tif.txt","00000291.jpg.subtitulo.tif.txt","00000291.jpg.subtitulo.tif.txt","00000291.jpg.subtitulo.tif.txt","00000297.jpg.subtitulo.tif.txt","00000297.jpg.subtitulo.tif.txt","00000297.jpg.subtitulo.tif.txt","00000297.jpg.subtitulo.tif.txt","00000297.jpg.subtitulo.tif.txt","00000297.jpg.subtitulo.tif.txt","00000297.jpg.subtitulo.tif.txt","00000297.jpg.subtitulo.tif.txt","00000297.jpg.subtitulo.tif.txt","00000297.jpg.subtitulo.tif.txt","00000298.jpg.subtitulo.tif.txt","00000298.jpg.subtitulo.tif.txt","00000298.jpg.subtitulo.tif.txt","00000298.jpg.subtitulo.tif.txt","00000298.jpg.subtitulo.tif.txt","00000298.jpg.subtitulo.tif.txt","00000304.jpg.subtitulo.tif.txt","00000304.jpg.subtitulo.tif.txt","00000304.jpg.subtitulo.tif.txt","00000304.jpg.subtitulo.tif.txt","00000304.jpg.subtitulo.tif.txt","00000304.jpg.subtitulo.tif.txt","00000305.jpg.subtitulo.tif.txt","00000305.jpg.subtitulo.tif.txt","00000305.jpg.subtitulo.tif.txt","00000305.jpg.subtitulo.tif.txt","00000305.jpg.subtitulo.tif.txt","00000305.jpg.subtitulo.tif.txt","00000305.jpg.subtitulo.tif.txt","00000311.jpg.subtitulo.tif.txt","00000311.jpg.subtitulo.tif.txt","00000311.jpg.subtitulo.tif.txt","00000311.jpg.subtitulo.tif.txt","00000311.jpg.subtitulo.tif.txt","00000311.jpg.subtitulo.tif.txt","00000313.jpg.subtitulo.tif.txt","00000313.jpg.subtitulo.tif.txt","00000313.jpg.subtitulo.tif.txt","00000313.jpg.subtitulo.tif.txt","00000313.jpg.subtitulo.tif.txt","00000314.jpg.subtitulo.tif.txt","00000314.jpg.subtitulo.tif.txt","00000314.jpg.subtitulo.tif.txt","00000314.jpg.subtitulo.tif.txt","00000314.jpg.subtitulo.tif.txt","00000314.jpg.subtitulo.tif.txt","00000314.jpg.subtitulo.tif.txt","00000314.jpg.subtitulo.tif.txt","00000314.jpg.subtitulo.tif.txt","00000314.jpg.subtitulo.tif.txt","00000314.jpg.subtitulo.tif.txt","00000317.jpg.subtitulo.tif.txt","00000317.jpg.subtitulo.tif.txt","00000317.jpg.subtitulo.tif.txt","00000318.jpg.subtitulo.tif.txt","00000318.jpg.subtitulo.tif.txt","00000318.jpg.subtitulo.tif.txt","00000318.jpg.subtitulo.tif.txt","00000318.jpg.subtitulo.tif.txt","00000318.jpg.subtitulo.tif.txt","00000319.jpg.subtitulo.tif.txt","00000319.jpg.subtitulo.tif.txt","00000319.jpg.subtitulo.tif.txt","00000319.jpg.subtitulo.tif.txt","00000319.jpg.subtitulo.tif.txt","00000319.jpg.subtitulo.tif.txt","00000319.jpg.subtitulo.tif.txt","00000319.jpg.subtitulo.tif.txt","00000323.jpg.subtitulo.tif.txt","00000323.jpg.subtitulo.tif.txt","00000323.jpg.subtitulo.tif.txt","00000323.jpg.subtitulo.tif.txt","00000323.jpg.subtitulo.tif.txt","00000324.jpg.subtitulo.tif.txt","00000324.jpg.subtitulo.tif.txt","00000324.jpg.subtitulo.tif.txt","00000324.jpg.subtitulo.tif.txt","00000324.jpg.subtitulo.tif.txt","00000324.jpg.subtitulo.tif.txt","00000324.jpg.subtitulo.tif.txt","00000324.jpg.subtitulo.tif.txt","00000324.jpg.subtitulo.tif.txt","00000324.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000326.jpg.subtitulo.tif.txt","00000326.jpg.subtitulo.tif.txt","00000326.jpg.subtitulo.tif.txt","00000326.jpg.subtitulo.tif.txt","00000326.jpg.subtitulo.tif.txt","00000326.jpg.subtitulo.tif.txt","00000326.jpg.subtitulo.tif.txt","00000326.jpg.subtitulo.tif.txt","00000326.jpg.subtitulo.tif.txt","00000326.jpg.subtitulo.tif.txt","00000332.jpg.subtitulo.tif.txt","00000332.jpg.subtitulo.tif.txt","00000332.jpg.subtitulo.tif.txt","00000332.jpg.subtitulo.tif.txt","00000332.jpg.subtitulo.tif.txt","00000332.jpg.subtitulo.tif.txt","00000332.jpg.subtitulo.tif.txt","00000333.jpg.subtitulo.tif.txt","00000333.jpg.subtitulo.tif.txt","00000333.jpg.subtitulo.tif.txt","00000333.jpg.subtitulo.tif.txt","00000333.jpg.subtitulo.tif.txt","00000333.jpg.subtitulo.tif.txt","00000333.jpg.subtitulo.tif.txt","00000339.jpg.subtitulo.tif.txt","00000339.jpg.subtitulo.tif.txt","00000339.jpg.subtitulo.tif.txt","00000339.jpg.subtitulo.tif.txt","00000339.jpg.subtitulo.tif.txt","00000339.jpg.subtitulo.tif.txt","00000339.jpg.subtitulo.tif.txt","00000339.jpg.subtitulo.tif.txt","00000339.jpg.subtitulo.tif.txt","00000339.jpg.subtitulo.tif.txt","00000339.jpg.subtitulo.tif.txt","00000341.jpg.subtitulo.tif.txt","00000341.jpg.subtitulo.tif.txt","00000341.jpg.subtitulo.tif.txt","00000341.jpg.subtitulo.tif.txt","00000341.jpg.subtitulo.tif.txt","00000341.jpg.subtitulo.tif.txt","00000341.jpg.subtitulo.tif.txt","00000341.jpg.subtitulo.tif.txt","00000346.jpg.subtitulo.tif.txt","00000346.jpg.subtitulo.tif.txt","00000346.jpg.subtitulo.tif.txt","00000346.jpg.subtitulo.tif.txt","00000346.jpg.subtitulo.tif.txt","00000346.jpg.subtitulo.tif.txt","00000346.jpg.subtitulo.tif.txt","00000346.jpg.subtitulo.tif.txt","00000347.jpg.subtitulo.tif.txt","00000347.jpg.subtitulo.tif.txt","00000347.jpg.subtitulo.tif.txt","00000347.jpg.subtitulo.tif.txt","00000347.jpg.subtitulo.tif.txt","00000347.jpg.subtitulo.tif.txt","00000347.jpg.subtitulo.tif.txt","00000347.jpg.subtitulo.tif.txt","00000347.jpg.subtitulo.tif.txt","00000349.jpg.subtitulo.tif.txt","00000349.jpg.subtitulo.tif.txt","00000349.jpg.subtitulo.tif.txt","00000349.jpg.subtitulo.tif.txt","00000349.jpg.subtitulo.tif.txt","00000349.jpg.subtitulo.tif.txt","00000349.jpg.subtitulo.tif.txt","00000349.jpg.subtitulo.tif.txt","00000349.jpg.subtitulo.tif.txt","00000349.jpg.subtitulo.tif.txt","00000349.jpg.subtitulo.tif.txt","00000354.jpg.subtitulo.tif.txt","00000354.jpg.subtitulo.tif.txt","00000354.jpg.subtitulo.tif.txt","00000354.jpg.subtitulo.tif.txt","00000354.jpg.subtitulo.tif.txt","00000355.jpg.subtitulo.tif.txt","00000355.jpg.subtitulo.tif.txt","00000355.jpg.subtitulo.tif.txt","00000355.jpg.subtitulo.tif.txt","00000355.jpg.subtitulo.tif.txt","00000355.jpg.subtitulo.tif.txt","00000355.jpg.subtitulo.tif.txt","00000355.jpg.subtitulo.tif.txt","00000356.jpg.subtitulo.tif.txt","00000356.jpg.subtitulo.tif.txt","00000356.jpg.subtitulo.tif.txt","00000356.jpg.subtitulo.tif.txt","00000356.jpg.subtitulo.tif.txt","00000356.jpg.subtitulo.tif.txt","00000356.jpg.subtitulo.tif.txt","00000356.jpg.subtitulo.tif.txt","00000356.jpg.subtitulo.tif.txt","00000363.jpg.subtitulo.tif.txt","00000363.jpg.subtitulo.tif.txt","00000363.jpg.subtitulo.tif.txt","00000363.jpg.subtitulo.tif.txt","00000363.jpg.subtitulo.tif.txt","00000363.jpg.subtitulo.tif.txt","00000364.jpg.subtitulo.tif.txt","00000364.jpg.subtitulo.tif.txt","00000364.jpg.subtitulo.tif.txt","00000364.jpg.subtitulo.tif.txt","00000364.jpg.subtitulo.tif.txt","00000364.jpg.subtitulo.tif.txt","00000364.jpg.subtitulo.tif.txt","00000364.jpg.subtitulo.tif.txt","00000367.jpg.subtitulo.tif.txt","00000367.jpg.subtitulo.tif.txt","00000367.jpg.subtitulo.tif.txt","00000367.jpg.subtitulo.tif.txt","00000367.jpg.subtitulo.tif.txt","00000367.jpg.subtitulo.tif.txt","00000367.jpg.subtitulo.tif.txt","00000367.jpg.subtitulo.tif.txt","00000367.jpg.subtitulo.tif.txt","00000368.jpg.subtitulo.tif.txt","00000368.jpg.subtitulo.tif.txt","00000368.jpg.subtitulo.tif.txt","00000368.jpg.subtitulo.tif.txt","00000368.jpg.subtitulo.tif.txt","00000368.jpg.subtitulo.tif.txt","00000371.jpg.subtitulo.tif.txt","00000371.jpg.subtitulo.tif.txt","00000371.jpg.subtitulo.tif.txt","00000371.jpg.subtitulo.tif.txt","00000372.jpg.subtitulo.tif.txt","00000372.jpg.subtitulo.tif.txt","00000372.jpg.subtitulo.tif.txt","00000372.jpg.subtitulo.tif.txt","00000372.jpg.subtitulo.tif.txt","00000372.jpg.subtitulo.tif.txt","00000372.jpg.subtitulo.tif.txt","00000372.jpg.subtitulo.tif.txt","00000372.jpg.subtitulo.tif.txt","00000373.jpg.subtitulo.tif.txt","00000373.jpg.subtitulo.tif.txt","00000373.jpg.subtitulo.tif.txt","00000373.jpg.subtitulo.tif.txt","00000373.jpg.subtitulo.tif.txt","00000373.jpg.subtitulo.tif.txt","00000374.jpg.subtitulo.tif.txt","00000374.jpg.subtitulo.tif.txt","00000374.jpg.subtitulo.tif.txt","00000374.jpg.subtitulo.tif.txt","00000374.jpg.subtitulo.tif.txt","00000374.jpg.subtitulo.tif.txt","00000374.jpg.subtitulo.tif.txt","00000374.jpg.subtitulo.tif.txt","00000374.jpg.subtitulo.tif.txt","00000374.jpg.subtitulo.tif.txt","00000374.jpg.subtitulo.tif.txt","00000376.jpg.subtitulo.tif.txt","00000376.jpg.subtitulo.tif.txt","00000376.jpg.subtitulo.tif.txt","00000376.jpg.subtitulo.tif.txt","00000376.jpg.subtitulo.tif.txt","00000377.jpg.subtitulo.tif.txt","00000377.jpg.subtitulo.tif.txt","00000377.jpg.subtitulo.tif.txt","00000377.jpg.subtitulo.tif.txt","00000377.jpg.subtitulo.tif.txt","00000377.jpg.subtitulo.tif.txt","00000378.jpg.subtitulo.tif.txt","00000378.jpg.subtitulo.tif.txt","00000378.jpg.subtitulo.tif.txt","00000378.jpg.subtitulo.tif.txt","00000378.jpg.subtitulo.tif.txt","00000378.jpg.subtitulo.tif.txt","00000378.jpg.subtitulo.tif.txt","00000378.jpg.subtitulo.tif.txt","00000378.jpg.subtitulo.tif.txt","00000378.jpg.subtitulo.tif.txt","00000379.jpg.subtitulo.tif.txt","00000379.jpg.subtitulo.tif.txt","00000379.jpg.subtitulo.tif.txt","00000379.jpg.subtitulo.tif.txt","00000379.jpg.subtitulo.tif.txt","00000379.jpg.subtitulo.tif.txt","00000379.jpg.subtitulo.tif.txt","00000379.jpg.subtitulo.tif.txt","00000383.jpg.subtitulo.tif.txt","00000383.jpg.subtitulo.tif.txt","00000383.jpg.subtitulo.tif.txt","00000383.jpg.subtitulo.tif.txt","00000383.jpg.subtitulo.tif.txt","00000383.jpg.subtitulo.tif.txt","00000383.jpg.subtitulo.tif.txt","00000385.jpg.subtitulo.tif.txt","00000385.jpg.subtitulo.tif.txt","00000385.jpg.subtitulo.tif.txt","00000385.jpg.subtitulo.tif.txt","00000385.jpg.subtitulo.tif.txt","00000385.jpg.subtitulo.tif.txt","00000389.jpg.subtitulo.tif.txt","00000389.jpg.subtitulo.tif.txt","00000389.jpg.subtitulo.tif.txt","00000389.jpg.subtitulo.tif.txt","00000389.jpg.subtitulo.tif.txt","00000389.jpg.subtitulo.tif.txt","00000390.jpg.subtitulo.tif.txt","00000390.jpg.subtitulo.tif.txt","00000390.jpg.subtitulo.tif.txt","00000390.jpg.subtitulo.tif.txt","00000390.jpg.subtitulo.tif.txt","00000390.jpg.subtitulo.tif.txt","00000390.jpg.subtitulo.tif.txt","00000390.jpg.subtitulo.tif.txt","00000390.jpg.subtitulo.tif.txt","00000390.jpg.subtitulo.tif.txt","00000390.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000401.jpg.subtitulo.tif.txt","00000401.jpg.subtitulo.tif.txt","00000402.jpg.subtitulo.tif.txt","00000402.jpg.subtitulo.tif.txt","00000402.jpg.subtitulo.tif.txt","00000402.jpg.subtitulo.tif.txt","00000402.jpg.subtitulo.tif.txt","00000402.jpg.subtitulo.tif.txt","00000402.jpg.subtitulo.tif.txt","00000403.jpg.subtitulo.tif.txt","00000403.jpg.subtitulo.tif.txt","00000403.jpg.subtitulo.tif.txt","00000403.jpg.subtitulo.tif.txt","00000403.jpg.subtitulo.tif.txt","00000410.jpg.subtitulo.tif.txt","00000410.jpg.subtitulo.tif.txt","00000410.jpg.subtitulo.tif.txt","00000410.jpg.subtitulo.tif.txt","00000410.jpg.subtitulo.tif.txt","00000410.jpg.subtitulo.tif.txt","00000411.jpg.subtitulo.tif.txt","00000411.jpg.subtitulo.tif.txt","00000411.jpg.subtitulo.tif.txt","00000411.jpg.subtitulo.tif.txt","00000411.jpg.subtitulo.tif.txt","00000411.jpg.subtitulo.tif.txt","00000411.jpg.subtitulo.tif.txt","00000411.jpg.subtitulo.tif.txt","00000411.jpg.subtitulo.tif.txt","00000411.jpg.subtitulo.tif.txt","00000414.jpg.subtitulo.tif.txt","00000414.jpg.subtitulo.tif.txt","00000414.jpg.subtitulo.tif.txt","00000414.jpg.subtitulo.tif.txt","00000414.jpg.subtitulo.tif.txt","00000414.jpg.subtitulo.tif.txt","00000414.jpg.subtitulo.tif.txt","00000414.jpg.subtitulo.tif.txt","00000414.jpg.subtitulo.tif.txt","00000414.jpg.subtitulo.tif.txt","00000414.jpg.subtitulo.tif.txt","00000415.jpg.subtitulo.tif.txt","00000415.jpg.subtitulo.tif.txt","00000415.jpg.subtitulo.tif.txt","00000415.jpg.subtitulo.tif.txt","00000415.jpg.subtitulo.tif.txt","00000415.jpg.subtitulo.tif.txt","00000415.jpg.subtitulo.tif.txt","00000415.jpg.subtitulo.tif.txt","00000415.jpg.subtitulo.tif.txt","00000415.jpg.subtitulo.tif.txt","00000423.jpg.subtitulo.tif.txt","00000423.jpg.subtitulo.tif.txt","00000423.jpg.subtitulo.tif.txt","00000423.jpg.subtitulo.tif.txt","00000423.jpg.subtitulo.tif.txt","00000423.jpg.subtitulo.tif.txt","00000423.jpg.subtitulo.tif.txt","00000423.jpg.subtitulo.tif.txt","00000424.jpg.subtitulo.tif.txt","00000424.jpg.subtitulo.tif.txt","00000424.jpg.subtitulo.tif.txt","00000424.jpg.subtitulo.tif.txt","00000424.jpg.subtitulo.tif.txt","00000424.jpg.subtitulo.tif.txt","00000424.jpg.subtitulo.tif.txt","00000424.jpg.subtitulo.tif.txt","00000424.jpg.subtitulo.tif.txt","00000424.jpg.subtitulo.tif.txt","00000424.jpg.subtitulo.tif.txt","00000431.jpg.subtitulo.tif.txt","00000431.jpg.subtitulo.tif.txt","00000431.jpg.subtitulo.tif.txt","00000431.jpg.subtitulo.tif.txt","00000431.jpg.subtitulo.tif.txt","00000431.jpg.subtitulo.tif.txt","00000431.jpg.subtitulo.tif.txt","00000431.jpg.subtitulo.tif.txt","00000431.jpg.subtitulo.tif.txt","00000431.jpg.subtitulo.tif.txt","00000432.jpg.subtitulo.tif.txt","00000432.jpg.subtitulo.tif.txt","00000432.jpg.subtitulo.tif.txt","00000432.jpg.subtitulo.tif.txt","00000432.jpg.subtitulo.tif.txt","00000432.jpg.subtitulo.tif.txt","00000433.jpg.subtitulo.tif.txt","00000433.jpg.subtitulo.tif.txt","00000433.jpg.subtitulo.tif.txt","00000433.jpg.subtitulo.tif.txt","00000433.jpg.subtitulo.tif.txt","00000433.jpg.subtitulo.tif.txt","00000433.jpg.subtitulo.tif.txt","00000433.jpg.subtitulo.tif.txt","00000433.jpg.subtitulo.tif.txt","00000436.jpg.subtitulo.tif.txt","00000436.jpg.subtitulo.tif.txt","00000436.jpg.subtitulo.tif.txt","00000436.jpg.subtitulo.tif.txt","00000436.jpg.subtitulo.tif.txt","00000436.jpg.subtitulo.tif.txt","00000436.jpg.subtitulo.tif.txt","00000436.jpg.subtitulo.tif.txt","00000438.jpg.subtitulo.tif.txt","00000438.jpg.subtitulo.tif.txt","00000438.jpg.subtitulo.tif.txt","00000438.jpg.subtitulo.tif.txt","00000438.jpg.subtitulo.tif.txt","00000438.jpg.subtitulo.tif.txt","00000438.jpg.subtitulo.tif.txt","00000438.jpg.subtitulo.tif.txt","00000438.jpg.subtitulo.tif.txt","00000438.jpg.subtitulo.tif.txt","00000438.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000445.jpg.subtitulo.tif.txt","00000445.jpg.subtitulo.tif.txt","00000445.jpg.subtitulo.tif.txt","00000445.jpg.subtitulo.tif.txt","00000445.jpg.subtitulo.tif.txt","00000454.jpg.subtitulo.tif.txt","00000454.jpg.subtitulo.tif.txt","00000454.jpg.subtitulo.tif.txt","00000454.jpg.subtitulo.tif.txt","00000454.jpg.subtitulo.tif.txt","00000454.jpg.subtitulo.tif.txt","00000455.jpg.subtitulo.tif.txt","00000455.jpg.subtitulo.tif.txt","00000455.jpg.subtitulo.tif.txt","00000455.jpg.subtitulo.tif.txt","00000455.jpg.subtitulo.tif.txt","00000455.jpg.subtitulo.tif.txt","00000455.jpg.subtitulo.tif.txt","00000455.jpg.subtitulo.tif.txt","00000455.jpg.subtitulo.tif.txt","00000455.jpg.subtitulo.tif.txt","00000455.jpg.subtitulo.tif.txt","00000459.jpg.subtitulo.tif.txt","00000459.jpg.subtitulo.tif.txt","00000459.jpg.subtitulo.tif.txt","00000459.jpg.subtitulo.tif.txt","00000459.jpg.subtitulo.tif.txt","00000459.jpg.subtitulo.tif.txt","00000459.jpg.subtitulo.tif.txt","00000459.jpg.subtitulo.tif.txt","00000459.jpg.subtitulo.tif.txt","00000459.jpg.subtitulo.tif.txt","00000460.jpg.subtitulo.tif.txt","00000460.jpg.subtitulo.tif.txt","00000460.jpg.subtitulo.tif.txt","00000460.jpg.subtitulo.tif.txt","00000460.jpg.subtitulo.tif.txt","00000460.jpg.subtitulo.tif.txt","00000460.jpg.subtitulo.tif.txt","00000460.jpg.subtitulo.tif.txt","00000460.jpg.subtitulo.tif.txt","00000466.jpg.subtitulo.tif.txt","00000466.jpg.subtitulo.tif.txt","00000466.jpg.subtitulo.tif.txt","00000466.jpg.subtitulo.tif.txt","00000466.jpg.subtitulo.tif.txt","00000466.jpg.subtitulo.tif.txt","00000467.jpg.subtitulo.tif.txt","00000467.jpg.subtitulo.tif.txt","00000467.jpg.subtitulo.tif.txt","00000467.jpg.subtitulo.tif.txt","00000467.jpg.subtitulo.tif.txt","00000467.jpg.subtitulo.tif.txt","00000467.jpg.subtitulo.tif.txt","00000467.jpg.subtitulo.tif.txt","00000468.jpg.subtitulo.tif.txt","00000468.jpg.subtitulo.tif.txt","00000468.jpg.subtitulo.tif.txt","00000468.jpg.subtitulo.tif.txt","00000475.jpg.subtitulo.tif.txt","00000475.jpg.subtitulo.tif.txt","00000475.jpg.subtitulo.tif.txt","00000475.jpg.subtitulo.tif.txt","00000475.jpg.subtitulo.tif.txt","00000475.jpg.subtitulo.tif.txt","00000476.jpg.subtitulo.tif.txt","00000476.jpg.subtitulo.tif.txt","00000476.jpg.subtitulo.tif.txt","00000476.jpg.subtitulo.tif.txt","00000476.jpg.subtitulo.tif.txt","00000476.jpg.subtitulo.tif.txt","00000476.jpg.subtitulo.tif.txt","00000476.jpg.subtitulo.tif.txt","00000476.jpg.subtitulo.tif.txt","00000483.jpg.subtitulo.tif.txt","00000483.jpg.subtitulo.tif.txt","00000483.jpg.subtitulo.tif.txt","00000483.jpg.subtitulo.tif.txt","00000483.jpg.subtitulo.tif.txt","00000483.jpg.subtitulo.tif.txt","00000483.jpg.subtitulo.tif.txt","00000483.jpg.subtitulo.tif.txt","00000483.jpg.subtitulo.tif.txt","00000483.jpg.subtitulo.tif.txt","00000484.jpg.subtitulo.tif.txt","00000484.jpg.subtitulo.tif.txt","00000484.jpg.subtitulo.tif.txt","00000484.jpg.subtitulo.tif.txt","00000484.jpg.subtitulo.tif.txt","00000484.jpg.subtitulo.tif.txt","00000484.jpg.subtitulo.tif.txt","00000484.jpg.subtitulo.tif.txt","00000491.jpg.subtitulo.tif.txt","00000491.jpg.subtitulo.tif.txt","00000491.jpg.subtitulo.tif.txt","00000491.jpg.subtitulo.tif.txt","00000491.jpg.subtitulo.tif.txt","00000491.jpg.subtitulo.tif.txt","00000491.jpg.subtitulo.tif.txt","00000491.jpg.subtitulo.tif.txt","00000491.jpg.subtitulo.tif.txt","00000492.jpg.subtitulo.tif.txt","00000492.jpg.subtitulo.tif.txt","00000492.jpg.subtitulo.tif.txt","00000492.jpg.subtitulo.tif.txt","00000492.jpg.subtitulo.tif.txt","00000492.jpg.subtitulo.tif.txt","00000492.jpg.subtitulo.tif.txt","00000492.jpg.subtitulo.tif.txt","00000499.jpg.subtitulo.tif.txt","00000499.jpg.subtitulo.tif.txt","00000499.jpg.subtitulo.tif.txt","00000499.jpg.subtitulo.tif.txt","00000499.jpg.subtitulo.tif.txt","00000499.jpg.subtitulo.tif.txt","00000499.jpg.subtitulo.tif.txt","00000499.jpg.subtitulo.tif.txt","00000499.jpg.subtitulo.tif.txt","00000501.jpg.subtitulo.tif.txt","00000501.jpg.subtitulo.tif.txt","00000501.jpg.subtitulo.tif.txt","00000501.jpg.subtitulo.tif.txt","00000501.jpg.subtitulo.tif.txt","00000501.jpg.subtitulo.tif.txt","00000505.jpg.subtitulo.tif.txt","00000505.jpg.subtitulo.tif.txt","00000505.jpg.subtitulo.tif.txt","00000505.jpg.subtitulo.tif.txt","00000505.jpg.subtitulo.tif.txt","00000505.jpg.subtitulo.tif.txt","00000505.jpg.subtitulo.tif.txt","00000505.jpg.subtitulo.tif.txt","00000506.jpg.subtitulo.tif.txt","00000506.jpg.subtitulo.tif.txt","00000506.jpg.subtitulo.tif.txt","00000506.jpg.subtitulo.tif.txt","00000506.jpg.subtitulo.tif.txt","00000506.jpg.subtitulo.tif.txt","00000506.jpg.subtitulo.tif.txt","00000506.jpg.subtitulo.tif.txt","00000506.jpg.subtitulo.tif.txt","00000508.jpg.subtitulo.tif.txt","00000508.jpg.subtitulo.tif.txt","00000508.jpg.subtitulo.tif.txt","00000509.jpg.subtitulo.tif.txt","00000509.jpg.subtitulo.tif.txt","00000509.jpg.subtitulo.tif.txt","00000509.jpg.subtitulo.tif.txt","00000509.jpg.subtitulo.tif.txt","00000509.jpg.subtitulo.tif.txt","00000510.jpg.subtitulo.tif.txt","00000510.jpg.subtitulo.tif.txt","00000510.jpg.subtitulo.tif.txt","00000510.jpg.subtitulo.tif.txt","00000510.jpg.subtitulo.tif.txt","00000510.jpg.subtitulo.tif.txt","00000510.jpg.subtitulo.tif.txt","00000510.jpg.subtitulo.tif.txt","00000510.jpg.subtitulo.tif.txt","00000510.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00000516.jpg.subtitulo.tif.txt","00000516.jpg.subtitulo.tif.txt","00000516.jpg.subtitulo.tif.txt","00000516.jpg.subtitulo.tif.txt","00000516.jpg.subtitulo.tif.txt","00000516.jpg.subtitulo.tif.txt","00000516.jpg.subtitulo.tif.txt","00000516.jpg.subtitulo.tif.txt","00000522.jpg.subtitulo.tif.txt","00000522.jpg.subtitulo.tif.txt","00000522.jpg.subtitulo.tif.txt","00000522.jpg.subtitulo.tif.txt","00000522.jpg.subtitulo.tif.txt","00000522.jpg.subtitulo.tif.txt","00000522.jpg.subtitulo.tif.txt","00000522.jpg.subtitulo.tif.txt","00000522.jpg.subtitulo.tif.txt","00000523.jpg.subtitulo.tif.txt","00000523.jpg.subtitulo.tif.txt","00000523.jpg.subtitulo.tif.txt","00000523.jpg.subtitulo.tif.txt","00000523.jpg.subtitulo.tif.txt","00000523.jpg.subtitulo.tif.txt","00000523.jpg.subtitulo.tif.txt","00000523.jpg.subtitulo.tif.txt","00000523.jpg.subtitulo.tif.txt","00000523.jpg.subtitulo.tif.txt","00000523.jpg.subtitulo.tif.txt","00000529.jpg.subtitulo.tif.txt","00000529.jpg.subtitulo.tif.txt","00000529.jpg.subtitulo.tif.txt","00000529.jpg.subtitulo.tif.txt","00000529.jpg.subtitulo.tif.txt","00000529.jpg.subtitulo.tif.txt","00000529.jpg.subtitulo.tif.txt","00000529.jpg.subtitulo.tif.txt","00000530.jpg.subtitulo.tif.txt","00000530.jpg.subtitulo.tif.txt","00000530.jpg.subtitulo.tif.txt","00000530.jpg.subtitulo.tif.txt","00000530.jpg.subtitulo.tif.txt","00000530.jpg.subtitulo.tif.txt","00000530.jpg.subtitulo.tif.txt","00000530.jpg.subtitulo.tif.txt","00000537.jpg.subtitulo.tif.txt","00000537.jpg.subtitulo.tif.txt","00000537.jpg.subtitulo.tif.txt","00000537.jpg.subtitulo.tif.txt","00000537.jpg.subtitulo.tif.txt","00000537.jpg.subtitulo.tif.txt","00000537.jpg.subtitulo.tif.txt","00000537.jpg.subtitulo.tif.txt","00000538.jpg.subtitulo.tif.txt","00000538.jpg.subtitulo.tif.txt","00000538.jpg.subtitulo.tif.txt","00000538.jpg.subtitulo.tif.txt","00000538.jpg.subtitulo.tif.txt","00000538.jpg.subtitulo.tif.txt","00000538.jpg.subtitulo.tif.txt","00000538.jpg.subtitulo.tif.txt","00000543.jpg.subtitulo.tif.txt","00000543.jpg.subtitulo.tif.txt","00000543.jpg.subtitulo.tif.txt","00000543.jpg.subtitulo.tif.txt","00000543.jpg.subtitulo.tif.txt","00000543.jpg.subtitulo.tif.txt","00000543.jpg.subtitulo.tif.txt","00000543.jpg.subtitulo.tif.txt","00000543.jpg.subtitulo.tif.txt","00000543.jpg.subtitulo.tif.txt","00000545.jpg.subtitulo.tif.txt","00000545.jpg.subtitulo.tif.txt","00000545.jpg.subtitulo.tif.txt","00000545.jpg.subtitulo.tif.txt","00000545.jpg.subtitulo.tif.txt","00000545.jpg.subtitulo.tif.txt","00000545.jpg.subtitulo.tif.txt","00000551.jpg.subtitulo.tif.txt","00000551.jpg.subtitulo.tif.txt","00000551.jpg.subtitulo.tif.txt","00000551.jpg.subtitulo.tif.txt","00000551.jpg.subtitulo.tif.txt","00000551.jpg.subtitulo.tif.txt","00000551.jpg.subtitulo.tif.txt","00000551.jpg.subtitulo.tif.txt","00000551.jpg.subtitulo.tif.txt","00000551.jpg.subtitulo.tif.txt","00000552.jpg.subtitulo.tif.txt","00000552.jpg.subtitulo.tif.txt","00000552.jpg.subtitulo.tif.txt","00000552.jpg.subtitulo.tif.txt","00000552.jpg.subtitulo.tif.txt","00000557.jpg.subtitulo.tif.txt","00000557.jpg.subtitulo.tif.txt","00000557.jpg.subtitulo.tif.txt","00000557.jpg.subtitulo.tif.txt","00000557.jpg.subtitulo.tif.txt","00000557.jpg.subtitulo.tif.txt","00000557.jpg.subtitulo.tif.txt","00000557.jpg.subtitulo.tif.txt","00000558.jpg.subtitulo.tif.txt","00000558.jpg.subtitulo.tif.txt","00000558.jpg.subtitulo.tif.txt","00000558.jpg.subtitulo.tif.txt","00000558.jpg.subtitulo.tif.txt","00000558.jpg.subtitulo.tif.txt","00000558.jpg.subtitulo.tif.txt","00000561.jpg.subtitulo.tif.txt","00000561.jpg.subtitulo.tif.txt","00000561.jpg.subtitulo.tif.txt","00000561.jpg.subtitulo.tif.txt","00000561.jpg.subtitulo.tif.txt","00000561.jpg.subtitulo.tif.txt","00000562.jpg.subtitulo.tif.txt","00000562.jpg.subtitulo.tif.txt","00000562.jpg.subtitulo.tif.txt","00000562.jpg.subtitulo.tif.txt","00000562.jpg.subtitulo.tif.txt","00000562.jpg.subtitulo.tif.txt","00000563.jpg.subtitulo.tif.txt","00000563.jpg.subtitulo.tif.txt","00000563.jpg.subtitulo.tif.txt","00000563.jpg.subtitulo.tif.txt","00000563.jpg.subtitulo.tif.txt","00000563.jpg.subtitulo.tif.txt","00000563.jpg.subtitulo.tif.txt","00000564.jpg.subtitulo.tif.txt","00000564.jpg.subtitulo.tif.txt","00000564.jpg.subtitulo.tif.txt","00000564.jpg.subtitulo.tif.txt","00000564.jpg.subtitulo.tif.txt","00000564.jpg.subtitulo.tif.txt","00000564.jpg.subtitulo.tif.txt","00000565.jpg.subtitulo.tif.txt","00000565.jpg.subtitulo.tif.txt","00000565.jpg.subtitulo.tif.txt","00000565.jpg.subtitulo.tif.txt","00000565.jpg.subtitulo.tif.txt","00000565.jpg.subtitulo.tif.txt","00000565.jpg.subtitulo.tif.txt","00000566.jpg.subtitulo.tif.txt","00000566.jpg.subtitulo.tif.txt","00000566.jpg.subtitulo.tif.txt","00000566.jpg.subtitulo.tif.txt","00000566.jpg.subtitulo.tif.txt","00000566.jpg.subtitulo.tif.txt","00000566.jpg.subtitulo.tif.txt","00000566.jpg.subtitulo.tif.txt","00000566.jpg.subtitulo.tif.txt","00000570.jpg.subtitulo.tif.txt","00000570.jpg.subtitulo.tif.txt","00000570.jpg.subtitulo.tif.txt","00000570.jpg.subtitulo.tif.txt","00000570.jpg.subtitulo.tif.txt","00000570.jpg.subtitulo.tif.txt","00000571.jpg.subtitulo.tif.txt","00000571.jpg.subtitulo.tif.txt","00000571.jpg.subtitulo.tif.txt","00000571.jpg.subtitulo.tif.txt","00000571.jpg.subtitulo.tif.txt","00000571.jpg.subtitulo.tif.txt","00000571.jpg.subtitulo.tif.txt","00000571.jpg.subtitulo.tif.txt","00000571.jpg.subtitulo.tif.txt","00000571.jpg.subtitulo.tif.txt","00000571.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00000576.jpg.subtitulo.tif.txt","00000576.jpg.subtitulo.tif.txt","00000576.jpg.subtitulo.tif.txt","00000576.jpg.subtitulo.tif.txt","00000576.jpg.subtitulo.tif.txt","00000576.jpg.subtitulo.tif.txt","00000576.jpg.subtitulo.tif.txt","00000576.jpg.subtitulo.tif.txt","00000577.jpg.subtitulo.tif.txt","00000577.jpg.subtitulo.tif.txt","00000577.jpg.subtitulo.tif.txt","00000577.jpg.subtitulo.tif.txt","00000577.jpg.subtitulo.tif.txt","00000577.jpg.subtitulo.tif.txt","00000577.jpg.subtitulo.tif.txt","00000577.jpg.subtitulo.tif.txt","00000577.jpg.subtitulo.tif.txt","00000583.jpg.subtitulo.tif.txt","00000583.jpg.subtitulo.tif.txt","00000583.jpg.subtitulo.tif.txt","00000583.jpg.subtitulo.tif.txt","00000583.jpg.subtitulo.tif.txt","00000583.jpg.subtitulo.tif.txt","00000583.jpg.subtitulo.tif.txt","00000583.jpg.subtitulo.tif.txt","00000583.jpg.subtitulo.tif.txt","00000585.jpg.subtitulo.tif.txt","00000585.jpg.subtitulo.tif.txt","00000585.jpg.subtitulo.tif.txt","00000585.jpg.subtitulo.tif.txt","00000585.jpg.subtitulo.tif.txt","00000585.jpg.subtitulo.tif.txt","00000585.jpg.subtitulo.tif.txt","00000585.jpg.subtitulo.tif.txt","00000585.jpg.subtitulo.tif.txt","00000585.jpg.subtitulo.tif.txt","00000590.jpg.subtitulo.tif.txt","00000590.jpg.subtitulo.tif.txt","00000590.jpg.subtitulo.tif.txt","00000590.jpg.subtitulo.tif.txt","00000590.jpg.subtitulo.tif.txt","00000590.jpg.subtitulo.tif.txt","00000590.jpg.subtitulo.tif.txt","00000590.jpg.subtitulo.tif.txt","00000590.jpg.subtitulo.tif.txt","00000590.jpg.subtitulo.tif.txt","00000592.jpg.subtitulo.tif.txt","00000592.jpg.subtitulo.tif.txt","00000592.jpg.subtitulo.tif.txt","00000592.jpg.subtitulo.tif.txt","00000592.jpg.subtitulo.tif.txt","00000592.jpg.subtitulo.tif.txt","00000592.jpg.subtitulo.tif.txt","00000592.jpg.subtitulo.tif.txt","00000592.jpg.subtitulo.tif.txt","00000592.jpg.subtitulo.tif.txt","00000592.jpg.subtitulo.tif.txt","00000597.jpg.subtitulo.tif.txt","00000597.jpg.subtitulo.tif.txt","00000597.jpg.subtitulo.tif.txt","00000597.jpg.subtitulo.tif.txt","00000597.jpg.subtitulo.tif.txt","00000597.jpg.subtitulo.tif.txt","00000597.jpg.subtitulo.tif.txt","00000597.jpg.subtitulo.tif.txt","00000597.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000603.jpg.subtitulo.tif.txt","00000603.jpg.subtitulo.tif.txt","00000603.jpg.subtitulo.tif.txt","00000603.jpg.subtitulo.tif.txt","00000603.jpg.subtitulo.tif.txt","00000603.jpg.subtitulo.tif.txt","00000604.jpg.subtitulo.tif.txt","00000604.jpg.subtitulo.tif.txt","00000604.jpg.subtitulo.tif.txt","00000604.jpg.subtitulo.tif.txt","00000604.jpg.subtitulo.tif.txt","00000604.jpg.subtitulo.tif.txt","00000604.jpg.subtitulo.tif.txt","00000605.jpg.subtitulo.tif.txt","00000605.jpg.subtitulo.tif.txt","00000605.jpg.subtitulo.tif.txt","00000605.jpg.subtitulo.tif.txt","00000605.jpg.subtitulo.tif.txt","00000605.jpg.subtitulo.tif.txt","00000605.jpg.subtitulo.tif.txt","00000605.jpg.subtitulo.tif.txt","00000605.jpg.subtitulo.tif.txt","00000605.jpg.subtitulo.tif.txt","00000612.jpg.subtitulo.tif.txt","00000612.jpg.subtitulo.tif.txt","00000612.jpg.subtitulo.tif.txt","00000612.jpg.subtitulo.tif.txt","00000612.jpg.subtitulo.tif.txt","00000612.jpg.subtitulo.tif.txt","00000612.jpg.subtitulo.tif.txt","00000612.jpg.subtitulo.tif.txt","00000613.jpg.subtitulo.tif.txt","00000613.jpg.subtitulo.tif.txt","00000613.jpg.subtitulo.tif.txt","00000613.jpg.subtitulo.tif.txt","00000613.jpg.subtitulo.tif.txt","00000621.jpg.subtitulo.tif.txt","00000621.jpg.subtitulo.tif.txt","00000621.jpg.subtitulo.tif.txt","00000621.jpg.subtitulo.tif.txt","00000621.jpg.subtitulo.tif.txt","00000621.jpg.subtitulo.tif.txt","00000622.jpg.subtitulo.tif.txt","00000622.jpg.subtitulo.tif.txt","00000622.jpg.subtitulo.tif.txt","00000622.jpg.subtitulo.tif.txt","00000622.jpg.subtitulo.tif.txt","00000622.jpg.subtitulo.tif.txt","00000622.jpg.subtitulo.tif.txt","00000622.jpg.subtitulo.tif.txt","00000622.jpg.subtitulo.tif.txt","00000622.jpg.subtitulo.tif.txt","00000628.jpg.subtitulo.tif.txt","00000628.jpg.subtitulo.tif.txt","00000628.jpg.subtitulo.tif.txt","00000628.jpg.subtitulo.tif.txt","00000628.jpg.subtitulo.tif.txt","00000628.jpg.subtitulo.tif.txt","00000628.jpg.subtitulo.tif.txt","00000628.jpg.subtitulo.tif.txt","00000628.jpg.subtitulo.tif.txt","00000630.jpg.subtitulo.tif.txt","00000630.jpg.subtitulo.tif.txt","00000630.jpg.subtitulo.tif.txt","00000630.jpg.subtitulo.tif.txt","00000630.jpg.subtitulo.tif.txt","00000630.jpg.subtitulo.tif.txt","00000630.jpg.subtitulo.tif.txt","00000630.jpg.subtitulo.tif.txt","00000630.jpg.subtitulo.tif.txt","00000633.jpg.subtitulo.tif.txt","00000633.jpg.subtitulo.tif.txt","00000633.jpg.subtitulo.tif.txt","00000633.jpg.subtitulo.tif.txt","00000633.jpg.subtitulo.tif.txt","00000633.jpg.subtitulo.tif.txt","00000633.jpg.subtitulo.tif.txt","00000633.jpg.subtitulo.tif.txt","00000634.jpg.subtitulo.tif.txt","00000634.jpg.subtitulo.tif.txt","00000634.jpg.subtitulo.tif.txt","00000634.jpg.subtitulo.tif.txt","00000634.jpg.subtitulo.tif.txt","00000634.jpg.subtitulo.tif.txt","00000634.jpg.subtitulo.tif.txt","00000634.jpg.subtitulo.tif.txt","00000634.jpg.subtitulo.tif.txt","00000634.jpg.subtitulo.tif.txt","00000642.jpg.subtitulo.tif.txt","00000642.jpg.subtitulo.tif.txt","00000642.jpg.subtitulo.tif.txt","00000642.jpg.subtitulo.tif.txt","00000642.jpg.subtitulo.tif.txt","00000642.jpg.subtitulo.tif.txt","00000642.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000648.jpg.subtitulo.tif.txt","00000648.jpg.subtitulo.tif.txt","00000648.jpg.subtitulo.tif.txt","00000649.jpg.subtitulo.tif.txt","00000649.jpg.subtitulo.tif.txt","00000649.jpg.subtitulo.tif.txt","00000649.jpg.subtitulo.tif.txt","00000649.jpg.subtitulo.tif.txt","00000649.jpg.subtitulo.tif.txt","00000649.jpg.subtitulo.tif.txt","00000649.jpg.subtitulo.tif.txt","00000649.jpg.subtitulo.tif.txt","00000649.jpg.subtitulo.tif.txt","00000656.jpg.subtitulo.tif.txt","00000656.jpg.subtitulo.tif.txt","00000656.jpg.subtitulo.tif.txt","00000656.jpg.subtitulo.tif.txt","00000656.jpg.subtitulo.tif.txt","00000656.jpg.subtitulo.tif.txt","00000656.jpg.subtitulo.tif.txt","00000656.jpg.subtitulo.tif.txt","00000656.jpg.subtitulo.tif.txt","00000656.jpg.subtitulo.tif.txt","00000656.jpg.subtitulo.tif.txt","00000657.jpg.subtitulo.tif.txt","00000657.jpg.subtitulo.tif.txt","00000657.jpg.subtitulo.tif.txt","00000657.jpg.subtitulo.tif.txt","00000657.jpg.subtitulo.tif.txt","00000657.jpg.subtitulo.tif.txt","00000657.jpg.subtitulo.tif.txt","00000663.jpg.subtitulo.tif.txt","00000663.jpg.subtitulo.tif.txt","00000663.jpg.subtitulo.tif.txt","00000663.jpg.subtitulo.tif.txt","00000670.jpg.subtitulo.tif.txt","00000670.jpg.subtitulo.tif.txt","00000670.jpg.subtitulo.tif.txt","00000670.jpg.subtitulo.tif.txt","00000670.jpg.subtitulo.tif.txt","00000670.jpg.subtitulo.tif.txt","00000670.jpg.subtitulo.tif.txt","00000670.jpg.subtitulo.tif.txt","00000670.jpg.subtitulo.tif.txt","00000671.jpg.subtitulo.tif.txt","00000671.jpg.subtitulo.tif.txt","00000671.jpg.subtitulo.tif.txt","00000671.jpg.subtitulo.tif.txt","00000671.jpg.subtitulo.tif.txt","00000671.jpg.subtitulo.tif.txt","00000671.jpg.subtitulo.tif.txt","00000671.jpg.subtitulo.tif.txt","00000671.jpg.subtitulo.tif.txt","00000671.jpg.subtitulo.tif.txt","00000672.jpg.subtitulo.tif.txt","00000672.jpg.subtitulo.tif.txt","00000672.jpg.subtitulo.tif.txt","00000672.jpg.subtitulo.tif.txt","00000672.jpg.subtitulo.tif.txt","00000672.jpg.subtitulo.tif.txt","00000672.jpg.subtitulo.tif.txt","00000680.jpg.subtitulo.tif.txt","00000680.jpg.subtitulo.tif.txt","00000680.jpg.subtitulo.tif.txt","00000680.jpg.subtitulo.tif.txt","00000680.jpg.subtitulo.tif.txt","00000680.jpg.subtitulo.tif.txt","00000680.jpg.subtitulo.tif.txt","00000680.jpg.subtitulo.tif.txt","00000680.jpg.subtitulo.tif.txt","00000680.jpg.subtitulo.tif.txt","00000680.jpg.subtitulo.tif.txt","00000686.jpg.subtitulo.tif.txt","00000686.jpg.subtitulo.tif.txt","00000686.jpg.subtitulo.tif.txt","00000687.jpg.subtitulo.tif.txt","00000687.jpg.subtitulo.tif.txt","00000687.jpg.subtitulo.tif.txt","00000687.jpg.subtitulo.tif.txt","00000687.jpg.subtitulo.tif.txt","00000688.jpg.subtitulo.tif.txt","00000688.jpg.subtitulo.tif.txt","00000688.jpg.subtitulo.tif.txt","00000688.jpg.subtitulo.tif.txt","00000688.jpg.subtitulo.tif.txt","00000688.jpg.subtitulo.tif.txt","00000688.jpg.subtitulo.tif.txt","00000688.jpg.subtitulo.tif.txt","00000688.jpg.subtitulo.tif.txt","00000688.jpg.subtitulo.tif.txt","00000694.jpg.subtitulo.tif.txt","00000694.jpg.subtitulo.tif.txt","00000694.jpg.subtitulo.tif.txt","00000694.jpg.subtitulo.tif.txt","00000694.jpg.subtitulo.tif.txt","00000694.jpg.subtitulo.tif.txt","00000694.jpg.subtitulo.tif.txt","00000694.jpg.subtitulo.tif.txt","00000694.jpg.subtitulo.tif.txt","00000694.jpg.subtitulo.tif.txt","00000696.jpg.subtitulo.tif.txt","00000696.jpg.subtitulo.tif.txt","00000696.jpg.subtitulo.tif.txt","00000696.jpg.subtitulo.tif.txt","00000696.jpg.subtitulo.tif.txt","00000696.jpg.subtitulo.tif.txt","00000696.jpg.subtitulo.tif.txt","00000696.jpg.subtitulo.tif.txt","00000696.jpg.subtitulo.tif.txt","00000703.jpg.subtitulo.tif.txt","00000703.jpg.subtitulo.tif.txt","00000703.jpg.subtitulo.tif.txt","00000703.jpg.subtitulo.tif.txt","00000703.jpg.subtitulo.tif.txt","00000705.jpg.subtitulo.tif.txt","00000705.jpg.subtitulo.tif.txt","00000705.jpg.subtitulo.tif.txt","00000705.jpg.subtitulo.tif.txt","00000705.jpg.subtitulo.tif.txt","00000705.jpg.subtitulo.tif.txt","00000705.jpg.subtitulo.tif.txt","00000705.jpg.subtitulo.tif.txt","00000706.jpg.subtitulo.tif.txt","00000706.jpg.subtitulo.tif.txt","00000706.jpg.subtitulo.tif.txt","00000706.jpg.subtitulo.tif.txt","00000706.jpg.subtitulo.tif.txt","00000706.jpg.subtitulo.tif.txt","00000706.jpg.subtitulo.tif.txt","00000706.jpg.subtitulo.tif.txt","00000706.jpg.subtitulo.tif.txt","00000709.jpg.subtitulo.tif.txt","00000709.jpg.subtitulo.tif.txt","00000709.jpg.subtitulo.tif.txt","00000709.jpg.subtitulo.tif.txt","00000709.jpg.subtitulo.tif.txt","00000709.jpg.subtitulo.tif.txt","00000709.jpg.subtitulo.tif.txt","00000709.jpg.subtitulo.tif.txt","00000710.jpg.subtitulo.tif.txt","00000710.jpg.subtitulo.tif.txt","00000710.jpg.subtitulo.tif.txt","00000715.jpg.subtitulo.tif.txt","00000715.jpg.subtitulo.tif.txt","00000715.jpg.subtitulo.tif.txt","00000715.jpg.subtitulo.tif.txt","00000715.jpg.subtitulo.tif.txt","00000715.jpg.subtitulo.tif.txt","00000715.jpg.subtitulo.tif.txt","00000715.jpg.subtitulo.tif.txt","00000716.jpg.subtitulo.tif.txt","00000716.jpg.subtitulo.tif.txt","00000716.jpg.subtitulo.tif.txt","00000716.jpg.subtitulo.tif.txt","00000716.jpg.subtitulo.tif.txt","00000716.jpg.subtitulo.tif.txt","00000716.jpg.subtitulo.tif.txt","00000718.jpg.subtitulo.tif.txt","00000718.jpg.subtitulo.tif.txt","00000718.jpg.subtitulo.tif.txt","00000718.jpg.subtitulo.tif.txt","00000718.jpg.subtitulo.tif.txt","00000718.jpg.subtitulo.tif.txt","00000718.jpg.subtitulo.tif.txt","00000718.jpg.subtitulo.tif.txt","00000718.jpg.subtitulo.tif.txt","00000718.jpg.subtitulo.tif.txt","00000723.jpg.subtitulo.tif.txt","00000723.jpg.subtitulo.tif.txt","00000723.jpg.subtitulo.tif.txt","00000723.jpg.subtitulo.tif.txt","00000723.jpg.subtitulo.tif.txt","00000723.jpg.subtitulo.tif.txt","00000723.jpg.subtitulo.tif.txt","00000723.jpg.subtitulo.tif.txt","00000723.jpg.subtitulo.tif.txt","00000723.jpg.subtitulo.tif.txt","00000725.jpg.subtitulo.tif.txt","00000725.jpg.subtitulo.tif.txt","00000725.jpg.subtitulo.tif.txt","00000725.jpg.subtitulo.tif.txt","00000725.jpg.subtitulo.tif.txt","00000725.jpg.subtitulo.tif.txt","00000729.jpg.subtitulo.tif.txt","00000729.jpg.subtitulo.tif.txt","00000729.jpg.subtitulo.tif.txt","00000729.jpg.subtitulo.tif.txt","00000729.jpg.subtitulo.tif.txt","00000729.jpg.subtitulo.tif.txt","00000729.jpg.subtitulo.tif.txt","00000729.jpg.subtitulo.tif.txt","00000729.jpg.subtitulo.tif.txt","00000729.jpg.subtitulo.tif.txt","00000729.jpg.subtitulo.tif.txt","00000730.jpg.subtitulo.tif.txt","00000730.jpg.subtitulo.tif.txt","00000730.jpg.subtitulo.tif.txt","00000730.jpg.subtitulo.tif.txt","00000730.jpg.subtitulo.tif.txt","00000730.jpg.subtitulo.tif.txt","00000730.jpg.subtitulo.tif.txt","00000730.jpg.subtitulo.tif.txt","00000730.jpg.subtitulo.tif.txt","00000730.jpg.subtitulo.tif.txt","00000730.jpg.subtitulo.tif.txt","00000733.jpg.subtitulo.tif.txt","00000733.jpg.subtitulo.tif.txt","00000733.jpg.subtitulo.tif.txt","00000733.jpg.subtitulo.tif.txt","00000733.jpg.subtitulo.tif.txt","00000733.jpg.subtitulo.tif.txt","00000733.jpg.subtitulo.tif.txt","00000733.jpg.subtitulo.tif.txt","00000733.jpg.subtitulo.tif.txt","00000733.jpg.subtitulo.tif.txt","00000735.jpg.subtitulo.tif.txt","00000735.jpg.subtitulo.tif.txt","00000735.jpg.subtitulo.tif.txt","00000735.jpg.subtitulo.tif.txt","00000735.jpg.subtitulo.tif.txt","00000735.jpg.subtitulo.tif.txt","00000735.jpg.subtitulo.tif.txt","00000735.jpg.subtitulo.tif.txt","00000735.jpg.subtitulo.tif.txt","00000735.jpg.subtitulo.tif.txt","00000735.jpg.subtitulo.tif.txt","00000738.jpg.subtitulo.tif.txt","00000738.jpg.subtitulo.tif.txt","00000738.jpg.subtitulo.tif.txt","00000738.jpg.subtitulo.tif.txt","00000738.jpg.subtitulo.tif.txt","00000739.jpg.subtitulo.tif.txt","00000739.jpg.subtitulo.tif.txt","00000739.jpg.subtitulo.tif.txt","00000739.jpg.subtitulo.tif.txt","00000739.jpg.subtitulo.tif.txt","00000739.jpg.subtitulo.tif.txt","00000739.jpg.subtitulo.tif.txt","00000739.jpg.subtitulo.tif.txt","00000739.jpg.subtitulo.tif.txt","00000742.jpg.subtitulo.tif.txt","00000742.jpg.subtitulo.tif.txt","00000742.jpg.subtitulo.tif.txt","00000742.jpg.subtitulo.tif.txt","00000743.jpg.subtitulo.tif.txt","00000743.jpg.subtitulo.tif.txt","00000743.jpg.subtitulo.tif.txt","00000743.jpg.subtitulo.tif.txt","00000743.jpg.subtitulo.tif.txt","00000743.jpg.subtitulo.tif.txt","00000743.jpg.subtitulo.tif.txt","00000743.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000752.jpg.subtitulo.tif.txt","00000752.jpg.subtitulo.tif.txt","00000752.jpg.subtitulo.tif.txt","00000752.jpg.subtitulo.tif.txt","00000752.jpg.subtitulo.tif.txt","00000752.jpg.subtitulo.tif.txt","00000752.jpg.subtitulo.tif.txt","00000752.jpg.subtitulo.tif.txt","00000752.jpg.subtitulo.tif.txt","00000753.jpg.subtitulo.tif.txt","00000753.jpg.subtitulo.tif.txt","00000753.jpg.subtitulo.tif.txt","00000753.jpg.subtitulo.tif.txt","00000753.jpg.subtitulo.tif.txt","00000753.jpg.subtitulo.tif.txt","00000753.jpg.subtitulo.tif.txt","00000753.jpg.subtitulo.tif.txt","00000753.jpg.subtitulo.tif.txt","00000756.jpg.subtitulo.tif.txt","00000756.jpg.subtitulo.tif.txt","00000756.jpg.subtitulo.tif.txt","00000756.jpg.subtitulo.tif.txt","00000756.jpg.subtitulo.tif.txt","00000757.jpg.subtitulo.tif.txt","00000757.jpg.subtitulo.tif.txt","00000757.jpg.subtitulo.tif.txt","00000757.jpg.subtitulo.tif.txt","00000757.jpg.subtitulo.tif.txt","00000757.jpg.subtitulo.tif.txt","00000757.jpg.subtitulo.tif.txt","00000757.jpg.subtitulo.tif.txt","00000761.jpg.subtitulo.tif.txt","00000761.jpg.subtitulo.tif.txt","00000761.jpg.subtitulo.tif.txt","00000761.jpg.subtitulo.tif.txt","00000761.jpg.subtitulo.tif.txt","00000761.jpg.subtitulo.tif.txt","00000761.jpg.subtitulo.tif.txt","00000762.jpg.subtitulo.tif.txt","00000762.jpg.subtitulo.tif.txt","00000762.jpg.subtitulo.tif.txt","00000762.jpg.subtitulo.tif.txt","00000762.jpg.subtitulo.tif.txt","00000762.jpg.subtitulo.tif.txt","00000762.jpg.subtitulo.tif.txt","00000771.jpg.subtitulo.tif.txt","00000771.jpg.subtitulo.tif.txt","00000771.jpg.subtitulo.tif.txt","00000771.jpg.subtitulo.tif.txt","00000771.jpg.subtitulo.tif.txt","00000771.jpg.subtitulo.tif.txt","00000771.jpg.subtitulo.tif.txt","00000771.jpg.subtitulo.tif.txt","00000772.jpg.subtitulo.tif.txt","00000772.jpg.subtitulo.tif.txt","00000772.jpg.subtitulo.tif.txt","00000772.jpg.subtitulo.tif.txt","00000772.jpg.subtitulo.tif.txt","00000772.jpg.subtitulo.tif.txt","00000772.jpg.subtitulo.tif.txt","00000772.jpg.subtitulo.tif.txt","00000772.jpg.subtitulo.tif.txt","00000772.jpg.subtitulo.tif.txt","00000775.jpg.subtitulo.tif.txt","00000775.jpg.subtitulo.tif.txt","00000775.jpg.subtitulo.tif.txt","00000775.jpg.subtitulo.tif.txt","00000775.jpg.subtitulo.tif.txt","00000775.jpg.subtitulo.tif.txt","00000775.jpg.subtitulo.tif.txt","00000775.jpg.subtitulo.tif.txt","00000776.jpg.subtitulo.tif.txt","00000776.jpg.subtitulo.tif.txt","00000776.jpg.subtitulo.tif.txt","00000776.jpg.subtitulo.tif.txt","00000776.jpg.subtitulo.tif.txt","00000776.jpg.subtitulo.tif.txt","00000776.jpg.subtitulo.tif.txt","00000776.jpg.subtitulo.tif.txt","00000776.jpg.subtitulo.tif.txt","00000776.jpg.subtitulo.tif.txt","00000776.jpg.subtitulo.tif.txt","00000777.jpg.subtitulo.tif.txt","00000777.jpg.subtitulo.tif.txt","00000777.jpg.subtitulo.tif.txt","00000777.jpg.subtitulo.tif.txt","00000777.jpg.subtitulo.tif.txt","00000777.jpg.subtitulo.tif.txt","00000783.jpg.subtitulo.tif.txt","00000783.jpg.subtitulo.tif.txt","00000783.jpg.subtitulo.tif.txt","00000783.jpg.subtitulo.tif.txt","00000783.jpg.subtitulo.tif.txt","00000783.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000785.jpg.subtitulo.tif.txt","00000785.jpg.subtitulo.tif.txt","00000785.jpg.subtitulo.tif.txt","00000785.jpg.subtitulo.tif.txt","00000785.jpg.subtitulo.tif.txt","00000785.jpg.subtitulo.tif.txt","00000785.jpg.subtitulo.tif.txt","00000785.jpg.subtitulo.tif.txt","00000785.jpg.subtitulo.tif.txt","00000791.jpg.subtitulo.tif.txt","00000791.jpg.subtitulo.tif.txt","00000791.jpg.subtitulo.tif.txt","00000791.jpg.subtitulo.tif.txt","00000791.jpg.subtitulo.tif.txt","00000791.jpg.subtitulo.tif.txt","00000791.jpg.subtitulo.tif.txt","00000791.jpg.subtitulo.tif.txt","00000791.jpg.subtitulo.tif.txt","00000791.jpg.subtitulo.tif.txt","00000791.jpg.subtitulo.tif.txt","00000792.jpg.subtitulo.tif.txt","00000792.jpg.subtitulo.tif.txt","00000792.jpg.subtitulo.tif.txt","00000792.jpg.subtitulo.tif.txt","00000792.jpg.subtitulo.tif.txt","00000792.jpg.subtitulo.tif.txt","00000792.jpg.subtitulo.tif.txt","00000793.jpg.subtitulo.tif.txt","00000793.jpg.subtitulo.tif.txt","00000793.jpg.subtitulo.tif.txt","00000793.jpg.subtitulo.tif.txt","00000793.jpg.subtitulo.tif.txt","00000793.jpg.subtitulo.tif.txt","00000793.jpg.subtitulo.tif.txt","00000793.jpg.subtitulo.tif.txt","00000793.jpg.subtitulo.tif.txt","00000793.jpg.subtitulo.tif.txt","00000798.jpg.subtitulo.tif.txt","00000798.jpg.subtitulo.tif.txt","00000798.jpg.subtitulo.tif.txt","00000798.jpg.subtitulo.tif.txt","00000798.jpg.subtitulo.tif.txt","00000798.jpg.subtitulo.tif.txt","00000798.jpg.subtitulo.tif.txt","00000800.jpg.subtitulo.tif.txt","00000800.jpg.subtitulo.tif.txt","00000800.jpg.subtitulo.tif.txt","00000800.jpg.subtitulo.tif.txt","00000800.jpg.subtitulo.tif.txt","00000800.jpg.subtitulo.tif.txt","00000803.jpg.subtitulo.tif.txt","00000803.jpg.subtitulo.tif.txt","00000803.jpg.subtitulo.tif.txt","00000803.jpg.subtitulo.tif.txt","00000803.jpg.subtitulo.tif.txt","00000803.jpg.subtitulo.tif.txt","00000803.jpg.subtitulo.tif.txt","00000804.jpg.subtitulo.tif.txt","00000804.jpg.subtitulo.tif.txt","00000804.jpg.subtitulo.tif.txt","00000804.jpg.subtitulo.tif.txt","00000804.jpg.subtitulo.tif.txt","00000804.jpg.subtitulo.tif.txt","00000804.jpg.subtitulo.tif.txt","00000804.jpg.subtitulo.tif.txt","00000804.jpg.subtitulo.tif.txt","00000804.jpg.subtitulo.tif.txt","00000804.jpg.subtitulo.tif.txt","00000805.jpg.subtitulo.tif.txt","00000805.jpg.subtitulo.tif.txt","00000805.jpg.subtitulo.tif.txt","00000805.jpg.subtitulo.tif.txt","00000805.jpg.subtitulo.tif.txt","00000805.jpg.subtitulo.tif.txt","00000805.jpg.subtitulo.tif.txt","00000805.jpg.subtitulo.tif.txt","00000805.jpg.subtitulo.tif.txt","00000805.jpg.subtitulo.tif.txt","00000814.jpg.subtitulo.tif.txt","00000814.jpg.subtitulo.tif.txt","00000814.jpg.subtitulo.tif.txt","00000814.jpg.subtitulo.tif.txt","00000814.jpg.subtitulo.tif.txt","00000814.jpg.subtitulo.tif.txt","00000814.jpg.subtitulo.tif.txt","00000814.jpg.subtitulo.tif.txt","00000815.jpg.subtitulo.tif.txt","00000815.jpg.subtitulo.tif.txt","00000815.jpg.subtitulo.tif.txt","00000815.jpg.subtitulo.tif.txt","00000815.jpg.subtitulo.tif.txt","00000820.jpg.subtitulo.tif.txt","00000820.jpg.subtitulo.tif.txt","00000820.jpg.subtitulo.tif.txt","00000820.jpg.subtitulo.tif.txt","00000820.jpg.subtitulo.tif.txt","00000820.jpg.subtitulo.tif.txt","00000820.jpg.subtitulo.tif.txt","00000821.jpg.subtitulo.tif.txt","00000821.jpg.subtitulo.tif.txt","00000821.jpg.subtitulo.tif.txt","00000821.jpg.subtitulo.tif.txt","00000821.jpg.subtitulo.tif.txt","00000821.jpg.subtitulo.tif.txt","00000821.jpg.subtitulo.tif.txt","00000828.jpg.subtitulo.tif.txt","00000828.jpg.subtitulo.tif.txt","00000828.jpg.subtitulo.tif.txt","00000828.jpg.subtitulo.tif.txt","00000828.jpg.subtitulo.tif.txt","00000828.jpg.subtitulo.tif.txt","00000828.jpg.subtitulo.tif.txt","00000828.jpg.subtitulo.tif.txt","00000828.jpg.subtitulo.tif.txt","00000829.jpg.subtitulo.tif.txt","00000829.jpg.subtitulo.tif.txt","00000829.jpg.subtitulo.tif.txt","00000829.jpg.subtitulo.tif.txt","00000829.jpg.subtitulo.tif.txt","00000829.jpg.subtitulo.tif.txt","00000829.jpg.subtitulo.tif.txt","00000834.jpg.subtitulo.tif.txt","00000834.jpg.subtitulo.tif.txt","00000834.jpg.subtitulo.tif.txt","00000834.jpg.subtitulo.tif.txt","00000834.jpg.subtitulo.tif.txt","00000835.jpg.subtitulo.tif.txt","00000835.jpg.subtitulo.tif.txt","00000835.jpg.subtitulo.tif.txt","00000835.jpg.subtitulo.tif.txt","00000835.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00000846.jpg.subtitulo.tif.txt","00000846.jpg.subtitulo.tif.txt","00000846.jpg.subtitulo.tif.txt","00000846.jpg.subtitulo.tif.txt","00000846.jpg.subtitulo.tif.txt","00000846.jpg.subtitulo.tif.txt","00000846.jpg.subtitulo.tif.txt","00000846.jpg.subtitulo.tif.txt","00000846.jpg.subtitulo.tif.txt","00000846.jpg.subtitulo.tif.txt","00000848.jpg.subtitulo.tif.txt","00000848.jpg.subtitulo.tif.txt","00000848.jpg.subtitulo.tif.txt","00000848.jpg.subtitulo.tif.txt","00000848.jpg.subtitulo.tif.txt","00000848.jpg.subtitulo.tif.txt","00000848.jpg.subtitulo.tif.txt","00000848.jpg.subtitulo.tif.txt","00000848.jpg.subtitulo.tif.txt","00000848.jpg.subtitulo.tif.txt","00000848.jpg.subtitulo.tif.txt","00000853.jpg.subtitulo.tif.txt","00000853.jpg.subtitulo.tif.txt","00000853.jpg.subtitulo.tif.txt","00000853.jpg.subtitulo.tif.txt","00000853.jpg.subtitulo.tif.txt","00000854.jpg.subtitulo.tif.txt","00000854.jpg.subtitulo.tif.txt","00000854.jpg.subtitulo.tif.txt","00000854.jpg.subtitulo.tif.txt","00000854.jpg.subtitulo.tif.txt","00000854.jpg.subtitulo.tif.txt","00000854.jpg.subtitulo.tif.txt","00000854.jpg.subtitulo.tif.txt","00000855.jpg.subtitulo.tif.txt","00000855.jpg.subtitulo.tif.txt","00000855.jpg.subtitulo.tif.txt","00000855.jpg.subtitulo.tif.txt","00000855.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000862.jpg.subtitulo.tif.txt","00000862.jpg.subtitulo.tif.txt","00000862.jpg.subtitulo.tif.txt","00000862.jpg.subtitulo.tif.txt","00000862.jpg.subtitulo.tif.txt","00000862.jpg.subtitulo.tif.txt","00000862.jpg.subtitulo.tif.txt","00000862.jpg.subtitulo.tif.txt","00000862.jpg.subtitulo.tif.txt","00000862.jpg.subtitulo.tif.txt","00000863.jpg.subtitulo.tif.txt","00000863.jpg.subtitulo.tif.txt","00000863.jpg.subtitulo.tif.txt","00000863.jpg.subtitulo.tif.txt","00000863.jpg.subtitulo.tif.txt","00000863.jpg.subtitulo.tif.txt","00000863.jpg.subtitulo.tif.txt","00000863.jpg.subtitulo.tif.txt","00000866.jpg.subtitulo.tif.txt","00000866.jpg.subtitulo.tif.txt","00000866.jpg.subtitulo.tif.txt","00000866.jpg.subtitulo.tif.txt","00000866.jpg.subtitulo.tif.txt","00000866.jpg.subtitulo.tif.txt","00000866.jpg.subtitulo.tif.txt","00000866.jpg.subtitulo.tif.txt","00000866.jpg.subtitulo.tif.txt","00000867.jpg.subtitulo.tif.txt","00000867.jpg.subtitulo.tif.txt","00000867.jpg.subtitulo.tif.txt","00000867.jpg.subtitulo.tif.txt","00000867.jpg.subtitulo.tif.txt","00000867.jpg.subtitulo.tif.txt","00000867.jpg.subtitulo.tif.txt","00000871.jpg.subtitulo.tif.txt","00000871.jpg.subtitulo.tif.txt","00000871.jpg.subtitulo.tif.txt","00000872.jpg.subtitulo.tif.txt","00000872.jpg.subtitulo.tif.txt","00000872.jpg.subtitulo.tif.txt","00000872.jpg.subtitulo.tif.txt","00000872.jpg.subtitulo.tif.txt","00000872.jpg.subtitulo.tif.txt","00000872.jpg.subtitulo.tif.txt","00000872.jpg.subtitulo.tif.txt","00000873.jpg.subtitulo.tif.txt","00000873.jpg.subtitulo.tif.txt","00000873.jpg.subtitulo.tif.txt","00000873.jpg.subtitulo.tif.txt","00000873.jpg.subtitulo.tif.txt","00000873.jpg.subtitulo.tif.txt","00000873.jpg.subtitulo.tif.txt","00000873.jpg.subtitulo.tif.txt","00000876.jpg.subtitulo.tif.txt","00000876.jpg.subtitulo.tif.txt","00000876.jpg.subtitulo.tif.txt","00000876.jpg.subtitulo.tif.txt","00000876.jpg.subtitulo.tif.txt","00000876.jpg.subtitulo.tif.txt","00000876.jpg.subtitulo.tif.txt","00000876.jpg.subtitulo.tif.txt","00000876.jpg.subtitulo.tif.txt","00000880.jpg.subtitulo.tif.txt","00000880.jpg.subtitulo.tif.txt","00000880.jpg.subtitulo.tif.txt","00000880.jpg.subtitulo.tif.txt","00000880.jpg.subtitulo.tif.txt","00000880.jpg.subtitulo.tif.txt","00000880.jpg.subtitulo.tif.txt","00000883.jpg.subtitulo.tif.txt","00000883.jpg.subtitulo.tif.txt","00000883.jpg.subtitulo.tif.txt","00000883.jpg.subtitulo.tif.txt","00000883.jpg.subtitulo.tif.txt","00000883.jpg.subtitulo.tif.txt","00000884.jpg.subtitulo.tif.txt","00000884.jpg.subtitulo.tif.txt","00000884.jpg.subtitulo.tif.txt","00000884.jpg.subtitulo.tif.txt","00000884.jpg.subtitulo.tif.txt","00000884.jpg.subtitulo.tif.txt","00000884.jpg.subtitulo.tif.txt","00000884.jpg.subtitulo.tif.txt","00000884.jpg.subtitulo.tif.txt","00000889.jpg.subtitulo.tif.txt","00000889.jpg.subtitulo.tif.txt","00000889.jpg.subtitulo.tif.txt","00000889.jpg.subtitulo.tif.txt","00000889.jpg.subtitulo.tif.txt","00000889.jpg.subtitulo.tif.txt","00000889.jpg.subtitulo.tif.txt","00000889.jpg.subtitulo.tif.txt","00000889.jpg.subtitulo.tif.txt","00000889.jpg.subtitulo.tif.txt","00000889.jpg.subtitulo.tif.txt","00000891.jpg.subtitulo.tif.txt","00000891.jpg.subtitulo.tif.txt","00000891.jpg.subtitulo.tif.txt","00000891.jpg.subtitulo.tif.txt","00000891.jpg.subtitulo.tif.txt","00000891.jpg.subtitulo.tif.txt","00000891.jpg.subtitulo.tif.txt","00000891.jpg.subtitulo.tif.txt","00000892.jpg.subtitulo.tif.txt","00000892.jpg.subtitulo.tif.txt","00000892.jpg.subtitulo.tif.txt","00000892.jpg.subtitulo.tif.txt","00000892.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000899.jpg.subtitulo.tif.txt","00000899.jpg.subtitulo.tif.txt","00000899.jpg.subtitulo.tif.txt","00000899.jpg.subtitulo.tif.txt","00000899.jpg.subtitulo.tif.txt","00000899.jpg.subtitulo.tif.txt","00000899.jpg.subtitulo.tif.txt","00000899.jpg.subtitulo.tif.txt","00000908.jpg.subtitulo.tif.txt","00000908.jpg.subtitulo.tif.txt","00000908.jpg.subtitulo.tif.txt","00000908.jpg.subtitulo.tif.txt","00000909.jpg.subtitulo.tif.txt","00000909.jpg.subtitulo.tif.txt","00000909.jpg.subtitulo.tif.txt","00000909.jpg.subtitulo.tif.txt","00000909.jpg.subtitulo.tif.txt","00000909.jpg.subtitulo.tif.txt","00000909.jpg.subtitulo.tif.txt","00000909.jpg.subtitulo.tif.txt","00000910.jpg.subtitulo.tif.txt","00000910.jpg.subtitulo.tif.txt","00000910.jpg.subtitulo.tif.txt","00000910.jpg.subtitulo.tif.txt","00000910.jpg.subtitulo.tif.txt","00000910.jpg.subtitulo.tif.txt","00000910.jpg.subtitulo.tif.txt","00000917.jpg.subtitulo.tif.txt","00000917.jpg.subtitulo.tif.txt","00000917.jpg.subtitulo.tif.txt","00000917.jpg.subtitulo.tif.txt","00000917.jpg.subtitulo.tif.txt","00000917.jpg.subtitulo.tif.txt","00000917.jpg.subtitulo.tif.txt","00000917.jpg.subtitulo.tif.txt","00000917.jpg.subtitulo.tif.txt","00000917.jpg.subtitulo.tif.txt","00000917.jpg.subtitulo.tif.txt","00000924.jpg.subtitulo.tif.txt","00000924.jpg.subtitulo.tif.txt","00000924.jpg.subtitulo.tif.txt","00000924.jpg.subtitulo.tif.txt","00000924.jpg.subtitulo.tif.txt","00000925.jpg.subtitulo.tif.txt","00000925.jpg.subtitulo.tif.txt","00000925.jpg.subtitulo.tif.txt","00000925.jpg.subtitulo.tif.txt","00000925.jpg.subtitulo.tif.txt","00000925.jpg.subtitulo.tif.txt","00000925.jpg.subtitulo.tif.txt","00000925.jpg.subtitulo.tif.txt","00000925.jpg.subtitulo.tif.txt","00000925.jpg.subtitulo.tif.txt","00000926.jpg.subtitulo.tif.txt","00000926.jpg.subtitulo.tif.txt","00000926.jpg.subtitulo.tif.txt","00000926.jpg.subtitulo.tif.txt","00000926.jpg.subtitulo.tif.txt","00000926.jpg.subtitulo.tif.txt","00000926.jpg.subtitulo.tif.txt","00000926.jpg.subtitulo.tif.txt","00000926.jpg.subtitulo.tif.txt","00000926.jpg.subtitulo.tif.txt","00000926.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000932.jpg.subtitulo.tif.txt","00000932.jpg.subtitulo.tif.txt","00000932.jpg.subtitulo.tif.txt","00000932.jpg.subtitulo.tif.txt","00000932.jpg.subtitulo.tif.txt","00000932.jpg.subtitulo.tif.txt","00000932.jpg.subtitulo.tif.txt","00000932.jpg.subtitulo.tif.txt","00000933.jpg.subtitulo.tif.txt","00000933.jpg.subtitulo.tif.txt","00000933.jpg.subtitulo.tif.txt","00000933.jpg.subtitulo.tif.txt","00000933.jpg.subtitulo.tif.txt","00000933.jpg.subtitulo.tif.txt","00000933.jpg.subtitulo.tif.txt","00000933.jpg.subtitulo.tif.txt","00000933.jpg.subtitulo.tif.txt","00000938.jpg.subtitulo.tif.txt","00000938.jpg.subtitulo.tif.txt","00000938.jpg.subtitulo.tif.txt","00000938.jpg.subtitulo.tif.txt","00000938.jpg.subtitulo.tif.txt","00000938.jpg.subtitulo.tif.txt","00000938.jpg.subtitulo.tif.txt","00000938.jpg.subtitulo.tif.txt","00000938.jpg.subtitulo.tif.txt","00000938.jpg.subtitulo.tif.txt","00000938.jpg.subtitulo.tif.txt","00000939.jpg.subtitulo.tif.txt","00000939.jpg.subtitulo.tif.txt","00000939.jpg.subtitulo.tif.txt","00000939.jpg.subtitulo.tif.txt","00000939.jpg.subtitulo.tif.txt","00000940.jpg.subtitulo.tif.txt","00000940.jpg.subtitulo.tif.txt","00000940.jpg.subtitulo.tif.txt","00000940.jpg.subtitulo.tif.txt","00000945.jpg.subtitulo.tif.txt","00000945.jpg.subtitulo.tif.txt","00000945.jpg.subtitulo.tif.txt","00000945.jpg.subtitulo.tif.txt","00000945.jpg.subtitulo.tif.txt","00000945.jpg.subtitulo.tif.txt","00000945.jpg.subtitulo.tif.txt","00000945.jpg.subtitulo.tif.txt","00000946.jpg.subtitulo.tif.txt","00000946.jpg.subtitulo.tif.txt","00000946.jpg.subtitulo.tif.txt","00000946.jpg.subtitulo.tif.txt","00000946.jpg.subtitulo.tif.txt","00000946.jpg.subtitulo.tif.txt","00000946.jpg.subtitulo.tif.txt","00000946.jpg.subtitulo.tif.txt","00000946.jpg.subtitulo.tif.txt","00000946.jpg.subtitulo.tif.txt","00000949.jpg.subtitulo.tif.txt","00000949.jpg.subtitulo.tif.txt","00000949.jpg.subtitulo.tif.txt","00000949.jpg.subtitulo.tif.txt","00000949.jpg.subtitulo.tif.txt","00000951.jpg.subtitulo.tif.txt","00000951.jpg.subtitulo.tif.txt","00000951.jpg.subtitulo.tif.txt","00000951.jpg.subtitulo.tif.txt","00000954.jpg.subtitulo.tif.txt","00000954.jpg.subtitulo.tif.txt","00000954.jpg.subtitulo.tif.txt","00000954.jpg.subtitulo.tif.txt","00000954.jpg.subtitulo.tif.txt","00000954.jpg.subtitulo.tif.txt","00000954.jpg.subtitulo.tif.txt","00000955.jpg.subtitulo.tif.txt","00000955.jpg.subtitulo.tif.txt","00000955.jpg.subtitulo.tif.txt","00000955.jpg.subtitulo.tif.txt","00000955.jpg.subtitulo.tif.txt","00000955.jpg.subtitulo.tif.txt","00000955.jpg.subtitulo.tif.txt","00000956.jpg.subtitulo.tif.txt","00000956.jpg.subtitulo.tif.txt","00000956.jpg.subtitulo.tif.txt","00000959.jpg.subtitulo.tif.txt","00000959.jpg.subtitulo.tif.txt","00000959.jpg.subtitulo.tif.txt","00000959.jpg.subtitulo.tif.txt","00000959.jpg.subtitulo.tif.txt","00000959.jpg.subtitulo.tif.txt","00000960.jpg.subtitulo.tif.txt","00000960.jpg.subtitulo.tif.txt","00000960.jpg.subtitulo.tif.txt","00000960.jpg.subtitulo.tif.txt","00000960.jpg.subtitulo.tif.txt","00000960.jpg.subtitulo.tif.txt","00000960.jpg.subtitulo.tif.txt","00000960.jpg.subtitulo.tif.txt","00000960.jpg.subtitulo.tif.txt","00000960.jpg.subtitulo.tif.txt","00000961.jpg.subtitulo.tif.txt","00000961.jpg.subtitulo.tif.txt","00000961.jpg.subtitulo.tif.txt","00000961.jpg.subtitulo.tif.txt","00000965.jpg.subtitulo.tif.txt","00000965.jpg.subtitulo.tif.txt","00000965.jpg.subtitulo.tif.txt","00000965.jpg.subtitulo.tif.txt","00000965.jpg.subtitulo.tif.txt","00000965.jpg.subtitulo.tif.txt","00000966.jpg.subtitulo.tif.txt","00000966.jpg.subtitulo.tif.txt","00000966.jpg.subtitulo.tif.txt","00000966.jpg.subtitulo.tif.txt","00000966.jpg.subtitulo.tif.txt","00000966.jpg.subtitulo.tif.txt","00000966.jpg.subtitulo.tif.txt","00000966.jpg.subtitulo.tif.txt","00000966.jpg.subtitulo.tif.txt","00000966.jpg.subtitulo.tif.txt","00000966.jpg.subtitulo.tif.txt","00000968.jpg.subtitulo.tif.txt","00000968.jpg.subtitulo.tif.txt","00000968.jpg.subtitulo.tif.txt","00000969.jpg.subtitulo.tif.txt","00000969.jpg.subtitulo.tif.txt","00000969.jpg.subtitulo.tif.txt","00000969.jpg.subtitulo.tif.txt","00000969.jpg.subtitulo.tif.txt","00000969.jpg.subtitulo.tif.txt","00000969.jpg.subtitulo.tif.txt","00000969.jpg.subtitulo.tif.txt","00000970.jpg.subtitulo.tif.txt","00000970.jpg.subtitulo.tif.txt","00000970.jpg.subtitulo.tif.txt","00000970.jpg.subtitulo.tif.txt","00000970.jpg.subtitulo.tif.txt","00000970.jpg.subtitulo.tif.txt","00000970.jpg.subtitulo.tif.txt","00000976.jpg.subtitulo.tif.txt","00000976.jpg.subtitulo.tif.txt","00000976.jpg.subtitulo.tif.txt","00000976.jpg.subtitulo.tif.txt","00000976.jpg.subtitulo.tif.txt","00000977.jpg.subtitulo.tif.txt","00000977.jpg.subtitulo.tif.txt","00000977.jpg.subtitulo.tif.txt","00000977.jpg.subtitulo.tif.txt","00000977.jpg.subtitulo.tif.txt","00000977.jpg.subtitulo.tif.txt","00000977.jpg.subtitulo.tif.txt","00000977.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000981.jpg.subtitulo.tif.txt","00000981.jpg.subtitulo.tif.txt","00000981.jpg.subtitulo.tif.txt","00000981.jpg.subtitulo.tif.txt","00000982.jpg.subtitulo.tif.txt","00000982.jpg.subtitulo.tif.txt","00000982.jpg.subtitulo.tif.txt","00000982.jpg.subtitulo.tif.txt","00000982.jpg.subtitulo.tif.txt","00000982.jpg.subtitulo.tif.txt","00000982.jpg.subtitulo.tif.txt","00000983.jpg.subtitulo.tif.txt","00000983.jpg.subtitulo.tif.txt","00000983.jpg.subtitulo.tif.txt","00000983.jpg.subtitulo.tif.txt","00000983.jpg.subtitulo.tif.txt","00000983.jpg.subtitulo.tif.txt","00000983.jpg.subtitulo.tif.txt","00000983.jpg.subtitulo.tif.txt","00000987.jpg.subtitulo.tif.txt","00000987.jpg.subtitulo.tif.txt","00000987.jpg.subtitulo.tif.txt","00000987.jpg.subtitulo.tif.txt","00000987.jpg.subtitulo.tif.txt","00000987.jpg.subtitulo.tif.txt","00000987.jpg.subtitulo.tif.txt","00000987.jpg.subtitulo.tif.txt","00000987.jpg.subtitulo.tif.txt","00000987.jpg.subtitulo.tif.txt","00000988.jpg.subtitulo.tif.txt","00000988.jpg.subtitulo.tif.txt","00000988.jpg.subtitulo.tif.txt","00000988.jpg.subtitulo.tif.txt","00000988.jpg.subtitulo.tif.txt","00000988.jpg.subtitulo.tif.txt","00000994.jpg.subtitulo.tif.txt","00000994.jpg.subtitulo.tif.txt","00000994.jpg.subtitulo.tif.txt","00000994.jpg.subtitulo.tif.txt","00000994.jpg.subtitulo.tif.txt","00000994.jpg.subtitulo.tif.txt","00000994.jpg.subtitulo.tif.txt","00000994.jpg.subtitulo.tif.txt","00000994.jpg.subtitulo.tif.txt","00000995.jpg.subtitulo.tif.txt","00000995.jpg.subtitulo.tif.txt","00000995.jpg.subtitulo.tif.txt","00000995.jpg.subtitulo.tif.txt","00000995.jpg.subtitulo.tif.txt","00000995.jpg.subtitulo.tif.txt","00000995.jpg.subtitulo.tif.txt","00000995.jpg.subtitulo.tif.txt","00000995.jpg.subtitulo.tif.txt","00000997.jpg.subtitulo.tif.txt","00000997.jpg.subtitulo.tif.txt","00000997.jpg.subtitulo.tif.txt","00000997.jpg.subtitulo.tif.txt","00000997.jpg.subtitulo.tif.txt","00001001.jpg.subtitulo.tif.txt","00001001.jpg.subtitulo.tif.txt","00001001.jpg.subtitulo.tif.txt","00001001.jpg.subtitulo.tif.txt","00001001.jpg.subtitulo.tif.txt","00001001.jpg.subtitulo.tif.txt","00001001.jpg.subtitulo.tif.txt","00001001.jpg.subtitulo.tif.txt","00001001.jpg.subtitulo.tif.txt","00001001.jpg.subtitulo.tif.txt","00001003.jpg.subtitulo.tif.txt","00001003.jpg.subtitulo.tif.txt","00001003.jpg.subtitulo.tif.txt","00001003.jpg.subtitulo.tif.txt","00001003.jpg.subtitulo.tif.txt","00001003.jpg.subtitulo.tif.txt","00001005.jpg.subtitulo.tif.txt","00001005.jpg.subtitulo.tif.txt","00001005.jpg.subtitulo.tif.txt","00001006.jpg.subtitulo.tif.txt","00001006.jpg.subtitulo.tif.txt","00001006.jpg.subtitulo.tif.txt","00001006.jpg.subtitulo.tif.txt","00001006.jpg.subtitulo.tif.txt","00001008.jpg.subtitulo.tif.txt","00001008.jpg.subtitulo.tif.txt","00001008.jpg.subtitulo.tif.txt","00001008.jpg.subtitulo.tif.txt","00001008.jpg.subtitulo.tif.txt","00001008.jpg.subtitulo.tif.txt","00001010.jpg.subtitulo.tif.txt","00001010.jpg.subtitulo.tif.txt","00001010.jpg.subtitulo.tif.txt","00001010.jpg.subtitulo.tif.txt","00001011.jpg.subtitulo.tif.txt","00001011.jpg.subtitulo.tif.txt","00001011.jpg.subtitulo.tif.txt","00001011.jpg.subtitulo.tif.txt","00001011.jpg.subtitulo.tif.txt","00001011.jpg.subtitulo.tif.txt","00001011.jpg.subtitulo.tif.txt","00001011.jpg.subtitulo.tif.txt","00001011.jpg.subtitulo.tif.txt","00001011.jpg.subtitulo.tif.txt","00001011.jpg.subtitulo.tif.txt","00001012.jpg.subtitulo.tif.txt","00001012.jpg.subtitulo.tif.txt","00001012.jpg.subtitulo.tif.txt","00001012.jpg.subtitulo.tif.txt","00001012.jpg.subtitulo.tif.txt","00001012.jpg.subtitulo.tif.txt","00001012.jpg.subtitulo.tif.txt","00001012.jpg.subtitulo.tif.txt","00001012.jpg.subtitulo.tif.txt","00001015.jpg.subtitulo.tif.txt","00001015.jpg.subtitulo.tif.txt","00001015.jpg.subtitulo.tif.txt","00001015.jpg.subtitulo.tif.txt","00001015.jpg.subtitulo.tif.txt","00001015.jpg.subtitulo.tif.txt","00001015.jpg.subtitulo.tif.txt","00001015.jpg.subtitulo.tif.txt","00001015.jpg.subtitulo.tif.txt","00001015.jpg.subtitulo.tif.txt","00001016.jpg.subtitulo.tif.txt","00001016.jpg.subtitulo.tif.txt","00001016.jpg.subtitulo.tif.txt","00001016.jpg.subtitulo.tif.txt","00001016.jpg.subtitulo.tif.txt","00001016.jpg.subtitulo.tif.txt","00001016.jpg.subtitulo.tif.txt","00001016.jpg.subtitulo.tif.txt","00001016.jpg.subtitulo.tif.txt","00001019.jpg.subtitulo.tif.txt","00001019.jpg.subtitulo.tif.txt","00001019.jpg.subtitulo.tif.txt","00001019.jpg.subtitulo.tif.txt","00001019.jpg.subtitulo.tif.txt","00001019.jpg.subtitulo.tif.txt","00001019.jpg.subtitulo.tif.txt","00001026.jpg.subtitulo.tif.txt","00001026.jpg.subtitulo.tif.txt","00001026.jpg.subtitulo.tif.txt","00001026.jpg.subtitulo.tif.txt","00001026.jpg.subtitulo.tif.txt","00001027.jpg.subtitulo.tif.txt","00001027.jpg.subtitulo.tif.txt","00001027.jpg.subtitulo.tif.txt","00001027.jpg.subtitulo.tif.txt","00001027.jpg.subtitulo.tif.txt","00001027.jpg.subtitulo.tif.txt","00001027.jpg.subtitulo.tif.txt","00001027.jpg.subtitulo.tif.txt","00001030.jpg.subtitulo.tif.txt","00001030.jpg.subtitulo.tif.txt","00001030.jpg.subtitulo.tif.txt","00001030.jpg.subtitulo.tif.txt","00001031.jpg.subtitulo.tif.txt","00001031.jpg.subtitulo.tif.txt","00001031.jpg.subtitulo.tif.txt","00001031.jpg.subtitulo.tif.txt","00001031.jpg.subtitulo.tif.txt","00001031.jpg.subtitulo.tif.txt","00001031.jpg.subtitulo.tif.txt","00001031.jpg.subtitulo.tif.txt","00001031.jpg.subtitulo.tif.txt","00001032.jpg.subtitulo.tif.txt","00001032.jpg.subtitulo.tif.txt","00001032.jpg.subtitulo.tif.txt","00001032.jpg.subtitulo.tif.txt","00001032.jpg.subtitulo.tif.txt","00001032.jpg.subtitulo.tif.txt","00001032.jpg.subtitulo.tif.txt","00001032.jpg.subtitulo.tif.txt","00001032.jpg.subtitulo.tif.txt","00001032.jpg.subtitulo.tif.txt","00001035.jpg.subtitulo.tif.txt","00001035.jpg.subtitulo.tif.txt","00001035.jpg.subtitulo.tif.txt","00001035.jpg.subtitulo.tif.txt","00001035.jpg.subtitulo.tif.txt","00001035.jpg.subtitulo.tif.txt","00001035.jpg.subtitulo.tif.txt","00001035.jpg.subtitulo.tif.txt","00001036.jpg.subtitulo.tif.txt","00001036.jpg.subtitulo.tif.txt","00001036.jpg.subtitulo.tif.txt","00001036.jpg.subtitulo.tif.txt","00001036.jpg.subtitulo.tif.txt","00001036.jpg.subtitulo.tif.txt","00001036.jpg.subtitulo.tif.txt","00001036.jpg.subtitulo.tif.txt","00001036.jpg.subtitulo.tif.txt","00001040.jpg.subtitulo.tif.txt","00001040.jpg.subtitulo.tif.txt","00001040.jpg.subtitulo.tif.txt","00001040.jpg.subtitulo.tif.txt","00001041.jpg.subtitulo.tif.txt","00001041.jpg.subtitulo.tif.txt","00001041.jpg.subtitulo.tif.txt","00001041.jpg.subtitulo.tif.txt","00001041.jpg.subtitulo.tif.txt","00001041.jpg.subtitulo.tif.txt","00001041.jpg.subtitulo.tif.txt","00001041.jpg.subtitulo.tif.txt","00001041.jpg.subtitulo.tif.txt","00001041.jpg.subtitulo.tif.txt","00001042.jpg.subtitulo.tif.txt","00001042.jpg.subtitulo.tif.txt","00001042.jpg.subtitulo.tif.txt","00001042.jpg.subtitulo.tif.txt","00001042.jpg.subtitulo.tif.txt","00001042.jpg.subtitulo.tif.txt","00001044.jpg.subtitulo.tif.txt","00001044.jpg.subtitulo.tif.txt","00001044.jpg.subtitulo.tif.txt","00001045.jpg.subtitulo.tif.txt","00001045.jpg.subtitulo.tif.txt","00001045.jpg.subtitulo.tif.txt","00001045.jpg.subtitulo.tif.txt","00001045.jpg.subtitulo.tif.txt","00001045.jpg.subtitulo.tif.txt","00001045.jpg.subtitulo.tif.txt","00001046.jpg.subtitulo.tif.txt","00001046.jpg.subtitulo.tif.txt","00001046.jpg.subtitulo.tif.txt","00001046.jpg.subtitulo.tif.txt","00001046.jpg.subtitulo.tif.txt","00001046.jpg.subtitulo.tif.txt","00001046.jpg.subtitulo.tif.txt","00001047.jpg.subtitulo.tif.txt","00001047.jpg.subtitulo.tif.txt","00001047.jpg.subtitulo.tif.txt","00001047.jpg.subtitulo.tif.txt","00001047.jpg.subtitulo.tif.txt","00001047.jpg.subtitulo.tif.txt","00001047.jpg.subtitulo.tif.txt","00001047.jpg.subtitulo.tif.txt","00001047.jpg.subtitulo.tif.txt","00001047.jpg.subtitulo.tif.txt","00001051.jpg.subtitulo.tif.txt","00001051.jpg.subtitulo.tif.txt","00001051.jpg.subtitulo.tif.txt","00001051.jpg.subtitulo.tif.txt","00001051.jpg.subtitulo.tif.txt","00001051.jpg.subtitulo.tif.txt","00001052.jpg.subtitulo.tif.txt","00001052.jpg.subtitulo.tif.txt","00001052.jpg.subtitulo.tif.txt","00001052.jpg.subtitulo.tif.txt","00001052.jpg.subtitulo.tif.txt","00001052.jpg.subtitulo.tif.txt","00001052.jpg.subtitulo.tif.txt","00001052.jpg.subtitulo.tif.txt","00001052.jpg.subtitulo.tif.txt","00001052.jpg.subtitulo.tif.txt","00001056.jpg.subtitulo.tif.txt","00001056.jpg.subtitulo.tif.txt","00001056.jpg.subtitulo.tif.txt","00001056.jpg.subtitulo.tif.txt","00001056.jpg.subtitulo.tif.txt","00001056.jpg.subtitulo.tif.txt","00001057.jpg.subtitulo.tif.txt","00001057.jpg.subtitulo.tif.txt","00001057.jpg.subtitulo.tif.txt","00001057.jpg.subtitulo.tif.txt","00001060.jpg.subtitulo.tif.txt","00001060.jpg.subtitulo.tif.txt","00001060.jpg.subtitulo.tif.txt","00001060.jpg.subtitulo.tif.txt","00001060.jpg.subtitulo.tif.txt","00001060.jpg.subtitulo.tif.txt","00001060.jpg.subtitulo.tif.txt","00001061.jpg.subtitulo.tif.txt","00001061.jpg.subtitulo.tif.txt","00001061.jpg.subtitulo.tif.txt","00001061.jpg.subtitulo.tif.txt","00001061.jpg.subtitulo.tif.txt","00001061.jpg.subtitulo.tif.txt","00001062.jpg.subtitulo.tif.txt","00001062.jpg.subtitulo.tif.txt","00001062.jpg.subtitulo.tif.txt","00001062.jpg.subtitulo.tif.txt","00001062.jpg.subtitulo.tif.txt","00001062.jpg.subtitulo.tif.txt","00001062.jpg.subtitulo.tif.txt","00001062.jpg.subtitulo.tif.txt","00001062.jpg.subtitulo.tif.txt","00001062.jpg.subtitulo.tif.txt","00001062.jpg.subtitulo.tif.txt","00001065.jpg.subtitulo.tif.txt","00001065.jpg.subtitulo.tif.txt","00001065.jpg.subtitulo.tif.txt","00001065.jpg.subtitulo.tif.txt","00001065.jpg.subtitulo.tif.txt","00001067.jpg.subtitulo.tif.txt","00001067.jpg.subtitulo.tif.txt","00001067.jpg.subtitulo.tif.txt","00001067.jpg.subtitulo.tif.txt","00001067.jpg.subtitulo.tif.txt","00001067.jpg.subtitulo.tif.txt","00001067.jpg.subtitulo.tif.txt","00001067.jpg.subtitulo.tif.txt","00001070.jpg.subtitulo.tif.txt","00001070.jpg.subtitulo.tif.txt","00001070.jpg.subtitulo.tif.txt","00001070.jpg.subtitulo.tif.txt","00001070.jpg.subtitulo.tif.txt","00001070.jpg.subtitulo.tif.txt","00001070.jpg.subtitulo.tif.txt","00001070.jpg.subtitulo.tif.txt","00001071.jpg.subtitulo.tif.txt","00001071.jpg.subtitulo.tif.txt","00001071.jpg.subtitulo.tif.txt","00001071.jpg.subtitulo.tif.txt","00001071.jpg.subtitulo.tif.txt","00001071.jpg.subtitulo.tif.txt","00001071.jpg.subtitulo.tif.txt","00001071.jpg.subtitulo.tif.txt","00001071.jpg.subtitulo.tif.txt","00001071.jpg.subtitulo.tif.txt","00001071.jpg.subtitulo.tif.txt","00001072.jpg.subtitulo.tif.txt","00001072.jpg.subtitulo.tif.txt","00001072.jpg.subtitulo.tif.txt","00001072.jpg.subtitulo.tif.txt","00001072.jpg.subtitulo.tif.txt","00001072.jpg.subtitulo.tif.txt","00001072.jpg.subtitulo.tif.txt","00001072.jpg.subtitulo.tif.txt","00001075.jpg.subtitulo.tif.txt","00001075.jpg.subtitulo.tif.txt","00001075.jpg.subtitulo.tif.txt","00001075.jpg.subtitulo.tif.txt","00001075.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001080.jpg.subtitulo.tif.txt","00001080.jpg.subtitulo.tif.txt","00001080.jpg.subtitulo.tif.txt","00001080.jpg.subtitulo.tif.txt","00001080.jpg.subtitulo.tif.txt","00001084.jpg.subtitulo.tif.txt","00001084.jpg.subtitulo.tif.txt","00001084.jpg.subtitulo.tif.txt","00001084.jpg.subtitulo.tif.txt","00001084.jpg.subtitulo.tif.txt","00001086.jpg.subtitulo.tif.txt","00001086.jpg.subtitulo.tif.txt","00001086.jpg.subtitulo.tif.txt","00001086.jpg.subtitulo.tif.txt","00001086.jpg.subtitulo.tif.txt","00001086.jpg.subtitulo.tif.txt","00001087.jpg.subtitulo.tif.txt","00001087.jpg.subtitulo.tif.txt","00001087.jpg.subtitulo.tif.txt","00001087.jpg.subtitulo.tif.txt","00001087.jpg.subtitulo.tif.txt","00001087.jpg.subtitulo.tif.txt","00001091.jpg.subtitulo.tif.txt","00001091.jpg.subtitulo.tif.txt","00001091.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001093.jpg.subtitulo.tif.txt","00001093.jpg.subtitulo.tif.txt","00001093.jpg.subtitulo.tif.txt","00001093.jpg.subtitulo.tif.txt","00001093.jpg.subtitulo.tif.txt","00001093.jpg.subtitulo.tif.txt","00001093.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001099.jpg.subtitulo.tif.txt","00001099.jpg.subtitulo.tif.txt","00001099.jpg.subtitulo.tif.txt","00001099.jpg.subtitulo.tif.txt","00001099.jpg.subtitulo.tif.txt","00001099.jpg.subtitulo.tif.txt","00001099.jpg.subtitulo.tif.txt","00001099.jpg.subtitulo.tif.txt","00001099.jpg.subtitulo.tif.txt","00001099.jpg.subtitulo.tif.txt","00001103.jpg.subtitulo.tif.txt","00001103.jpg.subtitulo.tif.txt","00001103.jpg.subtitulo.tif.txt","00001103.jpg.subtitulo.tif.txt","00001103.jpg.subtitulo.tif.txt","00001103.jpg.subtitulo.tif.txt","00001103.jpg.subtitulo.tif.txt","00001103.jpg.subtitulo.tif.txt","00001103.jpg.subtitulo.tif.txt","00001103.jpg.subtitulo.tif.txt","00001107.jpg.subtitulo.tif.txt","00001107.jpg.subtitulo.tif.txt","00001107.jpg.subtitulo.tif.txt","00001107.jpg.subtitulo.tif.txt","00001107.jpg.subtitulo.tif.txt","00001107.jpg.subtitulo.tif.txt","00001108.jpg.subtitulo.tif.txt","00001108.jpg.subtitulo.tif.txt","00001108.jpg.subtitulo.tif.txt","00001108.jpg.subtitulo.tif.txt","00001108.jpg.subtitulo.tif.txt","00001108.jpg.subtitulo.tif.txt","00001112.jpg.subtitulo.tif.txt","00001112.jpg.subtitulo.tif.txt","00001112.jpg.subtitulo.tif.txt","00001112.jpg.subtitulo.tif.txt","00001112.jpg.subtitulo.tif.txt","00001112.jpg.subtitulo.tif.txt","00001112.jpg.subtitulo.tif.txt","00001112.jpg.subtitulo.tif.txt","00001112.jpg.subtitulo.tif.txt","00001112.jpg.subtitulo.tif.txt","00001114.jpg.subtitulo.tif.txt","00001114.jpg.subtitulo.tif.txt","00001114.jpg.subtitulo.tif.txt","00001114.jpg.subtitulo.tif.txt","00001117.jpg.subtitulo.tif.txt","00001117.jpg.subtitulo.tif.txt","00001117.jpg.subtitulo.tif.txt","00001117.jpg.subtitulo.tif.txt","00001118.jpg.subtitulo.tif.txt","00001118.jpg.subtitulo.tif.txt","00001118.jpg.subtitulo.tif.txt","00001118.jpg.subtitulo.tif.txt","00001122.jpg.subtitulo.tif.txt","00001122.jpg.subtitulo.tif.txt","00001122.jpg.subtitulo.tif.txt","00001122.jpg.subtitulo.tif.txt","00001122.jpg.subtitulo.tif.txt","00001122.jpg.subtitulo.tif.txt","00001122.jpg.subtitulo.tif.txt","00001122.jpg.subtitulo.tif.txt","00001122.jpg.subtitulo.tif.txt","00001122.jpg.subtitulo.tif.txt","00001122.jpg.subtitulo.tif.txt","00001123.jpg.subtitulo.tif.txt","00001123.jpg.subtitulo.tif.txt","00001123.jpg.subtitulo.tif.txt","00001123.jpg.subtitulo.tif.txt","00001123.jpg.subtitulo.tif.txt","00001123.jpg.subtitulo.tif.txt","00001123.jpg.subtitulo.tif.txt","00001123.jpg.subtitulo.tif.txt","00001126.jpg.subtitulo.tif.txt","00001126.jpg.subtitulo.tif.txt","00001126.jpg.subtitulo.tif.txt","00001126.jpg.subtitulo.tif.txt","00001126.jpg.subtitulo.tif.txt","00001126.jpg.subtitulo.tif.txt","00001126.jpg.subtitulo.tif.txt","00001127.jpg.subtitulo.tif.txt","00001127.jpg.subtitulo.tif.txt","00001127.jpg.subtitulo.tif.txt","00001127.jpg.subtitulo.tif.txt","00001127.jpg.subtitulo.tif.txt","00001127.jpg.subtitulo.tif.txt","00001127.jpg.subtitulo.tif.txt","00001127.jpg.subtitulo.tif.txt","00001127.jpg.subtitulo.tif.txt","00001128.jpg.subtitulo.tif.txt","00001128.jpg.subtitulo.tif.txt","00001128.jpg.subtitulo.tif.txt","00001128.jpg.subtitulo.tif.txt","00001128.jpg.subtitulo.tif.txt","00001128.jpg.subtitulo.tif.txt","00001128.jpg.subtitulo.tif.txt","00001128.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001132.jpg.subtitulo.tif.txt","00001132.jpg.subtitulo.tif.txt","00001132.jpg.subtitulo.tif.txt","00001132.jpg.subtitulo.tif.txt","00001132.jpg.subtitulo.tif.txt","00001132.jpg.subtitulo.tif.txt","00001132.jpg.subtitulo.tif.txt","00001132.jpg.subtitulo.tif.txt","00001132.jpg.subtitulo.tif.txt","00001132.jpg.subtitulo.tif.txt","00001133.jpg.subtitulo.tif.txt","00001133.jpg.subtitulo.tif.txt","00001133.jpg.subtitulo.tif.txt","00001133.jpg.subtitulo.tif.txt","00001133.jpg.subtitulo.tif.txt","00001133.jpg.subtitulo.tif.txt","00001135.jpg.subtitulo.tif.txt","00001135.jpg.subtitulo.tif.txt","00001135.jpg.subtitulo.tif.txt","00001135.jpg.subtitulo.tif.txt","00001137.jpg.subtitulo.tif.txt","00001137.jpg.subtitulo.tif.txt","00001137.jpg.subtitulo.tif.txt","00001137.jpg.subtitulo.tif.txt","00001137.jpg.subtitulo.tif.txt","00001137.jpg.subtitulo.tif.txt","00001137.jpg.subtitulo.tif.txt","00001137.jpg.subtitulo.tif.txt","00001137.jpg.subtitulo.tif.txt","00001137.jpg.subtitulo.tif.txt","00001141.jpg.subtitulo.tif.txt","00001141.jpg.subtitulo.tif.txt","00001141.jpg.subtitulo.tif.txt","00001141.jpg.subtitulo.tif.txt","00001141.jpg.subtitulo.tif.txt","00001142.jpg.subtitulo.tif.txt","00001142.jpg.subtitulo.tif.txt","00001142.jpg.subtitulo.tif.txt","00001142.jpg.subtitulo.tif.txt","00001142.jpg.subtitulo.tif.txt","00001142.jpg.subtitulo.tif.txt","00001142.jpg.subtitulo.tif.txt","00001142.jpg.subtitulo.tif.txt","00001142.jpg.subtitulo.tif.txt","00001142.jpg.subtitulo.tif.txt","00001143.jpg.subtitulo.tif.txt","00001143.jpg.subtitulo.tif.txt","00001143.jpg.subtitulo.tif.txt","00001143.jpg.subtitulo.tif.txt","00001143.jpg.subtitulo.tif.txt","00001146.jpg.subtitulo.tif.txt","00001146.jpg.subtitulo.tif.txt","00001146.jpg.subtitulo.tif.txt","00001146.jpg.subtitulo.tif.txt","00001147.jpg.subtitulo.tif.txt","00001147.jpg.subtitulo.tif.txt","00001147.jpg.subtitulo.tif.txt","00001147.jpg.subtitulo.tif.txt","00001147.jpg.subtitulo.tif.txt","00001147.jpg.subtitulo.tif.txt","00001147.jpg.subtitulo.tif.txt","00001149.jpg.subtitulo.tif.txt","00001149.jpg.subtitulo.tif.txt","00001149.jpg.subtitulo.tif.txt","00001149.jpg.subtitulo.tif.txt","00001149.jpg.subtitulo.tif.txt","00001149.jpg.subtitulo.tif.txt","00001149.jpg.subtitulo.tif.txt","00001149.jpg.subtitulo.tif.txt","00001149.jpg.subtitulo.tif.txt","00001149.jpg.subtitulo.tif.txt","00001149.jpg.subtitulo.tif.txt","00001152.jpg.subtitulo.tif.txt","00001152.jpg.subtitulo.tif.txt","00001152.jpg.subtitulo.tif.txt","00001153.jpg.subtitulo.tif.txt","00001153.jpg.subtitulo.tif.txt","00001153.jpg.subtitulo.tif.txt","00001153.jpg.subtitulo.tif.txt","00001153.jpg.subtitulo.tif.txt","00001153.jpg.subtitulo.tif.txt","00001153.jpg.subtitulo.tif.txt","00001153.jpg.subtitulo.tif.txt","00001157.jpg.subtitulo.tif.txt","00001157.jpg.subtitulo.tif.txt","00001157.jpg.subtitulo.tif.txt","00001157.jpg.subtitulo.tif.txt","00001157.jpg.subtitulo.tif.txt","00001158.jpg.subtitulo.tif.txt","00001158.jpg.subtitulo.tif.txt","00001158.jpg.subtitulo.tif.txt","00001158.jpg.subtitulo.tif.txt","00001158.jpg.subtitulo.tif.txt","00001158.jpg.subtitulo.tif.txt","00001158.jpg.subtitulo.tif.txt","00001158.jpg.subtitulo.tif.txt","00001160.jpg.subtitulo.tif.txt","00001160.jpg.subtitulo.tif.txt","00001160.jpg.subtitulo.tif.txt","00001160.jpg.subtitulo.tif.txt","00001160.jpg.subtitulo.tif.txt","00001160.jpg.subtitulo.tif.txt","00001160.jpg.subtitulo.tif.txt","00001160.jpg.subtitulo.tif.txt","00001160.jpg.subtitulo.tif.txt","00001161.jpg.subtitulo.tif.txt","00001161.jpg.subtitulo.tif.txt","00001161.jpg.subtitulo.tif.txt","00001161.jpg.subtitulo.tif.txt","00001161.jpg.subtitulo.tif.txt","00001161.jpg.subtitulo.tif.txt","00001161.jpg.subtitulo.tif.txt","00001161.jpg.subtitulo.tif.txt","00001161.jpg.subtitulo.tif.txt","00001167.jpg.subtitulo.tif.txt","00001167.jpg.subtitulo.tif.txt","00001167.jpg.subtitulo.tif.txt","00001167.jpg.subtitulo.tif.txt","00001167.jpg.subtitulo.tif.txt","00001167.jpg.subtitulo.tif.txt","00001167.jpg.subtitulo.tif.txt","00001167.jpg.subtitulo.tif.txt","00001167.jpg.subtitulo.tif.txt","00001168.jpg.subtitulo.tif.txt","00001168.jpg.subtitulo.tif.txt","00001168.jpg.subtitulo.tif.txt","00001168.jpg.subtitulo.tif.txt","00001168.jpg.subtitulo.tif.txt","00001168.jpg.subtitulo.tif.txt","00001168.jpg.subtitulo.tif.txt","00001172.jpg.subtitulo.tif.txt","00001172.jpg.subtitulo.tif.txt","00001173.jpg.subtitulo.tif.txt","00001173.jpg.subtitulo.tif.txt","00001173.jpg.subtitulo.tif.txt","00001173.jpg.subtitulo.tif.txt","00001173.jpg.subtitulo.tif.txt","00001173.jpg.subtitulo.tif.txt","00001176.jpg.subtitulo.tif.txt","00001176.jpg.subtitulo.tif.txt","00001176.jpg.subtitulo.tif.txt","00001176.jpg.subtitulo.tif.txt","00001176.jpg.subtitulo.tif.txt","00001176.jpg.subtitulo.tif.txt","00001176.jpg.subtitulo.tif.txt","00001176.jpg.subtitulo.tif.txt","00001176.jpg.subtitulo.tif.txt","00001176.jpg.subtitulo.tif.txt","00001178.jpg.subtitulo.tif.txt","00001178.jpg.subtitulo.tif.txt","00001178.jpg.subtitulo.tif.txt","00001178.jpg.subtitulo.tif.txt","00001178.jpg.subtitulo.tif.txt","00001178.jpg.subtitulo.tif.txt","00001178.jpg.subtitulo.tif.txt","00001178.jpg.subtitulo.tif.txt","00001178.jpg.subtitulo.tif.txt","00001182.jpg.subtitulo.tif.txt","00001182.jpg.subtitulo.tif.txt","00001182.jpg.subtitulo.tif.txt","00001182.jpg.subtitulo.tif.txt","00001182.jpg.subtitulo.tif.txt","00001182.jpg.subtitulo.tif.txt","00001182.jpg.subtitulo.tif.txt","00001182.jpg.subtitulo.tif.txt","00001187.jpg.subtitulo.tif.txt","00001187.jpg.subtitulo.tif.txt","00001187.jpg.subtitulo.tif.txt","00001187.jpg.subtitulo.tif.txt","00001187.jpg.subtitulo.tif.txt","00001187.jpg.subtitulo.tif.txt","00001187.jpg.subtitulo.tif.txt","00001187.jpg.subtitulo.tif.txt","00001189.jpg.subtitulo.tif.txt","00001189.jpg.subtitulo.tif.txt","00001189.jpg.subtitulo.tif.txt","00001189.jpg.subtitulo.tif.txt","00001189.jpg.subtitulo.tif.txt","00001189.jpg.subtitulo.tif.txt","00001189.jpg.subtitulo.tif.txt","00001189.jpg.subtitulo.tif.txt","00001189.jpg.subtitulo.tif.txt","00001192.jpg.subtitulo.tif.txt","00001192.jpg.subtitulo.tif.txt","00001192.jpg.subtitulo.tif.txt","00001192.jpg.subtitulo.tif.txt","00001192.jpg.subtitulo.tif.txt","00001192.jpg.subtitulo.tif.txt","00001192.jpg.subtitulo.tif.txt","00001192.jpg.subtitulo.tif.txt","00001194.jpg.subtitulo.tif.txt","00001194.jpg.subtitulo.tif.txt","00001194.jpg.subtitulo.tif.txt","00001194.jpg.subtitulo.tif.txt","00001194.jpg.subtitulo.tif.txt","00001194.jpg.subtitulo.tif.txt","00001194.jpg.subtitulo.tif.txt","00001194.jpg.subtitulo.tif.txt","00001197.jpg.subtitulo.tif.txt","00001197.jpg.subtitulo.tif.txt","00001197.jpg.subtitulo.tif.txt","00001197.jpg.subtitulo.tif.txt","00001197.jpg.subtitulo.tif.txt","00001197.jpg.subtitulo.tif.txt","00001197.jpg.subtitulo.tif.txt","00001197.jpg.subtitulo.tif.txt","00001199.jpg.subtitulo.tif.txt","00001199.jpg.subtitulo.tif.txt","00001199.jpg.subtitulo.tif.txt","00001199.jpg.subtitulo.tif.txt","00001199.jpg.subtitulo.tif.txt","00001199.jpg.subtitulo.tif.txt","00001199.jpg.subtitulo.tif.txt","00001199.jpg.subtitulo.tif.txt","00001199.jpg.subtitulo.tif.txt","00001200.jpg.subtitulo.tif.txt","00001200.jpg.subtitulo.tif.txt","00001200.jpg.subtitulo.tif.txt","00001200.jpg.subtitulo.tif.txt","00001200.jpg.subtitulo.tif.txt","00001200.jpg.subtitulo.tif.txt","00001200.jpg.subtitulo.tif.txt","00001206.jpg.subtitulo.tif.txt","00001206.jpg.subtitulo.tif.txt","00001206.jpg.subtitulo.tif.txt","00001206.jpg.subtitulo.tif.txt","00001206.jpg.subtitulo.tif.txt","00001207.jpg.subtitulo.tif.txt","00001207.jpg.subtitulo.tif.txt","00001207.jpg.subtitulo.tif.txt","00001207.jpg.subtitulo.tif.txt","00001207.jpg.subtitulo.tif.txt","00001207.jpg.subtitulo.tif.txt","00001207.jpg.subtitulo.tif.txt","00001207.jpg.subtitulo.tif.txt","00001207.jpg.subtitulo.tif.txt","00001211.jpg.subtitulo.tif.txt","00001211.jpg.subtitulo.tif.txt","00001211.jpg.subtitulo.tif.txt","00001211.jpg.subtitulo.tif.txt","00001211.jpg.subtitulo.tif.txt","00001211.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001213.jpg.subtitulo.tif.txt","00001213.jpg.subtitulo.tif.txt","00001213.jpg.subtitulo.tif.txt","00001213.jpg.subtitulo.tif.txt","00001213.jpg.subtitulo.tif.txt","00001213.jpg.subtitulo.tif.txt","00001213.jpg.subtitulo.tif.txt","00001213.jpg.subtitulo.tif.txt","00001214.jpg.subtitulo.tif.txt","00001214.jpg.subtitulo.tif.txt","00001214.jpg.subtitulo.tif.txt","00001214.jpg.subtitulo.tif.txt","00001214.jpg.subtitulo.tif.txt","00001221.jpg.subtitulo.tif.txt","00001221.jpg.subtitulo.tif.txt","00001221.jpg.subtitulo.tif.txt","00001222.jpg.subtitulo.tif.txt","00001222.jpg.subtitulo.tif.txt","00001222.jpg.subtitulo.tif.txt","00001222.jpg.subtitulo.tif.txt","00001222.jpg.subtitulo.tif.txt","00001222.jpg.subtitulo.tif.txt","00001222.jpg.subtitulo.tif.txt","00001222.jpg.subtitulo.tif.txt","00001222.jpg.subtitulo.tif.txt","00001223.jpg.subtitulo.tif.txt","00001223.jpg.subtitulo.tif.txt","00001223.jpg.subtitulo.tif.txt","00001223.jpg.subtitulo.tif.txt","00001223.jpg.subtitulo.tif.txt","00001223.jpg.subtitulo.tif.txt","00001223.jpg.subtitulo.tif.txt","00001223.jpg.subtitulo.tif.txt","00001223.jpg.subtitulo.tif.txt","00001223.jpg.subtitulo.tif.txt","00001225.jpg.subtitulo.tif.txt","00001225.jpg.subtitulo.tif.txt","00001225.jpg.subtitulo.tif.txt","00001225.jpg.subtitulo.tif.txt","00001225.jpg.subtitulo.tif.txt","00001225.jpg.subtitulo.tif.txt","00001225.jpg.subtitulo.tif.txt","00001225.jpg.subtitulo.tif.txt","00001225.jpg.subtitulo.tif.txt","00001225.jpg.subtitulo.tif.txt","00001229.jpg.subtitulo.tif.txt","00001229.jpg.subtitulo.tif.txt","00001229.jpg.subtitulo.tif.txt","00001229.jpg.subtitulo.tif.txt","00001229.jpg.subtitulo.tif.txt","00001230.jpg.subtitulo.tif.txt","00001230.jpg.subtitulo.tif.txt","00001230.jpg.subtitulo.tif.txt","00001231.jpg.subtitulo.tif.txt","00001231.jpg.subtitulo.tif.txt","00001231.jpg.subtitulo.tif.txt","00001231.jpg.subtitulo.tif.txt","00001231.jpg.subtitulo.tif.txt","00001231.jpg.subtitulo.tif.txt","00001231.jpg.subtitulo.tif.txt","00001231.jpg.subtitulo.tif.txt","00001231.jpg.subtitulo.tif.txt","00001232.jpg.subtitulo.tif.txt","00001232.jpg.subtitulo.tif.txt","00001232.jpg.subtitulo.tif.txt","00001232.jpg.subtitulo.tif.txt","00001232.jpg.subtitulo.tif.txt","00001232.jpg.subtitulo.tif.txt","00001232.jpg.subtitulo.tif.txt","00001232.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001238.jpg.subtitulo.tif.txt","00001238.jpg.subtitulo.tif.txt","00001238.jpg.subtitulo.tif.txt","00001238.jpg.subtitulo.tif.txt","00001238.jpg.subtitulo.tif.txt","00001238.jpg.subtitulo.tif.txt","00001238.jpg.subtitulo.tif.txt","00001238.jpg.subtitulo.tif.txt","00001239.jpg.subtitulo.tif.txt","00001239.jpg.subtitulo.tif.txt","00001239.jpg.subtitulo.tif.txt","00001239.jpg.subtitulo.tif.txt","00001239.jpg.subtitulo.tif.txt","00001239.jpg.subtitulo.tif.txt","00001239.jpg.subtitulo.tif.txt","00001243.jpg.subtitulo.tif.txt","00001243.jpg.subtitulo.tif.txt","00001243.jpg.subtitulo.tif.txt","00001243.jpg.subtitulo.tif.txt","00001243.jpg.subtitulo.tif.txt","00001243.jpg.subtitulo.tif.txt","00001243.jpg.subtitulo.tif.txt","00001243.jpg.subtitulo.tif.txt","00001243.jpg.subtitulo.tif.txt","00001243.jpg.subtitulo.tif.txt","00001243.jpg.subtitulo.tif.txt","00001244.jpg.subtitulo.tif.txt","00001244.jpg.subtitulo.tif.txt","00001244.jpg.subtitulo.tif.txt","00001244.jpg.subtitulo.tif.txt","00001244.jpg.subtitulo.tif.txt","00001244.jpg.subtitulo.tif.txt","00001244.jpg.subtitulo.tif.txt","00001244.jpg.subtitulo.tif.txt","00001245.jpg.subtitulo.tif.txt","00001245.jpg.subtitulo.tif.txt","00001245.jpg.subtitulo.tif.txt","00001245.jpg.subtitulo.tif.txt","00001245.jpg.subtitulo.tif.txt","00001245.jpg.subtitulo.tif.txt","00001245.jpg.subtitulo.tif.txt","00001245.jpg.subtitulo.tif.txt","00001245.jpg.subtitulo.tif.txt","00001252.jpg.subtitulo.tif.txt","00001252.jpg.subtitulo.tif.txt","00001252.jpg.subtitulo.tif.txt","00001252.jpg.subtitulo.tif.txt","00001253.jpg.subtitulo.tif.txt","00001253.jpg.subtitulo.tif.txt","00001253.jpg.subtitulo.tif.txt","00001253.jpg.subtitulo.tif.txt","00001253.jpg.subtitulo.tif.txt","00001253.jpg.subtitulo.tif.txt","00001253.jpg.subtitulo.tif.txt","00001259.jpg.subtitulo.tif.txt","00001259.jpg.subtitulo.tif.txt","00001259.jpg.subtitulo.tif.txt","00001259.jpg.subtitulo.tif.txt","00001259.jpg.subtitulo.tif.txt","00001259.jpg.subtitulo.tif.txt","00001259.jpg.subtitulo.tif.txt","00001259.jpg.subtitulo.tif.txt","00001259.jpg.subtitulo.tif.txt","00001260.jpg.subtitulo.tif.txt","00001260.jpg.subtitulo.tif.txt","00001260.jpg.subtitulo.tif.txt","00001260.jpg.subtitulo.tif.txt","00001260.jpg.subtitulo.tif.txt","00001260.jpg.subtitulo.tif.txt","00001260.jpg.subtitulo.tif.txt","00001262.jpg.subtitulo.tif.txt","00001262.jpg.subtitulo.tif.txt","00001262.jpg.subtitulo.tif.txt","00001262.jpg.subtitulo.tif.txt","00001262.jpg.subtitulo.tif.txt","00001262.jpg.subtitulo.tif.txt","00001262.jpg.subtitulo.tif.txt","00001262.jpg.subtitulo.tif.txt","00001265.jpg.subtitulo.tif.txt","00001265.jpg.subtitulo.tif.txt","00001265.jpg.subtitulo.tif.txt","00001265.jpg.subtitulo.tif.txt","00001265.jpg.subtitulo.tif.txt","00001265.jpg.subtitulo.tif.txt","00001266.jpg.subtitulo.tif.txt","00001266.jpg.subtitulo.tif.txt","00001266.jpg.subtitulo.tif.txt","00001266.jpg.subtitulo.tif.txt","00001266.jpg.subtitulo.tif.txt","00001266.jpg.subtitulo.tif.txt","00001266.jpg.subtitulo.tif.txt","00001266.jpg.subtitulo.tif.txt","00001266.jpg.subtitulo.tif.txt","00001266.jpg.subtitulo.tif.txt","00001266.jpg.subtitulo.tif.txt","00001267.jpg.subtitulo.tif.txt","00001267.jpg.subtitulo.tif.txt","00001267.jpg.subtitulo.tif.txt","00001267.jpg.subtitulo.tif.txt","00001267.jpg.subtitulo.tif.txt","00001267.jpg.subtitulo.tif.txt","00001267.jpg.subtitulo.tif.txt","00001267.jpg.subtitulo.tif.txt","00001267.jpg.subtitulo.tif.txt","00001275.jpg.subtitulo.tif.txt","00001275.jpg.subtitulo.tif.txt","00001275.jpg.subtitulo.tif.txt","00001276.jpg.subtitulo.tif.txt","00001276.jpg.subtitulo.tif.txt","00001276.jpg.subtitulo.tif.txt","00001276.jpg.subtitulo.tif.txt","00001276.jpg.subtitulo.tif.txt","00001276.jpg.subtitulo.tif.txt","00001276.jpg.subtitulo.tif.txt","00001276.jpg.subtitulo.tif.txt","00001277.jpg.subtitulo.tif.txt","00001277.jpg.subtitulo.tif.txt","00001277.jpg.subtitulo.tif.txt","00001277.jpg.subtitulo.tif.txt","00001277.jpg.subtitulo.tif.txt","00001277.jpg.subtitulo.tif.txt","00001277.jpg.subtitulo.tif.txt","00001277.jpg.subtitulo.tif.txt","00001281.jpg.subtitulo.tif.txt","00001281.jpg.subtitulo.tif.txt","00001281.jpg.subtitulo.tif.txt","00001282.jpg.subtitulo.tif.txt","00001282.jpg.subtitulo.tif.txt","00001282.jpg.subtitulo.tif.txt","00001282.jpg.subtitulo.tif.txt","00001282.jpg.subtitulo.tif.txt","00001282.jpg.subtitulo.tif.txt","00001282.jpg.subtitulo.tif.txt","00001282.jpg.subtitulo.tif.txt","00001282.jpg.subtitulo.tif.txt","00001282.jpg.subtitulo.tif.txt","00001282.jpg.subtitulo.tif.txt","00001283.jpg.subtitulo.tif.txt","00001283.jpg.subtitulo.tif.txt","00001283.jpg.subtitulo.tif.txt","00001283.jpg.subtitulo.tif.txt","00001283.jpg.subtitulo.tif.txt","00001283.jpg.subtitulo.tif.txt","00001283.jpg.subtitulo.tif.txt","00001283.jpg.subtitulo.tif.txt","00001283.jpg.subtitulo.tif.txt","00001289.jpg.subtitulo.tif.txt","00001289.jpg.subtitulo.tif.txt","00001289.jpg.subtitulo.tif.txt","00001289.jpg.subtitulo.tif.txt","00001289.jpg.subtitulo.tif.txt","00001289.jpg.subtitulo.tif.txt","00001289.jpg.subtitulo.tif.txt","00001290.jpg.subtitulo.tif.txt","00001290.jpg.subtitulo.tif.txt","00001290.jpg.subtitulo.tif.txt","00001290.jpg.subtitulo.tif.txt"],[120,120,120,120,120,120,120,120,120,120,75,75,75,75,75,75,50,50,50,50,50,121,121,121,121,121,121,121,121,121,121,121,90,90,90,90,90,90,90,52,52,52,52,52,97,97,97,97,97,97,97,83,83,83,83,83,83,83,81,81,81,81,81,81,81,33,33,33,33,107,107,107,107,107,107,107,107,107,94,94,94,94,94,94,94,94,94,101,101,101,101,101,101,101,101,101,101,31,31,89,89,89,89,89,89,89,89,89,123,123,123,123,123,123,123,123,123,123,82,82,82,82,82,82,82,82,63,63,63,63,63,63,63,63,97,97,97,97,97,97,97,97,97,98,98,98,98,98,98,98,98,104,104,104,104,104,104,104,104,108,108,108,108,108,108,108,108,117,117,117,117,117,117,117,117,117,55,55,55,55,81,81,81,81,81,68,68,68,68,68,82,82,82,82,82,82,82,125,125,125,125,125,125,125,125,125,125,93,93,93,93,93,93,93,93,93,46,46,46,46,31,31,31,56,56,56,56,56,56,90,90,90,90,90,90,90,90,90,90,90,90,90,92,92,92,92,92,92,92,92,92,41,41,41,41,41,111,111,111,111,111,111,111,111,111,111,107,107,107,107,107,107,107,107,107,107,107,35,35,35,35,87,87,87,87,87,87,87,87,87,107,107,107,107,107,107,107,107,107,107,50,50,50,50,50,35,35,35,35,35,35,78,78,78,78,78,78,78,78,78,78,125,125,125,125,125,125,125,125,125,125,37,37,37,37,37,37,77,77,77,77,77,82,82,82,82,82,82,82,82,74,74,74,74,74,74,126,126,126,126,126,126,126,126,126,126,126,126,102,102,102,102,102,102,102,102,102,32,32,32,32,86,86,86,86,86,86,86,86,86,86,86,86,110,110,110,110,110,110,110,110,110,110,55,55,55,55,55,93,93,93,93,93,93,93,93,73,73,73,73,73,73,95,95,95,95,95,95,95,95,95,108,108,108,108,108,108,108,108,108,108,108,91,91,91,91,91,91,91,91,76,76,76,76,76,72,72,72,72,72,34,34,34,34,79,79,79,79,79,79,79,79,79,66,66,66,66,66,66,73,73,73,73,73,73,73,73,36,36,36,36,36,101,101,101,101,101,101,101,101,101,101,97,97,97,97,97,97,97,97,97,97,51,51,51,51,51,77,77,77,77,77,77,77,39,39,39,39,111,111,111,111,111,111,111,111,96,96,96,96,96,96,96,96,71,71,71,71,71,71,103,103,103,103,103,103,103,103,103,103,69,69,69,69,69,92,92,92,92,92,92,92,92,92,82,82,82,82,82,82,82,61,61,61,61,75,75,75,75,75,75,75,53,53,53,53,53,72,72,72,72,72,72,67,67,67,67,67,67,89,89,89,89,89,89,89,89,89,113,113,113,113,113,113,113,113,113,113,37,37,37,37,74,74,74,74,74,74,46,46,46,46,46,46,84,84,84,84,84,84,85,85,85,85,85,85,85,85,74,74,74,74,74,74,74,74,103,103,103,103,103,103,103,103,106,106,106,106,106,106,106,106,106,106,106,34,34,34,34,85,85,85,85,85,85,85,85,76,76,76,76,76,76,76,76,104,104,104,104,104,104,104,104,58,58,58,58,58,58,101,101,101,101,101,101,101,101,101,98,98,98,98,98,98,98,98,98,105,105,105,105,105,105,105,105,116,116,116,116,116,116,116,116,116,116,108,108,108,108,108,108,108,108,55,55,55,55,118,118,118,118,118,118,118,118,118,118,97,97,97,97,97,97,97,97,97,97,37,37,37,37,110,110,110,110,110,110,110,110,66,66,66,66,66,101,101,101,101,101,101,101,101,101,101,70,70,70,70,70,70,74,74,74,74,74,74,77,77,77,77,77,77,77,62,62,62,62,62,62,54,54,54,54,54,113,113,113,113,113,113,113,113,113,113,113,32,32,32,86,86,86,86,86,86,82,82,82,82,82,82,82,82,31,31,31,31,31,107,107,107,107,107,107,107,107,107,107,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,93,93,93,93,93,93,93,78,78,78,78,78,78,78,108,108,108,108,108,108,108,108,108,108,108,94,94,94,94,94,94,94,94,109,109,109,109,109,109,109,109,101,101,101,101,101,101,101,101,101,97,97,97,97,97,97,97,97,97,97,97,46,46,46,46,46,104,104,104,104,104,104,104,104,92,92,92,92,92,92,92,92,92,88,88,88,88,88,88,104,104,104,104,104,104,104,104,105,105,105,105,105,105,105,105,105,68,68,68,68,68,68,42,42,42,42,112,112,112,112,112,112,112,112,112,70,70,70,70,70,70,124,124,124,124,124,124,124,124,124,124,124,43,43,43,43,43,64,64,64,64,64,64,128,128,128,128,128,128,128,128,128,128,105,105,105,105,105,105,105,105,82,82,82,82,82,82,82,71,71,71,71,71,71,35,35,35,35,35,35,111,111,111,111,111,111,111,111,111,111,111,114,114,114,114,114,114,114,114,114,114,114,114,114,120,120,120,120,120,120,120,120,120,120,120,120,126,126,126,126,126,126,126,126,126,126,126,126,126,31,31,105,105,105,105,105,105,105,67,67,67,67,67,104,104,104,104,104,104,109,109,109,109,109,109,109,109,109,109,105,105,105,105,105,105,105,105,105,105,105,105,105,105,105,105,105,105,105,105,105,106,106,106,106,106,106,106,106,124,124,124,124,124,124,124,124,124,124,124,114,114,114,114,114,114,114,114,114,114,49,49,49,49,49,49,72,72,72,72,72,72,72,72,72,128,128,128,128,128,128,128,128,114,114,114,114,114,114,114,114,114,114,114,115,115,115,115,115,115,115,115,115,115,115,115,123,123,123,123,123,123,123,123,123,123,123,123,71,71,71,71,71,79,79,79,79,79,79,115,115,115,115,115,115,115,115,115,115,115,116,116,116,116,116,116,116,116,116,116,95,95,95,95,95,95,95,95,95,57,57,57,57,57,57,94,94,94,94,94,94,94,94,34,34,34,34,70,70,70,70,70,70,110,110,110,110,110,110,110,110,110,104,104,104,104,104,104,104,104,104,104,95,95,95,95,95,95,95,95,113,113,113,113,113,113,113,113,113,95,95,95,95,95,95,95,95,107,107,107,107,107,107,107,107,107,98,98,98,98,98,98,112,112,112,112,112,112,112,112,110,110,110,110,110,110,110,110,110,34,34,34,74,74,74,74,74,74,98,98,98,98,98,98,98,98,98,98,129,129,129,129,129,129,129,129,129,129,129,129,72,72,72,72,72,72,72,72,116,116,116,116,116,116,116,116,116,124,124,124,124,124,124,124,124,124,124,124,93,93,93,93,93,93,93,93,96,96,96,96,96,96,96,96,85,85,85,85,85,85,85,85,97,97,97,97,97,97,97,97,105,105,105,105,105,105,105,105,105,105,66,66,66,66,66,66,66,119,119,119,119,119,119,119,119,119,119,60,60,60,60,60,99,99,99,99,99,99,99,99,79,79,79,79,79,79,79,51,51,51,51,51,51,77,77,77,77,77,77,75,75,75,75,75,75,75,78,78,78,78,78,78,78,89,89,89,89,89,89,89,103,103,103,103,103,103,103,103,103,78,78,78,78,78,78,107,107,107,107,107,107,107,107,107,107,107,113,113,113,113,113,113,113,113,113,113,113,113,96,96,96,96,96,96,96,96,111,111,111,111,111,111,111,111,111,99,99,99,99,99,99,99,99,99,116,116,116,116,116,116,116,116,116,116,101,101,101,101,101,101,101,101,101,101,124,124,124,124,124,124,124,124,124,124,124,113,113,113,113,113,113,113,113,113,106,106,106,106,106,106,106,106,106,106,106,106,106,31,31,31,31,31,31,94,94,94,94,94,94,94,119,119,119,119,119,119,119,119,119,119,104,104,104,104,104,104,104,104,57,57,57,57,57,70,70,70,70,70,70,117,117,117,117,117,117,117,117,117,117,114,114,114,114,114,114,114,114,114,113,113,113,113,113,113,113,113,113,94,94,94,94,94,94,94,94,116,116,116,116,116,116,116,116,116,116,50,50,50,50,50,50,50,107,107,107,107,107,107,107,107,107,107,107,107,52,52,52,128,128,128,128,128,128,128,128,128,128,105,105,105,105,105,105,105,105,105,105,105,96,96,96,96,96,96,96,63,63,63,63,110,110,110,110,110,110,110,110,110,124,124,124,124,124,124,124,124,124,124,63,63,63,63,63,63,63,114,114,114,114,114,114,114,114,114,114,114,39,39,39,65,65,65,65,65,104,104,104,104,104,104,104,104,104,104,106,106,106,106,106,106,106,106,106,106,115,115,115,115,115,115,115,115,115,56,56,56,56,56,107,107,107,107,107,107,107,107,98,98,98,98,98,98,98,98,98,83,83,83,83,83,83,83,83,52,52,52,98,98,98,98,98,98,98,98,69,69,69,69,69,69,69,107,107,107,107,107,107,107,107,107,107,105,105,105,105,105,105,105,105,105,105,72,72,72,72,72,72,117,117,117,117,117,117,117,117,117,117,117,122,122,122,122,122,122,122,122,122,122,122,111,111,111,111,111,111,111,111,111,111,109,109,109,109,109,109,109,109,109,109,109,34,34,34,34,34,102,102,102,102,102,102,102,102,102,36,36,36,36,95,95,95,95,95,95,95,95,120,120,120,120,120,120,120,120,120,120,120,120,120,118,118,118,118,118,118,118,118,118,106,106,106,106,106,106,106,106,106,43,43,43,43,43,88,88,88,88,88,88,88,88,105,105,105,105,105,105,105,74,74,74,74,74,74,74,96,96,96,96,96,96,96,96,110,110,110,110,110,110,110,110,110,110,74,74,74,74,74,74,74,74,101,101,101,101,101,101,101,101,101,101,101,42,42,42,42,42,42,41,41,41,41,41,41,125,125,125,125,125,125,125,125,125,125,125,125,98,98,98,98,98,98,98,98,98,100,100,100,100,100,100,100,100,100,100,100,93,93,93,93,93,93,93,118,118,118,118,118,118,118,118,118,118,103,103,103,103,103,103,103,62,62,62,62,62,62,81,81,81,81,81,81,81,110,110,110,110,110,110,110,110,110,110,110,100,100,100,100,100,100,100,100,100,100,113,113,113,113,113,113,113,113,78,78,78,78,78,78,78,78,78,78,78,78,97,97,97,97,97,97,97,115,115,115,115,115,115,115,115,115,59,59,59,59,59,59,59,82,82,82,82,82,79,79,79,79,79,125,125,125,125,125,125,125,125,125,125,125,125,125,125,115,115,115,115,115,115,115,115,115,115,115,115,123,123,123,123,123,123,123,123,123,123,109,109,109,109,109,109,109,109,109,109,109,40,40,40,40,40,120,120,120,120,120,120,120,120,68,68,68,68,68,118,118,118,118,118,118,118,118,118,118,118,118,118,104,104,104,104,104,104,104,104,104,104,93,93,93,93,93,93,93,93,111,111,111,111,111,111,111,111,111,91,91,91,91,91,91,91,38,38,38,93,93,93,93,93,93,93,93,83,83,83,83,83,83,83,83,107,107,107,107,107,107,107,107,107,97,97,97,97,97,97,97,76,76,76,76,76,76,98,98,98,98,98,98,98,98,98,109,109,109,109,109,109,109,109,109,109,109,90,90,90,90,90,90,90,90,33,33,33,33,33,117,117,117,117,117,117,117,117,117,117,117,117,110,110,110,110,110,110,110,110,38,38,38,38,116,116,116,116,116,116,116,116,113,113,113,113,113,113,113,130,130,130,130,130,130,130,130,130,130,130,41,41,41,41,41,105,105,105,105,105,105,105,105,105,105,116,116,116,116,116,116,116,116,116,116,116,112,112,112,112,112,112,112,112,112,112,112,112,112,111,111,111,111,111,111,111,111,91,91,91,91,91,91,91,91,91,119,119,119,119,119,119,119,119,119,119,119,76,76,76,76,76,32,32,32,32,102,102,102,102,102,102,102,102,119,119,119,119,119,119,119,119,119,119,70,70,70,70,70,44,44,44,44,79,79,79,79,79,79,79,82,82,82,82,82,82,82,31,31,31,66,66,66,66,66,66,111,111,111,111,111,111,111,111,111,111,58,58,58,58,66,66,66,66,66,66,111,111,111,111,111,111,111,111,111,111,111,36,36,36,74,74,74,74,74,74,74,74,96,96,96,96,96,96,96,35,35,35,35,35,117,117,117,117,117,117,117,117,130,130,130,130,130,130,130,130,130,130,130,130,36,36,36,36,68,68,68,68,68,68,68,112,112,112,112,112,112,112,112,112,112,112,112,112,112,112,112,112,112,73,73,73,73,73,73,107,107,107,107,107,107,107,107,107,117,117,117,117,117,117,117,117,117,54,54,54,54,54,103,103,103,103,103,103,103,103,103,103,67,67,67,67,67,67,45,45,45,64,64,64,64,64,89,89,89,89,89,89,56,56,56,56,160,160,160,160,160,160,160,160,160,160,160,120,120,120,120,120,120,120,120,120,99,99,99,99,99,99,99,99,99,99,79,79,79,79,79,79,79,79,79,78,78,78,78,78,78,78,67,67,67,67,67,80,80,80,80,80,80,80,80,35,35,35,35,109,109,109,109,109,109,109,109,109,105,105,105,105,105,105,105,105,105,105,89,89,89,89,89,89,89,89,99,99,99,99,99,99,99,99,99,36,36,36,36,91,91,91,91,91,91,91,91,91,91,68,68,68,68,68,68,33,33,33,59,59,59,59,59,59,59,74,74,74,74,74,74,74,91,91,91,91,91,91,91,91,91,91,71,71,71,71,71,71,115,115,115,115,115,115,115,115,115,115,70,70,70,70,70,70,34,34,34,34,96,96,96,96,96,96,96,97,97,97,97,97,97,114,114,114,114,114,114,114,114,114,114,114,64,64,64,64,64,84,84,84,84,84,84,84,84,97,97,97,97,97,97,97,97,113,113,113,113,113,113,113,113,113,113,113,92,92,92,92,92,92,92,92,78,78,78,78,78,100,100,100,100,100,100,100,100,100,100,100,100,50,50,50,50,50,46,46,46,46,46,91,91,91,91,91,91,79,79,79,79,79,79,39,39,39,142,142,142,142,142,142,142,142,142,142,142,142,142,81,81,81,81,81,81,81,119,119,119,119,119,119,119,119,119,119,119,119,117,117,117,117,117,117,117,117,117,117,97,97,97,97,97,97,97,97,97,97,70,70,70,70,70,70,80,80,80,80,80,80,92,92,92,92,92,92,92,92,92,92,42,42,42,42,63,63,63,63,75,75,75,75,107,107,107,107,107,107,107,107,107,107,107,74,74,74,74,74,74,74,74,83,83,83,83,83,83,83,72,72,72,72,72,72,72,72,72,99,99,99,99,99,99,99,99,118,118,118,118,118,118,118,118,118,118,118,118,114,114,114,114,114,114,114,114,114,114,84,84,84,84,84,84,50,50,50,50,126,126,126,126,126,126,126,126,126,126,49,49,49,49,49,115,115,115,115,115,115,115,115,115,115,59,59,59,59,59,31,31,31,31,89,89,89,89,89,89,89,100,100,100,100,100,100,100,100,100,100,100,48,48,48,106,106,106,106,106,106,106,106,53,53,53,53,53,106,106,106,106,106,106,106,106,98,98,98,98,98,98,98,98,98,115,115,115,115,115,115,115,115,115,116,116,116,116,116,116,116,116,116,82,82,82,82,82,82,82,51,51,91,91,91,91,91,91,93,93,93,93,93,93,93,93,93,93,125,125,125,125,125,125,125,125,125,100,100,100,100,100,100,100,100,115,115,115,115,115,115,115,115,120,120,120,120,120,120,120,120,120,90,90,90,90,90,90,90,90,115,115,115,115,115,115,115,115,83,83,83,83,83,83,83,83,103,103,103,103,103,103,103,103,103,99,99,99,99,99,99,99,84,84,84,84,84,113,113,113,113,113,113,113,113,113,51,51,51,51,51,51,114,114,114,114,114,114,114,114,114,114,114,114,114,107,107,107,107,107,107,107,107,62,62,62,62,62,32,32,32,117,117,117,117,117,117,117,117,117,99,99,99,99,99,99,99,99,99,99,105,105,105,105,105,105,105,105,105,105,31,31,31,31,31,54,54,54,101,101,101,101,101,101,101,101,101,100,100,100,100,100,100,100,100,150,150,150,150,150,150,150,150,150,150,150,150,150,100,100,100,100,100,100,100,100,101,101,101,101,101,101,101,117,117,117,117,117,117,117,117,117,117,117,107,107,107,107,107,107,107,107,93,93,93,93,93,93,93,93,93,46,46,46,46,69,69,69,69,69,69,69,90,90,90,90,90,90,90,90,90,109,109,109,109,109,109,109,81,81,81,81,81,81,81,81,113,113,113,113,113,113,125,125,125,125,125,125,125,125,125,125,125,99,99,99,99,99,99,99,99,99,33,33,33,87,87,87,87,87,87,87,87,101,101,101,101,101,101,101,101,44,44,44,105,105,105,105,105,105,105,105,105,105,105,68,68,68,68,68,68,68,68,68,95,95,95,95,95,95,95,37,37,37,37],[101,101,101,101,101,101,101,101,101,101,101,101,101,101,101,101,74,74,74,74,74,93,93,93,93,93,93,93,93,93,93,93,111,111,111,111,111,111,111,77,77,77,77,77,42,42,42,42,42,42,42,97,97,97,97,97,97,97,87,87,87,87,87,87,87,70,70,70,70,96,96,96,96,96,96,96,96,96,114,114,114,114,114,114,114,114,114,112,112,112,112,112,112,112,112,112,112,83,83,85,85,85,85,85,85,85,85,85,121,121,121,121,121,121,121,121,121,121,116,116,116,116,116,116,116,116,88,88,88,88,88,88,88,88,88,88,88,88,88,88,88,88,88,98,98,98,98,98,98,98,98,110,110,110,110,110,110,110,110,98,98,98,98,98,98,98,98,117,117,117,117,117,117,117,117,117,97,97,97,97,81,81,81,81,81,74,74,74,74,74,79,79,79,79,79,79,79,120,120,120,120,120,120,120,120,120,120,106,106,106,106,106,106,106,106,106,83,83,83,83,40,40,40,50,50,50,50,50,50,83,83,83,83,83,83,83,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,75,75,75,75,75,99,99,99,99,99,99,99,99,99,99,120,120,120,120,120,120,120,120,120,120,120,93,93,93,93,55,55,55,55,55,55,55,55,55,95,95,95,95,95,95,95,95,95,95,94,94,94,94,94,49,49,49,49,49,49,73,73,73,73,73,73,73,73,73,73,116,116,116,116,116,116,116,116,116,116,113,113,113,113,113,113,71,71,71,71,71,88,88,88,88,88,88,88,88,83,83,83,83,83,83,110,110,110,110,110,110,110,110,110,110,110,110,122,122,122,122,122,122,122,122,122,89,89,89,89,77,77,77,77,77,77,91,91,91,91,91,91,106,106,106,106,106,106,106,106,106,106,97,97,97,97,97,84,84,84,84,84,84,84,84,86,86,86,86,86,86,85,85,85,85,85,85,85,85,85,102,102,102,102,102,102,102,102,102,102,102,120,120,120,120,120,120,120,120,88,88,88,88,88,79,79,79,79,79,63,63,63,63,46,46,46,46,46,46,46,46,46,83,83,83,83,83,83,71,71,71,71,71,71,71,71,62,62,62,62,62,89,89,89,89,89,89,89,89,89,89,110,110,110,110,110,110,110,110,110,110,80,80,80,80,80,68,68,68,68,68,68,68,72,72,72,72,93,93,93,93,93,93,93,93,120,120,120,120,120,120,120,120,92,92,92,92,92,92,99,99,99,99,99,99,99,99,99,99,92,92,92,92,92,90,90,90,90,90,90,90,90,90,92,92,92,92,92,92,92,79,79,79,79,78,78,78,78,78,78,78,75,75,75,75,75,79,79,79,79,79,79,82,82,82,82,82,82,84,84,84,84,84,84,84,84,84,110,110,110,110,110,110,110,110,110,110,94,94,94,94,44,44,44,44,44,44,69,69,69,69,69,69,80,80,80,80,80,80,91,91,91,91,91,91,91,91,89,89,89,89,89,89,89,89,101,101,101,101,101,101,101,101,116,116,116,116,116,116,116,116,116,116,116,92,92,92,92,77,77,77,77,77,77,77,77,91,91,91,91,91,91,91,91,108,108,108,108,108,108,108,108,97,97,97,97,97,97,92,92,92,92,92,92,92,92,92,120,120,120,120,120,120,120,120,120,110,110,110,110,110,110,110,110,112,112,112,112,112,112,112,112,112,112,119,119,119,119,119,119,119,119,90,90,90,90,101,101,101,101,101,101,101,101,101,101,122,122,122,122,122,122,122,122,122,122,83,83,83,83,88,88,88,88,88,88,88,88,102,102,102,102,102,91,91,91,91,91,91,91,91,91,91,90,90,90,90,90,90,87,87,87,87,87,87,84,84,84,84,84,84,84,75,75,75,75,75,75,65,65,65,65,65,93,93,93,93,93,93,93,93,93,93,93,105,105,105,79,79,79,79,79,79,97,97,97,97,97,97,97,97,74,74,74,74,74,94,94,94,94,94,94,94,94,94,94,115,115,115,115,115,115,115,115,115,115,115,115,124,124,124,124,124,124,124,124,124,124,116,116,116,116,116,116,116,89,89,89,89,89,89,89,108,108,108,108,108,108,108,108,108,108,108,119,119,119,119,119,119,119,119,120,120,120,120,120,120,120,120,116,116,116,116,116,116,116,116,116,103,103,103,103,103,103,103,103,103,103,103,88,88,88,88,88,94,94,94,94,94,94,94,94,106,106,106,106,106,106,106,106,106,97,97,97,97,97,97,106,106,106,106,106,106,106,106,117,117,117,117,117,117,117,117,117,100,100,100,100,100,100,55,55,55,55,78,78,78,78,78,78,78,78,78,98,98,98,98,98,98,108,108,108,108,108,108,108,108,108,108,108,103,103,103,103,103,59,59,59,59,59,59,113,113,113,113,113,113,113,113,113,113,127,127,127,127,127,127,127,127,113,113,113,113,113,113,113,79,79,79,79,79,79,63,63,63,63,63,63,101,101,101,101,101,101,101,101,101,101,101,129,129,129,129,129,129,129,129,129,129,129,129,129,121,121,121,121,121,121,121,121,121,121,121,121,131,131,131,131,131,131,131,131,131,131,131,131,131,103,103,80,80,80,80,80,80,80,96,96,96,96,96,95,95,95,95,95,95,114,114,114,114,114,114,114,114,114,114,117,117,117,117,117,117,117,117,117,117,117,121,121,121,121,121,121,121,121,121,121,124,124,124,124,124,124,124,124,128,128,128,128,128,128,128,128,128,128,128,138,138,138,138,138,138,138,138,138,138,90,90,90,90,90,90,70,70,70,70,70,70,70,70,70,113,113,113,113,113,113,113,113,131,131,131,131,131,131,131,131,131,131,131,133,133,133,133,133,133,133,133,133,133,133,133,126,126,126,126,126,126,126,126,126,126,126,126,112,112,112,112,112,80,80,80,80,80,80,100,100,100,100,100,100,100,100,100,100,100,126,126,126,126,126,126,126,126,126,126,120,120,120,120,120,120,120,120,120,92,92,92,92,92,92,86,86,86,86,86,86,86,86,83,83,83,83,63,63,63,63,63,63,101,101,101,101,101,101,101,101,101,117,117,117,117,117,117,117,117,117,117,117,117,117,117,117,117,117,117,115,115,115,115,115,115,115,115,115,110,110,110,110,110,110,110,110,107,107,107,107,107,107,107,107,107,117,117,117,117,117,117,117,117,117,117,117,117,117,117,128,128,128,128,128,128,128,128,128,89,89,89,59,59,59,59,59,59,99,99,99,99,99,99,99,99,99,99,124,124,124,124,124,124,124,124,124,124,124,124,114,114,114,114,114,114,114,114,101,101,101,101,101,101,101,101,101,134,134,134,134,134,134,134,134,134,134,134,117,117,117,117,117,117,117,117,100,100,100,100,100,100,100,100,101,101,101,101,101,101,101,101,97,97,97,97,97,97,97,97,109,109,109,109,109,109,109,109,109,109,101,101,101,101,101,101,101,110,110,110,110,110,110,110,110,110,110,103,103,103,103,103,96,96,96,96,96,96,96,96,89,89,89,89,89,89,89,76,76,76,76,76,76,74,74,74,74,74,74,91,91,91,91,91,91,91,78,78,78,78,78,78,78,83,83,83,83,83,83,83,107,107,107,107,107,107,107,107,107,101,101,101,101,101,101,109,109,109,109,109,109,109,109,109,109,109,129,129,129,129,129,129,129,129,129,129,129,129,114,114,114,114,114,114,114,114,114,114,114,114,114,114,114,114,114,112,112,112,112,112,112,112,112,112,113,113,113,113,113,113,113,113,113,113,117,117,117,117,117,117,117,117,117,117,119,119,119,119,119,119,119,119,119,119,119,123,123,123,123,123,123,123,123,123,114,114,114,114,114,114,114,114,114,114,114,114,114,89,89,89,89,89,89,84,84,84,84,84,84,84,108,108,108,108,108,108,108,108,108,108,130,130,130,130,130,130,130,130,100,100,100,100,100,75,75,75,75,75,75,107,107,107,107,107,107,107,107,107,107,128,128,128,128,128,128,128,128,128,125,125,125,125,125,125,125,125,125,116,116,116,116,116,116,116,116,110,110,110,110,110,110,110,110,110,110,94,94,94,94,94,94,94,100,100,100,100,100,100,100,100,100,100,100,100,97,97,97,106,106,106,106,106,106,106,106,106,106,127,127,127,127,127,127,127,127,127,127,127,106,106,106,106,106,106,106,84,84,84,84,100,100,100,100,100,100,100,100,100,130,130,130,130,130,130,130,130,130,130,112,112,112,112,112,112,112,99,99,99,99,99,99,99,99,99,99,99,103,103,103,53,53,53,53,53,97,97,97,97,97,97,97,97,97,97,122,122,122,122,122,122,122,122,122,122,118,118,118,118,118,118,118,118,118,90,90,90,90,90,102,102,102,102,102,102,102,102,114,114,114,114,114,114,114,114,114,96,96,96,96,96,96,96,96,78,78,78,84,84,84,84,84,84,84,84,95,95,95,95,95,95,95,99,99,99,99,99,99,99,99,99,99,115,115,115,115,115,115,115,115,115,115,97,97,97,97,97,97,108,108,108,108,108,108,108,108,108,108,108,130,130,130,130,130,130,130,130,130,130,130,128,128,128,128,128,128,128,128,128,128,114,114,114,114,114,114,114,114,114,114,114,104,104,104,104,104,92,92,92,92,92,92,92,92,92,83,83,83,83,80,80,80,80,80,80,80,80,114,114,114,114,114,114,114,114,114,114,114,114,114,122,122,122,122,122,122,122,122,122,115,115,115,115,115,115,115,115,115,94,94,94,94,94,82,82,82,82,82,82,82,82,105,105,105,105,105,105,105,110,110,110,110,110,110,110,108,108,108,108,108,108,108,108,114,114,114,114,114,114,114,114,114,114,107,107,107,107,107,107,107,107,94,94,94,94,94,94,94,94,94,94,94,87,87,87,87,87,87,52,52,52,52,52,52,109,109,109,109,109,109,109,109,109,109,109,109,120,120,120,120,120,120,120,120,120,99,99,99,99,99,99,99,99,99,99,99,100,100,100,100,100,100,100,117,117,117,117,117,117,117,117,117,117,114,114,114,114,114,114,114,95,95,95,95,95,95,80,80,80,80,80,80,80,94,94,94,94,94,94,94,94,94,94,94,114,114,114,114,114,114,114,114,114,114,113,113,113,113,113,113,113,113,102,102,102,102,102,86,86,86,86,86,86,86,89,89,89,89,89,89,89,116,116,116,116,116,116,116,116,116,100,100,100,100,100,100,100,73,73,73,73,73,87,87,87,87,87,121,121,121,121,121,121,121,121,121,121,121,121,121,121,133,133,133,133,133,133,133,133,133,133,133,133,135,135,135,135,135,135,135,135,135,135,125,125,125,125,125,125,125,125,125,125,125,95,95,95,95,95,101,101,101,101,101,101,101,101,109,109,109,109,109,108,108,108,108,108,108,108,108,108,108,108,108,108,121,121,121,121,121,121,121,121,121,121,112,112,112,112,112,112,112,112,111,111,111,111,111,111,111,111,111,109,109,109,109,109,109,109,79,79,79,75,75,75,75,75,75,75,75,102,102,102,102,102,102,102,102,107,107,107,107,107,107,107,107,107,115,115,115,115,115,115,115,85,85,85,85,85,85,93,93,93,93,93,93,93,93,93,121,121,121,121,121,121,121,121,121,121,121,110,110,110,110,110,110,110,110,74,74,74,74,74,104,104,104,104,104,104,104,104,104,104,104,104,128,128,128,128,128,128,128,128,97,97,97,97,101,101,101,101,101,101,101,101,127,127,127,127,127,127,127,136,136,136,136,136,136,136,136,136,136,136,113,113,113,113,113,97,97,97,97,97,97,97,97,97,97,116,116,116,116,116,116,116,116,116,116,116,127,127,127,127,127,127,127,127,127,127,127,127,127,128,128,128,128,128,128,128,128,112,112,112,112,112,112,112,112,112,117,117,117,117,117,117,117,117,117,117,117,103,103,103,103,103,66,66,66,66,93,93,93,93,93,93,93,93,121,121,121,121,121,121,121,121,121,121,104,104,104,104,104,67,67,67,67,70,70,70,70,70,70,70,90,90,90,90,90,90,90,63,63,63,55,55,55,55,55,55,101,101,101,101,101,101,101,101,101,101,98,98,98,98,69,69,69,69,69,69,110,110,110,110,110,110,110,110,110,110,110,100,100,100,63,63,63,63,63,63,63,63,91,91,91,91,91,91,91,84,84,84,84,84,103,103,103,103,103,103,103,103,127,127,127,127,127,127,127,127,127,127,127,127,112,112,112,112,61,61,61,61,61,61,61,97,97,97,97,97,97,97,97,104,104,104,104,104,104,104,104,104,104,89,89,89,89,89,89,99,99,99,99,99,99,99,99,99,123,123,123,123,123,123,123,123,123,108,108,108,108,108,96,96,96,96,96,96,96,96,96,96,97,97,97,97,97,97,62,62,62,51,51,51,51,51,84,84,84,84,84,84,79,79,79,79,132,132,132,132,132,132,132,132,132,132,132,41,41,41,41,41,41,41,41,41,113,113,113,113,113,113,113,113,113,113,100,100,100,100,100,100,100,100,100,83,83,83,83,83,83,83,81,81,81,81,81,81,81,81,81,81,81,81,81,70,70,70,70,89,89,89,89,89,89,89,89,89,125,125,125,125,125,125,125,125,125,125,106,106,106,106,106,106,106,106,89,89,89,89,89,89,89,89,89,87,87,87,87,74,74,74,74,74,74,74,74,74,74,96,96,96,96,96,96,62,62,62,53,53,53,53,53,53,53,81,81,81,81,81,81,81,98,98,98,98,98,98,98,98,98,98,93,93,93,93,93,93,104,104,104,104,104,104,104,104,104,104,99,99,99,99,99,99,52,52,52,52,80,80,80,80,80,80,80,103,103,103,103,103,103,116,116,116,116,116,116,116,116,116,116,116,109,109,109,109,109,84,84,84,84,84,84,84,84,100,100,100,100,100,100,100,100,108,108,108,108,108,108,108,108,108,108,108,109,109,109,109,109,109,109,109,90,90,90,90,90,96,96,96,96,96,96,96,96,96,96,96,96,88,88,88,88,88,47,47,47,47,47,87,87,87,87,87,87,86,86,86,86,86,86,103,103,103,98,98,98,98,98,98,98,98,98,98,98,98,98,134,134,134,134,134,134,134,106,106,106,106,106,106,106,106,106,106,106,106,133,133,133,133,133,133,133,133,133,133,121,121,121,121,121,121,121,121,121,121,100,100,100,100,100,100,77,77,77,77,77,77,94,94,94,94,94,94,94,94,94,94,83,83,83,83,48,48,48,48,67,67,67,67,97,97,97,97,97,97,97,97,97,97,97,106,106,106,106,106,106,106,106,91,91,91,91,91,91,91,93,93,93,93,93,93,93,93,93,101,101,101,101,101,101,101,101,123,123,123,123,123,123,123,123,123,123,123,123,139,139,139,139,139,139,139,139,139,139,108,108,108,108,108,108,75,75,75,75,107,107,107,107,107,107,107,107,107,107,110,110,110,110,110,103,103,103,103,103,103,103,103,103,103,104,104,104,104,104,51,51,51,51,83,83,83,83,83,83,83,111,111,111,111,111,111,111,111,111,111,111,84,84,84,87,87,87,87,87,87,87,87,96,96,96,96,96,91,91,91,91,91,91,91,91,110,110,110,110,110,110,110,110,110,109,109,109,109,109,109,109,109,109,123,123,123,123,123,123,123,123,123,100,100,100,100,100,100,100,63,63,79,79,79,79,79,79,98,98,98,98,98,98,98,98,98,98,129,129,129,129,129,129,129,129,129,124,124,124,124,124,124,124,124,111,111,111,111,111,111,111,111,121,121,121,121,121,121,121,121,121,113,113,113,113,113,113,113,113,112,112,112,112,112,112,112,112,106,106,106,106,106,106,106,106,103,103,103,103,103,103,103,103,103,111,111,111,111,111,111,111,104,104,104,104,104,104,104,104,104,104,104,104,104,104,100,100,100,100,100,100,59,59,59,59,59,59,59,59,59,59,59,59,59,131,131,131,131,131,131,131,131,96,96,96,96,96,55,55,55,107,107,107,107,107,107,107,107,107,121,121,121,121,121,121,121,121,121,121,107,107,107,107,107,107,107,107,107,107,91,91,91,91,91,45,45,45,86,86,86,86,86,86,86,86,86,107,107,107,107,107,107,107,107,130,130,130,130,130,130,130,130,130,130,130,130,130,118,118,118,118,118,118,118,118,107,107,107,107,107,107,107,118,118,118,118,118,118,118,118,118,118,118,120,120,120,120,120,120,120,120,105,105,105,105,105,105,105,105,105,82,82,82,82,62,62,62,62,62,62,62,97,97,97,97,97,97,97,97,97,110,110,110,110,110,110,110,102,102,102,102,102,102,102,102,107,107,107,107,107,107,128,128,128,128,128,128,128,128,128,128,128,123,123,123,123,123,123,123,123,123,89,89,89,73,73,73,73,73,73,73,73,100,100,100,100,100,100,100,100,86,86,86,90,90,90,90,90,90,90,90,90,90,90,99,99,99,99,99,99,99,99,99,90,90,90,90,90,90,90,82,82,82,82],["bienvenidos","si","recordado","tras","cuartos","van","banco","hacienda","rey","emérito","bueno","si","colchonero","menos","acostumbrado","disgustos","faella","carrá","jn","amor","empezar","cachitos","amor","rascar","empezar","quedan","tres","horas","canciones","buenas","chistes","malos","actuación","contiene","latigazos","cervicales","32","colisión","cadena","oración","pagana","rezado","mucha","ms","oración","pagana","rezado","muchas","veces","gustaría","reconocer","aquel","año","cádiz","descendió","creemos","bisbal","ver","llegado","momento","abrir","melón","muchacho","canta","raro","ana","zzoilo","amour","remix","sube","tema","redes","escucha","publica","versos","twitter","propone","colaboración","felices","zzoilo","pasó","karaokes","tener","éxito","sonando","medio","mundo","letra","contiene","palabras","amor","idiomas","sl","navaja","suiza","ligar","erasmus","tamante","superman","2022","youtuber","míster","jágger","recordó","letra","canción","palabra","palabra","claro","david","doble","identidad","noche","estrella","pop","día","marca","colonias","ágata","lys","abrió","mentalidades","blusas","braguetas","españa","posfranquismo","hi","año","75","actuación","debió","traer","mucha","cola","versión","adultos","personaje","blake","edwards","podría","titularse","manguera","rosa","camilo","sesto","robando","protagonismo","tenderos","feria","artesanía","iberoamericana","siglo","xv","españoles","mismo","peinado","robado","puesto","entero","señor","canta","bonito","si","piensa","comprar","importaría","apartarse","escena","anterior","utilizado","dobles","riesgo","dónde","íbamos","encontrar","bigotillo","espera","parece","quedado","ganas","alguna","razón","conteniendo","respiración","casa","favor","pasen","asistencias","cachito","anterior","sudamericanos","podían","poner","españa","pies","jugar","delanteros","pandereta","trabajo","sencillo","acaba","dar","tecla","grupo","llaman","alberto","casero","orquesta","gente","joven","posponiendo","cambio","nombre","psoe","ley","trans","ey","años","conservatorio","gri","entellas","luna","toro","tony","lopez","voz","oro","sobran","presentaciones","toro","enamorado","luna","decorados","debió","entender","bien","veis","imprescindible","ponerse","reguetón","tica","ratillo","hace","chacachá","entonces","podemos","llamarlo","tren","altas","prestaciones","extremadura","aaa","pad","olino","radio","orquesta","movimientos","parecidos","tiro","liro","seguidores","bolsonaro","llaman","marcianos","frenar","lula","míticos","kin","laría","voz","manolo","gas","batuta","recuperaron","temones","vaca","lechera","river","lando","viejo","rock","mayte","river","hermana","mike","rios","luego","ambos","hijos","rock","debieron","traducir","letra","google","translate","época","collins","phil","sino","diccionario","mejor","vamos","genuinas","fuentes","rock","lee","lewis","eat","balls","fire","di","año","dijimos","adiós","último","grande","edad","dorada","rock","and","roll","momento","sacar","cerillas","quemar","piano","comedor","vale","suegros","fanáticos","killer","je","sigue","sputnik","st","century","boy","mundo","favorece","gato","electrocutado","cabeza","imagen","mensaje","iban","sobrados","pp","samantha","hudson","musicón","sara","socas","aquella","batalla","gallos","tampoco","paseo","trilingúe","canalla","raval","final","feliz","hit","grupo","mereció","reconocimiento","oh","shie","cualquier","caminado","centro","barna","oído","cantinela","comercial","cerveza","beer","lio","aragón","batita","ron","dedicado","médicos","familia","momento","dando","alcohol","pasarse","apología","pimplar","preguntas","copa","mano","nevadas","volcanes","inundaciones","maría","jiménez","hace","tiempo","convivimos","fuerzas","naturaleza","si","trabajara","oficina","llamaría","despecho","canción","juan","gabriel","contagiosa","varias","mutaciones","covid","mexicano","camarero","viene","arriba","después","cerrar","karaoke","especialista","cantar","canciones","bonitas","poniendo","cara","abrir","carta","iberdrola","año","varios","artistas","grabaron","versión","benéfica","celebrar","75","cumpleaños","víctor","manuel","22","grupo","schródinger","mocedades","consorcio","mismo","tiempo","mo","canción","perfecta","responder","telefonillo","digan","sigue","canción","española","puntuada","eurovisión","letra","parece","escrita","cul","letra","parece","escrita","cuatro","manos","nicolás","copérnico","tamara","falcó","fabio","capello","siempre","as","traje","chándal","tranquilos","sólo","efecto","cámara","podéis","beberos","ch","bm","ms","voz","drre","voz","directo","si","propuesto","empezar","año","comiendo","piezas","fruta","día","sólo","quedan","sobrino","gran","manolo","caracol","mejoró","canción","original","cecilia","himno","interflora","señora","rocio","jurado","valga","redundancia","rocío","cumplía","ley","transparencia","23","años","aproba","rito","fernández","mochila","azul","queriendo","revelar","tiempo","2015","grabó","canción","debajo","sombrero","53","años","canción","40","mochila","suponemos","hernia","discal","tipo","kiko","gusta","pongan","junto","caña","2022","cayeron","muros","metacrilato","sólo","llevamos","mascarilla","transporte","orgías","atracos","cierto","echamos","menos","hora","musa","carmel","primera","amy","winehouse","pinta","ser","clase","pádel","rehab","an","r8b","británico","blanco","imperecedero","porridge","tetreimt","soportaba","lluvia","claramente","soul","si","sólo","pizca","clase","aplicarle","ley","celaá","ve","sty","springfield","preacher","man","nana","duermen","gemelas","ex","obispo","solsona","aretha","franklin","hija","predicador","rechazó","grabarla","después","escuchar","temazo","terminó","haciendo","propia","versión","veleta","franklin","primeros","éxitos","internacionales","reggae","desmond","habla","ob","di","ob","da","do","diga","llamaba","luces","programa","llamaba","luces","noche","pues","cosa","howwstoppers","ve","nothing","but","house","party","raro","ver","actuar","tanta","coordinación","izquierda","dos","miembros","hermanos","estrella","atlantic","records","solomon","burke","puro","northern","soul","amenizando","zona","jardinería","leroy","merlin","enemigos","titularon","dónde","versión","hit","infravalorado","cantantes","soul","tex","eligió","mal","archienemigo","james","brown","sólo","sedujo","novia","disparó","club","ctor","explosion","feo","chaval","faldas","loco","banda","cafre","sinvergúenza","garage","punk","patrio","hipervitaminada","canción","re","one","ugly","child","larry","bright","feos","pleno","derecho","guionistas","vamos","ofendernos","ahora","seguimos","eslabón","perdido","led","zeppelin","homo","eructus","sevilla","inventó","movimiento","body","positive","aunque","probablemente","sepa","significa","así","habitantes","aldea","astérix","obélix","si","cantimploras","llevaran","rebujito","confundáis","john","wayne","enemigos","enemigos","john","wayne","indios","canción","doblemente","cinéfila","centrada","john","wayne","inspirada","frase","chaqueta","metálica","cachitos","devotos","hecho","cientos","veces","camino","josele","santiago","hoy","megaestructuras","tupé","loquillo","años","loco","escoltado","sabino","cayó","marmita","rock","sigue","alli","entonces","isabel","il","murió","saber","nietos","murcia","hacen","harry","parezca","santo","oes","silencio","roe","leyenda","primer","single","cambiado","menos","presentador","programa","jordi","hurtado","únicos","héroes","marvel","todavía","sobreexplotado","manolo","gana","disgustos","primero","carro","ahora","wilma","tampoco","abre","puerta","atención","sorprendentes","voces","coro","guitarristas","castrati","ahora","sabéis","temperatura","exacta","escuela","calor","fieles","seguidores","doctrina","auserón","pop","tol","santiago","teodoro","garcía","egea","empezaron","triunfando","huesos","aquí","precuela","flaca","jarabe","palo","quimi","portet","manolo","garcía","amarraron","proyecto","puerta","baile","arrancar","último","fila","dad","jardín","casa","talking","heads","madrileños","grupos","infravalorados","movida","casa","hoy","día","letra","pertenece","género","ciencia","ficción","itam","go","14","daldas","mojadas","guitarra","eléctrica","rafa","callejo","fundador","banda","coautor","canción","fallecido","2022","río","bravo","valla","estrecho","canal","mancha","atlántico","tema","lleva","siglos","plena","actualidad","estribillo","guarda","sorprendente","parecido","canción","pensamiento","banda","stephen","stills","manassas","ochenta","década","pianos","cola","servían","apoyar","sintetizador","bien","bromita","devolvedle","rafa","gafas","ver","lejos","ana","nuria","dimas","víctor","cucart","hermanos","residentes","gandía","récord","asistencia","catequesis","español","falta","palabra","definir","sensación","grima","ternura","grímural","canción","compositor","cubano","rené","touzet","versiones","fraude","mascarillas","elsa","pareja","valerio","lazarov","harían","falta","ef","tiovivos","marearla","si","azafata","monta","show","pleno","vuelo","momento","empezar","sospechar","va","mal","as","oundations","1ld","up","buttercup","arriesgadísima","realización","combina","plano","secuencia","contrapicado","plano","papada","si","quieres","conservar","intacta","vajilla","jamás","sientes","trombonista","mesa","tanxugueiras","hacía","andrés","do","barro","vuelto","logró","cuatro","números","cantando","gallego","dictadura","gracias","coreografías","especialidad","versiones","guatequeras","folk","iberoamericano","madre","joaquín","prat","molaban","décadas","después","latinos","vengarían","enviándonos","reguetón","jpo","latidos","virgen","macarena","casi","seguros","asuntos","ligar","hembras","serranas","lleva","virgen","macarena","bastante","lío","año","mudanza","queipo","llano","queda","rastro","grupo","interne","algoritmo","programado","ol","debe","ser","far","traumas","ntores","híspalis","1e","falte","ná","primera","comunión","macarena","olona","rena","olona","sevillanas","sostienen","televisor","aún","podemos","meter","25","dentro","chúpate","progreso","desafortunadamente","pascual","gonzález","compositor","fundador","grupo","faltará","año","sol","méxico","contribuyó","bastante","calentamiento","global","chavalería","teclista","tierra","nadie","toni","cantó","banda","astley","ver","gonna","give","you","up","tema","lleva","15","años","meme","internet","llama","rickroll","aparece","menos","esperas","año","político","llevan","rick","astley","ahora","mismo","única","fuente","estabilidad","social","reino","unido","portada","único","álbum","iba","exactamente","ropa","titulaba","pienso","quedarme","soltero","mal","iba","mérito","lograr","one","hict","wonder","llamándote","carlos","pérez","aspecto","haber","liderado","fuga","modelo","rdaliso","sé","realidad","esperando","cantase","pido","luna","demasiado","pedir","cenas","nochevieja","respira","calma","tensa","historia","interminaaaaaaaablececee","nananaaaanananadá","español","cantarse","tararea","pasado","verano","murió","director","película","asi","año","diremos","molaba","libro","right","between","eyes","entrecejo","cargo","grupo","wax","cera","himno","centros","estética","80","mismo","oucfe","valía","igual","fundar","startup","informática","banda","éxito","letra","dice","bruce","springsteen","coches","chicas","referiría","fútbol","paddy","mcaloon","dijo","mismo","mejor","compositor","reino","unido","así","luis","padrique","hombreras","mechas","americanas","remangadas","única","forma","ir","ochenteros","disfrazarse","naranjito","pasaron","boy","band","pionera","filfs","manual","si","quedado","claro","40","años","después","duran","duran","duran","encendimos","fuego","así","llegué","argumentario","completo","sesión","control","letra","incluye","referencias","118","políticos","artistas","eventos","canta","siguiendo","índice","larousse","joel","hoy","parece","señor","sigue","vivo","sólo","pueden","decir","60","personas","menciona","abre","telón","aparece","paella","enorme","trocito","minúsculo","carne","medio","cómo","llama","cantante","rótulo","anterior","cobramos","dictó","cuñado","cardigans","rebequitas","grupo","favorito","madre","refresca","abba","roxette","europe","cardigans","buenos","suecos","montar","grupos","vagos","montar","muebles","crees","cena","familiar","tensa","piensa","mesa","gallagher","ponen","cuchillos","plástico","liam","introdujo","pop","postura","jubilado","opinando","obra","vía","pública","batería","acaba","pillar","chiste","paul","mccartney","si","suenan","llegaron","tarde","britpop","demasiado","blanditos","indie","rsailor","ur","to","floor","pa","así","fiestas","nochevieja","ley","antitabaco","mayor","éxito","imbruglia","realidad","versión","desconocida","banda","estadounidense","ednaswap","midge","líder","ultravox","veis","domina","arte","falsete","santiago","abascal","escocés","marca","swatch","introdujo","canción","campaña","entonces","funcionó","reloj","familia","himnos","lgtbi","tema","junto","quién","importa","pelín","hartura","algoritmo","sabe","gusta","gusta","mundo","raphael","vuelve","loco","édith","piaf","cambió","letra","convirtió","vals","canciones","famosas","foule","guitarristas","pioneros","dar","espalda","público","planetas","posproducción","engañe","fallecido","2022","manolo","sanlúcar","guitarristas","grandes","guitarra","cabía","banda","completo","capaz","tocarla","bien","sentaba","piano","grecas","amando","locamente","carrera","meteórica","luces","ve","bastantes","sombras","iconos","vivir","vida","locamentí","realidad","historia","va","música","mujeres","desigualdad","además","histórico","guitarrista","sanlúcar","barrameda","dio","mundo","seis","amigas","íntimas","petaron","rubor","si","quitáis","cámara","lenta","podéis","ver","coreografía","melody","niños","preocupéis","cuanto","terminen","actuación","reyes","magos","ponen","regalos","pelo","amina","simboliza","año","lucha","alí","mustafá","cegado","velo","machismo","intolerancia","garlochí","variante","sarandonga","sino","término","caló","decir","corazón","si","anne","igartiburu","criado","triana","despediría","mañana","garloch","portento","vocal","apodada","voz","cristal","copla","falleció","2022","feria","fiera","escenarios","hecho","inspiró","peinado","teen","wolf","tercer","padre","rumba","siempre","salía","piano","conoce","ganas","bailar","acumuladas","arriba","voy","mañana","franco","fear","josé","antonio","hombre","blandengue","servido","campaña","ministerio","igualdad","ver","cuándo","toca","mandanga","herencia","fary","infinita","tampoco","ho","tobago","sonó","despedida","albert","rivera","bufete","abogados","trabaj","mezclar","ropa","calle","ropa","casa","inventó","rosalía","anskiy","elardor","hi","aque","preventivo","urss","después","año","pensándolo","respuestas","ninguna","buena","mn","poner","resistiré","salir","balcón","aplaudir","militares","recuperar","lema","transición","follar","mundo","va","acabar","sacar","armario","camisetas","pacifistas","morir","contento","razón","82","negarlo","seguir","viviendo","resto","borregos","creen","medios","manipuladores","magia","directo","encargaba","directamente","disfrazado","tamariz","difunto","vocalista","juan","antonio","canta","reapareció","genial","surrealista","rap","40","limones","si","parece","pagamos","vuelo","rosalía","miami","salir","30","segundos","gestión","recursos","llama","ginebras","vayan","vivir","kardashian","pondremos","versiones","paco","carmela","morro","echaron","versión","aplicado","resto","temas","musicales","personales","políticos","pelo","afinación","parece","manel","navarro","coral","alonso","punki","80","añ","galicia","abel","caballero","conciertos","hacian","día","existía","luz","creó","creadores","vigueses","antón","reixa","co","llevando","absurdo","concepto","economía","sumergida","luego","sgae","descubriría","economía","sumergida","posible","cantó","echaron","moló","movida","viguesa","grandes","compositores","patrios","mismo","sonaba","feria","hilo","musical","dentista","primer","disco","llamó","juan","carlos","calderón","presenta","juan","carlos","calderón","lba","bien","autoestima","in","paulyoung","ve","ls","in","air","cantante","parece","rubio","cruz","raya","veis","locos","tan","seguros","canción","pepínaco","hacían","música","disco","vestidos","contable","70","miguel","gallardo","propio","nombre","indica","ofreciendo","viaje","cuenca","disculpe","momento","voy","consultar","disponibilidad","autor","éxito","playa","lejos","zona","confort","ocurre","esquimales","blanco","emilio","josé","conoce","cientos","palabras","decir","empalagar","apuntad","ingredientes","pastel","carne","vozarrón","épica","teatralidad","sudor","chorreras","videoclip","tema","dirigido","michael","bay","supuesto","incluye","persecuciones","helicóptero","si","mejor","clima","británicos","grupo","hermanos","café","quijano","medio","bee","gees","aparecido","sueños","fijado","mejor","quique","san","francisco","pop","boloñés","puede","ser","tan","bueno","salsa","leyenda","música","italiana","cultivó","éxito","look","llevo","15","días","durmiendo","ford","fiesta","coreografía","viene","recordarnos","versión","marinaio","gianni","morandi","gran","voz","cantante","familiarizada","sensación","mareo","víctor","abundancia","banda","enteramente","h7","ompuesta","extras","miami","vice","compuesta","ia","contabilidad","tras","perder","cuenta","cubatas","pedido","karaoke","íbamos","poner","gasolina","carísima","despiste","traje","peinado","raya","realidad","discurso","mismo","daddy","yankee","francisco","eligió","nombre","artístico","buenos","aún","pillados","llegaron","primero","hotmail","mitad","señor","mitad","correcaminos","centauro","marca","acme","después","versión","junto","ojete","calor","imposible","escucharla","echar","menos","calcetín","ojos","bilirrubina","5d","guerra","asise","hacen","niños","república","dominicana","bien","llegado","momento","huir","primo","soltero","año","apuntado","clases","salsa","padre","salsa","intelectual","además","gran","cantante","blades","probablemente","mejor","contante","himno","minutos","forma","parte","siembra","disco","vendido","historia","salsa","viral","covid","después","covid","claro","fans","debatían","admiración","envidia","producía","comprobar","si","terraza","necesitaron","pandemia","mundial","dar","pelotazo","almeida","bastó","saque","honor","paulina","llevando","extremo","clásica","pesadilla","salir","casa","pantalones","interpretación","quitarse","sombrero","si","veis","cantante","tranquilos","orden","lleva","traje","camuflaje","puso","noelía","llamarse","chayanna","dar","demasiadas","pistas","éxito","fugaz","efimero","suponemos","ahora","vive","preguntándose","si","alguien","llamará","pasado","20","años","seguimos","pillar","metáfora","aclararnos","quiere","ride","bike","aquel","verano","trabajaron","camarero","feria","abi","excelente","resumen","filosofía","colegio","mayor","ahuja","bastante","mejor","cantar","coro","ventanas","hacer","dúo","pajares","payaso","cómico","cantante","hit","primer","disco","romance","ajo","ahora","psicólogos","instagram","pensáis","mn","niño","interior","adorado","fe","tambalea","tampoco","fieis","primera","impresión","menos","así","veían","españa","ganar","eurobasket","2022","rebruno","quiero","hacer","pipí","papá","11d","id","preocupéis","tele","pública","respeta","vejigas","aunque","anuncios","nano","banda","vid","gnomo","efectivamente","david","hierbas","pueden","curar","tarro","cogiste","curiosidad","claudio","biern","walt","disney","español","paz","descanse","debió","ver","naves","llamas","allá","orión","hermanos","hicieron","sintonía","don","quijote","atrevieron","musical","xanadú","fantasía","protagonizó","olivia","newton","john","participó","banda","sonora","muchas","cosas","abad","1981","ho","racio","pinchadiscos","aunque","perdimos","año","siempre","quedará","música","pelis","marioneta","tras","fallecimiento","descubrieron","muchísimo","grease","especialmente","musical","españa","causaba","furor","señor","provincias","ferretero","finde","77","clara","necesidad","uso","generoso","discotecas","corta","rollo","max","jugaba","figura","macho","alfa","ironía","pillaba","época","ver","tal","mientras","dimensión","triana","canta","yl","abre","puerta","niña","forrest","gump","historia","arte","música","peli","salen","dalí","bowie","coco","chanel","coro","500","16","virginidad","miguel","bosé","idación","tony","ma","manero","ersexy","girl","20","años","después","tema","saliera","anuncio","lb","lanzándolos","fama","barceloneses","dicho","adéu","sonido","disco","funk","ido","refinando","paralelo","refinamiento","barbero","yz","aquí","padres","italo","disco","perpetuando","tópico","español","ladrón","678","casos","aislados","hermanos","bionda","chaquetilla","masterchef","carmelo","falleció","año","tarde","produjeron","vamos","playa","dinero","dos","mejores","uooos","historia","música","vaya","apoyo","currantes","vez","poquito","ryanair","vueling","así","recibido","in","navy","presupuestos","año","profe","fama","casi","seguro","siquiera","fama","bailar","delia","pasó","anonimato","fama","tras","salir","anuncio","tabaco","pasaba","anonimato","fama","fallecida","año","irene","cara","dejó","dos","temazos","oscar","fama","flashdance","atrevida","ignorancia","algún","panfleto","definieron","transformista","supremacista","asturiano","frioleros","mundo","menos","reconocemos","superior","reiréis","postura","ángel","beato","aguanta","terremotos","magnitud","españoles","cantando","30","año","igual","sirena","nadas","versión","original","alemán","globos","rojos","final","mismo","apocalipsis","nuclear","nena","llaman","kiss","fm","plan","dorado","pensiones","canciones","encapsulan","tiempo","lugar","delicia","diferenciarse","espontáneos","movie","ponían","mechas","menos","nervioso","vince","clarke","ex","depeche","mode","aprovecha","play","back","tocar","temas","ismael","serrano","vocalista","andy","bell","usa","coreo","dúo","dinámico","junco","dobla","siempre","sigue","pie","aquí","colgado","originalmente","supremes","hoy","canta","centros","médicos","comunidad","madrid","triunfó","kids","in","america","teloneó","michael","jackson","dos","datos","seguramente","relacionados","minnelli","sing","my","mind","ans","perderá","cabeza","siempre","sabremos","encontrar","portento","mujer","mirando","público","concha","velasco","agradecida","emocionada","canción","igual","notáis","produjeron","pet","shop","boys","saben","siempre","hacen","falta","ahora","mismo","suburbia","habla","parte","disturbios","época","thatcher","versión","original","liz","truss","gorra","trumpista","confunda","chris","lowe","mueve","invadir","capitolio","single","llamó","chica","lío","satán","lógicamente","convirtieron","grupo","culto","momento","futurista","hoy","puede","verse","futuro","podemos","flores","mo","maravillaía","así","españoles","pensando","luz","comida","alquiler","hipoteca","2023","podéis","probar","hacer","último","polvorón","bastante","mejor","pamplona","comprar","rollo","jovanotti","rapero","clásico","bajada","pantalones","toda","regía","visto","desaparecer","dinosaurios","jordi","hurtado","fondo","flipando","príncipe","bel","air","darle","puñetazo","nadie","sobrino","peret","saboreó","géneros","ser","rumbero","época","menos","complejos","aquí","veis","rishi","sunak","mujer","dijo","llevaba","residencia","fiscal","reino","unido","mismo","mensaje","ne","quitte","pas","22","sensibilidad","baguette","dm","ubleyou","ase","don","go","cec","viene","productores","clivillés","cole","sino","helado","preferido","cookies","cream","ve","light","aquellas","discotecas","todavía","vemos","clases","zumba","estrés","postraumático","ría","jesús","acordeón","pajaritos","claro","acordeón","apuesta","arriesgada","pensar","única","competencia","chanquete","supuesto","peli","tituló","pajaritos","dirigió","hitchcockito","lógico","coreografía","caso","basada","artes","marciales","inventadas","traía","consigo","agradable","olor","gimnasio","igaboys","om","boom","boom","boom","si","vais","hacer","coreografía","ojo","vecinos","esperan","clase","aeróbic","horas","vengaboys","viene","español","decía","siempre","venga","hacer","vengadores","puede","venga","cosa","bien","sabe","ben","affleck","jlo","garantiza","propósito","estrella","año","nuevo","gracias","dieta","cucurucho","demostrado","llega","poderío","latino","importante","leer","cosas","firmarlas","voz","hace","coros","jennifer","lopez","parece","muchísimo","jennifer","lopez","uh","eh","samantha","sorpresa","rótulo","hace","rato","coña","eh","mola","música","entiende","perfectamente","disfraces","ardilla","pp","antha","hudson","masiado","coño","pedido","pedro","sánchez","digamos","subida","culpa","guerra","ucrania","izquierda","derecha","veis","postura","tan","sólidamente","definida","gobierno","respecto","sahara","simio","contagioso","my","viruela","mono","coreografía","hizo","llorar","darwin","2002","pronto","saber","canción","hablaba","corinna","larsen","juzgado","corazón","civera","órdenes","detención","llevan","coreografía","id","civera","detengan","21","años","después","trata","querer","pode","azúcar","tan","moreno","ocurre","andy","lucas","seguimos","saber","quién","quién","sigue","divertido","escucharla","alguna","curiosamente","año","nochevieja","caído","saturday","night","coreografía","sigue","instalada","alguna","parte","memoria","justo","lado","teléfono","fijo","padres","mula","abierta","quiero","jóvenes","guapos","populares","rimas","consonantes","parecía","plan","perfecto","embargo","fulgor","extinguió","tiempo","va","pasar","bengalas","yote","dax","jw","perra","lorazón","vimos","aquel","verano","dependientes","territorio","vaquero","corte","inglés","encuentro","dos","culturas","volvería","ser","tan","estrecho","dos","años","después","cumbre","azores","aaa","nivel","inglés","ketchup","si","entonces","existido","tiktok","hoy","dominarían","mundo","prohibida","colegios","católicos","hondureños","aseguraban","invitación","ser","hereje","mayonesa","chocolate","comido","cosas","peores","llegar","casa","después","fiesta","nochevieja","mayonesa","cortó","vaqueros","podemos","decir","mismo","famosísimo","baile","consiste","anexionarse","pareja","putin","península","mar","negro","aunque","fijando","tema","descarado","plagio","llorando","banda","boliviana","kjarkas","relación","rufián","borrás","menos","roces","bastan","dos","acordes","cerebro","reproduzca","entera","canción","dificil","sacársela","luego","momento","sacar","versión","navideña","sabor","turrón","dirás","doble","negacionismo","venga","sabemos","mario","conde","dioni","luego","cortó","coleta","empezó","desubicarse","pasado","año","huracanes","aquí","eva","tiro","cámara","manera","hacer","chistes","gorro","juan","realizadores","respetan","realizadores","respetan","tiro","cámara","manera","hacer","chistes","gorro","juan","realizadores","respetan","mr","dejar","fábrica","coches","notaba","tubos","escape","iban","dar","problemas","mia","48","12","discos","llevan","dejado","fruncir","ceño","estrofa","quién","iba","saber","resto","canciones","iban","parecer","documentos","mejor","quedarse","entreespaña","marruecos","say","ahora","sólo","tocado","nota","ser","teclado","bueno","quín","sabina","to","caballeros","sabina","pactó","ladrones","hacerles","copla","cumplió","cgpj","gente","responsable","canción","versionado","hace","rato","évole","así","mandamos","disculpas","sinceras","joaquín","advertencia","llegado","momento","guardar","sidra","gaitero","sacar","kalimotxo","coherencia","honestidad","pinta","acabar","desembarcar","perla","negra","di","drogas","dentes","boikot","neras","vivir","dos","grandes","exponentes","punk","rock","nacional","homenajeando","padre","complejo","edipo","público","sólo","camiseta","platero","sabía","venía","tero","voce","cuerpo","fito","cabrales","peso","pesado","ligero","rock","español","llevaba","boina","usaba","micrófonos","villarejo","aún","honrado","20","años","después","separación","sigue","haber","sola","verbena","pueblo","platero","verdad","dorothy","rarísima","después","pegar","estirón","pilones","varios","pueblos","españa","hallado","restos","djs","negaron","pinchar","fiestas","sabes","cómo","llama","cantante","suaves","yosi","libertad","liando","pueblo","py","califato","córdoba","tomaron","nombre","probablemente","amor","cuero","incomprensible","negacionistas","usaran","tema","protestar","mascarillas","2017","unidos","vetó","entrada","pais","trump","podía","soportar","comparación","semejante","pelaso","qpolicia","quede","claro","canción","autoconsumo","potencial","adictivo","estribillo","debería","ser","catalogado","droga","dura","mari","carmen","patrona","verbena","cha","madre","juerguistas","españa","años","tratando","escribir","frase","perfecta","jamás","hen","lograremos","tan","eficaz","estribillo","ahora","localizado","prima","mari","carmen","hermano","ayuso","sabéis","publicidad","subliminal","época","canción","rudimentaria","country","nunca","volvió","ser","mismo","después","disco","lado","ponti","country","pared","sr","lao","maa","hermano","gran","wyomin","ua","já","wyoming","verdad","ff","doscientos","hitazos","grupo","inspiró","temas","ska","punk","fundadores","grupo","cantaban","coro","peque","siempre","dijo","llevadi","ef","siempre","dijo","llevado","fenómeno","fan","público","joven","aun","público","joven","aunque","pasarse","hispanoargentinos","trajeron","hedonismo","rock","talla","slim","fire","chiquillada","podéis","ver","ariel","rot","intentando","vender","país","educarlo","compramos","ahora","mira","nombre","speed","tampoco","original","euskadi","puestos","tópicos","haberse","llamado","abstinencia","suicidó","44","años","existía","024","recibe","300","llamadas","día","menos","mañana","domingo","mala","suerte","festivos","año","solo","judías","todas","legumbres","general","nubes","último","disco","disfrazado","star","wars","ángeles","leia","dioni","maestro","jedi","época","aún","pablo","escobar","chimberos","vacas","pueblo","escapao","menos","argumentario","defensa","macrogranjas","transitando","fina","línea","separa","danny","zuko","att","protagonista","peli","eloy","iglesia","olivia","newton","john","allá","mt","hace","falta","veas","boney","tigretó","mejores","fuentes","grasas","saturadas","infancia","free","nipple","bobby","farrell","lavado","menos","camisetas","iggy","pop","cosa","olvido","perdón","creativo","responsable","jingle","care","carrefoooou","medio","camino","lola","flores","beyoncé","inventó","arte","bailar","si","caminaras","brasas","incandescentes","2013","tina","ciudadana","suiza","allí","disfruta","paisajes","alpinos","régimen","fiscal","mente","canción","termina","ay","meo","coa","indiscutible","número","escala","pantene","solo","puesto","música","cuenta","atrás","planeta","contribuyeron","ingente","consumo","laca","mark","knopfler","hijo","reconocido","miliki","primer","sencillo","dire","straits","tocado","stratocaster","podría","hacer","punteo","memoria","pesar","título","canción","contiene","swing","steaqua","ll","barbie","gin","producto","danés","comido","muchas","veces","galletas","mantequilla","2023","canción","cumple","25","años","igual","jh","deberías","empezar","pensar","próstata","realidad","italiana","gala","tema","pionero","eurodisco","años","convertido","infalible","himno","estadio","vamos","va","quedando","sacad","mermelada","bulo","situaba","escondido","armario","pasó","década","fin","salió","si","cierra","ventanita","amor","preguntad","tamara","falcó","abre","nanosegundo","an","tan","agarrotado","rompas","corazón","pm","volantes","caribeños","mangas","baile","chayanne","arte","marcial","milenario","puedes","matar","segundos","mismo","queda","bien","pantalón","cuero","marrón","queda","bien","gloria","estefan","chapan","congresos","cardiología","aquí","pierden","papers","bailes","exagerados","jóvenes","felices","bañador","emojis","animados","aquí","nació","instagram","hedonista","parezca","canción","joya","filológica","cultura","garífuna","esclavos","caribe","ponen","indefectiblemente","todas","bodas","novio","rentabiliza","barra","libre","letra","reflexión","nietzscheana","espiritualidad","deseo","lacaniano","arrimar","cebolleta","vale","batería","imprescindible","aquí","visto","ordenador","sonría","mirando","rojo","ahora","vais","levantando","bailar","si","tiburón","vale","langostino","creereis","compuso","nelson","zapata","curraba","pfizer","ensayos","viagra","últimos","años","alguien","pronuncia","locomía","suele","referirse","gluten","sufrieron","homofobia","siquiera","salir","armario","años","españa","creía","moderna","hombreras","venido","bien","mantener","distancia","social","pandemia","espérate","descoyuntándose","realidad","toca","congas","padre","electro","mandinga","perteneció","estirpe","griots","ancestrales","narradores","historias","solo","marley","vive","reggae","jimmy","triunfó","solo","marley","vive","reggae","jimmy","triunfó","tras","protagonizar","película","jamaicana","harder","they","come","realizador","querido","tener","deferencia","aquellos","alturas","vais","revés","hagáis","bromitas","conocemos","humo","artificial","ol","gang","lebration","canción","vale","fiesta","pasar","aspiradora","importante","actitud","limpia","casa","pues","irá","fresquito","españa","camisa","buena","cadena","oro","luce","mitad","kool","banda","cantante","sino","bajo","juguete","obviamente","si","lleva","cadenita","man","sound","co","samba","mix","fíes","apariencias","sino","catar","democracia","sino","monarquía","absoluta","respeto","derechos","humanos","dos","esfuerzo","coreógrafo","inútil","única","forma","bailar","haciendo","trenecito","govern","gene","bajito","lleva","voz","cantante","lla","llamar","atención","ve","plumero","pa","pl","compositor","canción","padre","daft","punk","nadie","sabe","cúal","caso","podemos","asegurar","grabación","muerto","algún","loro","peret","seleccionador","equipo","nacional","rumba","catalana","séquito","verdaderos","gitanos","calle","cera","defensa","línea","trivote","atacante","guapo","envidiable","juego","piernas","freestyle","rumbero","si","llama","tangana","suben","mesa","primer","plato","mugs","gigantes","mr","wonderful","champagne","hace","falta","ser","feliz","señores","mirando","alter","ego","marc","parrot","terminó","cansarse","personaje","recuperó","artista","conocemos","significado","abanibí","sarandonga","sigue","misterio","insondable","ah","creemos","aboebé","listos","llaman","ahora","aceite","oliva","va","solos","casa","viéndonos","solos","va","entonces","dedicamos","víctor","tania","catedráticos","petardeo","tomarse","tan","serio","tomarse","serio","macaulay","hoy","día","igual","parece","ladrones","peli","mismo","pequeño","mother","know","sna","cachitos","roscón","reyes","siempre","suele","llevar","abba","dentro","canción","habla","joven","enamorada","hombre","mayor","día","oficina","sabe","madre","hija","eurovisión","da","tal","subidón","dan","ganas","tener","cientos","hijos","generación","bandini","mn","si","algún","retoño","fruto","noche","llamadle","peret","lola","propósito","año","recurrir","risa","menos","prisa","visa","ll","mundo","va","acabar"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>name<\/th>\n      <th>n_fichero<\/th>\n      <th>n_caracteres<\/th>\n      <th>distancia<\/th>\n      <th>word<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Contar ocurrencias de cosas es lo más básico.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"></span>
<span id="cb6-2">palabras_ordenadas_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtitulos_proces_one_word <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb6-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(word) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb6-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">veces =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb6-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(veces))</span>
<span id="cb6-6"></span>
<span id="cb6-7">palabras_ordenadas_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb6-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb6-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reorder</span>(word, veces), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> veces)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.legend =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ylab</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"veces"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xlab</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-6-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Y como el año pasado la palabra más común es “canción” . ¿Y si añadimos las 20 palabras como stopword, junto con algunas como [“tan”, “sólo”,“así”, “aquí”, “hoy”] . La tarea de añadir palabras como stopwords requiere trabajo, tampoco nos vamos a parar tanto.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">(add_to_stop_words <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palabras_ordenadas_1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb7-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb7-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(word) )</span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [1] "canción"  "si"       "año"      "años"     "después"  "menos"   </span></span>
<span id="cb7-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [7] "mismo"    "ahora"    "banda"    "grupo"    "versión"  "letra"   </span></span>
<span id="cb7-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [13] "ser"      "siempre"  "bien"     "cantante" "dos"      "momento" </span></span>
<span id="cb7-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [19] "parece"   "sigue"    "tema"     "ver"      "aquí"     "así"     </span></span>
<span id="cb7-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [25] "casa"</span></span>
<span id="cb7-9"></span>
<span id="cb7-10"></span>
<span id="cb7-11">to_remove <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(to_remove,</span>
<span id="cb7-12">                      add_to_stop_words,</span>
<span id="cb7-13">                      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tan"</span>, </span>
<span id="cb7-14">                      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sólo"</span>, </span>
<span id="cb7-15">                      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"así"</span>,</span>
<span id="cb7-16">                      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"aquí"</span>, </span>
<span id="cb7-17">                      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hoy"</span>,</span>
<span id="cb7-18">                      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"va"</span>))</span>
<span id="cb7-19"></span>
<span id="cb7-20"></span>
<span id="cb7-21">subtitulos_proces_one_word <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtitulos_proces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb7-22">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unnest_tokens</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">input =</span> texto,</span>
<span id="cb7-23">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">output =</span> word) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb7-24">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span> word <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> to_remove) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb7-25">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nchar</span>(word) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"></span>
<span id="cb8-2">palabras_ordenadas_2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtitulos_proces_one_word <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(word) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">veces =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(veces))</span>
<span id="cb8-6"></span>
<span id="cb8-7">palabras_ordenadas_2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reorder</span>(word, veces), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> veces)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.legend =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ylab</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"veces"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xlab</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>También podemos ver ahora una nube de palabras</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"></span>
<span id="cb9-2">pal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">brewer.pal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dark2"</span>)</span>
<span id="cb9-3"></span>
<span id="cb9-4">subtitulos_proces_one_word <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb9-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(word) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb9-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb9-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">wordcloud</span>(word, n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">random.order =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max.words =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">80</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors=</span>pal))    </span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-9-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="polémicos" class="level2">
<h2 class="anchored" data-anchor-id="polémicos">¿Polémicos?</h2>
<p>Creamos lista de palabras polémicas (se aceptan otras, podéis poner en los comentarios)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"></span>
<span id="cb10-2">palabras_polem <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"abascal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"almeida"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ayuso"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"belarra"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bloqueo"</span>,</span>
<span id="cb10-3">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"borbon"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"borras"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"calvo"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"celaa"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cgpj"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cis"</span>,</span>
<span id="cb10-4">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ciudada"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"comunidad"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"conde"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"constitucional"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"coron"</span>,</span>
<span id="cb10-5">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"democr"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"democracia"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"derech"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"díaz"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dioni"</span>,</span>
<span id="cb10-6">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"errejon"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"extremadura"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fach"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"falcon"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"feij"</span>,</span>
<span id="cb10-7">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gobierno"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"guardia"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"iglesias"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"illa"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ivan"</span>,</span>
<span id="cb10-8">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"izquier"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ley"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"madrid"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"manipulador"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"marlaska"</span>, </span>
<span id="cb10-9">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"marruecos"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"melilla"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"militares"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"minist"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"monarca"</span>,</span>
<span id="cb10-10">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"montero"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"negacion"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"negacionismo"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"olona"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"oposición"</span>,</span>
<span id="cb10-11">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"page"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pandem"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pp"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"principe"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"prisión"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"psoe"</span>,</span>
<span id="cb10-12">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"redondo"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"republic"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rey"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rufian"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rufián"</span>, </span>
<span id="cb10-13">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sabina"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sanchez"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sánchez"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sanz"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tezanos"</span>, </span>
<span id="cb10-14">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"toled"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"trans"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"transición"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tren"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ultra"</span>,</span>
<span id="cb10-15">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"vicepre"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"vox"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yolanda"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zarzu"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zarzuela"</span>)</span></code></pre></div>
</div>
<p>Y construimos una regex simple</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">(exp_regx <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"^"</span>,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(palabras_polem, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"|^"</span>)))</span>
<span id="cb11-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "^abascal|^almeida|^ayuso|^belarra|^bloqueo|^borbon|^borras|^calvo|^celaa|^cgpj|^cis|^ciudada|^comunidad|^conde|^constitucional|^coron|^democr|^democracia|^derech|^díaz|^dioni|^errejon|^extremadura|^fach|^falcon|^feij|^gobierno|^guardia|^iglesias|^illa|^ivan|^izquier|^ley|^madrid|^manipulador|^marlaska|^marruecos|^melilla|^militares|^minist|^monarca|^montero|^negacion|^negacionismo|^olona|^oposición|^page|^pandem|^pp|^principe|^prisión|^psoe|^redondo|^republic|^rey|^rufian|^rufián|^sabina|^sanchez|^sánchez|^sanz|^tezanos|^toled|^trans|^transición|^tren|^ultra|^vicepre|^vox|^yolanda|^zarzu|^zarzuela"</span></span></code></pre></div>
</div>
<p>Y nos creamos una variable para identificar si es palabra polémica</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">subtitulos_proces_one_word <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtitulos_proces_one_word <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb12-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">polemica=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(word, exp_regx))</span>
<span id="cb12-3"></span>
<span id="cb12-4"></span>
<span id="cb12-5">subtitulos_polemicos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtitulos_proces_one_word <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb12-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(polemica) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb12-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(n_fichero) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb12-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>()</span>
<span id="cb12-9"></span>
<span id="cb12-10">subtitulos_polemicos</span>
<span id="cb12-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [1] "00000018.jpg.subtitulo.tif.txt" "00000086.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [3] "00000100.jpg.subtitulo.tif.txt" "00000113.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [5] "00000127.jpg.subtitulo.tif.txt" "00000193.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [7] "00000209.jpg.subtitulo.tif.txt" "00000225.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [9] "00000242.jpg.subtitulo.tif.txt" "00000258.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [11] "00000289.jpg.subtitulo.tif.txt" "00000377.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [13] "00000475.jpg.subtitulo.tif.txt" "00000483.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [15] "00000522.jpg.subtitulo.tif.txt" "00000551.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [17] "00000563.jpg.subtitulo.tif.txt" "00000564.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [19] "00000566.jpg.subtitulo.tif.txt" "00000643.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [21] "00000706.jpg.subtitulo.tif.txt" "00000814.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [23] "00000846.jpg.subtitulo.tif.txt" "00000939.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [25] "00000945.jpg.subtitulo.tif.txt" "00000946.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [27] "00000997.jpg.subtitulo.tif.txt" "00001005.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [29] "00001006.jpg.subtitulo.tif.txt" "00001026.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [31] "00001030.jpg.subtitulo.tif.txt" "00001031.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [33] "00001061.jpg.subtitulo.tif.txt" "00001072.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [35] "00001112.jpg.subtitulo.tif.txt" "00001122.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [37] "00001132.jpg.subtitulo.tif.txt" "00001200.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [39] "00001231.jpg.subtitulo.tif.txt" "00001232.jpg.subtitulo.tif.txt"</span></span>
<span id="cb12-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [41] "00001276.jpg.subtitulo.tif.txt"</span></span></code></pre></div>
</div>
<p>Y podemos ver en el texto original antes de tokenizar qué rótulos hemos considerado polémicos y qué texto</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">subtitulos_proces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb13-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(n_fichero <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> subtitulos_polemicos) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb13-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(n_fichero) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb13-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(texto) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb13-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>()</span>
<span id="cb13-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [1] "bienvenidos si estáis todos es porque habéis recordado que tras los cuartos van tu banco hacienda y el rey emérito"   </span></span>
<span id="cb13-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [2] "la orquesta gente joven fue posponiendo el cambio de nombre como el psoe con la ley trans"                            </span></span>
<span id="cb13-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [3] "hace chacachá entonces podemos llamarlo y q tren de altas prestaciones de extremadura"                                </span></span>
<span id="cb13-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [4] "debieron traducir la letra con el google translate de la época el collins no phil sino el diccionario"                </span></span>
<span id="cb13-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [5] "de imagen y de mensaje iban sobrados pp como samantha hudson pero con musicón"                                        </span></span>
<span id="cb13-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [6] "rocío ya cumplía la ley de transparencia 23 años antes de su aproba"                                                  </span></span>
<span id="cb13-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [7] "en 2022 cayeron los muros de metacrilato ya sólo llevamos mascarilla en transporte orgías y atracos"                  </span></span>
<span id="cb13-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [8] "si tuviera sólo una pizca más de clase habría que aplicarle la ley celaá"                                             </span></span>
<span id="cb13-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [9] "es muy raro ver actuar con tanta coordinación a quienes están a la izquierda"                                         </span></span>
<span id="cb13-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [10] "como feos de pleno derecho por eso somos guionistas vamos a ofendernos un poco y ahora seguimos"                      </span></span>
<span id="cb13-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [11] "oes del silencio roe de leyenda"                                                                                      </span></span>
<span id="cb13-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [12] "la primera comunión 7 de macarena olona rena olona"                                                                   </span></span>
<span id="cb13-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [13] "pa así eran las fiestas de nochevieja a antes de la ley antitabaco"                                                   </span></span>
<span id="cb13-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [14] "midge fue líder de ultravox y como veis domina el arte o del falsete el santiago abascal escocés"                     </span></span>
<span id="cb13-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [15] "niños no os preocupéis que en cuanto terminen la actuación los reyes magos se ponen con lo de los regalos"            </span></span>
<span id="cb13-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [16] "su hombre blandengue ha servido para una campaña del ministerio de igualdad a ver cuándo le toca a la mandanga"       </span></span>
<span id="cb13-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [17] "mn poner resistiré y salir al balcón a aplaudir a los militares"                                                      </span></span>
<span id="cb13-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [18] "recuperar el lema de la transición a follar que el mundo se va a acabar"                                              </span></span>
<span id="cb13-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [19] "82 negarlo todo y seguir viviendo no como el resto de borregos que creen a los medios manipuladores"                  </span></span>
<span id="cb13-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [20] "esta leyenda de la música italiana cultivó con éxito el look llevo 15 días durmiendo en un ford fiesta"               </span></span>
<span id="cb13-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [21] "necesitaron una pandemia mundial para dar el pelotazo a almeida le bastó con un saque de honor"                       </span></span>
<span id="cb13-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [22] "desde la atrevida ignorancia de algún panfleto le definieron como transformista supremacista asturiano"               </span></span>
<span id="cb13-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [23] "me tienes aquí colgado es originalmente de las supremes hoy se canta en los centros médicos de la comunidad de madrid"</span></span>
<span id="cb13-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [24] "y se entiende perfectamente los disfraces de ardilla pp lo que más"                                                   </span></span>
<span id="cb13-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [25] "nos ha pedido pedro sánchez que os digamos que esta subida también es culpa de la guerra en ucrania"                  </span></span>
<span id="cb13-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [26] "izquierda derecha como veis tienen la postura tan sólidamente definida como el gobierno respecto al sahara"           </span></span>
<span id="cb13-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [27] "la relación entre rufián y borrás tiene menos roces"                                                                  </span></span>
<span id="cb13-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [28] "no dirás que no es doble negacionismo"                                                                                </span></span>
<span id="cb13-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [29] "venga que esta nos la sabemos todos de mario conde al dioni"                                                          </span></span>
<span id="cb13-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [30] "sin documentos es mejor no quedarse q entreespaña y marruecos"                                                        </span></span>
<span id="cb13-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [31] "quín sabina to entre caballeros"                                                                                      </span></span>
<span id="cb13-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [32] "sabina pactó con unos ladrones hacerles esta copla y cumplió como lo del cgpj pero con gente responsable"             </span></span>
<span id="cb13-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [33] "es incomprensible que los negacionistas no usaran este tema para protestar por las mascarillas"                       </span></span>
<span id="cb13-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [34] "y ahora que hemos localizado a la prima de mari carmen del hermano de ayuso sabéis algo"                              </span></span>
<span id="cb13-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [35] "en su último disco se han disfrazado de star wars ángeles de leia y dioni de maestro jedi"                            </span></span>
<span id="cb13-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [36] "transitando la fina línea que separa a danny zuko att del protagonista de una peli de eloy de la iglesia"             </span></span>
<span id="cb13-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [37] "desde 2013 tina es ciudadana suiza allí disfruta de sus paisajes alpinos y un poco también de su régimen fiscal"      </span></span>
<span id="cb13-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [38] "esas hombreras nos habrían venido muy bien para mantener la distancia social durante la pandemia"                     </span></span>
<span id="cb13-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [39] "catar no es una democracia sino una monarquía absoluta sin respeto por los derechos humanos dos"                      </span></span>
<span id="cb13-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [40] "el esfuerzo del coreógrafo es inútil la única forma de bailar esto es haciendo el trenecito"                          </span></span>
<span id="cb13-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [41] "g 1 cachitos es como el roscón de reyes a a siempre suele llevar abba dentro"</span></span></code></pre></div>
</div>
<p>Y podemos ver los fotogramas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># identificamos nombre del archivo jpg con los rótulos polémicos</span></span>
<span id="cb14-2">polemica_1_fotogramas <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">substr</span>(subtitulos_polemicos, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>))</span>
<span id="cb14-3"></span>
<span id="cb14-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(polemica_1_fotogramas)</span>
<span id="cb14-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "00000018.jpg" "00000086.jpg" "00000100.jpg" "00000113.jpg" "00000127.jpg"</span></span>
<span id="cb14-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [6] "00000193.jpg"</span></span>
<span id="cb14-7"></span>
<span id="cb14-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># creamos la ruta completa donde están</span></span>
<span id="cb14-9">polemica_1_fotogramas_full <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{root_directory}video/{anno}_jpg/"</span>), polemica_1_fotogramas)</span>
<span id="cb14-10"></span>
<span id="cb14-11"></span>
<span id="cb14-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># añadimos sufijo subtitulo.tif para tenr localizado la imagen que tiene solo los rótulos</span></span>
<span id="cb14-13">subtitulos_polemicos_1_full <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(polemica_1_fotogramas_full,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".subtitulo.tif"</span>)</span></code></pre></div>
</div>
<p>Con la función <code>image_read</code> del paquete <code>magick</code> leemos las imágenes polémicas y los rótulos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">fotogramas_polemicos_img <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>(polemica_1_fotogramas_full, image_read)</span>
<span id="cb15-2">subtitulos_polemicos_img <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>(subtitulos_polemicos_1_full, image_read)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"></span>
<span id="cb16-2">subtitulos_polemicos_img[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>]]</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-16-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">fotogramas_polemicos_img[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>]]</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-17-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Podemos ver una muestra de algunos de ellos.</p>
<p>No es perfecto ( al meter ley o tren como palabras polémticas) pero bueno, nos vale.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2023</span>)</span>
<span id="cb18-2">indices <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(fotogramas_polemicos_img), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>))</span>
<span id="cb18-3"></span>
<span id="cb18-4">lista_fotogram_polemicos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(fotogramas_polemicos_img[indices], grid<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>rasterGrob)</span>
<span id="cb18-5">gridExtra<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grid.arrange</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">grobs=</span>lista_fotogram_polemicos )</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-18-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Y el recorte de los subtítulos que hicimos enla primera entrega.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">lista_subtitulos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(subtitulos_polemicos_img[indices], grid<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>rasterGrob)</span>
<span id="cb19-2">gridExtra<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grid.arrange</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">grobs=</span>lista_subtitulos)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-19-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="tópicos" class="level2">
<h2 class="anchored" data-anchor-id="tópicos">Tópicos</h2>
<p>Aquí no me refiero a los tópicos de este país nuestro, sino a identificar si hay temas comunes a varios documentos.</p>
<p>Ya aviso que con tan pocos “documentos”, unos 488 y siendo tan cortos cada rótulo, es muy probable que no salga mucho..</p>
<section id="tópicos-usando-conteo-de-palabras." class="level3">
<h3 class="anchored" data-anchor-id="tópicos-usando-conteo-de-palabras.">Tópicos usando conteo de palabras.</h3>
<p>Contamos palabras con 3 caracteres o más.</p>
<p>Guardamos la variable <code>name</code> que nos indica en qué rótulo ha aparecido</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"></span>
<span id="cb20-2">word_counts <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtitulos_proces_one_word <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb20-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(name, word) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb20-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sort=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb20-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncharacters =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nchar</span>(word)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb20-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(</span>
<span id="cb20-7">        ncharacters <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb20-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>ncharacters) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb20-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>()</span>
<span id="cb20-10"></span>
<span id="cb20-11"></span>
<span id="cb20-12"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(word_counts<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>name))</span>
<span id="cb20-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 488</span></span>
<span id="cb20-14"></span>
<span id="cb20-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(word_counts, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>)</span>
<span id="cb20-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 15 × 3</span></span>
<span id="cb20-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     name word         n</span></span>
<span id="cb20-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt;</span></span>
<span id="cb20-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1   433 duran        3</span></span>
<span id="cb20-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2   924 boom         3</span></span>
<span id="cb20-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3    51 palabra      2</span></span>
<span id="cb20-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4   181 voz          2</span></span>
<span id="cb20-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5   269 enemigos     2</span></span>
<span id="cb20-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6   269 john         2</span></span>
<span id="cb20-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7   269 wayne        2</span></span>
<span id="cb20-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8   355 plano        2</span></span>
<span id="cb20-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9   377 olona        2</span></span>
<span id="cb20-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10   396 iba          2</span></span>
<span id="cb20-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 11   455 montar       2</span></span>
<span id="cb20-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 12   492 gusta        2</span></span>
<span id="cb20-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 13   558 ropa         2</span></span>
<span id="cb20-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 14   598 calderón     2</span></span>
<span id="cb20-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 15   598 carlos       2</span></span></code></pre></div>
</div>
<p>Ahora convertimos este <code>data.frame</code> a un <code>DocumentTermMatrix</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># usamos como peso la TermFrequency de la palabra</span></span>
<span id="cb21-2">rotulos_dtm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> word_counts <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb21-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cast_dtm</span>(name, word, n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">weighting =</span> tm<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>weightTf)</span>
<span id="cb21-4"></span>
<span id="cb21-5"></span>
<span id="cb21-6">rotulos_dtm</span>
<span id="cb21-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; &lt;&lt;DocumentTermMatrix (documents: 488, terms: 2478)&gt;&gt;</span></span>
<span id="cb21-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Non-/sparse entries: 3257/1206007</span></span>
<span id="cb21-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Sparsity           : 100%</span></span>
<span id="cb21-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Maximal term length: 24</span></span>
<span id="cb21-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Weighting          : term frequency (tf)</span></span></code></pre></div>
</div>
<p>Podríamos haberlo visto en forma de filas = palabras y columnas = rótulo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1">word_counts  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb22-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cast_dfm</span>(word, name, n)</span>
<span id="cb22-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Document-feature matrix of: 2,478 documents, 488 features (99.73% sparse) and 0 docvars.</span></span>
<span id="cb22-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;           features</span></span>
<span id="cb22-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; docs       433 924 51 181 269 355 377 396 455 492</span></span>
<span id="cb22-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   duran      3   0  0   0   0   0   0   0   0   0</span></span>
<span id="cb22-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   boom       0   3  0   0   0   0   0   0   0   0</span></span>
<span id="cb22-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   palabra    0   0  2   0   0   0   0   0   0   0</span></span>
<span id="cb22-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   voz        0   0  0   2   0   0   0   0   0   0</span></span>
<span id="cb22-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   enemigos   0   0  0   0   2   0   0   0   0   0</span></span>
<span id="cb22-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   john       0   0  0   0   2   0   0   0   0   0</span></span>
<span id="cb22-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [ reached max_ndoc ... 2,472 more documents, reached max_nfeat ... 478 more features ]</span></span></code></pre></div>
</div>
<p>Vamos a ver si sale algo haciendo un LDA (Latent Dirichlet Allocation)</p>
<p>Considero 7 tópicos porque me gusta el número 7. El que quiera elegir con algo más de criterio que se mire <a href="https://cran.r-project.org/web/packages/ldatuning/vignettes/topics.html">esto</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"></span>
<span id="cb23-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cons</span></span>
<span id="cb23-3"></span>
<span id="cb23-4">rotulos_lda <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">LDA</span>(rotulos_dtm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">k =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">control =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">seed =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1234</span>))</span>
<span id="cb23-5">rotulos_lda</span>
<span id="cb23-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; A LDA_VEM topic model with 7 topics.</span></span>
<span id="cb23-7"></span>
<span id="cb23-8">rotulos_lda_td <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(rotulos_lda)</span>
<span id="cb23-9">rotulos_lda_td</span>
<span id="cb23-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 17,346 × 3</span></span>
<span id="cb23-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    topic term      beta</span></span>
<span id="cb23-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;</span></span>
<span id="cb23-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1     1 duran 3.39e-75</span></span>
<span id="cb23-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2     2 duran 3.55e-75</span></span>
<span id="cb23-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3     3 duran 6.13e- 3</span></span>
<span id="cb23-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4     4 duran 3.56e-75</span></span>
<span id="cb23-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5     5 duran 3.18e-75</span></span>
<span id="cb23-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6     6 duran 3.75e-75</span></span>
<span id="cb23-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7     7 duran 3.63e-75</span></span>
<span id="cb23-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8     1 boom  6.21e- 3</span></span>
<span id="cb23-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9     2 boom  4.49e-75</span></span>
<span id="cb23-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10     3 boom  4.23e-75</span></span>
<span id="cb23-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # … with 17,336 more rows</span></span>
<span id="cb23-24"></span>
<span id="cb23-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># se suele ordenar por beta que ahora mismo no recuerdo que era, </span></span>
<span id="cb23-26"></span>
<span id="cb23-27">top_terms <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> rotulos_lda_td <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-28">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(topic) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-29">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">top_n</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, beta) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-30">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-31">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(topic, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>beta)</span>
<span id="cb23-32"></span>
<span id="cb23-33">top_terms</span>
<span id="cb23-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 34 × 3</span></span>
<span id="cb23-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    topic term     beta</span></span>
<span id="cb23-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;</span></span>
<span id="cb23-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1     1 disco 0.0124 </span></span>
<span id="cb23-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2     1 juan  0.0104 </span></span>
<span id="cb23-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3     1 hacer 0.00878</span></span>
<span id="cb23-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4     2 mundo 0.0130 </span></span>
<span id="cb23-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5     2 gusta 0.00651</span></span>
<span id="cb23-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6     2 bueno 0.00651</span></span>
<span id="cb23-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7     2 salir 0.00651</span></span>
<span id="cb23-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8     2 peret 0.00651</span></span>
<span id="cb23-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9     3 fama  0.0123 </span></span>
<span id="cb23-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10     3 voz   0.00817</span></span>
<span id="cb23-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # … with 24 more rows</span></span>
<span id="cb23-48"></span>
<span id="cb23-49"></span>
<span id="cb23-50">top_terms <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-51">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">term =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reorder_within</span>(term, beta, topic)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-52">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(term, beta)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-53">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_bar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">stat =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"identity"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-54">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_reordered</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-55">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> topic, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scales =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"free_x"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-56">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-23-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Pues la verdad es que yo no veo nada interesante</p>
</section>
<section id="tópicos-usando-tfidf-como-peso" class="level3">
<h3 class="anchored" data-anchor-id="tópicos-usando-tfidf-como-peso">Tópicos usando tfidf como peso</h3>
<p>Vamos a probar usando <a href="https://es.wikipedia.org/wiki/Tf-idf">tfidf</a></p>
<p>Como la función <code>LDA</code> no permite usar un <code>DocumentTermMatrix</code> que se haya construido con <code>cast_dtm</code> y usando como parámetro de <code>weighting</code> el peso <code>tm::weightTfIdf</code> nos construimos los datos de otra forma.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"></span>
<span id="cb24-2">tf_idf_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtitulos_proces_one_word <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb24-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nchar</span>(word)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb24-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(name,word) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb24-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">veces_palabra =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb24-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_tf_idf</span>(word, name, veces_palabra) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb24-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>()</span>
<span id="cb24-8"></span>
<span id="cb24-9">tf_idf_data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb24-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(veces_palabra)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb24-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>()</span>
<span id="cb24-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 6 × 6</span></span>
<span id="cb24-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    name word     veces_palabra    tf   idf tf_idf</span></span>
<span id="cb24-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;dbl&gt; &lt;chr&gt;            &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb24-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1   433 duran                3 0.6    6.19   3.71</span></span>
<span id="cb24-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2   924 boom                 3 0.75   6.19   4.64</span></span>
<span id="cb24-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3    51 palabra              2 0.286  5.50   1.57</span></span>
<span id="cb24-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4   181 voz                  2 0.5    4.24   2.12</span></span>
<span id="cb24-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5   269 enemigos             2 0.25   5.50   1.37</span></span>
<span id="cb24-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6   269 john                 2 0.25   4.80   1.20</span></span></code></pre></div>
</div>
<p>Para cada palabra tenemos su <code>tf_idf</code> dentro de cada rótulo en el que aparece</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1">tf_idf_data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb25-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(word<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"izquierda"</span>)</span>
<span id="cb25-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 2 × 6</span></span>
<span id="cb25-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    name word      veces_palabra    tf   idf tf_idf</span></span>
<span id="cb25-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;dbl&gt; &lt;chr&gt;             &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb25-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1   242 izquierda             1 0.2    5.50  1.10 </span></span>
<span id="cb25-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2   946 izquierda             1 0.111  5.50  0.611</span></span></code></pre></div>
</div>
<p>Como de nuevo LDA solo acepta peso con valores enteros, pues simplemente multiplicamos por 100 el <code>tf_idf</code> y redondeamos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1">dtm_long <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tf_idf_data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb26-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tf_idf_integer =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>tf_idf)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb26-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cast_dfm</span>(name, word, tf_idf_integer)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1">lda_model_long_1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">LDA</span>(dtm_long, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">k =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">control =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">seed =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1234</span>))</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1">result <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(lda_model_long_1, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'beta'</span>)</span>
<span id="cb28-2"></span>
<span id="cb28-3">result <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb28-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(topic) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb28-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">top_n</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, beta) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb28-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb28-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(topic, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>beta) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb28-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">term =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reorder</span>(term, beta)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb28-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(term, beta, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(topic))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb28-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.legend =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb28-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> topic, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scales =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"free"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb28-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-28-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Y claramente , yo sigo sin ver nada claro. Aunque me daría pistas para añadir más palabras a las <code>stopwords</code> y para aceptar que para el tamaño de los documentos (unas pocas palabras por rótulo), quizá no valga el LDA.</p>
<blockquote class="blockquote">
<p>Esta es la vida del analista de datos, prueba y error y sólo de vez en cuándo algún éxito.</p>
</blockquote>
</section>
<section id="sólo-con-los-rótulos-polémicos" class="level3">
<h3 class="anchored" data-anchor-id="sólo-con-los-rótulos-polémicos">Sólo con los rótulos polémicos</h3>
<p>Asumiendo que parece que no tiene sentido hacer <code>topicmodelling</code> sobre estos datos, me picó la curiosidad de ver qué pasaba si sólo usaba los rótulos polémicos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"></span>
<span id="cb29-2">tf_idf_data_polem <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtitulos_proces_one_word <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb29-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nchar</span>(word)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, polemica <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb29-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(name,word) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb29-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">veces_palabra =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb29-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_tf_idf</span>(word, name, veces_palabra) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb29-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() </span>
<span id="cb29-8"></span>
<span id="cb29-9"></span>
<span id="cb29-10">tf_idf_data_polem <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb29-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(veces_palabra)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb29-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>()</span>
<span id="cb29-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 6 × 6</span></span>
<span id="cb29-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    name word        veces_palabra    tf   idf tf_idf</span></span>
<span id="cb29-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;dbl&gt; &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb29-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1   377 olona                   2 1      3.66  3.66 </span></span>
<span id="cb29-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2    18 rey                     1 1      3.66  3.66 </span></span>
<span id="cb29-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3    86 ley                     1 0.333  2.28  0.759</span></span>
<span id="cb29-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4    86 psoe                    1 0.333  3.66  1.22 </span></span>
<span id="cb29-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5    86 trans                   1 0.333  3.66  1.22 </span></span>
<span id="cb29-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 6   100 extremadura             1 0.5    3.66  1.83</span></span></code></pre></div>
</div>
<section id="topic-modelling-usando-conteo-de-palabras" class="level4">
<h4 class="anchored" data-anchor-id="topic-modelling-usando-conteo-de-palabras">Topic modelling usando conteo de palabras</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1">dtm_long_polem <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tf_idf_data_polem <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb30-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># filter(tf_idf &gt; 0.00006) %&gt;% </span></span>
<span id="cb30-3">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># filter(veces_palabra&gt;1) %&gt;%</span></span>
<span id="cb30-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cast_dtm</span>(name, word, veces_palabra)</span>
<span id="cb30-5"></span>
<span id="cb30-6">lda_model_long_polem <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">LDA</span>(dtm_long_polem, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">k =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">control =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">seed =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1234</span>))</span>
<span id="cb30-7"></span>
<span id="cb30-8">result_polem <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(lda_model_long_polem, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'beta'</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1">result_polem <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb31-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(topic) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb31-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">top_n</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, beta) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb31-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb31-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(topic, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>beta) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb31-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">term =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reorder</span>(term, beta)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb31-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(term, beta, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(topic))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb31-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.legend =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb31-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> topic, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scales =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"free"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb31-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-31-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Y bueno parece que en el tópico 3 se meten juntos rótulos que hablan de pandemia y de negacionistas, ha podido ser casalidad, quién sabe.</p>
<p>Si vemos en qué tópico cae cada documento.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1">result_documento_polem <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(lda_model_long_polem, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gamma'</span>)</span>
<span id="cb32-2"></span>
<span id="cb32-3"></span>
<span id="cb32-4">result_documento_polem <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb32-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(topic) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb32-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">top_n</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, gamma) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb32-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb32-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(topic, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>gamma) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb32-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">document =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reorder</span>(document, gamma)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb32-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(document, gamma, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(topic))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb32-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.legend =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb32-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> topic, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scales =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"free"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb32-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-32-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Veamos algunos subtítulos del tópico 3</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1">subtitulos_proces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb33-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(name <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">706</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1061</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">563</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb33-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(texto)</span>
<span id="cb33-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "hace chacachá entonces podemos llamarlo y q tren de altas prestaciones de extremadura"         </span></span>
<span id="cb33-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [2] "mn poner resistiré y salir al balcón a aplaudir a los militares"                               </span></span>
<span id="cb33-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [3] "necesitaron una pandemia mundial para dar el pelotazo a almeida le bastó con un saque de honor"</span></span>
<span id="cb33-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [4] "es incomprensible que los negacionistas no usaran este tema para protestar por las mascarillas"</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1">top_10_topic3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  result_documento_polem <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb34-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(topic) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb34-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">top_n</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, gamma) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb34-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(topic<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb34-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(document)</span>
<span id="cb34-6"></span>
<span id="cb34-7">subtitulos_proces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb34-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(name <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> top_10_topic3) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb34-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(texto)</span>
<span id="cb34-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [1] "hace chacachá entonces podemos llamarlo y q tren de altas prestaciones de extremadura"                          </span></span>
<span id="cb34-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [2] "es muy raro ver actuar con tanta coordinación a quienes están a la izquierda"                                   </span></span>
<span id="cb34-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [3] "mn poner resistiré y salir al balcón a aplaudir a los militares"                                                </span></span>
<span id="cb34-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [4] "necesitaron una pandemia mundial para dar el pelotazo a almeida le bastó con un saque de honor"                 </span></span>
<span id="cb34-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [5] "nos ha pedido pedro sánchez que os digamos que esta subida también es culpa de la guerra en ucrania"            </span></span>
<span id="cb34-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [6] "no dirás que no es doble negacionismo"                                                                          </span></span>
<span id="cb34-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [7] "quín sabina to entre caballeros"                                                                                </span></span>
<span id="cb34-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [8] "es incomprensible que los negacionistas no usaran este tema para protestar por las mascarillas"                 </span></span>
<span id="cb34-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  [9] "desde 2013 tina es ciudadana suiza allí disfruta de sus paisajes alpinos y un poco también de su régimen fiscal"</span></span>
<span id="cb34-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [10] "esas hombreras nos habrían venido muy bien para mantener la distancia social durante la pandemia"</span></span></code></pre></div>
</div>
<p>Y bueno si que parece que ha agrupado algunos rótulos relacionados con la pandemia</p>
</section>
<section id="topic-modelling-usando-tf_idf" class="level4">
<h4 class="anchored" data-anchor-id="topic-modelling-usando-tf_idf">Topic modelling usando tf_idf</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1">dtm_long_polem_tf_idf <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tf_idf_data_polem <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb35-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tf_idf_integer =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> tf_idf)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb35-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cast_dfm</span>(name, word, tf_idf_integer)</span>
<span id="cb35-4"></span>
<span id="cb35-5">lda_model_long_polem_tf_idf <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">LDA</span>(dtm_long_polem_tf_idf, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">k =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">control =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">seed =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1234</span>))</span>
<span id="cb35-6"></span>
<span id="cb35-7">result_polem_tf_idf <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(lda_model_long_polem_tf_idf, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'beta'</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1">result_polem_tf_idf <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb36-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(topic) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb36-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">top_n</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, beta) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb36-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb36-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(topic, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>beta) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb36-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">term =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reorder</span>(term, beta)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb36-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(term, beta, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(topic))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb36-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.legend =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb36-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> topic, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scales =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"free"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb36-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-36-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Y no parece tan diferente. Veamos el tópico 4</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1">result_documento_polem_tf_idf <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(lda_model_long_polem_tf_idf, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gamma'</span>)</span>
<span id="cb37-2"></span>
<span id="cb37-3"></span>
<span id="cb37-4">result_documento_polem_tf_idf <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(topic) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">top_n</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, gamma) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(topic, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>gamma) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb37-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">document =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reorder</span>(document, gamma)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(document, gamma, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(topic))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb37-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.legend =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb37-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> topic, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scales =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"free"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb37-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-37-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Veamos algunos subtítulos del tópico 4</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1">top_5_topic4 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  result_documento_polem_tf_idf <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb38-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(topic) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb38-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">top_n</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, gamma) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb38-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(topic<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb38-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(document)</span>
<span id="cb38-6"></span>
<span id="cb38-7">subtitulos_proces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb38-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(name <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> top_5_topic4) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb38-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(texto)</span>
<span id="cb38-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "la orquesta gente joven fue posponiendo el cambio de nombre como el psoe con la ley trans"                 </span></span>
<span id="cb38-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [2] "como feos de pleno derecho por eso somos guionistas vamos a ofendernos un poco y ahora seguimos"           </span></span>
<span id="cb38-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [3] "izquierda derecha como veis tienen la postura tan sólidamente definida como el gobierno respecto al sahara"</span></span>
<span id="cb38-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [4] "es incomprensible que los negacionistas no usaran este tema para protestar por las mascarillas"            </span></span>
<span id="cb38-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [5] "el esfuerzo del coreógrafo es inútil la única forma de bailar esto es haciendo el trenecito"</span></span></code></pre></div>
</div>
<p>Y bueno no lo veo tan poco muy claro.</p>
</section>
</section>
<section id="otras-pruebas-realizadas" class="level3">
<h3 class="anchored" data-anchor-id="otras-pruebas-realizadas">Otras pruebas realizadas</h3>
<ul>
<li>En vez de considerar que cada rótulo es un documento, consideré los rótulos correspondientes a la primera parte del programa, a la segunda, y así hasta 10. pero no se obtuvo nada consistente</li>
</ul>
<p>Y bueno aquí acaba el análisis del cachitos de este año, salvo que alguien tenga interés en que haga alguna prueba o mejore algo.</p>
<p><strong>Feliz 2023 a todos</strong></p>


</section>
</section>

 ]]></description>
  <category>estadística</category>
  <category>polémica</category>
  <category>2023</category>
  <category>textmining</category>
  <category>ocr</category>
  <category>linux</category>
  <category>cachitos</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/index.html</guid>
  <pubDate>Tue, 03 Jan 2023 23:00:00 GMT</pubDate>
  <media:content url="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/04/cachitos-2022-tercera-parte/imagen_post.png" medium="image" type="image/png" height="72" width="144"/>
</item>
<item>
  <title>Cachitos 2022. Segunda parte</title>
  <dc:creator>José Luis Cañadas Reche</dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/03/cachitos-2022-segunda-parte/index.html</link>
  <description><![CDATA[ 



<p>Una vez que ya hemos visto en la <a href="https://muestrear-no-es-pecado.netlify.app/2023/01/02/cachitos-2022-primera-parte/">entrada anterior</a> como extraer los rótulos, vamos a juntarlos todos en un sólo csv y hacer algo de limpieza.</p>
<p>Dejo el enlace a los ficheros de texto construidos por <code>tesseract</code> <a href="https://drive.google.com/drive/folders/1Ds00KlAU7FfqNKEOYVjo3t50xjOuOuN-?usp=share_link">enlace directorio</a></p>
<section id="lectura-rótulos" class="level2">
<h2 class="anchored" data-anchor-id="lectura-rótulos">Lectura rótulos</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-3"></span>
<span id="cb1-4">root_directory <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/media/hd1/canadasreche@gmail.com/public/proyecto_cachitos/"</span></span>
<span id="cb1-5">anno <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2022"</span></span>
<span id="cb1-6"></span>
<span id="cb1-7"></span>
<span id="cb1-8">nombre_ficheros <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list.files</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">path =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{root_directory}{anno}_txt/"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">enframe</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_fichero =</span> value)</span>
<span id="cb1-11"></span>
<span id="cb1-12">nombre_ficheros</span>
<span id="cb1-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 1,302 × 2</span></span>
<span id="cb1-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     name n_fichero                     </span></span>
<span id="cb1-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    &lt;int&gt; &lt;chr&gt;                         </span></span>
<span id="cb1-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1     1 00000001.jpg.subtitulo.tif.txt</span></span>
<span id="cb1-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2     2 00000002.jpg.subtitulo.tif.txt</span></span>
<span id="cb1-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3     3 00000003.jpg.subtitulo.tif.txt</span></span>
<span id="cb1-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4     4 00000004.jpg.subtitulo.tif.txt</span></span>
<span id="cb1-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5     5 00000005.jpg.subtitulo.tif.txt</span></span>
<span id="cb1-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6     6 00000006.jpg.subtitulo.tif.txt</span></span>
<span id="cb1-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7     7 00000007.jpg.subtitulo.tif.txt</span></span>
<span id="cb1-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8     8 00000008.jpg.subtitulo.tif.txt</span></span>
<span id="cb1-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9     9 00000009.jpg.subtitulo.tif.txt</span></span>
<span id="cb1-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10    10 00000010.jpg.subtitulo.tif.txt</span></span>
<span id="cb1-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # … with 1,292 more rows</span></span></code></pre></div>
</div>
<p>Ahora los podemos leer en orden</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"></span>
<span id="cb2-2">subtitulos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list.files</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">path =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{root_directory}{anno}_txt/"</span>), </span>
<span id="cb2-3">                        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pattern =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.txt"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">full.names =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb2-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_file</span>(.)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb2-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">enframe</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span>  </span>
<span id="cb2-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(nombre_ficheros)</span>
<span id="cb2-7"></span>
<span id="cb2-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span>(subtitulos)</span>
<span id="cb2-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Rows: 1,302</span></span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Columns: 3</span></span>
<span id="cb2-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; $ name      &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 1…</span></span>
<span id="cb2-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; $ value     &lt;list&gt; "\f", "\f", "   \n\f", "\f", " \n\f", " \n\f", "\f", "\f", …</span></span>
<span id="cb2-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; $ n_fichero &lt;chr&gt; "00000001.jpg.subtitulo.tif.txt", "00000002.jpg.subtitulo.ti…</span></span>
<span id="cb2-14">subtitulos</span>
<span id="cb2-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 1,302 × 3</span></span>
<span id="cb2-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     name value     n_fichero                     </span></span>
<span id="cb2-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    &lt;int&gt; &lt;list&gt;    &lt;chr&gt;                         </span></span>
<span id="cb2-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1     1 &lt;chr [1]&gt; 00000001.jpg.subtitulo.tif.txt</span></span>
<span id="cb2-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2     2 &lt;chr [1]&gt; 00000002.jpg.subtitulo.tif.txt</span></span>
<span id="cb2-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3     3 &lt;chr [1]&gt; 00000003.jpg.subtitulo.tif.txt</span></span>
<span id="cb2-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4     4 &lt;chr [1]&gt; 00000004.jpg.subtitulo.tif.txt</span></span>
<span id="cb2-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5     5 &lt;chr [1]&gt; 00000005.jpg.subtitulo.tif.txt</span></span>
<span id="cb2-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6     6 &lt;chr [1]&gt; 00000006.jpg.subtitulo.tif.txt</span></span>
<span id="cb2-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7     7 &lt;chr [1]&gt; 00000007.jpg.subtitulo.tif.txt</span></span>
<span id="cb2-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8     8 &lt;chr [1]&gt; 00000008.jpg.subtitulo.tif.txt</span></span>
<span id="cb2-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9     9 &lt;chr [1]&gt; 00000009.jpg.subtitulo.tif.txt</span></span>
<span id="cb2-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10    10 &lt;chr [1]&gt; 00000010.jpg.subtitulo.tif.txt</span></span>
<span id="cb2-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # … with 1,292 more rows</span></span></code></pre></div>
</div>
<p>Tenemos 1302 rótulos de los cuales la mayoría estarán vacíos</p>
</section>
<section id="contando-letras" class="level2">
<h2 class="anchored" data-anchor-id="contando-letras">Contando letras</h2>
<p>En n_fichero tenemos el nombre y en <code>value</code> el texto. Si vemos alguno de los subtítulos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"></span>
<span id="cb3-2">subtitulos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(value) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pluck</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">946</span>)</span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "Izquierda... Derecha... Como veis, tienen la postura tan\nsólidamente definida como el gobierno respecto al Sahara.\n\n \n\f"</span></span></code></pre></div>
</div>
<p>Muchos de los ficheros no tienen texto (son fotogramas sin rótulos). Contemos letras.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"></span>
<span id="cb4-2">subtitulos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtitulos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_caracteres =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nchar</span>(value)) </span>
<span id="cb4-4"></span>
<span id="cb4-5">subtitulos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(n_caracteres) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>()</span>
<span id="cb4-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 131 × 2</span></span>
<span id="cb4-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # Groups:   n_caracteres [131]</span></span>
<span id="cb4-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    n_caracteres     n</span></span>
<span id="cb4-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;           &lt;int&gt; &lt;int&gt;</span></span>
<span id="cb4-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1            1   487</span></span>
<span id="cb4-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2            3   118</span></span>
<span id="cb4-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3            4    12</span></span>
<span id="cb4-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4            5    14</span></span>
<span id="cb4-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5            6     6</span></span>
<span id="cb4-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6            7     4</span></span>
<span id="cb4-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7            8     5</span></span>
<span id="cb4-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8            9     3</span></span>
<span id="cb4-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9           10     3</span></span>
<span id="cb4-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10           11     4</span></span>
<span id="cb4-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # … with 121 more rows</span></span>
<span id="cb4-23"></span>
<span id="cb4-24">subtitulos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-25">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(n_caracteres) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-26">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> n_caracteres, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> n)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-28">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-4-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/03/cachitos-2022-segunda-parte/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Y viendo el conteo podríamos ver cómo son los rótulos con menos de 25 caracteres. Y suele ser por haber pillado el nombre de la canción en vez del rótulo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"></span>
<span id="cb5-2">subtitulos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb5-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(n_caracteres <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>, n_caracteres <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span> ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb5-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(n_caracteres)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb5-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(value)</span>
<span id="cb5-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[1]]</span></span>
<span id="cb5-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] " \n\nMÁRQUEZ PIQUER YN\n\nY\n\f"</span></span>
<span id="cb5-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[2]]</span></span>
<span id="cb5-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "DRES DO BARRO\n\n¡deirada\n\f"</span></span>
<span id="cb5-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[3]]</span></span>
<span id="cb5-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] " \n\n¡A DORTA e\nna O” A —\n\f"</span></span>
<span id="cb5-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[4]]</span></span>
<span id="cb5-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "MBERROS UNIDOS\n\nIderete\n\f"</span></span>
<span id="cb5-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[5]]</span></span>
<span id="cb5-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "LIE IMBRUGLIA Lp]\n-n ]\n\f"</span></span>
<span id="cb5-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[6]]</span></span>
<span id="cb5-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "E? EPR ENOAMADO\nENCADo\n\f"</span></span>
<span id="cb5-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[7]]</span></span>
<span id="cb5-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "IO DALLA\n\na La Vita\n\n \n\f"</span></span>
<span id="cb5-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[8]]</span></span>
<span id="cb5-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "O VENENO\n\n10 de menos\n\f"</span></span>
<span id="cb5-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[9]]</span></span>
<span id="cb5-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "IL MCCARTNEY\n\nis One\n\f"</span></span>
<span id="cb5-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[10]]</span></span>
<span id="cb5-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "'HAEL\n\n1é sabe nadie\n\f"</span></span>
<span id="cb5-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[11]]</span></span>
<span id="cb5-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "   \n\nGEES ca z a\njan\n\f"</span></span>
<span id="cb5-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[12]]</span></span>
<span id="cb5-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] " \n\nk\nA BELÉN [\napimó\n\f"</span></span>
<span id="cb5-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[13]]</span></span>
<span id="cb5-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "RIGO CUEVAS\n\nbrujada\n\f"</span></span>
<span id="cb5-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[14]]</span></span>
<span id="cb5-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "LETS\n\neased Lighting\n\f"</span></span>
<span id="cb5-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[15]]</span></span>
<span id="cb5-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "3EL PANTOJA\n\nrlochí\n\f"</span></span>
<span id="cb5-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[16]]</span></span>
<span id="cb5-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] " \n\nMR banda LL Ú\n\n \n\f"</span></span>
<span id="cb5-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[17]]</span></span>
<span id="cb5-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "ANDA LEAR\n\nrfomania\n\f"</span></span>
<span id="cb5-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[18]]</span></span>
<span id="cb5-59"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] " \n\nOCOLATE\n\nyonesa\n\f"</span></span>
<span id="cb5-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[19]]</span></span>
<span id="cb5-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "IS\nFrom Désire\n\n  \n\f"</span></span>
<span id="cb5-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[20]]</span></span>
<span id="cb5-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] ": ENEMIGOS\n1 Vane\n\f"</span></span>
<span id="cb5-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[21]]</span></span>
<span id="cb5-68"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "RAN DURAN\nld Boys\n\f"</span></span>
<span id="cb5-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-70"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[22]]</span></span>
<span id="cb5-71"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "SHOP BOYS\n\nsurbia\n\f"</span></span>
<span id="cb5-72"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-73"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[23]]</span></span>
<span id="cb5-74"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "Sería el momen\n\n \n\f"</span></span>
<span id="cb5-75"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-76"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[24]]</span></span>
<span id="cb5-77"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "Boney M y Tigrete\n\f"</span></span>
<span id="cb5-78"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-79"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[25]]</span></span>
<span id="cb5-80"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "IO FUTURA\nGrados\n\f"</span></span>
<span id="cb5-81"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-82"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[26]]</span></span>
<span id="cb5-83"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] " \n\nSSIEL\n\nrinero\n\f"</span></span>
<span id="cb5-84"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-85"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[27]]</span></span>
<span id="cb5-86"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "ACIA MONTES\n\n \n\f"</span></span>
<span id="cb5-87"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-88"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[28]]</span></span>
<span id="cb5-89"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] " \n\n) SUAVES\n\n \n\f"</span></span>
<span id="cb5-90"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-91"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[29]]</span></span>
<span id="cb5-92"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] " \n\nhe Ye ke\n\n \n\f"</span></span>
<span id="cb5-93"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-94"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[30]]</span></span>
<span id="cb5-95"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "UCambDatlacne\n\f"</span></span>
<span id="cb5-96"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-97"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[31]]</span></span>
<span id="cb5-98"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "1,0616 EDAD |\n\f"</span></span>
<span id="cb5-99"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-100"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[32]]</span></span>
<span id="cb5-101"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "¡GE URE\n\nathe\n\f"</span></span>
<span id="cb5-102"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-103"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[33]]</span></span>
<span id="cb5-104"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "NA\nMustafá\n\n \n\f"</span></span>
<span id="cb5-105"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-106"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[34]]</span></span>
<span id="cb5-107"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "AGO\n\nmbamanía\n\f"</span></span>
<span id="cb5-108"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-109"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[35]]</span></span>
<span id="cb5-110"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] ",\nLuftballons\n\f"</span></span>
<span id="cb5-111"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-112"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[36]]</span></span>
<span id="cb5-113"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "SURE\n\nmetimes\n\f"</span></span>
<span id="cb5-114"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-115"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[37]]</span></span>
<span id="cb5-116"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] " \n\nDMA\n\nnbada\n\f"</span></span>
<span id="cb5-117"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-118"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[38]]</span></span>
<span id="cb5-119"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "ENDI\nEDI O\n\n \n\f"</span></span>
<span id="cb5-120"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-121"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[39]]</span></span>
<span id="cb5-122"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "oo “Brisp\n\nyr\n\f"</span></span>
<span id="cb5-123"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb5-124"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [[40]]</span></span>
<span id="cb5-125"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] " \n\nPEEBLES\nn\n\f"</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">subtitulos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb6-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(n_caracteres <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>)</span>
<span id="cb6-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb6-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    name value     n_fichero                      n_caracteres</span></span>
<span id="cb6-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;int&gt; &lt;list&gt;    &lt;chr&gt;                                 &lt;int&gt;</span></span>
<span id="cb6-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1    98 &lt;chr [1]&gt; 00000098.jpg.subtitulo.tif.txt           30</span></span>
<span id="cb6-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2   409 &lt;chr [1]&gt; 00000409.jpg.subtitulo.tif.txt           30</span></span>
<span id="cb6-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3   882 &lt;chr [1]&gt; 00000882.jpg.subtitulo.tif.txt           30</span></span>
<span id="cb6-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4  1018 &lt;chr [1]&gt; 00001018.jpg.subtitulo.tif.txt           30</span></span>
<span id="cb6-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5  1258 &lt;chr [1]&gt; 00001258.jpg.subtitulo.tif.txt           30</span></span></code></pre></div>
</div>
<p>Usando la librería <code>magick</code> en R que permite usar <code>imagemagick</code> en R, ver <strong><a href="https://analisisydecision.es/tratamiento-y-procesado-de-imagenes-con-r-y-magick/">post</a></strong> de Raúl Vaquerizo y su homenaje a Sean Connery, podemos ver el fotgrama correspondiente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(magick)</span>
<span id="cb7-2">(directorio_imagenes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{root_directory}video/{anno}_jpg/"</span>))</span>
<span id="cb7-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; /media/hd1/canadasreche@gmail.com/public/proyecto_cachitos/video/2022_jpg/</span></span>
<span id="cb7-4"></span>
<span id="cb7-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">image_read</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{directorio_imagenes}00001258.jpg"</span>))</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/03/cachitos-2022-segunda-parte/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Así que nos quedamos con los rótulos con más de 30 caracteres</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">subtitulos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  subtitulos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(n_caracteres <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>)</span>
<span id="cb8-3"></span>
<span id="cb8-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(subtitulos)</span>
<span id="cb8-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 567   4</span></span></code></pre></div>
</div>
</section>
<section id="detección-duplicados" class="level2">
<h2 class="anchored" data-anchor-id="detección-duplicados">Detección duplicados</h2>
<p>Mini limpieza de caracteres extraños y puntuación</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">string_mini_clean <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(string){</span>
<span id="cb9-2">    string <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"?</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>, string)</span>
<span id="cb9-3">    string <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\r</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">|?</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\f</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">|="</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>, string)</span>
<span id="cb9-4">    string <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'“|”|—|&gt;'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>, string)</span>
<span id="cb9-5">    </span>
<span id="cb9-6">    string <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"[[:punct:][:blank:]]+"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>, string)</span>
<span id="cb9-7">    string <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tolower</span>(string)</span>
<span id="cb9-8">    string <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"  "</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>, string)</span>
<span id="cb9-9">    </span>
<span id="cb9-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(string)</span>
<span id="cb9-11">}</span>
<span id="cb9-12"></span>
<span id="cb9-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Haciendo uso de programación funciona con purrr es muy fácil pasar esta función a cada elemento. y decirle que </span></span>
<span id="cb9-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># el resultado es string con map_chr</span></span>
<span id="cb9-15"></span>
<span id="cb9-16">subtitulos_proces <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtitulos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb9-17">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">texto =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_chr</span>(value, string_mini_clean)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb9-18">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>value)</span>
<span id="cb9-19"></span>
<span id="cb9-20">subtitulos_proces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb9-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(texto)</span>
<span id="cb9-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 567 × 1</span></span>
<span id="cb9-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    texto                                                                        </span></span>
<span id="cb9-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    &lt;chr&gt;                                                                        </span></span>
<span id="cb9-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1 "3 pues te vas a reír cuando sepas an lo que pasa en el xxi "                </span></span>
<span id="cb9-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2 " bienvenidos si estáis todos es porque habéis recordado que tras los cuarto…</span></span>
<span id="cb9-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3 "bueno si eres colchonero al menos estás acostumbrado a los disgustos "      </span></span>
<span id="cb9-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4 " faella carrá jn e el amor todo es empezar 3 "                              </span></span>
<span id="cb9-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5 "en cachitos como en el amor y en el rascar todo es empezar os quedan tres h…</span></span>
<span id="cb9-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6 "esta actuación contiene más latigazos cervicales 32 que una colisión en cad…</span></span>
<span id="cb9-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7 "la oración pagana que todos hemos rezado mucha ms "                         </span></span>
<span id="cb9-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8 "la oración pagana que todos hemos rezado muchas más veces de las que nos gu…</span></span>
<span id="cb9-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9 "aquel año el cádiz descendió a 2 b y creemos que bisbal no tuvo nada que ve…</span></span>
<span id="cb9-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10 " ha llegado ya el momento de abrir el melón de que este muchacho canta raro…</span></span>
<span id="cb9-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # … with 557 more rows</span></span></code></pre></div>
</div>
<p>Distancia de texto entre rótulos consecutivos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"></span>
<span id="cb10-2">subtitulos_proces <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtitulos_proces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb10-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">texto_anterior =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(texto)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb10-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">distancia =</span> stringdist<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stringdist</span>(texto, texto_anterior, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lcs"</span>))</span>
<span id="cb10-5">    </span>
<span id="cb10-6"> </span>
<span id="cb10-7">subtitulos_proces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb10-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(distancia)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb10-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(name,texto,distancia, texto_anterior, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">everything</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb10-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(distancia) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb10-11">    DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>()</span></code></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-ba50b72162e2f742ff67" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ba50b72162e2f742ff67">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566"],[53,67,107,147,154,203,226,292,312,340,384,425,437,461,500,515,524,544,572,578,591,635,695,794,799,816,836,847,856,890,931,989,996,1007,1073,1104,1113,1131,1177,1193,1224,1268,87,1188,41,57,263,285,327,477,599,711,73,412,567,734,1066,1284,101,232,629,160,194,272,575,724,786,773,950,348,170,1237,958,553,763,1059,1088,1291,93,1012,30,238,1230,175,1084,1117,117,94,1006,1146,783,1057,687,1045,112,371,959,1221,377,509,1212,982,181,1005,1044,1253,174,389,475,956,969,1172,313,940,951,1118,193,241,965,38,433,954,1030,126,178,200,118,834,1276,24,80,323,562,892,1041,104,228,311,621,872,1135,561,29,145,256,1108,225,372,564,710,82,171,224,229,318,385,871,1010,1173,192,242,402,454,743,803,1060,75,1026,1027,1046,230,757,1252,1290,50,88,95,131,176,289,468,565,742,1019,1114,1147,156,231,305,604,663,715,976,1008,1067,1152,51,161,883,159,467,820,1087,1231,1281,32,304,777,835,1040,1086,1153,58,59,127,169,290,354,1080,144,186,244,333,508,558,603,821,988,1031,1036,1275,217,276,298,432,703,955,1075,1282,1289,146,243,257,297,563,970,1126,1158,1229,208,211,218,255,262,466,739,25,111,201,314,884,945,1051,1127,114,237,324,355,642,756,776,804,1112,113,410,716,800,853,39,403,557,709,1001,1042,1076,1157,1214,31,72,155,261,319,363,538,648,688,725,908,925,983,1003,1122,1259,64,66,373,961,1047,1092,1176,105,209,510,680,718,791,994,1056,1283,99,100,368,455,530,613,643,670,792,829,968,1016,1070,1107,1168,1211,1277,18,21,248,278,390,476,522,537,545,570,854,909,960,1128,162,291,705,815,873,1262,349,376,401,552,686,939,977,1061,1091,1142,1199,738,897,949,987,1052,1143,1206,1207,317,761,1245,86,153,356,364,649,657,1035,1094,1123,1197,499,566,622,775,876,1137,1222,1225,1232,1239,1265,258,339,374,605,729,771,857,997,1071,1133,543,571,784,855,867,1065,1072,1161,65,140,187,236,269,492,551,634,762,891,966,1141,1160,1260,26,866,1149,1187,1200,42,270,445,583,672,863,933,981,1194,125,378,383,436,585,814,924,1015,1192,40,411,516,576,577,598,706,735,744,772,798,805,325,491,723,753,880,56,119,250,332,347,633,828,926,1062,71,367,414,483,484,501,505,529,590,793,938,696,1238,1243,271,341,592,83,106,168,202,264,346,460,785,1244,52,396,415,840,862,889,946,1103,1189,1223,141,284,694,752,597,995,1130,1167,1267,326,423,514,1182,630,848,1032,444,459,379,656,910,930,978,424,506,628,733,899,932,1266,391,574,1178,612,671,730,1236,397,438,1213,1011,439,841,1099,523,1093,846,917,431,1132],["lo que está claro es que david sí tiene una doble identidad por la noche estrella del pop por el día marca de colonias "," que sí señor que canta muy bonito pero si no piensa comprar le importaría apartarse ","los míticos kin laría a la voz y manolo gas a la batuta recuperaron otros temones como la vaca lechera "," será esto pasarse de apología del pimplar te preguntas con una copa en la mano ","nevadas volcanes inundaciones maría jiménez hace tiempo que convivimos con las fuerzas de la naturaleza ","él tiene 53 años la canción más de 40 y la de la mochila suponemos que una hernia discal ","si tuviera sólo una pizca más de clase habría que aplicarle la ley celaá ","los únicos héroes a los que marvel todavía no ha sobreexplotado ","como teodoro garcía egea empezaron triunfando con huesos ","ana nuria dimas y víctor cucart hermanos residentes en gandía y con récord de asistencia a catequesis "," el sol de méxico contribuyó bastante al calentamiento global de la chavalería ","paddy mcaloon dijo de sí mismo que era el mejor compositor de reino unido así que un poco de luis padrique también es "," nosotros no encendimos el fuego estaba así cuando llegué y tú más el argumentario completo de una sesión de control ","liam introdujo en el pop la postura del jubilado opinando sobre una obra en la vía pública ","édith piaf le cambió algo la letra y convirtió este vals en una de sus canciones más famosas la foule ","además de un histórico guitarrista sanlúcar de barrameda dio al mundo a estas seis amigas íntimas que lo petaron sin rubor ","el pelo de amina simboliza este año la lucha contra tanto alí y mustafá cegado por el velo del machismo y la intolerancia ","el tercer padre de la rumba siempre salía con su piano se conoce que tenía ganas de bailar acumuladas ","el difunto vocalista juan antonio canta reapareció con el genial y surrealista rap de los 40 limones ","el morro que le echaron en esta versión lo han aplicado al resto de temas musicales personales y políticos ","para creadores vigueses antón reixa 8 co llevando al absurdo el concepto de economía sumergida ","el del medio de los bee gees se me ha aparecido en sueños y cuando me he fijado mejor era quique san francisco ","padre de la salsa intelectual además de un gran cantante blades es probablemente el mejor contante ","más tarde produjeron vamos a la playa y no tengo dinero dos de los mejores uooos de la historia de la música ","vaya nuestro apoyo a todos los currantes pero esta vez un poquito más a los de ryanair y vueling ","los frioleros del mundo al menos lo reconocemos un poco superior sí que es ","para diferenciarse de los espontáneos los de b movie se ponían todos mechas "," me tienes aquí colgado es originalmente de las supremes hoy se canta en los centros médicos de la comunidad de madrid ","entre el público tenéis a concha velasco agradecida y emocionada ","y aquí veis a rishi sunak cuando su mujer le dijo que se llevaba la residencia fiscal fuera de reino unido ","como bien sabe ben affleck jlo garantiza el propósito estrella de año nuevo gracias a la dieta del cucurucho ","la mayonesa no se les cortó de los vaqueros no podemos decir lo mismo ","aunque no os estéis fijando el tema es un descarado plagio de llorando se fue de la banda boliviana los kjarkas ","venga que esta nos la sabemos todos de mario conde al dioni ","y ahora que hemos localizado a la prima de mari carmen del hermano de ayuso sabéis algo ","cuando se suicidó con 44 años no existía el 024 recibe 300 llamadas al día ni más ni menos ","en su último disco se han disfrazado de star wars ángeles de leia y dioni de maestro jedi ","a medio camino entre lola flores y beyoncé inventó el arte de bailar como si caminaras sobre brasas incandescentes ","bailes exagerados jóvenes felices en bañador y emojis animados aquí nació instagram ","ahora es cuando os vais levantando a bailar si no tenéis un tiburón vale un langostino ","pues él irá fresquito pero en españa esa camisa sin una buena cadena de oro no luce ni la mitad ","macaulay hoy en día igual se parece más a los ladrones de la peli que a sí mismo de pequeño ","la orquesta gente joven fue posponiendo el cambio de nombre como el psoe con la ley tran ","l la letra es una reflexión nietzscheana sobre la espiritualidad y el deseo lacaniano de arrimar cebolleta "," y fueron felices y zzoilo pasó de los karaokes a tener un éxito sonando en medio mundo ","ágata lys abrió mentalidades blusas y braguetas 4 en la españa del posfranquismo ","a el sevilla inventó el movimiento body positive aunque él probablemente no sepa ni qué significa ","isabel ii murió sin saber que tenía unos nietos en murcia que hacen que harry parezca un santo "," el estribillo guarda un sorprendente parecido con la canción pensamiento de la banda de stephen stills manassas ","el mayor éxito de imbruglia es en realidad una versión de una desconocida banda estadounidense ednaswap ","su primer disco se llamó juan carlos calderón presenta a juan carlos calderón iba bien de autoestima ","una interpretación para quitarse el sombrero ","ea espera que parece que se ha quedado con ganas de más ","el pasado verano murió el director de la película así que este año no diremos que molaba más el libro ","negarlo todo y seguir viviendo no como el resto de borregos que creen a los medios manipuladores ","ahora psicólogos de instagram es cuando pensáis en ese niño interior adorado y vuestra fe se tambalea "," cpolicia que quede claro que esta canción es para autoconsumo ","si hay algún retoño fruto de esta noche llamadle peret o lola "," hace chacachá entonces podemos llamarlo tren de altas prestaciones de extremadura ","después de escuchar este temazo terminó haciendo su propia versión veleta fran ","apuntad los ingredientes para este pastel de carne vozarrón épica teatralidad sudor y chorreras ","iba cuando el camarero se viene arriba después de cerrar el karaoke ","rocío ya cumplía la ley de transparencia 23 años antes de su aprobación ","a w en cachitos somos muy devotos hemos hecho cientos de veces el camino de josele santiago ","no si os parece le pagamos el vuelo a rosalía desde miami para salir 30 segundos gestión de recursos se llama esto "," han pasado 20 años y seguimos sin pillar la metáfora me por aclararnos le quiere ríde como a su bike ","su sonido disco funk se ha ido refinando en paralelo al refinamiento de su barbero ","3 max b jugaba con esa figura del macho alfa una ironía que pp se pillaba en esa época a ver qué tal en esta mo ","al 4 este era el simio más contagioso antes de la viruela del mono ","elsa fue pareja de valerio lazarov harían falta muchos tiovivos para marearla "," z la canción perfecta para responder leal teteonillo cuando te digan soy yo jp 3 ","como en el govern de la gene el bajito lleva la voz cantante y y ella no para de llamar la atención pero se le ve el plumero "," nia selena quiero bailar "," la herencia de el fary es infinita y tampoco aga transmisiones patrimoniales ","en españa causaba furor a ese señor de provincias ferretero y de finde en madrid con su cuñado le flipaba ","dina azahara ala ko respirar ep ","mucho antes del punk los fundadores del grupo cantaban en el coro los pequeños ruiseñores su profe debió flipar "," ahora en serio de qué se rie ","entellas luna y el toro 2 e ","con ese tiro de cámara no hay manera de hacer chistes sobre el gorro de juan los realizadores ya no respetan nada ","la oración pagana que todos hemos rezado muchas más veces de las que nos gustaría reconocer ","el programa se llamaba luces en la noche pues ni una cosa ni la otra "," n no te fíes de las apariencias no son 2 sino ","la letra parece escrita a cuatro manos entre nicolás copérnico y tamara falcó "," ua já 1 lo de wyoming era verdad ff "," a es chimberos vacas del pueblo ya se han escapao ","y lee lewis eat balls of fire di ","con tony lopez voz de oro sobran las presentaciones ","venga que esta nos la sabemos todos de mario conde al dioni ","steaqua ll barbie gin ú "," idación tony ma manero ersexy girl ","la libertad liando al pueblo py "," e asise hacen los niños y en la república dominicana ","fito cabrales el peso pesado más ligero del rock español "," mayte river sería la hermana de mike rios desde luego ambos eran hijos del rock ","jpo latidos a virgen de la macarena ","21 años después no se trata tanto de querer como de pode ","ol 4 the gang lebration "," la primera comunión 7 de macarena olona rena olona ","su carrera meteórica tiene luces y como se ve bastantes sombras ","no solo de marley vive el reggae jimmy triunfó tras protagonizar la película jamaicana the harder they come ","si entonces hubiera existido tiktok hoy dominarían el mundo ","ms voz en drre voz en directo "," no dirás que no es doble negacionismo ","tero y tu voce de tu cuerpo ","mucho champagne hace falta para ser feliz con esos señores mirando ","la letra parece escrita a cul a ","k astley ver gonna give you up ","pa así eran las fiestas de nochevieja a antes de la ley antitabaco "," id civera e la detengan ","jóvenes guapos populares rimas consonantes parecía un plan perfecto ","s que no que esta e no era de gloria estefan ","he aquí la precuela de la flaca de jarabe de palo "," antha hudson masiado coño ","y la coreografía que hizo llorar a darwin ","este fue más o menos el argumentario en defensa de las macrogranjas "," rocío ya cumplía la ley de transparencia 23 años antes de su aproba ","howwstoppers ve nothing but a house party ","curiosamente este año la nochevieja ha caído en saturday night "," ana y zzoilo n amour remix ","7 si algo ha quedado claro 40 años después es que duran duran duran "," en 2002 era muy pronto para saber que la canción hablaba de corinna larsen ","quín sabina to entre caballeros ","no a todo el mundo le favorece tanto un gato electrocutado en la cabeza ","tranquilos es sólo un efecto de cámara o podéis beberos ese ch bm ","rito fernández de la mochila azul ","este año dijimos adiós al último grande de la edad dorada del rock and roll ","hay canciones que encapsulan un tiempo y un lugar esta delicia es una de ellas "," g 1 cachitos es como el roscón de reyes a a siempre suele llevar abba dentro "," faella carrá jn e el amor todo es empezar 3 ","por favor que pasen las asistencias para el cachito anterior ","itam go 14 daldas mojadas ","después de todo el año pensándolo tenemos algunas respuestas ninguna buena "," dm ubleyou ase don t go ","dos grandes exponentes del punk rock nacional homenajeando a su padre complejo de edipo "," aaa pad f olino radio orquesta ","ve sí sty springfield i y y 1 of a preacher man ","como teodoro garcía egea empezaron triunfando con huesos ","el autor del éxito nuestra playa muy lejos de su zona de confort ","así estamos los españoles pensando en la luz la comida el alquiler y la hipoteca del 2023 ","indiscutible número uno en la escala pantene ","anskiy elardor hi aque preventivo de la urss ","la oración pagana que todos hemos rezado mucha ms "," dedicado a los médicos de familia que y en este momento se están dando al alcohol ","con faldas y a lo loco la banda más cafre y sinvergúenza del garage punk patrio y ","y no solo las judías todas las legumbres en general están por las nubes ","si tuviera sólo una pizca más de clase habría que aplicarle la ley celaá ","estamos casi seguros de que los asuntos de ligar con hembras serranas no los lleva la virgen de la macarena ","recuperar el lema de la transición a follar que el mundo se va a acabar ","ñ una interpretación para quitarse el sombrero ","cuando 3 sudamericanos podían poner españa a sus pies sin jugar como delanteros "," sigue siendo la canción española más puntuada en eurovisión ","no soportaba la lluvia porque claramente era más de soul ","la nana con la que se duermen las gemelas del ex obispo de solsona ","estos talking heads madrileños son uno de los grupos más infravalorados de la movida ","el teclista está en tierra de nadie era el toni cantó de la banda "," a flores mo me las maravillaía yo ","en este año de huracanes aquí tenéis a otro el eva ","con esta chapan todos los congresos de cardiología aquí es cuando se pierden los papers "," señora de rocio jurado valga la redundancia "," es muy raro ver actuar con tanta coordinación a quienes están a la izquierda ","en realidad todos estaban esperando a que cantase la de yo no te pido la luna era demasiado pedir ","the cardigans las rebequitas el grupo favorito de tu madre cuando refresca ","efectivamente david hay hierbas que pueden curar de qué tarro las cogiste por curiosidad ","esta no es la profe de fama casi seguro ni siquiera la de fama a bailar "," del califato de córdoba tomaron el nombre y probablemente también su amor por el cuero "," por alguna razón tú también estás un conteniendo la respiración en casa "," sin documentos es mejor no quedarse q entreespaña y marruecos ","say hasta ahora sólo ha tocado una nota ya tiene que ser un teclado bueno ","él ya llevaba boina y usaba micrófonos cuando villarejo aún era honrado ","aretha franklin también hija de un predicador rechazó grabarla "," aunque la perdimos este año siempre nos quedará su música sus pelis y su marioneta ","los mugs gigantes de mr wonderful no son "," y ll que el mundo se va a acabar "," tamante soy un superman ","y ey e 6 años de conservatorio para gri ","el toro estaría enamorado de la luna pero el de decorados no lo debió de entender bien "," es sara socas no es de aquella batalla de gallos que no tampoco ","fabio capello siempre fue e as de traje que de chándal 7 a ","oes del silencio roe de leyenda "," rsailor ha ur to the floor ","sacar del armario las camisetas pacifistas y morir contento teniendo razón ","nano y su banda vid el gnomo "," quién iba a saber que el resto de canciones se iban a parecer tanto a esta ","en esta época él aún era pablo escobar ","un producto danés que te has comido muchas 1 más veces que sus galletas de mantequilla ","una canción de juan gabriel muy contagiosa y con varias mutaciones el covid mexicano ","después de escuchar este temazo terminó haciendo su propia versión veleta franklin ","somos fieles seguidores de la doctrina de auserón el a pop tol santiago ","el cantante se nos parece un poco al rubio de cruz y raya también lo veis o estamos locos "," íbamos a poner la gasolina pero estaba carísima ","si no veis a la cantante tranquilos todo en orden e es que lleva un traje de camuflaje "," yote dax jw 4 perra lorazón ","luego se cortó la coleta y empezó a desubicarse un poco a otros también les ha pasado ","por su potencial adictivo este estribillo debería ser catalogado como droga dura ","en realidad ella era italiana no gala ","en 2022 el youtuber míster jágger le recordó la letra de la canción palabra por palabra "," especialista en cantar canciones bonitas poniendo cara de abrir la carta de iberdrola ","como el príncipe de bel air pero sin darle un puñetazo a nadie "," cuando el camarero se viene arriba a después de cerrar el karaoke ","si no te suenan es porque llegaron tarde al britpop y eran demasiado blanditos para el indie ","os reiréis pero la postura de ángel beato aguanta terremotos de magnitud 5 ","mucho antes del punk los fundadores del grupo cantaban en el coro los peque "," catar no es una democracia sino una monarquía absoluta sin respeto por los derechos humanos dos ","esta sí que se la sabe tu madre y tu hija "," ha llegado ya el momento de abrir el melón de que este muchacho canta raro ","ahora ya sabéis cual era la temperatura exacta en la escuela de calor ","a coro 500 16 la virginidad miguel bosé ","para diferenciarse de los espontáneos los de b movie se ponían todos mechas "," dentes y boikot neras de vivir ","de los doscientos hitazos de este grupo este es el que inspiró todos los temas de ska p ","fue un tema pionero del eurodisco y con los años se ha convertido en un infalible himno de estadio ","hi en el año 75 esta actuación debió de traer mucha cola ","a la versión para adultos del personaje de blake edwards podría titularse la manguera rosa ","de imagen y de mensaje iban sobrados pp como samantha hudson pero con musicón ","la canción perfecta para responder al telefonillo cuando te digan soy yo ","este fue su primer single todo ha cambiado mucho todo menos el presentador de este programa jordi hurtado "," as y oundations 1ld me up buttercup ","lao y maa a ese era hermano del gran wyomin "," lio aragón batita de ron 4 ","si te has propuesto empezar el año comiendo 5 piezas de fruta al día ya sólo te quedan 4 de nada "," puro northern soul amenizando la zona de jardinería de un leroy merlin ","ya está bien con la bromita devolvedle a rafa las gafas de ver de lejos "," grecas estoy amando locamente ","lo de mezclar ropa de calle con ropa de estar por casa no lo inventó rosalía ","in paulyoung ve ls in the air ","muchos españoles hemos estado cantando 30 año nada es igual que una sirena es nadas ","la mayonesa no se les cortó de los vaqueros no podemos decir lo mismo ","sabina pactó con unos ladrones hacerles esta copla y cumplió como lo del cgpj pero con gente responsable ","coherencia honestidad y esa pinta de acabar de desembarcar de la perla negra di sí a el drogas "," a 1 es your mother know sna ","carmel la primera amy winehouse tenía pinta de ser más de clase de pádel que de rehab ","hoy en megaestructuras tupé de loquillo ","atención a las sorprendentes voces del coro de guitarristas castrati ","pasaron de boy band pionera filfs de manual ","lo más viral del covid después del covid claro ","en el juzgado del corazón de civera las órdenes de detención llevan coreografía ","la publicidad subliminal de la época era como la canción rudimentaria z ","no fue a eurovisión pero da tal subidón que dan ganas de tener cientos de hijos la generación bandini ","nuestro propósito para este año recurrir más a la risa y mucho menos a la prisa y a la visa "," será esto pasarse de apología del pimplar te preguntas con una copa en la mano ","dos de los miembros eran hermanos de la estrella de atlantic records solomon burke "," hipervitaminada de la canción una re one ugly child de larry bright ","manolo no gana para disgustos primero fue lo del carro y ahora wilma tampoco le abre la puerta ","mn poner resistiré y salir al balcón a aplaudir a los militares ","sin embargo su fulgor se extinguió antes de tiempo como les va a pasar a esas bengalas ","boney m y tigretó n las mejores fuentes de grasas saturadas de nuestra infancia "," desde el bulo que lo situaba escondido en un armario pasó una década hasta que por fin salió de él "," o man sound co samba mix ","este es el tipo de kiko que nos gusta que nos pongan junto a la caña ","por cierto nosotros también echamos mucho de menos la hora musa "," an r8b británico blanco e imperecedero como el porridge o tetreimt e "," ctor explosion s feo chaval ","el sevilla inventó el movimiento body positive aunque él probablemente no sepa ni qué significa ","el batería acaba de pillar el chiste de paul mccartney ","11d id no os preocupéis la tele pública respeta vuestras e vejigas aunque no tenga anuncios ","en cachitos como en el amor y en el rascar todo es empezar os quedan tres horas de canciones buenas y chistes malos "," te river lando el viejo rock ","como queriendo revelar donde había estado todo ese tiempo en 2015 grabó la canción debajo del sombrero ","quimi portet y manolo garcía amarraron este proyecto en la puerta del baile para arrancar el último de la fila ","el sobrino de peret saboreó todos los géneros al ser el rumbero de la época con menos complejos ","nos ha pedido pedro sánchez que os digamos que esta subida también es culpa de la guerra en ucrania ","la verdad es que dorothy está rarísima después de pegar el estirón ","free the nipple bobby farrell ha lavado menos camisetas que iggy pop ","mejor nos vamos a las genuinas fuentes del rock ","do diga se llamaba luces en la o ","a la guitarra eléctrica rafa callejo fundador de la banda y coautor de esta canción fallecido en 2022 ","una arriesgadísima realización que combina el plano secuencia con el contrapicado o plano papada ","el pop boloñés puede ser tan bueno como su salsa ","abad 1981 ho racio pinchadiscos h ","fue una forrest gump de la historia del arte y la música en su peli salen dalí bowie coco chanel ","delia pasó del anonimato a la fama tras salir en un anuncio de tabaco en que pasaba del anonimato a la fama ","en su último disco se han disfrazado de star wars ángeles de leia y dioni de maestro jedi ","debieron traducir la letra con el google translate de la época el collins no phil sino el diccionario "," la historia interminaaaaaaaablececee nananaaaanananadá en español más que cantarse se tararea ","se puso noelía porque llamarse chayanna era dar demasiadas pistas ","así han recibido in the navy los presupuestos de este año "," a minnelli 4 sing my mind ans 1 ","él sube un tema a redes ella lo escucha y publica unos versos en twitter él le propone una colaboración ","en algunas cenas de nochevieja también se respira esa calma tensa ","tobago sonó en la despedida de albert rivera del bufete de abogados donde trabaj donde estaba ","paulina llevando al extremo la clásica pesadilla de salir de casa sin pantalones ","bastan dos acordes para que tu cerebro reproduzca entera esta canción lo dificil es sacársela luego ","en el público sólo el de la camiseta de platero sabía a qué venía ","el country nunca volvió a ser lo mismo después de este disco lado ponti country la pared sr ","vamos ya que va quedando poco sacad la mermelada ","no hagáis bromitas que nos conocemos el humo es artificial ","aquel año el cádiz descendió a 2 b y creemos que bisbal no tuvo nada que ver ","espera que parece que se ha quedado con ganas de más ","si trabajara en una oficina se llamaría despecho ","el eslabón perdido entre led zeppelin y el homo eructus "," su casa es suya hoy en día la letra pertenece al género de ciencia ficción ","cuando las tanxugueiras fueron hacía mucho que andrés do barro había vuelto ","más que una feria era una fiera en los escenarios de hecho inspiró el peinado de teen wolf ","la coreografía viene a recordarnos que el ","bien ha llegado el momento de huir del primo soltero y que este año se ha apuntado a clases de salsa ","aquel verano trabajaron más que un camarero en la feria de abi ","ría jesús y su acordeón s pajaritos ","si vais a hacer esta coreografía ojo que los vecinos no se esperan una clase de aeróbic a estas horas ","estuvo prohibida en los colegios católicos hondureños aseguraban que era una invitación a ser hereje ","sería el momento de sacar la versión navideña s sabor turrón ","transitando la fina línea que separa a danny zuko att del protagonista de una peli de eloy de la iglesia ","alter ego de marc parrot quien terminó por cansarse del personaje y recuperó al artista ","camilo sesto robando protagonismo a los tenderos en 4 la feria de artesanía iberoamericana ñ "," que sí señor que canta muy bonito pero si no piensa comprar le importaría apartarse ","bastante lío ha tenido este año con la mudanza de queipo de llano ","a sigue siendo muy divertido escucharla en alguna 2 ","20 años después de su separación sigue sin haber una sola verbena de pueblo sin platero ","ef siempre se dijo que habían llevado el fenómeno fan y le 4 n público más joven aun e a un público más joven aunque esto es pasarse ","bailes exagerados jóvenes felices en bañador y emojis animados aquí nació instagram ","con movimientos parecidos al tiro liro los seguidores de bolsonaro llaman a los marcianos para frenar a lula ","en 2022 cayeron los muros de metacrilato ya sólo llevamos mascarilla en transporte orgías y atracos ","iconos de vivir la vida locamentí en realidad su historia va de música mujeres y desigualdad ","y después de la versión junto a ojete calor es imposible escucharla sin echar de menos al calcetín con ojos ","tuvo un éxito fugaz y efimero suponemos que ahora vive preguntándose si alguien la llamará ","aquí los padres del italo disco perpetuando el tópico del español ladrón son 678 casos aislados ","este famosísimo baile consiste en anexionarse a la pareja como putin a una península del mar negro "," sabes cómo se llama el cantante de los suaves a yosi ","mn si hay algún retoño fruto de esta noche llamadle peret o lola ","como veis no es imprescindible ponerse reguetón para estar en la tica un ratillo "," hace chacachá entonces podemos llamarlo y q tren de altas prestaciones de extremadura ","décadas después los latinos se vengarían enviándonos el reguetón ","abba roxette europe the cardigans qué buenos los suecos para montar grupos y qué vagos para montar muebles ","si anne igartiburu se hubiera criado en triana se despediría con un hasta mañana garloch "," disculpe un momento voy a consultar disponibilidad ","esta leyenda de la música italiana cultivó con éxito el look llevo 15 días durmiendo en un ford fiesta ","que no os despiste el traje y el peinado a raya en realidad el discurso es el mismo que el de daddy yankee ","uno de los hermanos la bionda el de la chaquetilla masterchef carmelo falleció este año ","los de nena llaman a kiss fm plan dorado de pensiones "," a e mula abierta quiero más y "," mia 48 12 discos llevan y no han dejado de fruncir el ceño ni una estrofa "," mari carmen patrona de la verbena y la cha m e madre de todos los juerguistas de españa "," que mañana es domingo qué mala suerte con los festivos este año "," cuando te queda bien un pantalón de cuero marrón es que te queda bien todo ","no solo de marley vive el reggae jimmy triunfó t ","la canción habla de una joven enamorada de un hombre mayor un día más en la oficina para le "," bienvenidos si estáis todos es porque habéis recordado que tras los cuartos van tu banco hacienda y el rey emérito ","bueno si eres colchonero al menos estás acostumbrado a los disgustos ","los enemigos titularon dónde su versión de este hit del más infravalorado de los cantantes de soul ","en estos años fue cuando el loco escoltado por sabino se cayó en la marmita del rock sigue alli desde entonces ","este tema lleva 15 años siendo un meme de internet se llama rickroll y aparece cuando menos te lo esperas ","el mayor éxito de imbruglia es en realidad una versión de una desconocida banda estadounidense ednaswap 4 ","niños no os preocupéis que en cuanto terminen la actuación los reyes magos se ponen con lo de los regalos "," un portento vocal apodada la voz de cristal de la copla que falleció en 2022 "," arriba con él yo me voy mañana los franco fear josé antonio ","de la magia del directo se encargaba directamente uno disfrazado de tamariz ","perderá la cabeza pero siempre sabremos donde encontrar a este portento de mujer que nos está mirando a todos ","está claro que el acordeón fue una apuesta arriesgada pero hay que pensar que la única competencia era chanquete ","azúcar no tan moreno con ellas nos ocurre como con andy 8 lucas seguimos sin saber quién es quién ","una cosa más ni olvido ni perdón para el creativo responsable del jingle care carrefoooou ","este año varios artistas grabaron una versión benéfica para celebrar el 75 cumpleaños de víctor manuel ","los únicos héroes a los que marvel todavía no ha sobreexplotado ","sus fans se debatían entre la admiración y la envidia que producía comprobar que ellos si tenían terraza ","los frioleros del mundo al menos lo reconocemos un poco superior sí que es ","podéis probar a hacer esto con el último polvorón bastante mejor que pamplona "," ah y creemos que aboebé es como los listos llaman ahora al aceite de oliva ","si la azafata monta este show en pleno vuelo es momento de empezar a sospechar que algo va mal ","ntores de híspalis 1e no nos falte de ná ","rdaliso a no yo no sé estar "," la herencia de el fary es infinita y tampoco un o ho "," n bilirrubina 5d guerra ","y se entiende perfectamente los disfraces de ardilla pp lo que más ","le vimos mucho durante aquel verano pero no tanto como los dependientes del territorio vaquero de el corte inglés ","es incomprensible que los negacionistas no usaran este tema para protestar por las mascarillas ","siempre se dijo que habían llevadi ","fue el primer sencillo de dire straits la ha tocado tanto que esa stratocaster podría hacer el punteo de memoria ","sufrieron homofobia sin siquiera salir del armario en los años en los que españa se creía moderna m "," rebruno quiero hacer pipí papá ","cec no viene de los productores clivillés y cole sino de su helado preferido cookies 8 cream se ve que era light ","este era el simio más contagioso my antes de la viruela del mono ","mayonesa y chocolate hemos comido cosas peores al llegar a casa después de la fiesta de nochevieja ","en pilones de varios pueblos de españa se han hallado restos de djs que se negaron a pinchar esto en las fiestas ","a pesar de su título la canción contiene un 0 de swing ","espérate que el que estaba descoyuntándose en realidad es el que toca las congas ","el padre del electro mandinga perteneció a una estirpe de griots ancestrales narradores de historias ","dad jardín 4 e casa es suya ","tras su fallecimiento muchos descubrieron que era muchísimo más que grease especialmente en lo musical "," freestyle rumbero si les llama c tangana se le suben a la mesa antes del primer plato ","la orquesta gente joven fue posponiendo el cambio de nombre como el psoe con la ley trans ","nevadas volcanes inundaciones maría jiménez hace tiempo que convivimos con las fuerzas de la naturaleza ","si quieres conservar intacta tu vajilla jamás sientes a un trombonista a la mesa ","logró cuatro números uno cantando en gallego durante la dictadura y no fue gracias a sus coreografías ","una versión del marinaio de gianni morandi en la gran voz de una cantante muy familiarizada con la sensación de mareo "," y o el de contabilidad tras perder la cuenta de los cubatas que ha pedido en el karaoke ","advertencia ha llegado el momento de guardar la sidra el gaitero y sacar el kalimotxo ","entre la chiquillada podéis ver a ariel rot intentando vender un país para educarlo no lo compramos y ahora mira ","f olivia newton john allá donde estés mt no hace falta que veas esto ","en los últimos años cuando alguien pronuncia locomía suele referirse al gluten ","édith piaf le cambió algo la letra y convirtió este vals en una de sus canciones más famosas la foule ","82 negarlo todo y seguir viviendo no como el resto de borregos que creen a los medios manipuladores "," como les ocurre a los esquimales con el blanco emilio josé conoce cientos de palabras para decir empalagar ","mientras en otra dimensión triana canta yl abre la puerta niña ","lo de comprar el rollo de que jovanotti era un rapero clásico fue una bajada de pantalones en toda regía ","no solo han puesto música a la cuenta atrás del planeta y también contribuyeron a ella con un ingente consumo de laca ","la canción vale para una fiesta o para pasar la aspiradora lo importante es la actitud y que esté limpia la casa ","el kool de la banda no es el cantante sino el del bajo de juguete que obviamente si lleva cadenita a ","el esfuerzo del coreógrafo es inútil la única forma de bailar esto es haciendo el trenecito ","en este caso no podemos asegurar que para esta grabación no haya muerto algún que otro loro ","esta va para los que estáis solos en casa viéndonos o sea que no estáis solos o sea que no va por vosotros "," como feos de pleno derecho por eso somos guionistas vamos a ofendernos un poco y ahora seguimos ","ana nuria dimas y víctor cucart hermanos residentes en gandía y con récord de asistencia a catequesis ","no queda ni rastro de este grupo en interne el algoritmo también está programado para ol debe ser que far traumas ","estaban tan seguros de que la canción era un pepínaco que hacían música disco vestidos como un contable de los 70 ","a excelente resumen de la filosofía del colegio mayor ahuja y bastante mejor para cantar a coro desde las ventanas ","ya en el 77 estaba clara la necesidad del uso generoso en las discotecas del corta el rollo ","esta canción igual lo notáis la produjeron pet shop boys que saben siempre cuando hacen falta como ahora mismo ","la relación entre rufián y borrás tiene menos roces ","10 años tratando de escribir la frase perfecta y jamás hen lograremos algo tan eficaz como este estribillo ","en la mente de algunos de vosotros esta canción termina con ay que me meo coa ","el tercer padre de la rumba siempre salía con su piano se conoce que tenía ganas de bailar acumuladas ","el difunto vocalista juan antonio canta reapareció con el genial y surrealista rap de los 40 limones ","me 20 años después de que este tema saliera en un anuncio lb lanzándolos a la fama los barceloneses han dicho adéu ","entre el público tenéis a concha velasco agradecida y emocionada ","en su momento fue algo futurista hoy como mucho puede verse como el futuro de podemos ","qpolicia que quede claro que esta canción es para autoconsumo ","y ahora que hemos localizado a la prima de mari carmen del hermano de ayuso sabéis algo "," 4 an tan agarrotado como el no rompas más mi corazón pm pero con volantes caribeños en las mangas "," en el siglo xv otros españoles con ese mismo peinado a ya les habrían robado el puesto entero ","un paseo trilingúe y canalla por el raval y sin final feliz hit de un grupo que mereció más reconocimiento oh shie ","sobrino del gran manolo caracol mejoró la canción original de cecilia el himno de interflora ","fue uno de los primeros éxitos internacionales del reggae él es el desmond del que habla ob la di ob la da "," no os confundáis esto es john wayne de los enemigos los enemigos de john wayne eran los indios ","al algoritmo que sabe lo que nos gusta o no nos gusta en este mundo raphael le vuelve loco ","su hombre blandengue ha servido para una campaña del ministerio de igualdad a ver cuándo le toca a la mandanga ","el del medio de los bee gees se me ha aparecido en sueños y cuando me he fijado mejor era quique san francisco ","en españa causaba furor a ese señor de provincias ferretero y de finde ","el mismo mensaje que el ne me quitte pas 22 pero con la sensibilidad de una baguette ","esta coreografía sigue instalada en alguna parte de tu memoria justo al lado del teléfono fijo de tus padres ","mark knopfler el hijo no reconocido de miliki ","si se os cierra la ventanita del amor preguntad a tamara falcó que os la abre en un nanosegundo ","7 conocemos el significado de abanibí pero el de sarandonga sigue siendo un misterio insondable ","esta actuación contiene más latigazos cervicales 32 que una colisión en cadena ","su otro single se llamó mi chica tiene un lío con satán lógicamente se convirtieron en un grupo de culto "," este 2023 la canción cumple 25 años y tú igual jh deberías empezar a pensar en tu próstata "," la letra es una reflexión nietzscheana sobre la espiritualidad y el deseo lacaniano de arrimar cebolleta ","esas hombreras nos habrían venido muy bien para mantener la distancia social durante la pandemia ","la letra contiene palabras de amor en 6 idiomas sl una navaja suiza para ligar durante un erasmus ","es una canción doblemente cinéfila centrada en john wayne pero inspirada en una frase de la chaqueta metálica ","el rótulo anterior no lo cobramos porque nos lo dictó nuestro cuñado ","por el pelo y la afinación parece manel navarro pero no es coral alonso siendo punki en los 80 ","mitad señor mitad correcaminos un centauro de marca acme ","que la gorra trumpista no os confunda chris lowe no se mueve ni para invadir el capitolio ","la voz que le hace los coros a jennifer lopez se parece muchísimo a la de jennifer lopez "," aaa nivel de inglés ketchup ","no lo creereis pero cuando la compuso nelson zapata curraba en pfizer en los ensayos de lo que sería la viagra "," je sigue sputnik st century boy ","las sevillanas ya no se sostienen sobre el televisor pero é aún podemos meter a 25 dentro de él chúpate esa progreso "," el sol de méxico contribuyó bastante al calentamiento global de la chavalería "," nosotros no encendimos el fuego estaba así cuando llegué y tú más el argumentario completo de una sesión de control ","añ en galicia antes de abel caballero los conciertos y se hacian de día porque no existía la luz la creó él ","desde la atrevida ignorancia de algún panfleto le definieron como transformista supremacista asturiano "," igaboys om boom boom boom ","mr nada más dejar la fábrica de coches ya se notaba que los tubos de escape iban a dar problemas ","ahora es cuando os vais levantando a bailar si no tenéis un tiburón vale un langostino "," y fueron felices y zzoilo pasó de los karaokes k a tener un éxito sonando en medio mundo "," el pasado verano murió el director de la película asi que este año no diremos que molaba más el libro ","si le quitáis la cámara lenta podéis ver una coreografía de melody ","cuando ginebras se vayan a vivir con las kardashian pondremos versiones de su paco y carmela ","el morro que le echaron en esta versión lo han aplicado al resto de temas musicales personales y políticos ","su primer disco se llamó juan carlos calderón presenta a juan carlos calderón lba bien de autoestima ","necesitaron una pandemia mundial para dar el pelotazo a almeida le bastó con un saque de honor ","tampoco os fieis de la primera impresión más o menos así veían a españa antes de ganar el eurobasket 2022 "," claudio biern el walt disney español que en paz descanse debió de ver naves en llamas más allá de orión ","f max b jugaba con esa figura del macho alfa una ironía que se pillaba en esa época a ver qué tal en esta ","vaya nuestro apoyo a todos los currantes pero esta vez un poquito más a los de ryanair y vueling ","fallecida este año irene cara dejó dos temazos de oscar este por fama y otro por flashdance "," 4 el río bravo la valla el estrecho el canal de la mancha el atlántico el tema lleva siglos de plena actualidad ","en la familia de los himnos lgtbi este tema está junto a a quién le importa pero con un pelín más de hartura ","han pasado 20 años y seguimos sin pillar la metáfora por aclararnos le quiere ride como a su bike ","lo protagonizó olivia newton john que también participó en su banda sonora entre otras muchas cosas ","habrá visto desaparecer a los dinosaurios pero jordi hurtado al fondo está flipando también ","ágata lys abrió mentalidades blusas y braguetas en la españa del posfranquismo ","momento para sacar las cerillas y quemar el piano del comedor más vale que tus suegros sean muy fanáticos de the killer ","tex eligió mal a su archienemigo james brown no sólo sedujo a su novia también le disparó en un club ","los ochenta la década en la que los pianos de cola servían para apoyar el sintetizador ","y 4 a elsa fue pareja de valerio lazarov harían falta 2 ef muchos tiovivos para marearla ","si tenemos mejor clima que los británicos pero nuestro grupo de 3 hermanos es café quijano ","en esta la versión original en alemán los globos no eran rojos pero el final era el mismo apocalipsis nuclear "," vengaboys viene de un español que decía siempre venga lo de hacer de vengadores puede que venga de otra cosa ","en 2017 estados unidos les vetó la entrada al pais trump no podía soportar la comparación con semejante pelaso ","para la escena anterior no se han utilizado dobles de riesgo dónde íbamos a encontrar a uno con ese bigotillo ","su especialidad versiones guatequeras de folk iberoamericano a la madre de joaquín prat le molaban "," right between the eyes entrecejo a cargo del grupo wax cera un himno en los centros de estética ","midge fue líder de ultravox y como veis domina el arte o del falsete el santiago abascal escocés ","la marca swatch introdujo esta canción en una campaña desde entonces funcionó como un reloj ","estos guitarristas fueron pioneros en dar la espalda al público mucho antes que los planetas ","que la posproducción no os engañe fallecido en 2022 manolo sanlúcar fue uno de los guitarristas más grandes "," garlochí no es una variante de sarandonga sino el término caló para decir corazón ","para creadores vigueses antón reixa 8 co llevando al absurdo el concepto de economía sumergida ","más tarde produjeron vamos a la playa y no tengo dinero dos de los mejores uooos de la historia de la música "," uh eh samantha qué sorpresa el rótulo de hace un rato era de coña eh lo tuyo mola todo la música también "," h este himno de más de 7 minutos forma parte de siembra z el disco más vendido de la historia de la salsa "," el compositor de la canción es el padre de uno de los de daft punk nadie sabe de cúal ","peret seleccionador del equipo nacional de rumba catalana un séquito de verdaderos gitanos de la calle de la cera "," e en cachitos somos muy devotos hemos hecho j cientos de veces el camino de josele santiago ","al español le falta una palabra para definir esta sensación entre grima y ternura grímural ","luego en la sgae ya descubriría que otra economía sumergida es posible cantó y le echaron no les moló la movida viguesa ","el de la pandereta tiene un trabajo muy sencillo pero no acaba de dar con la tecla en el grupo le llaman alberto casero ","los míticos kin laría a la voz y manolo gas a la batuta recuperaron otros temones como la vaca lechera ","22 el grupo de schródinger para muchos son mocedades y el consorcio al mismo tiempo mo ","él tiene 53 años la canción más de 40 y la de la mochila suponemos que una hernia discal ","así serían los habitantes de la aldea de astérix y obélix si las cantimploras llevaran rebujito ","una canción del compositor cubano rené touzet que ha tenido más versiones que el fraude de las mascarillas ","liam introdujo en el pop la postura del jubilado opinando sobre una obra en la vía pública ","su sonido disco funk se ha ido refinando ee en paralelo al refinamiento de su barbero yz ","defensa en línea con trivote atacante y un 9 no muy guapo pero con un envidiable juego de piernas ","lo que está claro es que david sí tiene una doble identidad por la noche estrella del pop por el día marca de colonias ","í en la portada de su único álbum iba exactamente con esa ropa se titulaba pienso quedarme soltero mal no iba ","en los 80 el mismo oucfe te valía igual para fundar una startup de informática que una banda de éxito ","el que está menos nervioso es vince clarke ex depeche mode que aprovecha el play back para tocar temas de ismael serrano "," suburbia habla en parte de los disturbios de la época de thatcher la versión original de liz truss ","y aquí veis a rishi sunak cuando su mujer le dijo que se llevaba la residencia fiscal fuera de reino unido ","izquierda derecha como veis tienen la postura tan sólidamente definida como el gobierno respecto al sahara ","cuando se suicidó con 44 años no existía el 024 recibe 300 llamadas al día ni más ni menos "," vale el batería no es imprescindible aquí pero habéis visto un ordenador que sonría tanto mirando a la de rojo ","pues él irá fresquito pero en españa esa camisa sin una buena cadena de oro no luce ni la mitad ","cualquier que haya caminado por el centro de barna ha oído esta cantinela comercial cerveza beer ","isabel il murió sin saber que tenía unos nietos en murcia que hacen que harry parezca un santo ","padre de la salsa intelectual además de un gran cantante blades es probablemente el mejor contante ","los hermanos que hicieron la sintonía de don quijote se atrevieron con el musical xanadú que ya era una fantasía ","uno de los grandes compositores patrios lo mismo sonaba en una feria que en el hilo musical del dentista ","aunque no os estéis fijando el tema es un descarado plagio de llorando se fue de la banda boliviana los kjarkas ","a medio camino entre lola flores y beyoncé inventó el arte de bailar como si caminaras sobre brasas incandescentes ","el baile de chayanne es un arte marcial milenario con el que 4 puedes matar en segundos sobre todo a ti mismo ","macaulay hoy en día igual se parece más a los ladrones de la peli que a sí mismo de pequeño "," el estribillo guarda un sorprendente parecido con la canción pensamiento de la banda de stephen stills manassas á ","la letra le dice a bruce springsteen que hay algo más que coches y chicas se referiría al fútbol no ","además de un histórico guitarrista sanlúcar de barrameda dio al mundo a estas seis amigas íntimas que lo petaron sin rubor ","esta la ponen indefectiblemente en todas las bodas es cuando el novio rentabiliza la barra libre ","el videoclip de este tema fue dirigido por michael bay y por supuesto incluye persecuciones y un helicóptero ","triunfó con kids in america y teloneó a michael jackson dos datos que seguramente no están relacionados ","esta canción la ha versionado hace un rato évole así que mandamos nuestras disculpas sinceras a joaquín ","se abre el telón y aparece una paella enorme con un trocito minúsculo de carne en el medio cómo se llama el cantante "," crees que tu cena familiar ha sido tensa piensa que 4 en la mesa de los gallagher ponen cuchillos de plástico ","desafortunadamente pascual gonzález compositor y fundador del grupo sí nos faltará desde este año ","víctor abundancia y su banda enteramente h7 ompuesta por extras de miami vice compuesta por ia ","por supuesto hubo peli se tituló los pajaritos pero no la dirigió hitchcockito como hubiera sido lógico ","como bien sabe ben affleck jlo garantiza el propósito estrella de año nuevo gracias a la dieta del cucurucho ","el encuentro entre las dos culturas no volvería a ser tan x estrecho hasta dos años después en la cumbre de las azores ","paddy mcaloon dijo de sí mismo que era el mejor compositor de reino unido así que un poco de luis padrique también es ","en su guitarra cabía una banda al completo y era capaz de tocarla bien hasta cuando se sentaba al piano ","apuntad los ingredientes para este pastel de carne e vozarrón épica teatralidad sudor y chorreras e ","ahora psicólogos de instagram es cuando pensáis mn en ese niño interior adorado y vuestra fe se tambalea "," los que estuvimos en aquellas discotecas todavía vemos estas clases de zumba con estrés postraumático ","ha demostrado hasta donde llega el poderío latino y lo importante que es leer las cosas antes de firmarlas ","entonces se la dedicamos a víctor y a tania catedráticos del petardeo por tomarse tan en serio lo de no tomarse en serio ","con el año político que llevan rick astley es ahora mismo la única fuente de estabilidad social en reino unido ","no si os parece le pagamos el vuelo a rosalía desde miami para salir 30 segundos gestión de recursos se llama ","mí por muy hedonista que parezca esta canción es una joya filológica de la cultura garífuna de los esclavos del caribe p ","miguel gallardo como su propio nombre indica para nosotros que le está ofreciendo un viaje a cuenca ","francisco eligió el nombre artístico cuando los buenos aún no estaban pillados como los que llegaron primero a hotmail ","antes de hacer dúo con pajares fue payaso cómico y cantante y este fue el hit de su primer disco romance del ajo ","como en el govern de la gene el bajito lleva la voz cantante lla no para de llamar la atención pero se le ve el plumero y ella no pa p pl ","tiene mérito lograr un one hict wonder llamándote carlos pérez y teniendo aspecto de haber liderado la fuga de la modelo ","la letra incluye referencias a 118 políticos artistas o eventos se canta siguiendo el índice de la larousse ","el realizador ha querido tener una deferencia con todos aquellos que a estas alturas ya vais del revés ","con ese tiro de cámara no hay manera de hacer chistes ñ sobre el gorro de juan los realizadores ya no respetan nada n los realizadores ya no respetan nada ","joel hoy parece otro señor pero sigue vivo algo que sólo pueden decir 4 de las más de 60 personas que menciona ","el vocalista andy bell usa la coreo del dúo dinámico soy como el junco que se dobla pero siempre sigue en pie ","su otro nombre speed tampoco era muy original en euskadi ya puestos con los tópicos haberse llamado abstinencia ","el pelo de amina simboliza este año la lucha contra tanto alí y mustafá cegado por el velo del machismo y la intolerancia ","ñ los hispanoargentinos nos trajeron hedonismo l rock y la talla slim fire "," me tienes aquí colgado es originalmente de las supremes hoy se canta en los centros médicos de la comunidad de madrid "," la coreografía en este caso está basada en artes marciales inventadas lo cual traía consigo un agradable olor a gimnasio ","hombreras mechas americanas remangadas la única forma de ir más ochenteros era disfrazarse de naranjito ","desde 2013 tina es ciudadana suiza allí disfruta de sus paisajes alpinos y un poco también de su régimen fiscal "],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,5,5,5,5,6,6,8,8,11,13,23,29,30,35,36,36,36,40,41,42,44,45,46,47,48,49,50,51,51,52,52,53,53,55,55,55,55,59,59,59,61,62,62,62,62,63,63,63,63,63,63,65,66,67,67,68,69,69,70,70,70,70,71,71,72,73,73,73,74,74,74,74,74,74,75,75,75,75,75,75,76,77,77,77,77,78,78,78,78,79,79,79,79,79,79,79,79,79,80,80,80,80,80,80,80,81,81,81,81,82,82,82,82,83,83,83,83,83,83,83,83,83,83,83,83,84,84,84,84,84,84,84,84,84,84,85,85,85,86,86,86,86,86,86,87,87,87,87,87,87,87,88,88,88,88,88,88,88,89,89,89,89,89,89,89,89,89,89,89,89,90,90,90,90,90,90,90,90,90,91,91,91,91,91,91,91,91,91,92,92,92,92,92,92,92,93,93,93,93,93,93,93,93,94,94,94,94,94,94,94,94,94,95,95,95,95,95,96,96,96,96,96,96,96,96,96,97,97,97,97,97,97,97,97,97,97,97,97,97,97,97,97,98,98,98,98,98,98,98,99,99,99,99,99,99,99,99,99,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,101,101,101,101,101,101,101,101,101,101,101,101,101,101,102,102,102,102,102,102,103,103,103,103,103,103,103,103,103,103,103,104,104,104,104,104,104,104,104,105,105,105,106,106,106,106,106,106,106,106,106,106,107,107,107,107,107,107,107,107,107,107,107,108,108,108,108,108,108,108,108,108,108,109,109,109,109,109,109,109,109,110,110,110,110,110,110,110,110,110,110,110,110,110,110,111,111,111,111,111,112,112,112,112,112,112,112,112,112,113,113,113,113,113,113,113,113,113,114,114,114,114,114,114,114,114,114,114,114,114,115,115,115,115,115,116,116,116,116,116,116,116,116,116,117,117,117,117,117,117,117,117,117,117,117,118,118,118,119,119,119,120,120,120,120,120,120,120,120,120,121,121,121,121,121,121,121,121,121,121,122,122,122,122,123,123,123,123,123,124,124,124,124,125,125,125,126,126,127,127,127,127,127,128,128,128,128,128,128,128,129,129,129,130,130,130,130,131,131,131,132,133,133,133,134,134,135,136,138,139],["lo que está claro es que david sí tiene una doble identidad por la noche estrella del pop por el día marca de colonias "," que sí señor que canta muy bonito pero si no piensa comprar le importaría apartarse ","los míticos kin laría a la voz y manolo gas a la batuta recuperaron otros temones como la vaca lechera "," será esto pasarse de apología del pimplar te preguntas con una copa en la mano ","nevadas volcanes inundaciones maría jiménez hace tiempo que convivimos con las fuerzas de la naturaleza ","él tiene 53 años la canción más de 40 y la de la mochila suponemos que una hernia discal ","si tuviera sólo una pizca más de clase habría que aplicarle la ley celaá ","los únicos héroes a los que marvel todavía no ha sobreexplotado ","como teodoro garcía egea empezaron triunfando con huesos ","ana nuria dimas y víctor cucart hermanos residentes en gandía y con récord de asistencia a catequesis "," el sol de méxico contribuyó bastante al calentamiento global de la chavalería ","paddy mcaloon dijo de sí mismo que era el mejor compositor de reino unido así que un poco de luis padrique también es "," nosotros no encendimos el fuego estaba así cuando llegué y tú más el argumentario completo de una sesión de control ","liam introdujo en el pop la postura del jubilado opinando sobre una obra en la vía pública ","édith piaf le cambió algo la letra y convirtió este vals en una de sus canciones más famosas la foule ","además de un histórico guitarrista sanlúcar de barrameda dio al mundo a estas seis amigas íntimas que lo petaron sin rubor ","el pelo de amina simboliza este año la lucha contra tanto alí y mustafá cegado por el velo del machismo y la intolerancia ","el tercer padre de la rumba siempre salía con su piano se conoce que tenía ganas de bailar acumuladas ","el difunto vocalista juan antonio canta reapareció con el genial y surrealista rap de los 40 limones ","el morro que le echaron en esta versión lo han aplicado al resto de temas musicales personales y políticos ","para creadores vigueses antón reixa 8 co llevando al absurdo el concepto de economía sumergida ","el del medio de los bee gees se me ha aparecido en sueños y cuando me he fijado mejor era quique san francisco ","padre de la salsa intelectual además de un gran cantante blades es probablemente el mejor contante ","más tarde produjeron vamos a la playa y no tengo dinero dos de los mejores uooos de la historia de la música ","vaya nuestro apoyo a todos los currantes pero esta vez un poquito más a los de ryanair y vueling ","los frioleros del mundo al menos lo reconocemos un poco superior sí que es ","para diferenciarse de los espontáneos los de b movie se ponían todos mechas "," me tienes aquí colgado es originalmente de las supremes hoy se canta en los centros médicos de la comunidad de madrid ","entre el público tenéis a concha velasco agradecida y emocionada ","y aquí veis a rishi sunak cuando su mujer le dijo que se llevaba la residencia fiscal fuera de reino unido ","como bien sabe ben affleck jlo garantiza el propósito estrella de año nuevo gracias a la dieta del cucurucho ","la mayonesa no se les cortó de los vaqueros no podemos decir lo mismo ","aunque no os estéis fijando el tema es un descarado plagio de llorando se fue de la banda boliviana los kjarkas ","venga que esta nos la sabemos todos de mario conde al dioni ","y ahora que hemos localizado a la prima de mari carmen del hermano de ayuso sabéis algo ","cuando se suicidó con 44 años no existía el 024 recibe 300 llamadas al día ni más ni menos ","en su último disco se han disfrazado de star wars ángeles de leia y dioni de maestro jedi ","a medio camino entre lola flores y beyoncé inventó el arte de bailar como si caminaras sobre brasas incandescentes ","bailes exagerados jóvenes felices en bañador y emojis animados aquí nació instagram ","ahora es cuando os vais levantando a bailar si no tenéis un tiburón vale un langostino ","pues él irá fresquito pero en españa esa camisa sin una buena cadena de oro no luce ni la mitad ","macaulay hoy en día igual se parece más a los ladrones de la peli que a sí mismo de pequeño ","la orquesta gente joven fue posponiendo el cambio de nombre como el psoe con la ley trans "," la letra es una reflexión nietzscheana sobre la espiritualidad y el deseo lacaniano de arrimar cebolleta "," y fueron felices y zzoilo pasó de los karaokes k a tener un éxito sonando en medio mundo ","ágata lys abrió mentalidades blusas y braguetas en la españa del posfranquismo ","el sevilla inventó el movimiento body positive aunque él probablemente no sepa ni qué significa ","isabel il murió sin saber que tenía unos nietos en murcia que hacen que harry parezca un santo "," el estribillo guarda un sorprendente parecido con la canción pensamiento de la banda de stephen stills manassas á ","el mayor éxito de imbruglia es en realidad una versión de una desconocida banda estadounidense ednaswap 4 ","su primer disco se llamó juan carlos calderón presenta a juan carlos calderón lba bien de autoestima ","ñ una interpretación para quitarse el sombrero ","espera que parece que se ha quedado con ganas de más "," el pasado verano murió el director de la película asi que este año no diremos que molaba más el libro ","82 negarlo todo y seguir viviendo no como el resto de borregos que creen a los medios manipuladores ","ahora psicólogos de instagram es cuando pensáis mn en ese niño interior adorado y vuestra fe se tambalea ","qpolicia que quede claro que esta canción es para autoconsumo ","mn si hay algún retoño fruto de esta noche llamadle peret o lola "," hace chacachá entonces podemos llamarlo y q tren de altas prestaciones de extremadura ","después de escuchar este temazo terminó haciendo su propia versión veleta franklin ","apuntad los ingredientes para este pastel de carne e vozarrón épica teatralidad sudor y chorreras e "," cuando el camarero se viene arriba a después de cerrar el karaoke "," rocío ya cumplía la ley de transparencia 23 años antes de su aproba "," e en cachitos somos muy devotos hemos hecho j cientos de veces el camino de josele santiago ","no si os parece le pagamos el vuelo a rosalía desde miami para salir 30 segundos gestión de recursos se llama ","han pasado 20 años y seguimos sin pillar la metáfora por aclararnos le quiere ride como a su bike ","su sonido disco funk se ha ido refinando ee en paralelo al refinamiento de su barbero yz ","f max b jugaba con esa figura del macho alfa una ironía que se pillaba en esa época a ver qué tal en esta ","este era el simio más contagioso my antes de la viruela del mono ","y 4 a elsa fue pareja de valerio lazarov harían falta 2 ef muchos tiovivos para marearla ","la canción perfecta para responder al telefonillo cuando te digan soy yo ","como en el govern de la gene el bajito lleva la voz cantante lla no para de llamar la atención pero se le ve el plumero y ella no pa p pl "," id civera e la detengan "," la herencia de el fary es infinita y tampoco un o ho ","en españa causaba furor a ese señor de provincias ferretero y de finde ","la libertad liando al pueblo py ","mucho antes del punk los fundadores del grupo cantaban en el coro los peque "," y ll que el mundo se va a acabar ","y ey e 6 años de conservatorio para gri ","con ese tiro de cámara no hay manera de hacer chistes ñ sobre el gorro de juan los realizadores ya no respetan nada n los realizadores ya no respetan nada ","la oración pagana que todos hemos rezado mucha ms ","do diga se llamaba luces en la o "," o man sound co samba mix ","la letra parece escrita a cul a ","lao y maa a ese era hermano del gran wyomin ","en esta época él aún era pablo escobar ","mejor nos vamos a las genuinas fuentes del rock ","entellas luna y el toro 2 e "," no dirás que no es doble negacionismo ","a pesar de su título la canción contiene un 0 de swing ","a coro 500 16 la virginidad miguel bosé "," sabes cómo se llama el cantante de los suaves a yosi "," n bilirrubina 5d guerra ","tero y tu voce de tu cuerpo "," te river lando el viejo rock ","décadas después los latinos se vengarían enviándonos el reguetón "," nia selena quiero bailar ","no hagáis bromitas que nos conocemos el humo es artificial ","ntores de híspalis 1e no nos falte de ná "," grecas estoy amando locamente ","no solo de marley vive el reggae jimmy triunfó t "," aaa nivel de inglés ketchup ","tranquilos es sólo un efecto de cámara o podéis beberos ese ch bm ","sería el momento de sacar la versión navideña s sabor turrón ","en el público sólo el de la camiseta de platero sabía a qué venía ","los mugs gigantes de mr wonderful no son "," sigue siendo la canción española más puntuada en eurovisión ","el teclista está en tierra de nadie era el toni cantó de la banda "," rsailor ha ur to the floor ","en el juzgado del corazón de civera las órdenes de detención llevan coreografía "," a e mula abierta quiero más y "," cuando te queda bien un pantalón de cuero marrón es que te queda bien todo ","como teodoro garcía egea empezaron triunfando con huesos ","y se entiende perfectamente los disfraces de ardilla pp lo que más ","al 4 este era el simio más contagioso antes de la viruela del mono "," a es chimberos vacas del pueblo ya se han escapao "," señora de rocio jurado valga la redundancia ","el programa se llamaba luces en la noche pues ni una cosa ni la otra ","a sigue siendo muy divertido escucharla en alguna 2 "," ha llegado ya el momento de abrir el melón de que este muchacho canta raro ","pasaron de boy band pionera filfs de manual ","y la coreografía que hizo llorar a darwin ","say hasta ahora sólo ha tocado una nota ya tiene que ser un teclado bueno "," je sigue sputnik st century boy ","fabio capello siempre fue e as de traje que de chándal 7 a ","rocío ya cumplía la ley de transparencia 23 años antes de su aprobación ","y lee lewis eat balls of fire di ","los de nena llaman a kiss fm plan dorado de pensiones "," a 1 es your mother know sna ","bueno si eres colchonero al menos estás acostumbrado a los disgustos "," por alguna razón tú también estás un conteniendo la respiración en casa "," su casa es suya hoy en día la letra pertenece al género de ciencia ficción ","anskiy elardor hi aque preventivo de la urss ","el mismo mensaje que el ne me quitte pas 22 pero con la sensibilidad de una baguette "," dentes y boikot neras de vivir "," hace chacachá entonces podemos llamarlo tren de altas prestaciones de extremadura ","si tuviera sólo una pizca más de clase habría que aplicarle la ley celaá ","somos fieles seguidores de la doctrina de auserón el a pop tol santiago "," disculpe un momento voy a consultar disponibilidad "," a flores mo me las maravillaía yo ","en la mente de algunos de vosotros esta canción termina con ay que me meo coa ","lo de mezclar ropa de calle con ropa de estar por casa no lo inventó rosalía ","esta actuación contiene más latigazos cervicales 32 que una colisión en cadena "," lio aragón batita de ron 4 "," ctor explosion s feo chaval "," que mañana es domingo qué mala suerte con los festivos este año ","no soportaba la lluvia porque claramente era más de soul ","jpo latidos a virgen de la macarena ","mn poner resistiré y salir al balcón a aplaudir a los militares ","paulina llevando al extremo la clásica pesadilla de salir de casa sin pantalones ","por favor que pasen las asistencias para el cachito anterior "," z la canción perfecta para responder leal teteonillo cuando te digan soy yo jp 3 "," an r8b británico blanco e imperecedero como el porridge o tetreimt e ","ve sí sty springfield i y y 1 of a preacher man ","dad jardín 4 e casa es suya "," el sol de méxico contribuyó bastante al calentamiento global de la chavalería ","en su momento fue algo futurista hoy como mucho puede verse como el futuro de podemos ","luego se cortó la coleta y empezó a desubicarse un poco a otros también les ha pasado ","s que no que esta e no era de gloria estefan ","sobrino del gran manolo caracol mejoró la canción original de cecilia el himno de interflora ","howwstoppers ve nothing but a house party ","rdaliso a no yo no sé estar ","el rótulo anterior no lo cobramos porque nos lo dictó nuestro cuñado ","nano y su banda vid el gnomo ","así han recibido in the navy los presupuestos de este año ","dina azahara ala ko respirar ep ","ea espera que parece que se ha quedado con ganas de más "," quién iba a saber que el resto de canciones se iban a parecer tanto a esta "," sin documentos es mejor no quedarse q entreespaña y marruecos ","fito cabrales el peso pesado más ligero del rock español ","la nana con la que se duermen las gemelas del ex obispo de solsona ","abad 1981 ho racio pinchadiscos h "," freestyle rumbero si les llama c tangana se le suben a la mesa antes del primer plato ","nuestro propósito para este año recurrir más a la risa y mucho menos a la prisa y a la visa ","la letra contiene palabras de amor en 6 idiomas sl una navaja suiza para ligar durante un erasmus ","la orquesta gente joven fue posponiendo el cambio de nombre como el psoe con la ley tran ","con tony lopez voz de oro sobran las presentaciones ","de imagen y de mensaje iban sobrados pp como samantha hudson pero con musicón ","la letra parece escrita a cuatro manos entre nicolás copérnico y tamara falcó ","isabel ii murió sin saber que tenía unos nietos en murcia que hacen que harry parezca un santo ","si no te suenan es porque llegaron tarde al britpop y eran demasiado blanditos para el indie ","recuperar el lema de la transición a follar que el mundo se va a acabar ","11d id no os preocupéis la tele pública respeta vuestras e vejigas aunque no tenga anuncios "," mia 48 12 discos llevan y no han dejado de fruncir el ceño ni una estrofa ","en su último disco se han disfrazado de star wars ángeles de leia y dioni de maestro jedi ","steaqua ll barbie gin ú ","si trabajara en una oficina se llamaría despecho ","aretha franklin también hija de un predicador rechazó grabarla ","ahora ya sabéis cual era la temperatura exacta en la escuela de calor ","in paulyoung ve ls in the air "," y o el de contabilidad tras perder la cuenta de los cubatas que ha pedido en el karaoke ","una interpretación para quitarse el sombrero ","sin embargo su fulgor se extinguió antes de tiempo como les va a pasar a esas bengalas ","venga que esta nos la sabemos todos de mario conde al dioni "," cpolicia que quede claro que esta canción es para autoconsumo "," este 2023 la canción cumple 25 años y tú igual jh deberías empezar a pensar en tu próstata "," tamante soy un superman ","iba cuando el camarero se viene arriba después de cerrar el karaoke ","habrá visto desaparecer a los dinosaurios pero jordi hurtado al fondo está flipando también ","una canción de juan gabriel muy contagiosa y con varias mutaciones el covid mexicano ","el batería acaba de pillar el chiste de paul mccartney ","los frioleros del mundo al menos lo reconocemos un poco superior sí que es ","de los doscientos hitazos de este grupo este es el que inspiró todos los temas de ska p "," n no te fíes de las apariencias no son 2 sino ","la canción habla de una joven enamorada de un hombre mayor un día más en la oficina para le ","aquel año el cádiz descendió a 2 b y creemos que bisbal no tuvo nada que ver ","atención a las sorprendentes voces del coro de guitarristas castrati ","fue una forrest gump de la historia del arte y la música en su peli salen dalí bowie coco chanel ","hay canciones que encapsulan un tiempo y un lugar esta delicia es una de ellas ","coherencia honestidad y esa pinta de acabar de desembarcar de la perla negra di sí a el drogas "," ua já 1 lo de wyoming era verdad ff ","en realidad ella era italiana no gala ","ágata lys abrió mentalidades blusas y braguetas 4 en la españa del posfranquismo ","hi en el año 75 esta actuación debió de traer mucha cola ","no a todo el mundo le favorece tanto un gato electrocutado en la cabeza ","22 el grupo de schródinger para muchos son mocedades y el consorcio al mismo tiempo mo ","oes del silencio roe de leyenda ","si la azafata monta este show en pleno vuelo es momento de empezar a sospechar que algo va mal ","el country nunca volvió a ser lo mismo después de este disco lado ponti country la pared sr ","cualquier que haya caminado por el centro de barna ha oído esta cantinela comercial cerveza beer ","ms voz en drre voz en directo ","dos de los miembros eran hermanos de la estrella de atlantic records solomon burke ","los ochenta la década en la que los pianos de cola servían para apoyar el sintetizador ","en su guitarra cabía una banda al completo y era capaz de tocarla bien hasta cuando se sentaba al piano ","tobago sonó en la despedida de albert rivera del bufete de abogados donde trabaj donde estaba ","su primer disco se llamó juan carlos calderón presenta a juan carlos calderón iba bien de autoestima ","os reiréis pero la postura de ángel beato aguanta terremotos de magnitud 5 ","mayonesa y chocolate hemos comido cosas peores al llegar a casa después de la fiesta de nochevieja ","quín sabina to entre caballeros ","advertencia ha llegado el momento de guardar la sidra el gaitero y sacar el kalimotxo ","macaulay hoy en día igual se parece más a los ladrones de la peli que a sí mismo de pequeño ","por cierto nosotros también echamos mucho de menos la hora musa ","a w en cachitos somos muy devotos hemos hecho cientos de veces el camino de josele santiago ","manolo no gana para disgustos primero fue lo del carro y ahora wilma tampoco le abre la puerta ","hombreras mechas americanas remangadas la única forma de ir más ochenteros era disfrazarse de naranjito "," h este himno de más de 7 minutos forma parte de siembra z el disco más vendido de la historia de la salsa "," en 2002 era muy pronto para saber que la canción hablaba de corinna larsen ","y ahora que hemos localizado a la prima de mari carmen del hermano de ayuso sabéis algo ","esta sí que se la sabe tu madre y tu hija ","si hay algún retoño fruto de esta noche llamadle peret o lola "," dedicado a los médicos de familia que y en este momento se están dando al alcohol "," es muy raro ver actuar con tanta coordinación a quienes están a la izquierda ","con faldas y a lo loco la banda más cafre y sinvergúenza del garage punk patrio y ","los únicos héroes a los que marvel todavía no ha sobreexplotado ","después de todo el año pensándolo tenemos algunas respuestas ninguna buena ","jóvenes guapos populares rimas consonantes parecía un plan perfecto ","f olivia newton john allá donde estés mt no hace falta que veas esto ","vamos ya que va quedando poco sacad la mermelada ","el kool de la banda no es el cantante sino el del bajo de juguete que obviamente si lleva cadenita a ","él tiene 53 años la canción más de 40 y la de la mochila suponemos que una hernia discal ","en 2022 cayeron los muros de metacrilato ya sólo llevamos mascarilla en transporte orgías y atracos ","carmel la primera amy winehouse tenía pinta de ser más de clase de pádel que de rehab ","tex eligió mal a su archienemigo james brown no sólo sedujo a su novia también le disparó en un club ","el eslabón perdido entre led zeppelin y el homo eructus ","liam introdujo en el pop la postura del jubilado opinando sobre una obra en la vía pública "," rebruno quiero hacer pipí papá "," faella carrá jn e el amor todo es empezar 3 ","los míticos kin laría a la voz y manolo gas a la batuta recuperaron otros temones como la vaca lechera ","rito fernández de la mochila azul ","he aquí la precuela de la flaca de jarabe de palo ","como el príncipe de bel air pero sin darle un puñetazo a nadie "," antha hudson masiado coño ","20 años después de su separación sigue sin haber una sola verbena de pueblo sin platero ","boney m y tigretó n las mejores fuentes de grasas saturadas de nuestra infancia ","debieron traducir la letra con el google translate de la época el collins no phil sino el diccionario ","fue uno de los primeros éxitos internacionales del reggae él es el desmond del que habla ob la di ob la da ","itam go 14 daldas mojadas "," as y oundations 1ld me up buttercup ","el del medio de los bee gees se me ha aparecido en sueños y cuando me he fijado mejor era quique san francisco ","lo protagonizó olivia newton john que también participó en su banda sonora entre otras muchas cosas ","mientras en otra dimensión triana canta yl abre la puerta niña ","esta no es la profe de fama casi seguro ni siquiera la de fama a bailar ","y no solo las judías todas las legumbres en general están por las nubes "," mayte river sería la hermana de mike rios desde luego ambos eran hijos del rock ","en algunas cenas de nochevieja también se respira esa calma tensa ","si no veis a la cantante tranquilos todo en orden e es que lleva un traje de camuflaje ","vaya nuestro apoyo a todos los currantes pero esta vez un poquito más a los de ryanair y vueling ","triunfó con kids in america y teloneó a michael jackson dos datos que seguramente no están relacionados "," ana y zzoilo n amour remix ","en realidad todos estaban esperando a que cantase la de yo no te pido la luna era demasiado pedir "," la herencia de el fary es infinita y tampoco aga transmisiones patrimoniales ","necesitaron una pandemia mundial para dar el pelotazo a almeida le bastó con un saque de honor ","la relación entre rufián y borrás tiene menos roces ","dos grandes exponentes del punk rock nacional homenajeando a su padre complejo de edipo ","la publicidad subliminal de la época era como la canción rudimentaria z ","fue un tema pionero del eurodisco y con los años se ha convertido en un infalible himno de estadio ","el realizador ha querido tener una deferencia con todos aquellos que a estas alturas ya vais del revés ","la oración pagana que todos hemos rezado muchas más veces de las que nos gustaría reconocer ","para la escena anterior no se han utilizado dobles de riesgo dónde íbamos a encontrar a uno con ese bigotillo ","nevadas volcanes inundaciones maría jiménez hace tiempo que convivimos con las fuerzas de la naturaleza "," como feos de pleno derecho por eso somos guionistas vamos a ofendernos un poco y ahora seguimos ","estos talking heads madrileños son uno de los grupos más infravalorados de la movida ","si quieres conservar intacta tu vajilla jamás sientes a un trombonista a la mesa "," un portento vocal apodada la voz de cristal de la copla que falleció en 2022 ","esta leyenda de la música italiana cultivó con éxito el look llevo 15 días durmiendo en un ford fiesta "," e asise hacen los niños y en la república dominicana "," han pasado 20 años y seguimos sin pillar la metáfora me por aclararnos le quiere ríde como a su bike "," los que estuvimos en aquellas discotecas todavía vemos estas clases de zumba con estrés postraumático "," igaboys om boom boom boom ","si entonces hubiera existido tiktok hoy dominarían el mundo ","bastan dos acordes para que tu cerebro reproduzca entera esta canción lo dificil es sacársela luego ","este fue más o menos el argumentario en defensa de las macrogranjas ","mucho champagne hace falta para ser feliz con esos señores mirando ","a la versión para adultos del personaje de blake edwards podría titularse la manguera rosa "," en el siglo xv otros españoles con ese mismo peinado a ya les habrían robado el puesto entero ","estamos casi seguros de que los asuntos de ligar con hembras serranas no los lleva la virgen de la macarena ","azúcar no tan moreno con ellas nos ocurre como con andy 8 lucas seguimos sin saber quién es quién ","él ya llevaba boina y usaba micrófonos cuando villarejo aún era honrado ","siempre se dijo que habían llevadi ","con esta chapan todos los congresos de cardiología aquí es cuando se pierden los papers "," aaa pad f olino radio orquesta ","este es el tipo de kiko que nos gusta que nos pongan junto a la caña ","su carrera meteórica tiene luces y como se ve bastantes sombras ","mitad señor mitad correcaminos un centauro de marca acme ","se puso noelía porque llamarse chayanna era dar demasiadas pistas ","su sonido disco funk se ha ido refinando en paralelo al refinamiento de su barbero ","la mayonesa no se les cortó de los vaqueros no podemos decir lo mismo ","en pilones de varios pueblos de españa se han hallado restos de djs que se negaron a pinchar esto en las fiestas ","no fue a eurovisión pero da tal subidón que dan ganas de tener cientos de hijos la generación bandini ","el toro estaría enamorado de la luna pero el de decorados no lo debió de entender bien ","como veis no es imprescindible ponerse reguetón para estar en la tica un ratillo ","su especialidad versiones guatequeras de folk iberoamericano a la madre de joaquín prat le molaban ","the cardigans las rebequitas el grupo favorito de tu madre cuando refresca "," garlochí no es una variante de sarandonga sino el término caló para decir corazón ","miguel gallardo como su propio nombre indica para nosotros que le está ofreciendo un viaje a cuenca ","el pop boloñés puede ser tan bueno como su salsa "," íbamos a poner la gasolina pero estaba carísima ","aquí los padres del italo disco perpetuando el tópico del español ladrón son 678 casos aislados ","en esta la versión original en alemán los globos no eran rojos pero el final era el mismo apocalipsis nuclear ","esta coreografía sigue instalada en alguna parte de tu memoria justo al lado del teléfono fijo de tus padres ","mr nada más dejar la fábrica de coches ya se notaba que los tubos de escape iban a dar problemas ","por su potencial adictivo este estribillo debería ser catalogado como droga dura ","cuando se suicidó con 44 años no existía el 024 recibe 300 llamadas al día ni más ni menos ","el baile de chayanne es un arte marcial milenario con el que 4 puedes matar en segundos sobre todo a ti mismo ","el padre del electro mandinga perteneció a una estirpe de griots ancestrales narradores de historias "," g 1 cachitos es como el roscón de reyes a a siempre suele llevar abba dentro ","3 pues te vas a reír cuando sepas an lo que pasa en el xxi "," bienvenidos si estáis todos es porque habéis recordado que tras los cuartos van tu banco hacienda y el rey emérito "," puro northern soul amenizando la zona de jardinería de un leroy merlin ","hoy en megaestructuras tupé de loquillo ","k astley ver gonna give you up ","pa así eran las fiestas de nochevieja a antes de la ley antitabaco ","si le quitáis la cámara lenta podéis ver una coreografía de melody ","si anne igartiburu se hubiera criado en triana se despediría con un hasta mañana garloch ","el tercer padre de la rumba siempre salía con su piano se conoce que tenía ganas de bailar acumuladas ","negarlo todo y seguir viviendo no como el resto de borregos que creen a los medios manipuladores "," a minnelli 4 sing my mind ans 1 ","ría jesús y su acordeón s pajaritos ","21 años después no se trata tanto de querer como de pode ","free the nipple bobby farrell ha lavado menos camisetas que iggy pop "," especialista en cantar canciones bonitas poniendo cara de abrir la carta de iberdrola ","este fue su primer single todo ha cambiado mucho todo menos el presentador de este programa jordi hurtado ","lo más viral del covid después del covid claro ","desde la atrevida ignorancia de algún panfleto le definieron como transformista supremacista asturiano ","así estamos los españoles pensando en la luz la comida el alquiler y la hipoteca del 2023 ","7 conocemos el significado de abanibí pero el de sarandonga sigue siendo un misterio insondable ","elsa fue pareja de valerio lazarov harían falta muchos tiovivos para marearla ","no queda ni rastro de este grupo en interne el algoritmo también está programado para ol debe ser que far traumas ","tiene mérito lograr un one hict wonder llamándote carlos pérez y teniendo aspecto de haber liderado la fuga de la modelo ","su hombre blandengue ha servido para una campaña del ministerio de igualdad a ver cuándo le toca a la mandanga ","y después de la versión junto a ojete calor es imposible escucharla sin echar de menos al calcetín con ojos "," uh eh samantha qué sorpresa el rótulo de hace un rato era de coña eh lo tuyo mola todo la música también "," yote dax jw 4 perra lorazón "," del califato de córdoba tomaron el nombre y probablemente también su amor por el cuero ","mucho antes del punk los fundadores del grupo cantaban en el coro los pequeños ruiseñores su profe debió flipar ","mark knopfler el hijo no reconocido de miliki ","en los últimos años cuando alguien pronuncia locomía suele referirse al gluten ","tampoco os fieis de la primera impresión más o menos así veían a españa antes de ganar el eurobasket 2022 "," dm ubleyou ase don t go ","izquierda derecha como veis tienen la postura tan sólidamente definida como el gobierno respecto al sahara ","estuvo prohibida en los colegios católicos hondureños aseguraban que era una invitación a ser hereje ","la verdad es que dorothy está rarísima después de pegar el estirón ","fue el primer sencillo de dire straits la ha tocado tanto que esa stratocaster podría hacer el punteo de memoria ","esas hombreras nos habrían venido muy bien para mantener la distancia social durante la pandemia ","espérate que el que estaba descoyuntándose en realidad es el que toca las congas ","quimi portet y manolo garcía amarraron este proyecto en la puerta del baile para arrancar el último de la fila "," aunque la perdimos este año siempre nos quedará su música sus pelis y su marioneta ","defensa en línea con trivote atacante y un 9 no muy guapo pero con un envidiable juego de piernas ","el de la pandereta tiene un trabajo muy sencillo pero no acaba de dar con la tecla en el grupo le llaman alberto casero "," será esto pasarse de apología del pimplar te preguntas con una copa en la mano ","una arriesgadísima realización que combina el plano secuencia con el contrapicado o plano papada ","cuando las tanxugueiras fueron hacía mucho que andrés do barro había vuelto ","la coreografía viene a recordarnos que el ","víctor abundancia y su banda enteramente h7 ompuesta por extras de miami vice compuesta por ia ","esta canción la ha versionado hace un rato évole así que mandamos nuestras disculpas sinceras a joaquín ","ñ los hispanoargentinos nos trajeron hedonismo l rock y la talla slim fire ","transitando la fina línea que separa a danny zuko att del protagonista de una peli de eloy de la iglesia ","no lo creereis pero cuando la compuso nelson zapata curraba en pfizer en los ensayos de lo que sería la viagra ","al algoritmo que sabe lo que nos gusta o no nos gusta en este mundo raphael le vuelve loco ","sacar del armario las camisetas pacifistas y morir contento teniendo razón ","el autor del éxito nuestra playa muy lejos de su zona de confort ","3 max b jugaba con esa figura del macho alfa una ironía que pp se pillaba en esa época a ver qué tal en esta mo ","podéis probar a hacer esto con el último polvorón bastante mejor que pamplona ","indiscutible número uno en la escala pantene ","ol 4 the gang lebration ","pues él irá fresquito pero en españa esa camisa sin una buena cadena de oro no luce ni la mitad "," catar no es una democracia sino una monarquía absoluta sin respeto por los derechos humanos dos "," el compositor de la canción es el padre de uno de los de daft punk nadie sabe de cúal "," ah y creemos que aboebé es como los listos llaman ahora al aceite de oliva "," hipervitaminada de la canción una re one ugly child de larry bright ","ya está bien con la bromita devolvedle a rafa las gafas de ver de lejos ","bastante lío ha tenido este año con la mudanza de queipo de llano ","el cantante se nos parece un poco al rubio de cruz y raya también lo veis o estamos locos ","aquel verano trabajaron más que un camarero en la feria de abi ","en españa causaba furor a ese señor de provincias ferretero y de finde en madrid con su cuñado le flipaba ","entre el público tenéis a concha velasco agradecida y emocionada ","aunque no os estéis fijando el tema es un descarado plagio de llorando se fue de la banda boliviana los kjarkas "," mari carmen patrona de la verbena y la cha m e madre de todos los juerguistas de españa ","desde 2013 tina es ciudadana suiza allí disfruta de sus paisajes alpinos y un poco también de su régimen fiscal ","más que una feria era una fiera en los escenarios de hecho inspiró el peinado de teen wolf ","de la magia del directo se encargaba directamente uno disfrazado de tamariz "," idación tony ma manero ersexy girl ","perderá la cabeza pero siempre sabremos donde encontrar a este portento de mujer que nos está mirando a todos ","su otro single se llamó mi chica tiene un lío con satán lógicamente se convirtieron en un grupo de culto ","en 2017 estados unidos les vetó la entrada al pais trump no podía soportar la comparación con semejante pelaso ","10 años tratando de escribir la frase perfecta y jamás hen lograremos algo tan eficaz como este estribillo ","si se os cierra la ventanita del amor preguntad a tamara falcó que os la abre en un nanosegundo ","camilo sesto robando protagonismo a los tenderos en 4 la feria de artesanía iberoamericana ñ "," es sara socas no es de aquella batalla de gallos que no tampoco ","si te has propuesto empezar el año comiendo 5 piezas de fruta al día ya sólo te quedan 4 de nada ","después de escuchar este temazo terminó haciendo su propia versión veleta fran ","así serían los habitantes de la aldea de astérix y obélix si las cantimploras llevaran rebujito ","en la familia de los himnos lgtbi este tema está junto a a quién le importa pero con un pelín más de hartura "," arriba con él yo me voy mañana los franco fear josé antonio ","si tenemos mejor clima que los británicos pero nuestro grupo de 3 hermanos es café quijano ","tras su fallecimiento muchos descubrieron que era muchísimo más que grease especialmente en lo musical ","y aquí veis a rishi sunak cuando su mujer le dijo que se llevaba la residencia fiscal fuera de reino unido ","curiosamente este año la nochevieja ha caído en saturday night ","no solo han puesto música a la cuenta atrás del planeta y también contribuyeron a ella con un ingente consumo de laca "," desde el bulo que lo situaba escondido en un armario pasó una década hasta que por fin salió de él ","alter ego de marc parrot quien terminó por cansarse del personaje y recuperó al artista ","en cachitos como en el amor y en el rascar todo es empezar os quedan tres horas de canciones buenas y chistes malos ","que la gorra trumpista no os confunda chris lowe no se mueve ni para invadir el capitolio ","un producto danés que te has comido muchas 1 más veces que sus galletas de mantequilla ","esta la ponen indefectiblemente en todas las bodas es cuando el novio rentabiliza la barra libre ","sufrieron homofobia sin siquiera salir del armario en los años en los que españa se creía moderna m "," y fueron felices y zzoilo pasó de los karaokes a tener un éxito sonando en medio mundo "," no os confundáis esto es john wayne de los enemigos los enemigos de john wayne eran los indios ","se abre el telón y aparece una paella enorme con un trocito minúsculo de carne en el medio cómo se llama el cantante ","el morro que le echaron en esta versión lo han aplicado al resto de temas musicales personales y políticos ","francisco eligió el nombre artístico cuando los buenos aún no estaban pillados como los que llegaron primero a hotmail "," suburbia habla en parte de los disturbios de la época de thatcher la versión original de liz truss ","ha demostrado hasta donde llega el poderío latino y lo importante que es leer las cosas antes de firmarlas ","el encuentro entre las dos culturas no volvería a ser tan x estrecho hasta dos años después en la cumbre de las azores ","ahora es cuando os vais levantando a bailar si no tenéis un tiburón vale un langostino ","momento para sacar las cerillas y quemar el piano del comedor más vale que tus suegros sean muy fanáticos de the killer "," la primera comunión 7 de macarena olona rena olona ","desafortunadamente pascual gonzález compositor y fundador del grupo sí nos faltará desde este año ","7 si algo ha quedado claro 40 años después es que duran duran duran ","por el pelo y la afinación parece manel navarro pero no es coral alonso siendo punki en los 80 ","fallecida este año irene cara dejó dos temazos de oscar este por fama y otro por flashdance "," la coreografía en este caso está basada en artes marciales inventadas lo cual traía consigo un agradable olor a gimnasio ","con ese tiro de cámara no hay manera de hacer chistes sobre el gorro de juan los realizadores ya no respetan nada "," vale el batería no es imprescindible aquí pero habéis visto un ordenador que sonría tanto mirando a la de rojo ","él sube un tema a redes ella lo escucha y publica unos versos en twitter él le propone una colaboración "," la historia interminaaaaaaaablececee nananaaaanananadá en español más que cantarse se tararea ","además de un histórico guitarrista sanlúcar de barrameda dio al mundo a estas seis amigas íntimas que lo petaron sin rubor ","no si os parece le pagamos el vuelo a rosalía desde miami para salir 30 segundos gestión de recursos se llama esto ","cuando ginebras se vayan a vivir con las kardashian pondremos versiones de su paco y carmela ","uno de los grandes compositores patrios lo mismo sonaba en una feria que en el hilo musical del dentista ","sus fans se debatían entre la admiración y la envidia que producía comprobar que ellos si tenían terraza ","ahora psicólogos de instagram es cuando pensáis en ese niño interior adorado y vuestra fe se tambalea ","efectivamente david hay hierbas que pueden curar de qué tarro las cogiste por curiosidad ","ya en el 77 estaba clara la necesidad del uso generoso en las discotecas del corta el rollo ","más tarde produjeron vamos a la playa y no tengo dinero dos de los mejores uooos de la historia de la música ","delia pasó del anonimato a la fama tras salir en un anuncio de tabaco en que pasaba del anonimato a la fama ","a la guitarra eléctrica rafa callejo fundador de la banda y coautor de esta canción fallecido en 2022 ","la marca swatch introdujo esta canción en una campaña desde entonces funcionó como un reloj ","tuvo un éxito fugaz y efimero suponemos que ahora vive preguntándose si alguien la llamará ","los hermanos que hicieron la sintonía de don quijote se atrevieron con el musical xanadú que ya era una fantasía ","lo de comprar el rollo de que jovanotti era un rapero clásico fue una bajada de pantalones en toda regía ","lo que está claro es que david sí tiene una doble identidad por la noche estrella del pop por el día marca de colonias ","este año dijimos adiós al último grande de la edad dorada del rock and roll ","los enemigos titularon dónde su versión de este hit del más infravalorado de los cantantes de soul "," el estribillo guarda un sorprendente parecido con la canción pensamiento de la banda de stephen stills manassas ","una canción del compositor cubano rené touzet que ha tenido más versiones que el fraude de las mascarillas ","el videoclip de este tema fue dirigido por michael bay y por supuesto incluye persecuciones y un helicóptero ","muchos españoles hemos estado cantando 30 año nada es igual que una sirena es nadas ","si vais a hacer esta coreografía ojo que los vecinos no se esperan una clase de aeróbic a estas horas ","es incomprensible que los negacionistas no usaran este tema para protestar por las mascarillas "," que sí señor que canta muy bonito pero si no piensa comprar le importaría apartarse ","logró cuatro números uno cantando en gallego durante la dictadura y no fue gracias a sus coreografías ","el pasado verano murió el director de la película así que este año no diremos que molaba más el libro ","el mayor éxito de imbruglia es en realidad una versión de una desconocida banda estadounidense ednaswap ","midge fue líder de ultravox y como veis domina el arte o del falsete el santiago abascal escocés ","édith piaf le cambió algo la letra y convirtió este vals en una de sus canciones más famosas la foule ","estos guitarristas fueron pioneros en dar la espalda al público mucho antes que los planetas ","el pelo de amina simboliza este año la lucha contra tanto alí y mustafá cegado por el velo del machismo y la intolerancia ","añ en galicia antes de abel caballero los conciertos y se hacian de día porque no existía la luz la creó él ","uno de los hermanos la bionda el de la chaquetilla masterchef carmelo falleció este año ","la voz que le hace los coros a jennifer lopez se parece muchísimo a la de jennifer lopez ","padre de la salsa intelectual además de un gran cantante blades es probablemente el mejor contante ","como en el govern de la gene el bajito lleva la voz cantante y y ella no para de llamar la atención pero se le ve el plumero ","en este caso no podemos asegurar que para esta grabación no haya muerto algún que otro loro ","es una canción doblemente cinéfila centrada en john wayne pero inspirada en una frase de la chaqueta metálica ","ana nuria dimas y víctor cucart hermanos residentes en gandía y con récord de asistencia a catequesis ","para creadores vigueses antón reixa 8 co llevando al absurdo el concepto de economía sumergida ","cuando 3 sudamericanos podían poner españa a sus pies sin jugar como delanteros ","con movimientos parecidos al tiro liro los seguidores de bolsonaro llaman a los marcianos para frenar a lula ","este año varios artistas grabaron una versión benéfica para celebrar el 75 cumpleaños de víctor manuel ","como queriendo revelar donde había estado todo ese tiempo en 2015 grabó la canción debajo del sombrero ","a el sevilla inventó el movimiento body positive aunque él probablemente no sepa ni qué significa ","al español le falta una palabra para definir esta sensación entre grima y ternura grímural "," crees que tu cena familiar ha sido tensa piensa que 4 en la mesa de los gallagher ponen cuchillos de plástico ","me 20 años después de que este tema saliera en un anuncio lb lanzándolos a la fama los barceloneses han dicho adéu ","peret seleccionador del equipo nacional de rumba catalana un séquito de verdaderos gitanos de la calle de la cera ","en 2022 el youtuber míster jágger le recordó la letra de la canción palabra por palabra ","con el año político que llevan rick astley es ahora mismo la única fuente de estabilidad social en reino unido "," right between the eyes entrecejo a cargo del grupo wax cera un himno en los centros de estética ","para diferenciarse de los espontáneos los de b movie se ponían todos mechas ","esta canción igual lo notáis la produjeron pet shop boys que saben siempre cuando hacen falta como ahora mismo ","el sobrino de peret saboreó todos los géneros al ser el rumbero de la época con menos complejos ","nos ha pedido pedro sánchez que os digamos que esta subida también es culpa de la guerra en ucrania ","su otro nombre speed tampoco era muy original en euskadi ya puestos con los tópicos haberse llamado abstinencia ","l la letra es una reflexión nietzscheana sobre la espiritualidad y el deseo lacaniano de arrimar cebolleta ","la canción vale para una fiesta o para pasar la aspiradora lo importante es la actitud y que esté limpia la casa ","un paseo trilingúe y canalla por el raval y sin final feliz hit de un grupo que mereció más reconocimiento oh shie ","en estos años fue cuando el loco escoltado por sabino se cayó en la marmita del rock sigue alli desde entonces ","bien ha llegado el momento de huir del primo soltero y que este año se ha apuntado a clases de salsa "," claudio biern el walt disney español que en paz descanse debió de ver naves en llamas más allá de orión ","luego en la sgae ya descubriría que otra economía sumergida es posible cantó y le echaron no les moló la movida viguesa ","este famosísimo baile consiste en anexionarse a la pareja como putin a una península del mar negro ","una cosa más ni olvido ni perdón para el creativo responsable del jingle care carrefoooou "," 4 an tan agarrotado como el no rompas más mi corazón pm pero con volantes caribeños en las mangas ","entonces se la dedicamos a víctor y a tania catedráticos del petardeo por tomarse tan en serio lo de no tomarse en serio "," 4 el río bravo la valla el estrecho el canal de la mancha el atlántico el tema lleva siglos de plena actualidad ","en los 80 el mismo oucfe te valía igual para fundar una startup de informática que una banda de éxito ","iconos de vivir la vida locamentí en realidad su historia va de música mujeres y desigualdad ","mí por muy hedonista que parezca esta canción es una joya filológica de la cultura garífuna de los esclavos del caribe p ","apuntad los ingredientes para este pastel de carne vozarrón épica teatralidad sudor y chorreras "," me tienes aquí colgado es originalmente de las supremes hoy se canta en los centros médicos de la comunidad de madrid ","sabina pactó con unos ladrones hacerles esta copla y cumplió como lo del cgpj pero con gente responsable ","joel hoy parece otro señor pero sigue vivo algo que sólo pueden decir 4 de las más de 60 personas que menciona ","abba roxette europe the cardigans qué buenos los suecos para montar grupos y qué vagos para montar muebles ","las sevillanas ya no se sostienen sobre el televisor pero é aún podemos meter a 25 dentro de él chúpate esa progreso ","una versión del marinaio de gianni morandi en la gran voz de una cantante muy familiarizada con la sensación de mareo ","está claro que el acordeón fue una apuesta arriesgada pero hay que pensar que la única competencia era chanquete "," vengaboys viene de un español que decía siempre venga lo de hacer de vengadores puede que venga de otra cosa ","le vimos mucho durante aquel verano pero no tanto como los dependientes del territorio vaquero de el corte inglés ","la letra le dice a bruce springsteen que hay algo más que coches y chicas se referiría al fútbol no ","que la posproducción no os engañe fallecido en 2022 manolo sanlúcar fue uno de los guitarristas más grandes "," como les ocurre a los esquimales con el blanco emilio josé conoce cientos de palabras para decir empalagar ","antes de hacer dúo con pajares fue payaso cómico y cantante y este fue el hit de su primer disco romance del ajo ","cec no viene de los productores clivillés y cole sino de su helado preferido cookies 8 cream se ve que era light ","como bien sabe ben affleck jlo garantiza el propósito estrella de año nuevo gracias a la dieta del cucurucho ","esta va para los que estáis solos en casa viéndonos o sea que no estáis solos o sea que no va por vosotros ","este tema lleva 15 años siendo un meme de internet se llama rickroll y aparece cuando menos te lo esperas ","el difunto vocalista juan antonio canta reapareció con el genial y surrealista rap de los 40 limones ","bailes exagerados jóvenes felices en bañador y emojis animados aquí nació instagram ","estaban tan seguros de que la canción era un pepínaco que hacían música disco vestidos como un contable de los 70 ","que no os despiste el traje y el peinado a raya en realidad el discurso es el mismo que el de daddy yankee ","a excelente resumen de la filosofía del colegio mayor ahuja y bastante mejor para cantar a coro desde las ventanas ","el esfuerzo del coreógrafo es inútil la única forma de bailar esto es haciendo el trenecito ","í en la portada de su único álbum iba exactamente con esa ropa se titulaba pienso quedarme soltero mal no iba "," nosotros no encendimos el fuego estaba así cuando llegué y tú más el argumentario completo de una sesión de control ","no solo de marley vive el reggae jimmy triunfó tras protagonizar la película jamaicana the harder they come ","en este año de huracanes aquí tenéis a otro el eva ","la letra incluye referencias a 118 políticos artistas o eventos se canta siguiendo el índice de la larousse ","el que está menos nervioso es vince clarke ex depeche mode que aprovecha el play back para tocar temas de ismael serrano ","entre la chiquillada podéis ver a ariel rot intentando vender un país para educarlo no lo compramos y ahora mira ","niños no os preocupéis que en cuanto terminen la actuación los reyes magos se ponen con lo de los regalos ","ef siempre se dijo que habían llevado el fenómeno fan y le 4 n público más joven aun e a un público más joven aunque esto es pasarse ","el vocalista andy bell usa la coreo del dúo dinámico soy como el junco que se dobla pero siempre sigue en pie ","por supuesto hubo peli se tituló los pajaritos pero no la dirigió hitchcockito como hubiera sido lógico ","paddy mcaloon dijo de sí mismo que era el mejor compositor de reino unido así que un poco de luis padrique también es ","a medio camino entre lola flores y beyoncé inventó el arte de bailar como si caminaras sobre brasas incandescentes "],["00000053.jpg.subtitulo.tif.txt","00000067.jpg.subtitulo.tif.txt","00000107.jpg.subtitulo.tif.txt","00000147.jpg.subtitulo.tif.txt","00000154.jpg.subtitulo.tif.txt","00000203.jpg.subtitulo.tif.txt","00000226.jpg.subtitulo.tif.txt","00000292.jpg.subtitulo.tif.txt","00000312.jpg.subtitulo.tif.txt","00000340.jpg.subtitulo.tif.txt","00000384.jpg.subtitulo.tif.txt","00000425.jpg.subtitulo.tif.txt","00000437.jpg.subtitulo.tif.txt","00000461.jpg.subtitulo.tif.txt","00000500.jpg.subtitulo.tif.txt","00000515.jpg.subtitulo.tif.txt","00000524.jpg.subtitulo.tif.txt","00000544.jpg.subtitulo.tif.txt","00000572.jpg.subtitulo.tif.txt","00000578.jpg.subtitulo.tif.txt","00000591.jpg.subtitulo.tif.txt","00000635.jpg.subtitulo.tif.txt","00000695.jpg.subtitulo.tif.txt","00000794.jpg.subtitulo.tif.txt","00000799.jpg.subtitulo.tif.txt","00000816.jpg.subtitulo.tif.txt","00000836.jpg.subtitulo.tif.txt","00000847.jpg.subtitulo.tif.txt","00000856.jpg.subtitulo.tif.txt","00000890.jpg.subtitulo.tif.txt","00000931.jpg.subtitulo.tif.txt","00000989.jpg.subtitulo.tif.txt","00000996.jpg.subtitulo.tif.txt","00001007.jpg.subtitulo.tif.txt","00001073.jpg.subtitulo.tif.txt","00001104.jpg.subtitulo.tif.txt","00001113.jpg.subtitulo.tif.txt","00001131.jpg.subtitulo.tif.txt","00001177.jpg.subtitulo.tif.txt","00001193.jpg.subtitulo.tif.txt","00001224.jpg.subtitulo.tif.txt","00001268.jpg.subtitulo.tif.txt","00000087.jpg.subtitulo.tif.txt","00001188.jpg.subtitulo.tif.txt","00000041.jpg.subtitulo.tif.txt","00000057.jpg.subtitulo.tif.txt","00000263.jpg.subtitulo.tif.txt","00000285.jpg.subtitulo.tif.txt","00000327.jpg.subtitulo.tif.txt","00000477.jpg.subtitulo.tif.txt","00000599.jpg.subtitulo.tif.txt","00000711.jpg.subtitulo.tif.txt","00000073.jpg.subtitulo.tif.txt","00000412.jpg.subtitulo.tif.txt","00000567.jpg.subtitulo.tif.txt","00000734.jpg.subtitulo.tif.txt","00001066.jpg.subtitulo.tif.txt","00001284.jpg.subtitulo.tif.txt","00000101.jpg.subtitulo.tif.txt","00000232.jpg.subtitulo.tif.txt","00000629.jpg.subtitulo.tif.txt","00000160.jpg.subtitulo.tif.txt","00000194.jpg.subtitulo.tif.txt","00000272.jpg.subtitulo.tif.txt","00000575.jpg.subtitulo.tif.txt","00000724.jpg.subtitulo.tif.txt","00000786.jpg.subtitulo.tif.txt","00000773.jpg.subtitulo.tif.txt","00000950.jpg.subtitulo.tif.txt","00000348.jpg.subtitulo.tif.txt","00000170.jpg.subtitulo.tif.txt","00001237.jpg.subtitulo.tif.txt","00000958.jpg.subtitulo.tif.txt","00000553.jpg.subtitulo.tif.txt","00000763.jpg.subtitulo.tif.txt","00001059.jpg.subtitulo.tif.txt","00001088.jpg.subtitulo.tif.txt","00001291.jpg.subtitulo.tif.txt","00000093.jpg.subtitulo.tif.txt","00001012.jpg.subtitulo.tif.txt","00000030.jpg.subtitulo.tif.txt","00000238.jpg.subtitulo.tif.txt","00001230.jpg.subtitulo.tif.txt","00000175.jpg.subtitulo.tif.txt","00001084.jpg.subtitulo.tif.txt","00001117.jpg.subtitulo.tif.txt","00000117.jpg.subtitulo.tif.txt","00000094.jpg.subtitulo.tif.txt","00001006.jpg.subtitulo.tif.txt","00001146.jpg.subtitulo.tif.txt","00000783.jpg.subtitulo.tif.txt","00001057.jpg.subtitulo.tif.txt","00000687.jpg.subtitulo.tif.txt","00001045.jpg.subtitulo.tif.txt","00000112.jpg.subtitulo.tif.txt","00000371.jpg.subtitulo.tif.txt","00000959.jpg.subtitulo.tif.txt","00001221.jpg.subtitulo.tif.txt","00000377.jpg.subtitulo.tif.txt","00000509.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00000982.jpg.subtitulo.tif.txt","00000181.jpg.subtitulo.tif.txt","00001005.jpg.subtitulo.tif.txt","00001044.jpg.subtitulo.tif.txt","00001253.jpg.subtitulo.tif.txt","00000174.jpg.subtitulo.tif.txt","00000389.jpg.subtitulo.tif.txt","00000475.jpg.subtitulo.tif.txt","00000956.jpg.subtitulo.tif.txt","00000969.jpg.subtitulo.tif.txt","00001172.jpg.subtitulo.tif.txt","00000313.jpg.subtitulo.tif.txt","00000940.jpg.subtitulo.tif.txt","00000951.jpg.subtitulo.tif.txt","00001118.jpg.subtitulo.tif.txt","00000193.jpg.subtitulo.tif.txt","00000241.jpg.subtitulo.tif.txt","00000965.jpg.subtitulo.tif.txt","00000038.jpg.subtitulo.tif.txt","00000433.jpg.subtitulo.tif.txt","00000954.jpg.subtitulo.tif.txt","00001030.jpg.subtitulo.tif.txt","00000126.jpg.subtitulo.tif.txt","00000178.jpg.subtitulo.tif.txt","00000200.jpg.subtitulo.tif.txt","00000118.jpg.subtitulo.tif.txt","00000834.jpg.subtitulo.tif.txt","00001276.jpg.subtitulo.tif.txt","00000024.jpg.subtitulo.tif.txt","00000080.jpg.subtitulo.tif.txt","00000323.jpg.subtitulo.tif.txt","00000562.jpg.subtitulo.tif.txt","00000892.jpg.subtitulo.tif.txt","00001041.jpg.subtitulo.tif.txt","00000104.jpg.subtitulo.tif.txt","00000228.jpg.subtitulo.tif.txt","00000311.jpg.subtitulo.tif.txt","00000621.jpg.subtitulo.tif.txt","00000872.jpg.subtitulo.tif.txt","00001135.jpg.subtitulo.tif.txt","00000561.jpg.subtitulo.tif.txt","00000029.jpg.subtitulo.tif.txt","00000145.jpg.subtitulo.tif.txt","00000256.jpg.subtitulo.tif.txt","00001108.jpg.subtitulo.tif.txt","00000225.jpg.subtitulo.tif.txt","00000372.jpg.subtitulo.tif.txt","00000564.jpg.subtitulo.tif.txt","00000710.jpg.subtitulo.tif.txt","00000082.jpg.subtitulo.tif.txt","00000171.jpg.subtitulo.tif.txt","00000224.jpg.subtitulo.tif.txt","00000229.jpg.subtitulo.tif.txt","00000318.jpg.subtitulo.tif.txt","00000385.jpg.subtitulo.tif.txt","00000871.jpg.subtitulo.tif.txt","00001010.jpg.subtitulo.tif.txt","00001173.jpg.subtitulo.tif.txt","00000192.jpg.subtitulo.tif.txt","00000242.jpg.subtitulo.tif.txt","00000402.jpg.subtitulo.tif.txt","00000454.jpg.subtitulo.tif.txt","00000743.jpg.subtitulo.tif.txt","00000803.jpg.subtitulo.tif.txt","00001060.jpg.subtitulo.tif.txt","00000075.jpg.subtitulo.tif.txt","00001026.jpg.subtitulo.tif.txt","00001027.jpg.subtitulo.tif.txt","00001046.jpg.subtitulo.tif.txt","00000230.jpg.subtitulo.tif.txt","00000757.jpg.subtitulo.tif.txt","00001252.jpg.subtitulo.tif.txt","00001290.jpg.subtitulo.tif.txt","00000050.jpg.subtitulo.tif.txt","00000088.jpg.subtitulo.tif.txt","00000095.jpg.subtitulo.tif.txt","00000131.jpg.subtitulo.tif.txt","00000176.jpg.subtitulo.tif.txt","00000289.jpg.subtitulo.tif.txt","00000468.jpg.subtitulo.tif.txt","00000565.jpg.subtitulo.tif.txt","00000742.jpg.subtitulo.tif.txt","00001019.jpg.subtitulo.tif.txt","00001114.jpg.subtitulo.tif.txt","00001147.jpg.subtitulo.tif.txt","00000156.jpg.subtitulo.tif.txt","00000231.jpg.subtitulo.tif.txt","00000305.jpg.subtitulo.tif.txt","00000604.jpg.subtitulo.tif.txt","00000663.jpg.subtitulo.tif.txt","00000715.jpg.subtitulo.tif.txt","00000976.jpg.subtitulo.tif.txt","00001008.jpg.subtitulo.tif.txt","00001067.jpg.subtitulo.tif.txt","00001152.jpg.subtitulo.tif.txt","00000051.jpg.subtitulo.tif.txt","00000161.jpg.subtitulo.tif.txt","00000883.jpg.subtitulo.tif.txt","00000159.jpg.subtitulo.tif.txt","00000467.jpg.subtitulo.tif.txt","00000820.jpg.subtitulo.tif.txt","00001087.jpg.subtitulo.tif.txt","00001231.jpg.subtitulo.tif.txt","00001281.jpg.subtitulo.tif.txt","00000032.jpg.subtitulo.tif.txt","00000304.jpg.subtitulo.tif.txt","00000777.jpg.subtitulo.tif.txt","00000835.jpg.subtitulo.tif.txt","00001040.jpg.subtitulo.tif.txt","00001086.jpg.subtitulo.tif.txt","00001153.jpg.subtitulo.tif.txt","00000058.jpg.subtitulo.tif.txt","00000059.jpg.subtitulo.tif.txt","00000127.jpg.subtitulo.tif.txt","00000169.jpg.subtitulo.tif.txt","00000290.jpg.subtitulo.tif.txt","00000354.jpg.subtitulo.tif.txt","00001080.jpg.subtitulo.tif.txt","00000144.jpg.subtitulo.tif.txt","00000186.jpg.subtitulo.tif.txt","00000244.jpg.subtitulo.tif.txt","00000333.jpg.subtitulo.tif.txt","00000508.jpg.subtitulo.tif.txt","00000558.jpg.subtitulo.tif.txt","00000603.jpg.subtitulo.tif.txt","00000821.jpg.subtitulo.tif.txt","00000988.jpg.subtitulo.tif.txt","00001031.jpg.subtitulo.tif.txt","00001036.jpg.subtitulo.tif.txt","00001275.jpg.subtitulo.tif.txt","00000217.jpg.subtitulo.tif.txt","00000276.jpg.subtitulo.tif.txt","00000298.jpg.subtitulo.tif.txt","00000432.jpg.subtitulo.tif.txt","00000703.jpg.subtitulo.tif.txt","00000955.jpg.subtitulo.tif.txt","00001075.jpg.subtitulo.tif.txt","00001282.jpg.subtitulo.tif.txt","00001289.jpg.subtitulo.tif.txt","00000146.jpg.subtitulo.tif.txt","00000243.jpg.subtitulo.tif.txt","00000257.jpg.subtitulo.tif.txt","00000297.jpg.subtitulo.tif.txt","00000563.jpg.subtitulo.tif.txt","00000970.jpg.subtitulo.tif.txt","00001126.jpg.subtitulo.tif.txt","00001158.jpg.subtitulo.tif.txt","00001229.jpg.subtitulo.tif.txt","00000208.jpg.subtitulo.tif.txt","00000211.jpg.subtitulo.tif.txt","00000218.jpg.subtitulo.tif.txt","00000255.jpg.subtitulo.tif.txt","00000262.jpg.subtitulo.tif.txt","00000466.jpg.subtitulo.tif.txt","00000739.jpg.subtitulo.tif.txt","00000025.jpg.subtitulo.tif.txt","00000111.jpg.subtitulo.tif.txt","00000201.jpg.subtitulo.tif.txt","00000314.jpg.subtitulo.tif.txt","00000884.jpg.subtitulo.tif.txt","00000945.jpg.subtitulo.tif.txt","00001051.jpg.subtitulo.tif.txt","00001127.jpg.subtitulo.tif.txt","00000114.jpg.subtitulo.tif.txt","00000237.jpg.subtitulo.tif.txt","00000324.jpg.subtitulo.tif.txt","00000355.jpg.subtitulo.tif.txt","00000642.jpg.subtitulo.tif.txt","00000756.jpg.subtitulo.tif.txt","00000776.jpg.subtitulo.tif.txt","00000804.jpg.subtitulo.tif.txt","00001112.jpg.subtitulo.tif.txt","00000113.jpg.subtitulo.tif.txt","00000410.jpg.subtitulo.tif.txt","00000716.jpg.subtitulo.tif.txt","00000800.jpg.subtitulo.tif.txt","00000853.jpg.subtitulo.tif.txt","00000039.jpg.subtitulo.tif.txt","00000403.jpg.subtitulo.tif.txt","00000557.jpg.subtitulo.tif.txt","00000709.jpg.subtitulo.tif.txt","00001001.jpg.subtitulo.tif.txt","00001042.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001157.jpg.subtitulo.tif.txt","00001214.jpg.subtitulo.tif.txt","00000031.jpg.subtitulo.tif.txt","00000072.jpg.subtitulo.tif.txt","00000155.jpg.subtitulo.tif.txt","00000261.jpg.subtitulo.tif.txt","00000319.jpg.subtitulo.tif.txt","00000363.jpg.subtitulo.tif.txt","00000538.jpg.subtitulo.tif.txt","00000648.jpg.subtitulo.tif.txt","00000688.jpg.subtitulo.tif.txt","00000725.jpg.subtitulo.tif.txt","00000908.jpg.subtitulo.tif.txt","00000925.jpg.subtitulo.tif.txt","00000983.jpg.subtitulo.tif.txt","00001003.jpg.subtitulo.tif.txt","00001122.jpg.subtitulo.tif.txt","00001259.jpg.subtitulo.tif.txt","00000064.jpg.subtitulo.tif.txt","00000066.jpg.subtitulo.tif.txt","00000373.jpg.subtitulo.tif.txt","00000961.jpg.subtitulo.tif.txt","00001047.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001176.jpg.subtitulo.tif.txt","00000105.jpg.subtitulo.tif.txt","00000209.jpg.subtitulo.tif.txt","00000510.jpg.subtitulo.tif.txt","00000680.jpg.subtitulo.tif.txt","00000718.jpg.subtitulo.tif.txt","00000791.jpg.subtitulo.tif.txt","00000994.jpg.subtitulo.tif.txt","00001056.jpg.subtitulo.tif.txt","00001283.jpg.subtitulo.tif.txt","00000099.jpg.subtitulo.tif.txt","00000100.jpg.subtitulo.tif.txt","00000368.jpg.subtitulo.tif.txt","00000455.jpg.subtitulo.tif.txt","00000530.jpg.subtitulo.tif.txt","00000613.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000670.jpg.subtitulo.tif.txt","00000792.jpg.subtitulo.tif.txt","00000829.jpg.subtitulo.tif.txt","00000968.jpg.subtitulo.tif.txt","00001016.jpg.subtitulo.tif.txt","00001070.jpg.subtitulo.tif.txt","00001107.jpg.subtitulo.tif.txt","00001168.jpg.subtitulo.tif.txt","00001211.jpg.subtitulo.tif.txt","00001277.jpg.subtitulo.tif.txt","00000018.jpg.subtitulo.tif.txt","00000021.jpg.subtitulo.tif.txt","00000248.jpg.subtitulo.tif.txt","00000278.jpg.subtitulo.tif.txt","00000390.jpg.subtitulo.tif.txt","00000476.jpg.subtitulo.tif.txt","00000522.jpg.subtitulo.tif.txt","00000537.jpg.subtitulo.tif.txt","00000545.jpg.subtitulo.tif.txt","00000570.jpg.subtitulo.tif.txt","00000854.jpg.subtitulo.tif.txt","00000909.jpg.subtitulo.tif.txt","00000960.jpg.subtitulo.tif.txt","00001128.jpg.subtitulo.tif.txt","00000162.jpg.subtitulo.tif.txt","00000291.jpg.subtitulo.tif.txt","00000705.jpg.subtitulo.tif.txt","00000815.jpg.subtitulo.tif.txt","00000873.jpg.subtitulo.tif.txt","00001262.jpg.subtitulo.tif.txt","00000349.jpg.subtitulo.tif.txt","00000376.jpg.subtitulo.tif.txt","00000401.jpg.subtitulo.tif.txt","00000552.jpg.subtitulo.tif.txt","00000686.jpg.subtitulo.tif.txt","00000939.jpg.subtitulo.tif.txt","00000977.jpg.subtitulo.tif.txt","00001061.jpg.subtitulo.tif.txt","00001091.jpg.subtitulo.tif.txt","00001142.jpg.subtitulo.tif.txt","00001199.jpg.subtitulo.tif.txt","00000738.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000949.jpg.subtitulo.tif.txt","00000987.jpg.subtitulo.tif.txt","00001052.jpg.subtitulo.tif.txt","00001143.jpg.subtitulo.tif.txt","00001206.jpg.subtitulo.tif.txt","00001207.jpg.subtitulo.tif.txt","00000317.jpg.subtitulo.tif.txt","00000761.jpg.subtitulo.tif.txt","00001245.jpg.subtitulo.tif.txt","00000086.jpg.subtitulo.tif.txt","00000153.jpg.subtitulo.tif.txt","00000356.jpg.subtitulo.tif.txt","00000364.jpg.subtitulo.tif.txt","00000649.jpg.subtitulo.tif.txt","00000657.jpg.subtitulo.tif.txt","00001035.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001123.jpg.subtitulo.tif.txt","00001197.jpg.subtitulo.tif.txt","00000499.jpg.subtitulo.tif.txt","00000566.jpg.subtitulo.tif.txt","00000622.jpg.subtitulo.tif.txt","00000775.jpg.subtitulo.tif.txt","00000876.jpg.subtitulo.tif.txt","00001137.jpg.subtitulo.tif.txt","00001222.jpg.subtitulo.tif.txt","00001225.jpg.subtitulo.tif.txt","00001232.jpg.subtitulo.tif.txt","00001239.jpg.subtitulo.tif.txt","00001265.jpg.subtitulo.tif.txt","00000258.jpg.subtitulo.tif.txt","00000339.jpg.subtitulo.tif.txt","00000374.jpg.subtitulo.tif.txt","00000605.jpg.subtitulo.tif.txt","00000729.jpg.subtitulo.tif.txt","00000771.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000997.jpg.subtitulo.tif.txt","00001071.jpg.subtitulo.tif.txt","00001133.jpg.subtitulo.tif.txt","00000543.jpg.subtitulo.tif.txt","00000571.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000855.jpg.subtitulo.tif.txt","00000867.jpg.subtitulo.tif.txt","00001065.jpg.subtitulo.tif.txt","00001072.jpg.subtitulo.tif.txt","00001161.jpg.subtitulo.tif.txt","00000065.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000187.jpg.subtitulo.tif.txt","00000236.jpg.subtitulo.tif.txt","00000269.jpg.subtitulo.tif.txt","00000492.jpg.subtitulo.tif.txt","00000551.jpg.subtitulo.tif.txt","00000634.jpg.subtitulo.tif.txt","00000762.jpg.subtitulo.tif.txt","00000891.jpg.subtitulo.tif.txt","00000966.jpg.subtitulo.tif.txt","00001141.jpg.subtitulo.tif.txt","00001160.jpg.subtitulo.tif.txt","00001260.jpg.subtitulo.tif.txt","00000026.jpg.subtitulo.tif.txt","00000866.jpg.subtitulo.tif.txt","00001149.jpg.subtitulo.tif.txt","00001187.jpg.subtitulo.tif.txt","00001200.jpg.subtitulo.tif.txt","00000042.jpg.subtitulo.tif.txt","00000270.jpg.subtitulo.tif.txt","00000445.jpg.subtitulo.tif.txt","00000583.jpg.subtitulo.tif.txt","00000672.jpg.subtitulo.tif.txt","00000863.jpg.subtitulo.tif.txt","00000933.jpg.subtitulo.tif.txt","00000981.jpg.subtitulo.tif.txt","00001194.jpg.subtitulo.tif.txt","00000125.jpg.subtitulo.tif.txt","00000378.jpg.subtitulo.tif.txt","00000383.jpg.subtitulo.tif.txt","00000436.jpg.subtitulo.tif.txt","00000585.jpg.subtitulo.tif.txt","00000814.jpg.subtitulo.tif.txt","00000924.jpg.subtitulo.tif.txt","00001015.jpg.subtitulo.tif.txt","00001192.jpg.subtitulo.tif.txt","00000040.jpg.subtitulo.tif.txt","00000411.jpg.subtitulo.tif.txt","00000516.jpg.subtitulo.tif.txt","00000576.jpg.subtitulo.tif.txt","00000577.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000706.jpg.subtitulo.tif.txt","00000735.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000772.jpg.subtitulo.tif.txt","00000798.jpg.subtitulo.tif.txt","00000805.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000491.jpg.subtitulo.tif.txt","00000723.jpg.subtitulo.tif.txt","00000753.jpg.subtitulo.tif.txt","00000880.jpg.subtitulo.tif.txt","00000056.jpg.subtitulo.tif.txt","00000119.jpg.subtitulo.tif.txt","00000250.jpg.subtitulo.tif.txt","00000332.jpg.subtitulo.tif.txt","00000347.jpg.subtitulo.tif.txt","00000633.jpg.subtitulo.tif.txt","00000828.jpg.subtitulo.tif.txt","00000926.jpg.subtitulo.tif.txt","00001062.jpg.subtitulo.tif.txt","00000071.jpg.subtitulo.tif.txt","00000367.jpg.subtitulo.tif.txt","00000414.jpg.subtitulo.tif.txt","00000483.jpg.subtitulo.tif.txt","00000484.jpg.subtitulo.tif.txt","00000501.jpg.subtitulo.tif.txt","00000505.jpg.subtitulo.tif.txt","00000529.jpg.subtitulo.tif.txt","00000590.jpg.subtitulo.tif.txt","00000793.jpg.subtitulo.tif.txt","00000938.jpg.subtitulo.tif.txt","00000696.jpg.subtitulo.tif.txt","00001238.jpg.subtitulo.tif.txt","00001243.jpg.subtitulo.tif.txt","00000271.jpg.subtitulo.tif.txt","00000341.jpg.subtitulo.tif.txt","00000592.jpg.subtitulo.tif.txt","00000083.jpg.subtitulo.tif.txt","00000106.jpg.subtitulo.tif.txt","00000168.jpg.subtitulo.tif.txt","00000202.jpg.subtitulo.tif.txt","00000264.jpg.subtitulo.tif.txt","00000346.jpg.subtitulo.tif.txt","00000460.jpg.subtitulo.tif.txt","00000785.jpg.subtitulo.tif.txt","00001244.jpg.subtitulo.tif.txt","00000052.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000415.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000862.jpg.subtitulo.tif.txt","00000889.jpg.subtitulo.tif.txt","00000946.jpg.subtitulo.tif.txt","00001103.jpg.subtitulo.tif.txt","00001189.jpg.subtitulo.tif.txt","00001223.jpg.subtitulo.tif.txt","00000141.jpg.subtitulo.tif.txt","00000284.jpg.subtitulo.tif.txt","00000694.jpg.subtitulo.tif.txt","00000752.jpg.subtitulo.tif.txt","00000597.jpg.subtitulo.tif.txt","00000995.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001167.jpg.subtitulo.tif.txt","00001267.jpg.subtitulo.tif.txt","00000326.jpg.subtitulo.tif.txt","00000423.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00001182.jpg.subtitulo.tif.txt","00000630.jpg.subtitulo.tif.txt","00000848.jpg.subtitulo.tif.txt","00001032.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000459.jpg.subtitulo.tif.txt","00000379.jpg.subtitulo.tif.txt","00000656.jpg.subtitulo.tif.txt","00000910.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000424.jpg.subtitulo.tif.txt","00000506.jpg.subtitulo.tif.txt","00000628.jpg.subtitulo.tif.txt","00000733.jpg.subtitulo.tif.txt","00000899.jpg.subtitulo.tif.txt","00000932.jpg.subtitulo.tif.txt","00001266.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00001178.jpg.subtitulo.tif.txt","00000612.jpg.subtitulo.tif.txt","00000671.jpg.subtitulo.tif.txt","00000730.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000438.jpg.subtitulo.tif.txt","00001213.jpg.subtitulo.tif.txt","00001011.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00001099.jpg.subtitulo.tif.txt","00000523.jpg.subtitulo.tif.txt","00001093.jpg.subtitulo.tif.txt","00000846.jpg.subtitulo.tif.txt","00000917.jpg.subtitulo.tif.txt","00000431.jpg.subtitulo.tif.txt","00001132.jpg.subtitulo.tif.txt"],[126,102,107,86,110,96,74,66,62,108,87,121,127,95,107,126,127,105,110,110,101,116,106,121,100,78,79,123,70,109,112,80,117,64,92,101,98,118,89,90,102,100,95,112,92,84,104,97,121,107,109,50,59,105,100,106,65,70,88,90,102,77,73,108,123,114,85,117,70,81,95,135,32,86,111,39,118,37,31,120,97,74,54,79,46,63,35,56,64,31,41,34,65,59,87,42,66,32,64,74,114,68,36,45,33,69,34,35,70,31,74,51,54,32,44,75,77,46,66,33,72,79,35,77,73,39,78,82,87,50,68,31,77,33,91,41,53,62,70,93,50,51,52,86,85,80,75,112,78,52,82,72,61,72,86,71,38,56,91,51,84,105,79,95,81,96,81,67,80,74,67,88,46,37,31,46,90,74,66,37,34,89,36,78,42,89,93,89,77,94,63,98,35,89,84,48,89,95,76,73,94,78,79,101,44,81,74,42,79,36,91,106,63,97,82,76,110,46,50,32,101,74,78,34,79,31,97,73,109,99,33,92,55,70,49,56,82,78,105,95,86,85,76,101,75,96,83,106,31,71,69,82,34,101,57,102,121,35,111,113,98,102,71,72,50,37,107,104,50,43,101,110,92,107,104,69,62,40,107,67,99,83,103,68,100,53,62,83,55,55,58,82,88,97,52,104,72,38,105,112,67,107,90,98,108,70,58,91,142,93,111,103,98,114,107,100,107,70,68,90,92,68,115,96,57,107,110,93,59,36,79,97,70,82,51,101,120,75,103,118,111,110,116,85,66,78,120,116,111,99,108,66,107,78,83,81,97,43,31,60,39,76,117,97,39,115,103,34,117,70,112,115,59,84,113,32,105,93,93,110,92,104,128,96,89,119,74,83,107,103,117,74,107,126,117,105,100,101,113,104,108,124,119,117,96,118,54,113,84,105,107,125,68,91,64,92,115,104,126,97,113,105,95,119,116,74,90,111,49,98,109,90,111,100,115,99,101,116,71,99,63,93,91,36,115,37,128,82,128,116,113,41,99,90,94,109,72,96,111,106,98,109,120,110,103,100,124,113,105,106,97,82,125,106,93,101,94,115,116,114,117,105,105,104,95,98,112,93,101,118,119,115,100,117,108,94,124,125,107,91,96,98,109,95,98,107,123,120,105,125,104,109,119,97,120,99,102,97,106,118,113,117,118,116,99,124,106,129,100,113,109,105,123,116,105,105,113,112,130,124,110,114,111,110,111,125,114,113,125,104,124,122,150,126,114,107,160,115,115,117,124,81,123,130,114,114]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>name<\/th>\n      <th>texto<\/th>\n      <th>distancia<\/th>\n      <th>texto_anterior<\/th>\n      <th>n_fichero<\/th>\n      <th>n_caracteres<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Decidimos eliminar texto cuya distancia sea menor de 36</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">subtitulos_proces <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  subtitulos_proces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb11-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(distancia <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">36</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb11-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>texto_anterior)</span>
<span id="cb11-4"></span>
<span id="cb11-5">subtitulos_proces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb11-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(name,texto, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">everything</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb11-7">    DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>()</span></code></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-568f88cc6fa3c0ba71f5" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-568f88cc6fa3c0ba71f5">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488"],[18,21,24,25,26,29,30,31,32,38,39,40,42,50,51,52,56,58,59,64,65,66,71,72,75,80,82,83,86,88,93,94,95,99,100,104,105,106,111,112,113,114,117,118,119,125,126,127,131,140,141,144,145,146,153,155,156,159,161,162,168,169,171,174,175,176,178,181,186,187,192,193,200,201,202,208,209,211,217,218,224,225,228,229,230,231,236,237,238,241,242,243,244,248,250,255,256,257,258,261,262,264,269,270,271,276,278,284,289,290,291,297,298,304,305,311,313,314,317,318,319,323,324,325,326,332,333,339,341,346,347,349,354,355,356,363,364,367,368,371,372,373,374,376,377,378,379,383,385,389,390,391,396,397,401,402,403,410,411,414,415,423,424,431,432,433,436,438,439,444,445,454,455,459,460,466,467,468,475,476,483,484,491,492,499,501,505,506,508,509,510,514,516,522,523,529,530,537,538,543,545,551,552,557,558,561,562,563,564,565,566,570,571,574,576,577,583,585,590,592,597,598,603,604,605,612,613,621,622,628,630,633,634,642,643,648,649,656,657,663,670,671,672,680,686,687,688,694,696,703,705,706,709,710,715,716,718,723,725,729,730,733,735,738,739,742,743,744,752,753,756,757,761,762,771,772,775,776,777,783,784,785,791,792,793,798,800,803,804,805,814,815,820,821,828,829,834,835,840,841,846,848,853,854,855,857,862,863,866,867,871,872,873,876,880,883,884,889,891,892,897,899,908,909,910,917,924,925,926,930,932,933,938,939,940,945,946,949,951,954,955,956,959,960,961,965,966,968,969,970,976,977,978,981,982,983,987,988,994,995,997,1001,1003,1005,1006,1008,1010,1011,1012,1015,1016,1019,1026,1027,1030,1031,1032,1035,1036,1040,1041,1042,1044,1045,1046,1047,1051,1052,1056,1057,1060,1061,1062,1065,1067,1070,1071,1072,1075,1076,1080,1084,1086,1087,1091,1092,1093,1094,1099,1103,1107,1108,1112,1114,1117,1118,1122,1123,1126,1127,1128,1130,1132,1133,1135,1137,1141,1142,1143,1146,1147,1149,1152,1153,1157,1158,1160,1161,1167,1168,1172,1173,1176,1178,1182,1187,1189,1192,1194,1197,1199,1200,1206,1207,1211,1212,1213,1214,1221,1222,1223,1225,1229,1230,1231,1232,1236,1238,1239,1243,1244,1245,1252,1253,1259,1260,1262,1265,1266,1267,1275,1276,1277,1281,1282,1283,1289,1290],[" bienvenidos si estáis todos es porque habéis recordado que tras los cuartos van tu banco hacienda y el rey emérito ","bueno si eres colchonero al menos estás acostumbrado a los disgustos "," faella carrá jn e el amor todo es empezar 3 ","en cachitos como en el amor y en el rascar todo es empezar os quedan tres horas de canciones buenas y chistes malos ","esta actuación contiene más latigazos cervicales 32 que una colisión en cadena ","la oración pagana que todos hemos rezado mucha ms ","la oración pagana que todos hemos rezado muchas más veces de las que nos gustaría reconocer ","aquel año el cádiz descendió a 2 b y creemos que bisbal no tuvo nada que ver "," ha llegado ya el momento de abrir el melón de que este muchacho canta raro "," ana y zzoilo n amour remix ","él sube un tema a redes ella lo escucha y publica unos versos en twitter él le propone una colaboración "," y fueron felices y zzoilo pasó de los karaokes k a tener un éxito sonando en medio mundo ","la letra contiene palabras de amor en 6 idiomas sl una navaja suiza para ligar durante un erasmus "," tamante soy un superman ","en 2022 el youtuber míster jágger le recordó la letra de la canción palabra por palabra ","lo que está claro es que david sí tiene una doble identidad por la noche estrella del pop por el día marca de colonias ","ágata lys abrió mentalidades blusas y braguetas en la españa del posfranquismo ","hi en el año 75 esta actuación debió de traer mucha cola ","a la versión para adultos del personaje de blake edwards podría titularse la manguera rosa ","camilo sesto robando protagonismo a los tenderos en 4 la feria de artesanía iberoamericana ñ "," en el siglo xv otros españoles con ese mismo peinado a ya les habrían robado el puesto entero "," que sí señor que canta muy bonito pero si no piensa comprar le importaría apartarse ","para la escena anterior no se han utilizado dobles de riesgo dónde íbamos a encontrar a uno con ese bigotillo ","espera que parece que se ha quedado con ganas de más "," por alguna razón tú también estás un conteniendo la respiración en casa ","por favor que pasen las asistencias para el cachito anterior ","cuando 3 sudamericanos podían poner españa a sus pies sin jugar como delanteros ","el de la pandereta tiene un trabajo muy sencillo pero no acaba de dar con la tecla en el grupo le llaman alberto casero ","la orquesta gente joven fue posponiendo el cambio de nombre como el psoe con la ley trans ","y ey e 6 años de conservatorio para gri ","entellas luna y el toro 2 e ","con tony lopez voz de oro sobran las presentaciones ","el toro estaría enamorado de la luna pero el de decorados no lo debió de entender bien ","como veis no es imprescindible ponerse reguetón para estar en la tica un ratillo "," hace chacachá entonces podemos llamarlo y q tren de altas prestaciones de extremadura "," aaa pad f olino radio orquesta ","con movimientos parecidos al tiro liro los seguidores de bolsonaro llaman a los marcianos para frenar a lula ","los míticos kin laría a la voz y manolo gas a la batuta recuperaron otros temones como la vaca lechera "," te river lando el viejo rock "," mayte river sería la hermana de mike rios desde luego ambos eran hijos del rock ","debieron traducir la letra con el google translate de la época el collins no phil sino el diccionario ","mejor nos vamos a las genuinas fuentes del rock ","y lee lewis eat balls of fire di ","este año dijimos adiós al último grande de la edad dorada del rock and roll ","momento para sacar las cerillas y quemar el piano del comedor más vale que tus suegros sean muy fanáticos de the killer "," je sigue sputnik st century boy ","no a todo el mundo le favorece tanto un gato electrocutado en la cabeza ","de imagen y de mensaje iban sobrados pp como samantha hudson pero con musicón "," es sara socas no es de aquella batalla de gallos que no tampoco ","un paseo trilingúe y canalla por el raval y sin final feliz hit de un grupo que mereció más reconocimiento oh shie ","cualquier que haya caminado por el centro de barna ha oído esta cantinela comercial cerveza beer "," lio aragón batita de ron 4 "," dedicado a los médicos de familia que y en este momento se están dando al alcohol "," será esto pasarse de apología del pimplar te preguntas con una copa en la mano ","nevadas volcanes inundaciones maría jiménez hace tiempo que convivimos con las fuerzas de la naturaleza ","si trabajara en una oficina se llamaría despecho ","una canción de juan gabriel muy contagiosa y con varias mutaciones el covid mexicano "," cuando el camarero se viene arriba a después de cerrar el karaoke "," especialista en cantar canciones bonitas poniendo cara de abrir la carta de iberdrola ","este año varios artistas grabaron una versión benéfica para celebrar el 75 cumpleaños de víctor manuel ","22 el grupo de schródinger para muchos son mocedades y el consorcio al mismo tiempo mo ","la canción perfecta para responder al telefonillo cuando te digan soy yo "," sigue siendo la canción española más puntuada en eurovisión ","la letra parece escrita a cul a ","la letra parece escrita a cuatro manos entre nicolás copérnico y tamara falcó ","fabio capello siempre fue e as de traje que de chándal 7 a ","tranquilos es sólo un efecto de cámara o podéis beberos ese ch bm ","ms voz en drre voz en directo ","si te has propuesto empezar el año comiendo 5 piezas de fruta al día ya sólo te quedan 4 de nada ","sobrino del gran manolo caracol mejoró la canción original de cecilia el himno de interflora "," señora de rocio jurado valga la redundancia "," rocío ya cumplía la ley de transparencia 23 años antes de su aproba ","rito fernández de la mochila azul ","como queriendo revelar donde había estado todo ese tiempo en 2015 grabó la canción debajo del sombrero ","él tiene 53 años la canción más de 40 y la de la mochila suponemos que una hernia discal ","este es el tipo de kiko que nos gusta que nos pongan junto a la caña ","en 2022 cayeron los muros de metacrilato ya sólo llevamos mascarilla en transporte orgías y atracos ","por cierto nosotros también echamos mucho de menos la hora musa ","carmel la primera amy winehouse tenía pinta de ser más de clase de pádel que de rehab "," an r8b británico blanco e imperecedero como el porridge o tetreimt e ","no soportaba la lluvia porque claramente era más de soul ","si tuviera sólo una pizca más de clase habría que aplicarle la ley celaá ","ve sí sty springfield i y y 1 of a preacher man ","la nana con la que se duermen las gemelas del ex obispo de solsona ","aretha franklin también hija de un predicador rechazó grabarla ","después de escuchar este temazo terminó haciendo su propia versión veleta franklin ","fue uno de los primeros éxitos internacionales del reggae él es el desmond del que habla ob la di ob la da ","do diga se llamaba luces en la o ","el programa se llamaba luces en la noche pues ni una cosa ni la otra ","howwstoppers ve nothing but a house party "," es muy raro ver actuar con tanta coordinación a quienes están a la izquierda ","dos de los miembros eran hermanos de la estrella de atlantic records solomon burke "," puro northern soul amenizando la zona de jardinería de un leroy merlin ","los enemigos titularon dónde su versión de este hit del más infravalorado de los cantantes de soul ","tex eligió mal a su archienemigo james brown no sólo sedujo a su novia también le disparó en un club "," ctor explosion s feo chaval ","con faldas y a lo loco la banda más cafre y sinvergúenza del garage punk patrio y "," hipervitaminada de la canción una re one ugly child de larry bright "," como feos de pleno derecho por eso somos guionistas vamos a ofendernos un poco y ahora seguimos ","el eslabón perdido entre led zeppelin y el homo eructus ","el sevilla inventó el movimiento body positive aunque él probablemente no sepa ni qué significa ","así serían los habitantes de la aldea de astérix y obélix si las cantimploras llevaran rebujito "," no os confundáis esto es john wayne de los enemigos los enemigos de john wayne eran los indios ","es una canción doblemente cinéfila centrada en john wayne pero inspirada en una frase de la chaqueta metálica "," e en cachitos somos muy devotos hemos hecho j cientos de veces el camino de josele santiago ","hoy en megaestructuras tupé de loquillo ","en estos años fue cuando el loco escoltado por sabino se cayó en la marmita del rock sigue alli desde entonces ","isabel il murió sin saber que tenía unos nietos en murcia que hacen que harry parezca un santo ","oes del silencio roe de leyenda ","este fue su primer single todo ha cambiado mucho todo menos el presentador de este programa jordi hurtado ","los únicos héroes a los que marvel todavía no ha sobreexplotado ","manolo no gana para disgustos primero fue lo del carro y ahora wilma tampoco le abre la puerta ","atención a las sorprendentes voces del coro de guitarristas castrati ","ahora ya sabéis cual era la temperatura exacta en la escuela de calor ","somos fieles seguidores de la doctrina de auserón el a pop tol santiago ","como teodoro garcía egea empezaron triunfando con huesos ","he aquí la precuela de la flaca de jarabe de palo ","quimi portet y manolo garcía amarraron este proyecto en la puerta del baile para arrancar el último de la fila ","dad jardín 4 e casa es suya ","estos talking heads madrileños son uno de los grupos más infravalorados de la movida "," su casa es suya hoy en día la letra pertenece al género de ciencia ficción ","itam go 14 daldas mojadas ","a la guitarra eléctrica rafa callejo fundador de la banda y coautor de esta canción fallecido en 2022 "," 4 el río bravo la valla el estrecho el canal de la mancha el atlántico el tema lleva siglos de plena actualidad "," el estribillo guarda un sorprendente parecido con la canción pensamiento de la banda de stephen stills manassas á ","los ochenta la década en la que los pianos de cola servían para apoyar el sintetizador ","ya está bien con la bromita devolvedle a rafa las gafas de ver de lejos ","ana nuria dimas y víctor cucart hermanos residentes en gandía y con récord de asistencia a catequesis ","al español le falta una palabra para definir esta sensación entre grima y ternura grímural ","una canción del compositor cubano rené touzet que ha tenido más versiones que el fraude de las mascarillas ","y 4 a elsa fue pareja de valerio lazarov harían falta 2 ef muchos tiovivos para marearla ","si la azafata monta este show en pleno vuelo es momento de empezar a sospechar que algo va mal "," as y oundations 1ld me up buttercup ","una arriesgadísima realización que combina el plano secuencia con el contrapicado o plano papada ","si quieres conservar intacta tu vajilla jamás sientes a un trombonista a la mesa ","cuando las tanxugueiras fueron hacía mucho que andrés do barro había vuelto ","logró cuatro números uno cantando en gallego durante la dictadura y no fue gracias a sus coreografías ","su especialidad versiones guatequeras de folk iberoamericano a la madre de joaquín prat le molaban ","décadas después los latinos se vengarían enviándonos el reguetón ","jpo latidos a virgen de la macarena ","estamos casi seguros de que los asuntos de ligar con hembras serranas no los lleva la virgen de la macarena ","bastante lío ha tenido este año con la mudanza de queipo de llano ","no queda ni rastro de este grupo en interne el algoritmo también está programado para ol debe ser que far traumas ","ntores de híspalis 1e no nos falte de ná "," la primera comunión 7 de macarena olona rena olona ","las sevillanas ya no se sostienen sobre el televisor pero é aún podemos meter a 25 dentro de él chúpate esa progreso ","desafortunadamente pascual gonzález compositor y fundador del grupo sí nos faltará desde este año "," el sol de méxico contribuyó bastante al calentamiento global de la chavalería ","el teclista está en tierra de nadie era el toni cantó de la banda ","k astley ver gonna give you up ","este tema lleva 15 años siendo un meme de internet se llama rickroll y aparece cuando menos te lo esperas ","con el año político que llevan rick astley es ahora mismo la única fuente de estabilidad social en reino unido ","í en la portada de su único álbum iba exactamente con esa ropa se titulaba pienso quedarme soltero mal no iba ","tiene mérito lograr un one hict wonder llamándote carlos pérez y teniendo aspecto de haber liderado la fuga de la modelo ","rdaliso a no yo no sé estar ","en realidad todos estaban esperando a que cantase la de yo no te pido la luna era demasiado pedir ","en algunas cenas de nochevieja también se respira esa calma tensa "," la historia interminaaaaaaaablececee nananaaaanananadá en español más que cantarse se tararea "," el pasado verano murió el director de la película asi que este año no diremos que molaba más el libro "," right between the eyes entrecejo a cargo del grupo wax cera un himno en los centros de estética ","en los 80 el mismo oucfe te valía igual para fundar una startup de informática que una banda de éxito ","la letra le dice a bruce springsteen que hay algo más que coches y chicas se referiría al fútbol no ","paddy mcaloon dijo de sí mismo que era el mejor compositor de reino unido así que un poco de luis padrique también es ","hombreras mechas americanas remangadas la única forma de ir más ochenteros era disfrazarse de naranjito ","pasaron de boy band pionera filfs de manual ","7 si algo ha quedado claro 40 años después es que duran duran duran "," nosotros no encendimos el fuego estaba así cuando llegué y tú más el argumentario completo de una sesión de control ","la letra incluye referencias a 118 políticos artistas o eventos se canta siguiendo el índice de la larousse ","joel hoy parece otro señor pero sigue vivo algo que sólo pueden decir 4 de las más de 60 personas que menciona ","se abre el telón y aparece una paella enorme con un trocito minúsculo de carne en el medio cómo se llama el cantante ","el rótulo anterior no lo cobramos porque nos lo dictó nuestro cuñado ","the cardigans las rebequitas el grupo favorito de tu madre cuando refresca ","abba roxette europe the cardigans qué buenos los suecos para montar grupos y qué vagos para montar muebles "," crees que tu cena familiar ha sido tensa piensa que 4 en la mesa de los gallagher ponen cuchillos de plástico ","liam introdujo en el pop la postura del jubilado opinando sobre una obra en la vía pública ","el batería acaba de pillar el chiste de paul mccartney ","si no te suenan es porque llegaron tarde al britpop y eran demasiado blanditos para el indie "," rsailor ha ur to the floor ","pa así eran las fiestas de nochevieja a antes de la ley antitabaco ","el mayor éxito de imbruglia es en realidad una versión de una desconocida banda estadounidense ednaswap 4 ","midge fue líder de ultravox y como veis domina el arte o del falsete el santiago abascal escocés ","la marca swatch introdujo esta canción en una campaña desde entonces funcionó como un reloj ","en la familia de los himnos lgtbi este tema está junto a a quién le importa pero con un pelín más de hartura ","al algoritmo que sabe lo que nos gusta o no nos gusta en este mundo raphael le vuelve loco ","édith piaf le cambió algo la letra y convirtió este vals en una de sus canciones más famosas la foule ","estos guitarristas fueron pioneros en dar la espalda al público mucho antes que los planetas ","que la posproducción no os engañe fallecido en 2022 manolo sanlúcar fue uno de los guitarristas más grandes ","en su guitarra cabía una banda al completo y era capaz de tocarla bien hasta cuando se sentaba al piano "," grecas estoy amando locamente ","su carrera meteórica tiene luces y como se ve bastantes sombras ","iconos de vivir la vida locamentí en realidad su historia va de música mujeres y desigualdad ","además de un histórico guitarrista sanlúcar de barrameda dio al mundo a estas seis amigas íntimas que lo petaron sin rubor ","si le quitáis la cámara lenta podéis ver una coreografía de melody ","niños no os preocupéis que en cuanto terminen la actuación los reyes magos se ponen con lo de los regalos ","el pelo de amina simboliza este año la lucha contra tanto alí y mustafá cegado por el velo del machismo y la intolerancia "," garlochí no es una variante de sarandonga sino el término caló para decir corazón ","si anne igartiburu se hubiera criado en triana se despediría con un hasta mañana garloch "," un portento vocal apodada la voz de cristal de la copla que falleció en 2022 ","más que una feria era una fiera en los escenarios de hecho inspiró el peinado de teen wolf ","el tercer padre de la rumba siempre salía con su piano se conoce que tenía ganas de bailar acumuladas "," arriba con él yo me voy mañana los franco fear josé antonio ","su hombre blandengue ha servido para una campaña del ministerio de igualdad a ver cuándo le toca a la mandanga "," la herencia de el fary es infinita y tampoco un o ho ","tobago sonó en la despedida de albert rivera del bufete de abogados donde trabaj donde estaba ","lo de mezclar ropa de calle con ropa de estar por casa no lo inventó rosalía ","anskiy elardor hi aque preventivo de la urss ","después de todo el año pensándolo tenemos algunas respuestas ninguna buena ","mn poner resistiré y salir al balcón a aplaudir a los militares ","recuperar el lema de la transición a follar que el mundo se va a acabar ","sacar del armario las camisetas pacifistas y morir contento teniendo razón ","82 negarlo todo y seguir viviendo no como el resto de borregos que creen a los medios manipuladores ","de la magia del directo se encargaba directamente uno disfrazado de tamariz ","el difunto vocalista juan antonio canta reapareció con el genial y surrealista rap de los 40 limones ","no si os parece le pagamos el vuelo a rosalía desde miami para salir 30 segundos gestión de recursos se llama ","cuando ginebras se vayan a vivir con las kardashian pondremos versiones de su paco y carmela ","el morro que le echaron en esta versión lo han aplicado al resto de temas musicales personales y políticos ","por el pelo y la afinación parece manel navarro pero no es coral alonso siendo punki en los 80 ","añ en galicia antes de abel caballero los conciertos y se hacian de día porque no existía la luz la creó él ","para creadores vigueses antón reixa 8 co llevando al absurdo el concepto de economía sumergida ","luego en la sgae ya descubriría que otra economía sumergida es posible cantó y le echaron no les moló la movida viguesa ","uno de los grandes compositores patrios lo mismo sonaba en una feria que en el hilo musical del dentista ","su primer disco se llamó juan carlos calderón presenta a juan carlos calderón lba bien de autoestima ","in paulyoung ve ls in the air ","el cantante se nos parece un poco al rubio de cruz y raya también lo veis o estamos locos ","estaban tan seguros de que la canción era un pepínaco que hacían música disco vestidos como un contable de los 70 ","miguel gallardo como su propio nombre indica para nosotros que le está ofreciendo un viaje a cuenca "," disculpe un momento voy a consultar disponibilidad ","el autor del éxito nuestra playa muy lejos de su zona de confort "," como les ocurre a los esquimales con el blanco emilio josé conoce cientos de palabras para decir empalagar ","apuntad los ingredientes para este pastel de carne e vozarrón épica teatralidad sudor y chorreras e ","el videoclip de este tema fue dirigido por michael bay y por supuesto incluye persecuciones y un helicóptero ","si tenemos mejor clima que los británicos pero nuestro grupo de 3 hermanos es café quijano ","el del medio de los bee gees se me ha aparecido en sueños y cuando me he fijado mejor era quique san francisco ","el pop boloñés puede ser tan bueno como su salsa ","esta leyenda de la música italiana cultivó con éxito el look llevo 15 días durmiendo en un ford fiesta ","la coreografía viene a recordarnos que el ","una versión del marinaio de gianni morandi en la gran voz de una cantante muy familiarizada con la sensación de mareo ","víctor abundancia y su banda enteramente h7 ompuesta por extras de miami vice compuesta por ia "," y o el de contabilidad tras perder la cuenta de los cubatas que ha pedido en el karaoke "," íbamos a poner la gasolina pero estaba carísima ","que no os despiste el traje y el peinado a raya en realidad el discurso es el mismo que el de daddy yankee ","francisco eligió el nombre artístico cuando los buenos aún no estaban pillados como los que llegaron primero a hotmail ","mitad señor mitad correcaminos un centauro de marca acme ","y después de la versión junto a ojete calor es imposible escucharla sin echar de menos al calcetín con ojos "," n bilirrubina 5d guerra "," e asise hacen los niños y en la república dominicana ","bien ha llegado el momento de huir del primo soltero y que este año se ha apuntado a clases de salsa ","padre de la salsa intelectual además de un gran cantante blades es probablemente el mejor contante "," h este himno de más de 7 minutos forma parte de siembra z el disco más vendido de la historia de la salsa ","lo más viral del covid después del covid claro ","sus fans se debatían entre la admiración y la envidia que producía comprobar que ellos si tenían terraza ","necesitaron una pandemia mundial para dar el pelotazo a almeida le bastó con un saque de honor ","paulina llevando al extremo la clásica pesadilla de salir de casa sin pantalones ","ñ una interpretación para quitarse el sombrero ","si no veis a la cantante tranquilos todo en orden e es que lleva un traje de camuflaje ","se puso noelía porque llamarse chayanna era dar demasiadas pistas ","tuvo un éxito fugaz y efimero suponemos que ahora vive preguntándose si alguien la llamará ","han pasado 20 años y seguimos sin pillar la metáfora por aclararnos le quiere ride como a su bike ","aquel verano trabajaron más que un camarero en la feria de abi ","a excelente resumen de la filosofía del colegio mayor ahuja y bastante mejor para cantar a coro desde las ventanas ","antes de hacer dúo con pajares fue payaso cómico y cantante y este fue el hit de su primer disco romance del ajo ","ahora psicólogos de instagram es cuando pensáis mn en ese niño interior adorado y vuestra fe se tambalea ","tampoco os fieis de la primera impresión más o menos así veían a españa antes de ganar el eurobasket 2022 "," rebruno quiero hacer pipí papá ","11d id no os preocupéis la tele pública respeta vuestras e vejigas aunque no tenga anuncios ","nano y su banda vid el gnomo ","efectivamente david hay hierbas que pueden curar de qué tarro las cogiste por curiosidad "," claudio biern el walt disney español que en paz descanse debió de ver naves en llamas más allá de orión ","los hermanos que hicieron la sintonía de don quijote se atrevieron con el musical xanadú que ya era una fantasía ","lo protagonizó olivia newton john que también participó en su banda sonora entre otras muchas cosas ","abad 1981 ho racio pinchadiscos h "," aunque la perdimos este año siempre nos quedará su música sus pelis y su marioneta ","tras su fallecimiento muchos descubrieron que era muchísimo más que grease especialmente en lo musical ","en españa causaba furor a ese señor de provincias ferretero y de finde ","ya en el 77 estaba clara la necesidad del uso generoso en las discotecas del corta el rollo ","f max b jugaba con esa figura del macho alfa una ironía que se pillaba en esa época a ver qué tal en esta ","mientras en otra dimensión triana canta yl abre la puerta niña ","fue una forrest gump de la historia del arte y la música en su peli salen dalí bowie coco chanel ","a coro 500 16 la virginidad miguel bosé "," idación tony ma manero ersexy girl ","me 20 años después de que este tema saliera en un anuncio lb lanzándolos a la fama los barceloneses han dicho adéu ","su sonido disco funk se ha ido refinando ee en paralelo al refinamiento de su barbero yz ","aquí los padres del italo disco perpetuando el tópico del español ladrón son 678 casos aislados ","uno de los hermanos la bionda el de la chaquetilla masterchef carmelo falleció este año ","más tarde produjeron vamos a la playa y no tengo dinero dos de los mejores uooos de la historia de la música ","vaya nuestro apoyo a todos los currantes pero esta vez un poquito más a los de ryanair y vueling ","así han recibido in the navy los presupuestos de este año ","esta no es la profe de fama casi seguro ni siquiera la de fama a bailar ","delia pasó del anonimato a la fama tras salir en un anuncio de tabaco en que pasaba del anonimato a la fama ","fallecida este año irene cara dejó dos temazos de oscar este por fama y otro por flashdance ","desde la atrevida ignorancia de algún panfleto le definieron como transformista supremacista asturiano ","los frioleros del mundo al menos lo reconocemos un poco superior sí que es ","os reiréis pero la postura de ángel beato aguanta terremotos de magnitud 5 ","muchos españoles hemos estado cantando 30 año nada es igual que una sirena es nadas ","en esta la versión original en alemán los globos no eran rojos pero el final era el mismo apocalipsis nuclear ","los de nena llaman a kiss fm plan dorado de pensiones ","hay canciones que encapsulan un tiempo y un lugar esta delicia es una de ellas ","para diferenciarse de los espontáneos los de b movie se ponían todos mechas ","el que está menos nervioso es vince clarke ex depeche mode que aprovecha el play back para tocar temas de ismael serrano ","el vocalista andy bell usa la coreo del dúo dinámico soy como el junco que se dobla pero siempre sigue en pie "," me tienes aquí colgado es originalmente de las supremes hoy se canta en los centros médicos de la comunidad de madrid ","triunfó con kids in america y teloneó a michael jackson dos datos que seguramente no están relacionados "," a minnelli 4 sing my mind ans 1 ","perderá la cabeza pero siempre sabremos donde encontrar a este portento de mujer que nos está mirando a todos ","entre el público tenéis a concha velasco agradecida y emocionada ","esta canción igual lo notáis la produjeron pet shop boys que saben siempre cuando hacen falta como ahora mismo "," suburbia habla en parte de los disturbios de la época de thatcher la versión original de liz truss ","que la gorra trumpista no os confunda chris lowe no se mueve ni para invadir el capitolio ","su otro single se llamó mi chica tiene un lío con satán lógicamente se convirtieron en un grupo de culto ","en su momento fue algo futurista hoy como mucho puede verse como el futuro de podemos "," a flores mo me las maravillaía yo ","así estamos los españoles pensando en la luz la comida el alquiler y la hipoteca del 2023 ","podéis probar a hacer esto con el último polvorón bastante mejor que pamplona ","lo de comprar el rollo de que jovanotti era un rapero clásico fue una bajada de pantalones en toda regía ","habrá visto desaparecer a los dinosaurios pero jordi hurtado al fondo está flipando también ","como el príncipe de bel air pero sin darle un puñetazo a nadie ","el sobrino de peret saboreó todos los géneros al ser el rumbero de la época con menos complejos ","y aquí veis a rishi sunak cuando su mujer le dijo que se llevaba la residencia fiscal fuera de reino unido ","el mismo mensaje que el ne me quitte pas 22 pero con la sensibilidad de una baguette "," dm ubleyou ase don t go ","cec no viene de los productores clivillés y cole sino de su helado preferido cookies 8 cream se ve que era light "," los que estuvimos en aquellas discotecas todavía vemos estas clases de zumba con estrés postraumático ","ría jesús y su acordeón s pajaritos ","está claro que el acordeón fue una apuesta arriesgada pero hay que pensar que la única competencia era chanquete ","por supuesto hubo peli se tituló los pajaritos pero no la dirigió hitchcockito como hubiera sido lógico "," la coreografía en este caso está basada en artes marciales inventadas lo cual traía consigo un agradable olor a gimnasio "," igaboys om boom boom boom ","si vais a hacer esta coreografía ojo que los vecinos no se esperan una clase de aeróbic a estas horas "," vengaboys viene de un español que decía siempre venga lo de hacer de vengadores puede que venga de otra cosa ","como bien sabe ben affleck jlo garantiza el propósito estrella de año nuevo gracias a la dieta del cucurucho ","ha demostrado hasta donde llega el poderío latino y lo importante que es leer las cosas antes de firmarlas ","la voz que le hace los coros a jennifer lopez se parece muchísimo a la de jennifer lopez "," uh eh samantha qué sorpresa el rótulo de hace un rato era de coña eh lo tuyo mola todo la música también ","y se entiende perfectamente los disfraces de ardilla pp lo que más "," antha hudson masiado coño ","nos ha pedido pedro sánchez que os digamos que esta subida también es culpa de la guerra en ucrania ","izquierda derecha como veis tienen la postura tan sólidamente definida como el gobierno respecto al sahara ","este era el simio más contagioso my antes de la viruela del mono ","y la coreografía que hizo llorar a darwin "," en 2002 era muy pronto para saber que la canción hablaba de corinna larsen ","en el juzgado del corazón de civera las órdenes de detención llevan coreografía "," id civera e la detengan ","21 años después no se trata tanto de querer como de pode ","azúcar no tan moreno con ellas nos ocurre como con andy 8 lucas seguimos sin saber quién es quién ","a sigue siendo muy divertido escucharla en alguna 2 ","curiosamente este año la nochevieja ha caído en saturday night ","esta coreografía sigue instalada en alguna parte de tu memoria justo al lado del teléfono fijo de tus padres "," a e mula abierta quiero más y ","jóvenes guapos populares rimas consonantes parecía un plan perfecto ","sin embargo su fulgor se extinguió antes de tiempo como les va a pasar a esas bengalas "," yote dax jw 4 perra lorazón ","le vimos mucho durante aquel verano pero no tanto como los dependientes del territorio vaquero de el corte inglés ","el encuentro entre las dos culturas no volvería a ser tan x estrecho hasta dos años después en la cumbre de las azores "," aaa nivel de inglés ketchup ","si entonces hubiera existido tiktok hoy dominarían el mundo ","estuvo prohibida en los colegios católicos hondureños aseguraban que era una invitación a ser hereje ","mayonesa y chocolate hemos comido cosas peores al llegar a casa después de la fiesta de nochevieja ","la mayonesa no se les cortó de los vaqueros no podemos decir lo mismo ","este famosísimo baile consiste en anexionarse a la pareja como putin a una península del mar negro ","aunque no os estéis fijando el tema es un descarado plagio de llorando se fue de la banda boliviana los kjarkas ","la relación entre rufián y borrás tiene menos roces ","bastan dos acordes para que tu cerebro reproduzca entera esta canción lo dificil es sacársela luego ","sería el momento de sacar la versión navideña s sabor turrón "," no dirás que no es doble negacionismo ","venga que esta nos la sabemos todos de mario conde al dioni ","luego se cortó la coleta y empezó a desubicarse un poco a otros también les ha pasado ","en este año de huracanes aquí tenéis a otro el eva ","con ese tiro de cámara no hay manera de hacer chistes ñ sobre el gorro de juan los realizadores ya no respetan nada n los realizadores ya no respetan nada ","con ese tiro de cámara no hay manera de hacer chistes sobre el gorro de juan los realizadores ya no respetan nada ","mr nada más dejar la fábrica de coches ya se notaba que los tubos de escape iban a dar problemas "," mia 48 12 discos llevan y no han dejado de fruncir el ceño ni una estrofa "," quién iba a saber que el resto de canciones se iban a parecer tanto a esta "," sin documentos es mejor no quedarse q entreespaña y marruecos ","say hasta ahora sólo ha tocado una nota ya tiene que ser un teclado bueno ","quín sabina to entre caballeros ","sabina pactó con unos ladrones hacerles esta copla y cumplió como lo del cgpj pero con gente responsable ","esta canción la ha versionado hace un rato évole así que mandamos nuestras disculpas sinceras a joaquín ","advertencia ha llegado el momento de guardar la sidra el gaitero y sacar el kalimotxo ","coherencia honestidad y esa pinta de acabar de desembarcar de la perla negra di sí a el drogas "," dentes y boikot neras de vivir ","dos grandes exponentes del punk rock nacional homenajeando a su padre complejo de edipo ","en el público sólo el de la camiseta de platero sabía a qué venía ","tero y tu voce de tu cuerpo ","fito cabrales el peso pesado más ligero del rock español ","él ya llevaba boina y usaba micrófonos cuando villarejo aún era honrado ","20 años después de su separación sigue sin haber una sola verbena de pueblo sin platero ","la verdad es que dorothy está rarísima después de pegar el estirón ","en pilones de varios pueblos de españa se han hallado restos de djs que se negaron a pinchar esto en las fiestas "," sabes cómo se llama el cantante de los suaves a yosi ","la libertad liando al pueblo py "," del califato de córdoba tomaron el nombre y probablemente también su amor por el cuero ","es incomprensible que los negacionistas no usaran este tema para protestar por las mascarillas ","en 2017 estados unidos les vetó la entrada al pais trump no podía soportar la comparación con semejante pelaso ","qpolicia que quede claro que esta canción es para autoconsumo ","por su potencial adictivo este estribillo debería ser catalogado como droga dura "," mari carmen patrona de la verbena y la cha m e madre de todos los juerguistas de españa ","10 años tratando de escribir la frase perfecta y jamás hen lograremos algo tan eficaz como este estribillo ","y ahora que hemos localizado a la prima de mari carmen del hermano de ayuso sabéis algo ","la publicidad subliminal de la época era como la canción rudimentaria z ","el country nunca volvió a ser lo mismo después de este disco lado ponti country la pared sr ","lao y maa a ese era hermano del gran wyomin "," ua já 1 lo de wyoming era verdad ff ","de los doscientos hitazos de este grupo este es el que inspiró todos los temas de ska p ","mucho antes del punk los fundadores del grupo cantaban en el coro los peque ","siempre se dijo que habían llevadi ","ef siempre se dijo que habían llevado el fenómeno fan y le 4 n público más joven aun e a un público más joven aunque esto es pasarse ","ñ los hispanoargentinos nos trajeron hedonismo l rock y la talla slim fire ","entre la chiquillada podéis ver a ariel rot intentando vender un país para educarlo no lo compramos y ahora mira ","su otro nombre speed tampoco era muy original en euskadi ya puestos con los tópicos haberse llamado abstinencia ","cuando se suicidó con 44 años no existía el 024 recibe 300 llamadas al día ni más ni menos "," que mañana es domingo qué mala suerte con los festivos este año ","y no solo las judías todas las legumbres en general están por las nubes ","en su último disco se han disfrazado de star wars ángeles de leia y dioni de maestro jedi ","en esta época él aún era pablo escobar "," a es chimberos vacas del pueblo ya se han escapao ","este fue más o menos el argumentario en defensa de las macrogranjas ","transitando la fina línea que separa a danny zuko att del protagonista de una peli de eloy de la iglesia ","f olivia newton john allá donde estés mt no hace falta que veas esto ","boney m y tigretó n las mejores fuentes de grasas saturadas de nuestra infancia ","free the nipple bobby farrell ha lavado menos camisetas que iggy pop ","una cosa más ni olvido ni perdón para el creativo responsable del jingle care carrefoooou ","a medio camino entre lola flores y beyoncé inventó el arte de bailar como si caminaras sobre brasas incandescentes ","desde 2013 tina es ciudadana suiza allí disfruta de sus paisajes alpinos y un poco también de su régimen fiscal ","en la mente de algunos de vosotros esta canción termina con ay que me meo coa ","indiscutible número uno en la escala pantene ","no solo han puesto música a la cuenta atrás del planeta y también contribuyeron a ella con un ingente consumo de laca ","mark knopfler el hijo no reconocido de miliki ","fue el primer sencillo de dire straits la ha tocado tanto que esa stratocaster podría hacer el punteo de memoria ","a pesar de su título la canción contiene un 0 de swing ","steaqua ll barbie gin ú ","un producto danés que te has comido muchas 1 más veces que sus galletas de mantequilla "," este 2023 la canción cumple 25 años y tú igual jh deberías empezar a pensar en tu próstata ","en realidad ella era italiana no gala ","fue un tema pionero del eurodisco y con los años se ha convertido en un infalible himno de estadio ","vamos ya que va quedando poco sacad la mermelada "," desde el bulo que lo situaba escondido en un armario pasó una década hasta que por fin salió de él ","si se os cierra la ventanita del amor preguntad a tamara falcó que os la abre en un nanosegundo "," 4 an tan agarrotado como el no rompas más mi corazón pm pero con volantes caribeños en las mangas ","el baile de chayanne es un arte marcial milenario con el que 4 puedes matar en segundos sobre todo a ti mismo "," cuando te queda bien un pantalón de cuero marrón es que te queda bien todo ","s que no que esta e no era de gloria estefan ","con esta chapan todos los congresos de cardiología aquí es cuando se pierden los papers ","bailes exagerados jóvenes felices en bañador y emojis animados aquí nació instagram ","mí por muy hedonista que parezca esta canción es una joya filológica de la cultura garífuna de los esclavos del caribe p ","esta la ponen indefectiblemente en todas las bodas es cuando el novio rentabiliza la barra libre "," la letra es una reflexión nietzscheana sobre la espiritualidad y el deseo lacaniano de arrimar cebolleta "," vale el batería no es imprescindible aquí pero habéis visto un ordenador que sonría tanto mirando a la de rojo ","ahora es cuando os vais levantando a bailar si no tenéis un tiburón vale un langostino ","no lo creereis pero cuando la compuso nelson zapata curraba en pfizer en los ensayos de lo que sería la viagra ","en los últimos años cuando alguien pronuncia locomía suele referirse al gluten ","sufrieron homofobia sin siquiera salir del armario en los años en los que españa se creía moderna m ","esas hombreras nos habrían venido muy bien para mantener la distancia social durante la pandemia ","espérate que el que estaba descoyuntándose en realidad es el que toca las congas ","el padre del electro mandinga perteneció a una estirpe de griots ancestrales narradores de historias ","no solo de marley vive el reggae jimmy triunfó t ","no solo de marley vive el reggae jimmy triunfó tras protagonizar la película jamaicana the harder they come ","el realizador ha querido tener una deferencia con todos aquellos que a estas alturas ya vais del revés ","no hagáis bromitas que nos conocemos el humo es artificial ","ol 4 the gang lebration ","la canción vale para una fiesta o para pasar la aspiradora lo importante es la actitud y que esté limpia la casa ","pues él irá fresquito pero en españa esa camisa sin una buena cadena de oro no luce ni la mitad ","el kool de la banda no es el cantante sino el del bajo de juguete que obviamente si lleva cadenita a "," o man sound co samba mix "," n no te fíes de las apariencias no son 2 sino "," catar no es una democracia sino una monarquía absoluta sin respeto por los derechos humanos dos ","el esfuerzo del coreógrafo es inútil la única forma de bailar esto es haciendo el trenecito ","como en el govern de la gene el bajito lleva la voz cantante lla no para de llamar la atención pero se le ve el plumero y ella no pa p pl "," el compositor de la canción es el padre de uno de los de daft punk nadie sabe de cúal ","en este caso no podemos asegurar que para esta grabación no haya muerto algún que otro loro ","peret seleccionador del equipo nacional de rumba catalana un séquito de verdaderos gitanos de la calle de la cera ","defensa en línea con trivote atacante y un 9 no muy guapo pero con un envidiable juego de piernas "," freestyle rumbero si les llama c tangana se le suben a la mesa antes del primer plato ","los mugs gigantes de mr wonderful no son ","mucho champagne hace falta para ser feliz con esos señores mirando ","alter ego de marc parrot quien terminó por cansarse del personaje y recuperó al artista ","7 conocemos el significado de abanibí pero el de sarandonga sigue siendo un misterio insondable "," ah y creemos que aboebé es como los listos llaman ahora al aceite de oliva ","esta va para los que estáis solos en casa viéndonos o sea que no estáis solos o sea que no va por vosotros ","entonces se la dedicamos a víctor y a tania catedráticos del petardeo por tomarse tan en serio lo de no tomarse en serio ","macaulay hoy en día igual se parece más a los ladrones de la peli que a sí mismo de pequeño "," a 1 es your mother know sna "," g 1 cachitos es como el roscón de reyes a a siempre suele llevar abba dentro ","la canción habla de una joven enamorada de un hombre mayor un día más en la oficina para le ","esta sí que se la sabe tu madre y tu hija ","no fue a eurovisión pero da tal subidón que dan ganas de tener cientos de hijos la generación bandini ","mn si hay algún retoño fruto de esta noche llamadle peret o lola ","nuestro propósito para este año recurrir más a la risa y mucho menos a la prisa y a la visa "," y ll que el mundo se va a acabar "],["00000018.jpg.subtitulo.tif.txt","00000021.jpg.subtitulo.tif.txt","00000024.jpg.subtitulo.tif.txt","00000025.jpg.subtitulo.tif.txt","00000026.jpg.subtitulo.tif.txt","00000029.jpg.subtitulo.tif.txt","00000030.jpg.subtitulo.tif.txt","00000031.jpg.subtitulo.tif.txt","00000032.jpg.subtitulo.tif.txt","00000038.jpg.subtitulo.tif.txt","00000039.jpg.subtitulo.tif.txt","00000040.jpg.subtitulo.tif.txt","00000042.jpg.subtitulo.tif.txt","00000050.jpg.subtitulo.tif.txt","00000051.jpg.subtitulo.tif.txt","00000052.jpg.subtitulo.tif.txt","00000056.jpg.subtitulo.tif.txt","00000058.jpg.subtitulo.tif.txt","00000059.jpg.subtitulo.tif.txt","00000064.jpg.subtitulo.tif.txt","00000065.jpg.subtitulo.tif.txt","00000066.jpg.subtitulo.tif.txt","00000071.jpg.subtitulo.tif.txt","00000072.jpg.subtitulo.tif.txt","00000075.jpg.subtitulo.tif.txt","00000080.jpg.subtitulo.tif.txt","00000082.jpg.subtitulo.tif.txt","00000083.jpg.subtitulo.tif.txt","00000086.jpg.subtitulo.tif.txt","00000088.jpg.subtitulo.tif.txt","00000093.jpg.subtitulo.tif.txt","00000094.jpg.subtitulo.tif.txt","00000095.jpg.subtitulo.tif.txt","00000099.jpg.subtitulo.tif.txt","00000100.jpg.subtitulo.tif.txt","00000104.jpg.subtitulo.tif.txt","00000105.jpg.subtitulo.tif.txt","00000106.jpg.subtitulo.tif.txt","00000111.jpg.subtitulo.tif.txt","00000112.jpg.subtitulo.tif.txt","00000113.jpg.subtitulo.tif.txt","00000114.jpg.subtitulo.tif.txt","00000117.jpg.subtitulo.tif.txt","00000118.jpg.subtitulo.tif.txt","00000119.jpg.subtitulo.tif.txt","00000125.jpg.subtitulo.tif.txt","00000126.jpg.subtitulo.tif.txt","00000127.jpg.subtitulo.tif.txt","00000131.jpg.subtitulo.tif.txt","00000140.jpg.subtitulo.tif.txt","00000141.jpg.subtitulo.tif.txt","00000144.jpg.subtitulo.tif.txt","00000145.jpg.subtitulo.tif.txt","00000146.jpg.subtitulo.tif.txt","00000153.jpg.subtitulo.tif.txt","00000155.jpg.subtitulo.tif.txt","00000156.jpg.subtitulo.tif.txt","00000159.jpg.subtitulo.tif.txt","00000161.jpg.subtitulo.tif.txt","00000162.jpg.subtitulo.tif.txt","00000168.jpg.subtitulo.tif.txt","00000169.jpg.subtitulo.tif.txt","00000171.jpg.subtitulo.tif.txt","00000174.jpg.subtitulo.tif.txt","00000175.jpg.subtitulo.tif.txt","00000176.jpg.subtitulo.tif.txt","00000178.jpg.subtitulo.tif.txt","00000181.jpg.subtitulo.tif.txt","00000186.jpg.subtitulo.tif.txt","00000187.jpg.subtitulo.tif.txt","00000192.jpg.subtitulo.tif.txt","00000193.jpg.subtitulo.tif.txt","00000200.jpg.subtitulo.tif.txt","00000201.jpg.subtitulo.tif.txt","00000202.jpg.subtitulo.tif.txt","00000208.jpg.subtitulo.tif.txt","00000209.jpg.subtitulo.tif.txt","00000211.jpg.subtitulo.tif.txt","00000217.jpg.subtitulo.tif.txt","00000218.jpg.subtitulo.tif.txt","00000224.jpg.subtitulo.tif.txt","00000225.jpg.subtitulo.tif.txt","00000228.jpg.subtitulo.tif.txt","00000229.jpg.subtitulo.tif.txt","00000230.jpg.subtitulo.tif.txt","00000231.jpg.subtitulo.tif.txt","00000236.jpg.subtitulo.tif.txt","00000237.jpg.subtitulo.tif.txt","00000238.jpg.subtitulo.tif.txt","00000241.jpg.subtitulo.tif.txt","00000242.jpg.subtitulo.tif.txt","00000243.jpg.subtitulo.tif.txt","00000244.jpg.subtitulo.tif.txt","00000248.jpg.subtitulo.tif.txt","00000250.jpg.subtitulo.tif.txt","00000255.jpg.subtitulo.tif.txt","00000256.jpg.subtitulo.tif.txt","00000257.jpg.subtitulo.tif.txt","00000258.jpg.subtitulo.tif.txt","00000261.jpg.subtitulo.tif.txt","00000262.jpg.subtitulo.tif.txt","00000264.jpg.subtitulo.tif.txt","00000269.jpg.subtitulo.tif.txt","00000270.jpg.subtitulo.tif.txt","00000271.jpg.subtitulo.tif.txt","00000276.jpg.subtitulo.tif.txt","00000278.jpg.subtitulo.tif.txt","00000284.jpg.subtitulo.tif.txt","00000289.jpg.subtitulo.tif.txt","00000290.jpg.subtitulo.tif.txt","00000291.jpg.subtitulo.tif.txt","00000297.jpg.subtitulo.tif.txt","00000298.jpg.subtitulo.tif.txt","00000304.jpg.subtitulo.tif.txt","00000305.jpg.subtitulo.tif.txt","00000311.jpg.subtitulo.tif.txt","00000313.jpg.subtitulo.tif.txt","00000314.jpg.subtitulo.tif.txt","00000317.jpg.subtitulo.tif.txt","00000318.jpg.subtitulo.tif.txt","00000319.jpg.subtitulo.tif.txt","00000323.jpg.subtitulo.tif.txt","00000324.jpg.subtitulo.tif.txt","00000325.jpg.subtitulo.tif.txt","00000326.jpg.subtitulo.tif.txt","00000332.jpg.subtitulo.tif.txt","00000333.jpg.subtitulo.tif.txt","00000339.jpg.subtitulo.tif.txt","00000341.jpg.subtitulo.tif.txt","00000346.jpg.subtitulo.tif.txt","00000347.jpg.subtitulo.tif.txt","00000349.jpg.subtitulo.tif.txt","00000354.jpg.subtitulo.tif.txt","00000355.jpg.subtitulo.tif.txt","00000356.jpg.subtitulo.tif.txt","00000363.jpg.subtitulo.tif.txt","00000364.jpg.subtitulo.tif.txt","00000367.jpg.subtitulo.tif.txt","00000368.jpg.subtitulo.tif.txt","00000371.jpg.subtitulo.tif.txt","00000372.jpg.subtitulo.tif.txt","00000373.jpg.subtitulo.tif.txt","00000374.jpg.subtitulo.tif.txt","00000376.jpg.subtitulo.tif.txt","00000377.jpg.subtitulo.tif.txt","00000378.jpg.subtitulo.tif.txt","00000379.jpg.subtitulo.tif.txt","00000383.jpg.subtitulo.tif.txt","00000385.jpg.subtitulo.tif.txt","00000389.jpg.subtitulo.tif.txt","00000390.jpg.subtitulo.tif.txt","00000391.jpg.subtitulo.tif.txt","00000396.jpg.subtitulo.tif.txt","00000397.jpg.subtitulo.tif.txt","00000401.jpg.subtitulo.tif.txt","00000402.jpg.subtitulo.tif.txt","00000403.jpg.subtitulo.tif.txt","00000410.jpg.subtitulo.tif.txt","00000411.jpg.subtitulo.tif.txt","00000414.jpg.subtitulo.tif.txt","00000415.jpg.subtitulo.tif.txt","00000423.jpg.subtitulo.tif.txt","00000424.jpg.subtitulo.tif.txt","00000431.jpg.subtitulo.tif.txt","00000432.jpg.subtitulo.tif.txt","00000433.jpg.subtitulo.tif.txt","00000436.jpg.subtitulo.tif.txt","00000438.jpg.subtitulo.tif.txt","00000439.jpg.subtitulo.tif.txt","00000444.jpg.subtitulo.tif.txt","00000445.jpg.subtitulo.tif.txt","00000454.jpg.subtitulo.tif.txt","00000455.jpg.subtitulo.tif.txt","00000459.jpg.subtitulo.tif.txt","00000460.jpg.subtitulo.tif.txt","00000466.jpg.subtitulo.tif.txt","00000467.jpg.subtitulo.tif.txt","00000468.jpg.subtitulo.tif.txt","00000475.jpg.subtitulo.tif.txt","00000476.jpg.subtitulo.tif.txt","00000483.jpg.subtitulo.tif.txt","00000484.jpg.subtitulo.tif.txt","00000491.jpg.subtitulo.tif.txt","00000492.jpg.subtitulo.tif.txt","00000499.jpg.subtitulo.tif.txt","00000501.jpg.subtitulo.tif.txt","00000505.jpg.subtitulo.tif.txt","00000506.jpg.subtitulo.tif.txt","00000508.jpg.subtitulo.tif.txt","00000509.jpg.subtitulo.tif.txt","00000510.jpg.subtitulo.tif.txt","00000514.jpg.subtitulo.tif.txt","00000516.jpg.subtitulo.tif.txt","00000522.jpg.subtitulo.tif.txt","00000523.jpg.subtitulo.tif.txt","00000529.jpg.subtitulo.tif.txt","00000530.jpg.subtitulo.tif.txt","00000537.jpg.subtitulo.tif.txt","00000538.jpg.subtitulo.tif.txt","00000543.jpg.subtitulo.tif.txt","00000545.jpg.subtitulo.tif.txt","00000551.jpg.subtitulo.tif.txt","00000552.jpg.subtitulo.tif.txt","00000557.jpg.subtitulo.tif.txt","00000558.jpg.subtitulo.tif.txt","00000561.jpg.subtitulo.tif.txt","00000562.jpg.subtitulo.tif.txt","00000563.jpg.subtitulo.tif.txt","00000564.jpg.subtitulo.tif.txt","00000565.jpg.subtitulo.tif.txt","00000566.jpg.subtitulo.tif.txt","00000570.jpg.subtitulo.tif.txt","00000571.jpg.subtitulo.tif.txt","00000574.jpg.subtitulo.tif.txt","00000576.jpg.subtitulo.tif.txt","00000577.jpg.subtitulo.tif.txt","00000583.jpg.subtitulo.tif.txt","00000585.jpg.subtitulo.tif.txt","00000590.jpg.subtitulo.tif.txt","00000592.jpg.subtitulo.tif.txt","00000597.jpg.subtitulo.tif.txt","00000598.jpg.subtitulo.tif.txt","00000603.jpg.subtitulo.tif.txt","00000604.jpg.subtitulo.tif.txt","00000605.jpg.subtitulo.tif.txt","00000612.jpg.subtitulo.tif.txt","00000613.jpg.subtitulo.tif.txt","00000621.jpg.subtitulo.tif.txt","00000622.jpg.subtitulo.tif.txt","00000628.jpg.subtitulo.tif.txt","00000630.jpg.subtitulo.tif.txt","00000633.jpg.subtitulo.tif.txt","00000634.jpg.subtitulo.tif.txt","00000642.jpg.subtitulo.tif.txt","00000643.jpg.subtitulo.tif.txt","00000648.jpg.subtitulo.tif.txt","00000649.jpg.subtitulo.tif.txt","00000656.jpg.subtitulo.tif.txt","00000657.jpg.subtitulo.tif.txt","00000663.jpg.subtitulo.tif.txt","00000670.jpg.subtitulo.tif.txt","00000671.jpg.subtitulo.tif.txt","00000672.jpg.subtitulo.tif.txt","00000680.jpg.subtitulo.tif.txt","00000686.jpg.subtitulo.tif.txt","00000687.jpg.subtitulo.tif.txt","00000688.jpg.subtitulo.tif.txt","00000694.jpg.subtitulo.tif.txt","00000696.jpg.subtitulo.tif.txt","00000703.jpg.subtitulo.tif.txt","00000705.jpg.subtitulo.tif.txt","00000706.jpg.subtitulo.tif.txt","00000709.jpg.subtitulo.tif.txt","00000710.jpg.subtitulo.tif.txt","00000715.jpg.subtitulo.tif.txt","00000716.jpg.subtitulo.tif.txt","00000718.jpg.subtitulo.tif.txt","00000723.jpg.subtitulo.tif.txt","00000725.jpg.subtitulo.tif.txt","00000729.jpg.subtitulo.tif.txt","00000730.jpg.subtitulo.tif.txt","00000733.jpg.subtitulo.tif.txt","00000735.jpg.subtitulo.tif.txt","00000738.jpg.subtitulo.tif.txt","00000739.jpg.subtitulo.tif.txt","00000742.jpg.subtitulo.tif.txt","00000743.jpg.subtitulo.tif.txt","00000744.jpg.subtitulo.tif.txt","00000752.jpg.subtitulo.tif.txt","00000753.jpg.subtitulo.tif.txt","00000756.jpg.subtitulo.tif.txt","00000757.jpg.subtitulo.tif.txt","00000761.jpg.subtitulo.tif.txt","00000762.jpg.subtitulo.tif.txt","00000771.jpg.subtitulo.tif.txt","00000772.jpg.subtitulo.tif.txt","00000775.jpg.subtitulo.tif.txt","00000776.jpg.subtitulo.tif.txt","00000777.jpg.subtitulo.tif.txt","00000783.jpg.subtitulo.tif.txt","00000784.jpg.subtitulo.tif.txt","00000785.jpg.subtitulo.tif.txt","00000791.jpg.subtitulo.tif.txt","00000792.jpg.subtitulo.tif.txt","00000793.jpg.subtitulo.tif.txt","00000798.jpg.subtitulo.tif.txt","00000800.jpg.subtitulo.tif.txt","00000803.jpg.subtitulo.tif.txt","00000804.jpg.subtitulo.tif.txt","00000805.jpg.subtitulo.tif.txt","00000814.jpg.subtitulo.tif.txt","00000815.jpg.subtitulo.tif.txt","00000820.jpg.subtitulo.tif.txt","00000821.jpg.subtitulo.tif.txt","00000828.jpg.subtitulo.tif.txt","00000829.jpg.subtitulo.tif.txt","00000834.jpg.subtitulo.tif.txt","00000835.jpg.subtitulo.tif.txt","00000840.jpg.subtitulo.tif.txt","00000841.jpg.subtitulo.tif.txt","00000846.jpg.subtitulo.tif.txt","00000848.jpg.subtitulo.tif.txt","00000853.jpg.subtitulo.tif.txt","00000854.jpg.subtitulo.tif.txt","00000855.jpg.subtitulo.tif.txt","00000857.jpg.subtitulo.tif.txt","00000862.jpg.subtitulo.tif.txt","00000863.jpg.subtitulo.tif.txt","00000866.jpg.subtitulo.tif.txt","00000867.jpg.subtitulo.tif.txt","00000871.jpg.subtitulo.tif.txt","00000872.jpg.subtitulo.tif.txt","00000873.jpg.subtitulo.tif.txt","00000876.jpg.subtitulo.tif.txt","00000880.jpg.subtitulo.tif.txt","00000883.jpg.subtitulo.tif.txt","00000884.jpg.subtitulo.tif.txt","00000889.jpg.subtitulo.tif.txt","00000891.jpg.subtitulo.tif.txt","00000892.jpg.subtitulo.tif.txt","00000897.jpg.subtitulo.tif.txt","00000899.jpg.subtitulo.tif.txt","00000908.jpg.subtitulo.tif.txt","00000909.jpg.subtitulo.tif.txt","00000910.jpg.subtitulo.tif.txt","00000917.jpg.subtitulo.tif.txt","00000924.jpg.subtitulo.tif.txt","00000925.jpg.subtitulo.tif.txt","00000926.jpg.subtitulo.tif.txt","00000930.jpg.subtitulo.tif.txt","00000932.jpg.subtitulo.tif.txt","00000933.jpg.subtitulo.tif.txt","00000938.jpg.subtitulo.tif.txt","00000939.jpg.subtitulo.tif.txt","00000940.jpg.subtitulo.tif.txt","00000945.jpg.subtitulo.tif.txt","00000946.jpg.subtitulo.tif.txt","00000949.jpg.subtitulo.tif.txt","00000951.jpg.subtitulo.tif.txt","00000954.jpg.subtitulo.tif.txt","00000955.jpg.subtitulo.tif.txt","00000956.jpg.subtitulo.tif.txt","00000959.jpg.subtitulo.tif.txt","00000960.jpg.subtitulo.tif.txt","00000961.jpg.subtitulo.tif.txt","00000965.jpg.subtitulo.tif.txt","00000966.jpg.subtitulo.tif.txt","00000968.jpg.subtitulo.tif.txt","00000969.jpg.subtitulo.tif.txt","00000970.jpg.subtitulo.tif.txt","00000976.jpg.subtitulo.tif.txt","00000977.jpg.subtitulo.tif.txt","00000978.jpg.subtitulo.tif.txt","00000981.jpg.subtitulo.tif.txt","00000982.jpg.subtitulo.tif.txt","00000983.jpg.subtitulo.tif.txt","00000987.jpg.subtitulo.tif.txt","00000988.jpg.subtitulo.tif.txt","00000994.jpg.subtitulo.tif.txt","00000995.jpg.subtitulo.tif.txt","00000997.jpg.subtitulo.tif.txt","00001001.jpg.subtitulo.tif.txt","00001003.jpg.subtitulo.tif.txt","00001005.jpg.subtitulo.tif.txt","00001006.jpg.subtitulo.tif.txt","00001008.jpg.subtitulo.tif.txt","00001010.jpg.subtitulo.tif.txt","00001011.jpg.subtitulo.tif.txt","00001012.jpg.subtitulo.tif.txt","00001015.jpg.subtitulo.tif.txt","00001016.jpg.subtitulo.tif.txt","00001019.jpg.subtitulo.tif.txt","00001026.jpg.subtitulo.tif.txt","00001027.jpg.subtitulo.tif.txt","00001030.jpg.subtitulo.tif.txt","00001031.jpg.subtitulo.tif.txt","00001032.jpg.subtitulo.tif.txt","00001035.jpg.subtitulo.tif.txt","00001036.jpg.subtitulo.tif.txt","00001040.jpg.subtitulo.tif.txt","00001041.jpg.subtitulo.tif.txt","00001042.jpg.subtitulo.tif.txt","00001044.jpg.subtitulo.tif.txt","00001045.jpg.subtitulo.tif.txt","00001046.jpg.subtitulo.tif.txt","00001047.jpg.subtitulo.tif.txt","00001051.jpg.subtitulo.tif.txt","00001052.jpg.subtitulo.tif.txt","00001056.jpg.subtitulo.tif.txt","00001057.jpg.subtitulo.tif.txt","00001060.jpg.subtitulo.tif.txt","00001061.jpg.subtitulo.tif.txt","00001062.jpg.subtitulo.tif.txt","00001065.jpg.subtitulo.tif.txt","00001067.jpg.subtitulo.tif.txt","00001070.jpg.subtitulo.tif.txt","00001071.jpg.subtitulo.tif.txt","00001072.jpg.subtitulo.tif.txt","00001075.jpg.subtitulo.tif.txt","00001076.jpg.subtitulo.tif.txt","00001080.jpg.subtitulo.tif.txt","00001084.jpg.subtitulo.tif.txt","00001086.jpg.subtitulo.tif.txt","00001087.jpg.subtitulo.tif.txt","00001091.jpg.subtitulo.tif.txt","00001092.jpg.subtitulo.tif.txt","00001093.jpg.subtitulo.tif.txt","00001094.jpg.subtitulo.tif.txt","00001099.jpg.subtitulo.tif.txt","00001103.jpg.subtitulo.tif.txt","00001107.jpg.subtitulo.tif.txt","00001108.jpg.subtitulo.tif.txt","00001112.jpg.subtitulo.tif.txt","00001114.jpg.subtitulo.tif.txt","00001117.jpg.subtitulo.tif.txt","00001118.jpg.subtitulo.tif.txt","00001122.jpg.subtitulo.tif.txt","00001123.jpg.subtitulo.tif.txt","00001126.jpg.subtitulo.tif.txt","00001127.jpg.subtitulo.tif.txt","00001128.jpg.subtitulo.tif.txt","00001130.jpg.subtitulo.tif.txt","00001132.jpg.subtitulo.tif.txt","00001133.jpg.subtitulo.tif.txt","00001135.jpg.subtitulo.tif.txt","00001137.jpg.subtitulo.tif.txt","00001141.jpg.subtitulo.tif.txt","00001142.jpg.subtitulo.tif.txt","00001143.jpg.subtitulo.tif.txt","00001146.jpg.subtitulo.tif.txt","00001147.jpg.subtitulo.tif.txt","00001149.jpg.subtitulo.tif.txt","00001152.jpg.subtitulo.tif.txt","00001153.jpg.subtitulo.tif.txt","00001157.jpg.subtitulo.tif.txt","00001158.jpg.subtitulo.tif.txt","00001160.jpg.subtitulo.tif.txt","00001161.jpg.subtitulo.tif.txt","00001167.jpg.subtitulo.tif.txt","00001168.jpg.subtitulo.tif.txt","00001172.jpg.subtitulo.tif.txt","00001173.jpg.subtitulo.tif.txt","00001176.jpg.subtitulo.tif.txt","00001178.jpg.subtitulo.tif.txt","00001182.jpg.subtitulo.tif.txt","00001187.jpg.subtitulo.tif.txt","00001189.jpg.subtitulo.tif.txt","00001192.jpg.subtitulo.tif.txt","00001194.jpg.subtitulo.tif.txt","00001197.jpg.subtitulo.tif.txt","00001199.jpg.subtitulo.tif.txt","00001200.jpg.subtitulo.tif.txt","00001206.jpg.subtitulo.tif.txt","00001207.jpg.subtitulo.tif.txt","00001211.jpg.subtitulo.tif.txt","00001212.jpg.subtitulo.tif.txt","00001213.jpg.subtitulo.tif.txt","00001214.jpg.subtitulo.tif.txt","00001221.jpg.subtitulo.tif.txt","00001222.jpg.subtitulo.tif.txt","00001223.jpg.subtitulo.tif.txt","00001225.jpg.subtitulo.tif.txt","00001229.jpg.subtitulo.tif.txt","00001230.jpg.subtitulo.tif.txt","00001231.jpg.subtitulo.tif.txt","00001232.jpg.subtitulo.tif.txt","00001236.jpg.subtitulo.tif.txt","00001238.jpg.subtitulo.tif.txt","00001239.jpg.subtitulo.tif.txt","00001243.jpg.subtitulo.tif.txt","00001244.jpg.subtitulo.tif.txt","00001245.jpg.subtitulo.tif.txt","00001252.jpg.subtitulo.tif.txt","00001253.jpg.subtitulo.tif.txt","00001259.jpg.subtitulo.tif.txt","00001260.jpg.subtitulo.tif.txt","00001262.jpg.subtitulo.tif.txt","00001265.jpg.subtitulo.tif.txt","00001266.jpg.subtitulo.tif.txt","00001267.jpg.subtitulo.tif.txt","00001275.jpg.subtitulo.tif.txt","00001276.jpg.subtitulo.tif.txt","00001277.jpg.subtitulo.tif.txt","00001281.jpg.subtitulo.tif.txt","00001282.jpg.subtitulo.tif.txt","00001283.jpg.subtitulo.tif.txt","00001289.jpg.subtitulo.tif.txt","00001290.jpg.subtitulo.tif.txt"],[120,75,50,121,90,52,97,83,81,33,107,94,101,31,89,123,82,63,97,98,104,108,117,55,81,68,82,125,93,46,31,56,90,90,92,41,111,107,35,87,107,50,35,78,125,37,77,82,74,126,102,32,86,86,110,55,93,73,95,108,91,76,72,34,79,66,73,36,101,97,51,77,39,111,96,71,103,69,92,82,61,75,53,72,67,89,113,37,74,46,84,85,74,103,106,34,85,76,104,58,101,98,105,116,108,55,118,97,37,110,66,101,70,74,77,62,54,113,32,86,82,31,107,124,124,93,78,108,94,109,101,97,46,104,92,88,104,105,68,42,112,70,124,43,64,128,105,82,71,35,111,114,120,126,31,105,67,104,109,105,105,106,124,114,49,72,128,114,115,123,71,79,115,116,95,57,94,34,70,110,104,95,113,95,107,98,112,110,34,74,98,129,72,116,124,93,96,85,97,105,66,119,60,99,79,51,77,75,78,89,103,78,107,113,96,111,99,116,101,124,113,106,31,94,119,104,57,70,117,114,113,94,116,50,107,52,128,105,96,63,110,124,63,114,39,65,104,106,115,56,107,98,83,52,98,69,107,105,72,117,122,111,109,34,102,36,95,120,118,106,43,88,105,74,96,110,74,101,42,41,125,98,100,93,118,103,62,81,110,100,113,78,78,97,115,59,82,79,125,115,123,109,40,120,68,118,104,93,111,91,38,93,83,107,97,76,98,109,90,33,117,110,38,116,113,130,41,105,116,112,111,91,119,76,32,102,119,70,44,79,82,31,66,111,58,66,111,36,74,96,35,117,130,36,68,112,112,73,107,117,54,103,67,45,64,89,56,160,120,99,79,78,67,80,35,109,105,89,99,36,91,68,33,59,74,91,71,115,70,34,96,97,114,64,84,97,113,92,78,100,50,46,91,79,39,142,81,119,117,97,70,80,92,42,63,75,107,74,83,72,99,118,114,84,50,126,49,115,59,31,89,100,48,106,53,106,98,115,116,82,51,91,93,125,100,115,120,90,115,83,103,99,84,113,51,114,107,62,32,117,99,105,31,54,101,100,150,100,101,117,107,93,46,69,90,109,81,113,125,99,33,87,101,44,105,68,95,37],[101,101,74,93,111,77,42,97,87,70,96,114,112,83,85,121,116,88,88,98,110,98,117,97,81,74,79,120,106,83,40,50,83,100,100,75,99,120,93,55,95,94,49,73,116,113,71,88,83,110,122,89,77,91,106,97,84,86,85,102,120,88,79,63,46,83,71,62,89,110,80,68,72,93,120,92,99,92,90,92,79,78,75,79,82,84,110,94,44,69,80,91,89,101,116,92,77,91,108,97,92,120,110,112,119,90,101,122,83,88,102,91,90,87,84,75,65,93,105,79,97,74,94,115,124,116,89,108,119,120,116,103,88,94,106,97,106,117,100,55,78,98,108,103,59,113,127,113,79,63,101,129,121,131,103,80,96,95,114,117,121,124,128,138,90,70,113,131,133,126,112,80,100,126,120,92,86,83,63,101,117,117,115,110,107,117,117,128,89,59,99,124,114,101,134,117,100,101,97,109,101,110,103,96,89,76,74,91,78,83,107,101,109,129,114,114,112,113,117,119,123,114,89,84,108,130,100,75,107,128,125,116,110,94,100,97,106,127,106,84,100,130,112,99,103,53,97,122,118,90,102,114,96,78,84,95,99,115,97,108,130,128,114,104,92,83,80,114,122,115,94,82,105,110,108,114,107,94,87,52,109,120,99,100,117,114,95,80,94,114,113,102,86,89,116,100,73,87,121,133,135,125,95,101,109,108,121,112,111,109,79,75,102,107,115,85,93,121,110,74,104,128,97,101,127,136,113,97,116,127,128,112,117,103,66,93,121,104,67,70,90,63,55,101,98,69,110,100,63,91,84,103,127,112,61,97,104,89,99,123,108,96,97,62,51,84,79,132,41,113,100,83,81,81,70,89,125,106,89,87,74,96,62,53,81,98,93,104,99,52,80,103,116,109,84,100,108,109,90,96,88,47,87,86,103,98,134,106,133,121,100,77,94,83,48,67,97,106,91,93,101,123,139,108,75,107,110,103,104,51,83,111,84,87,96,91,110,109,123,100,63,79,98,129,124,111,121,113,112,106,103,111,104,104,100,59,131,96,55,107,121,107,91,45,86,107,130,118,107,118,120,105,82,62,97,110,102,107,128,123,89,73,100,86,90,99,90,82]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>name<\/th>\n      <th>texto<\/th>\n      <th>n_fichero<\/th>\n      <th>n_caracteres<\/th>\n      <th>distancia<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,4,5]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>No nos hemos quitado todos los duplicados pero sí algunos de ellos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(subtitulos_proces)</span>
<span id="cb12-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 488   5</span></span></code></pre></div>
</div>
<p>Guardamos el fichero unido</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"></span>
<span id="cb13-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">write_csv</span>(subtitulos_proces,</span>
<span id="cb13-3">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">file =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{root_directory}{anno}_txt_unido.csv"</span>))</span></code></pre></div>
</div>
<p>Y <a href="https://drive.google.com/file/d/1S2Qm_Xv0UGshbwUpAWeF-nGX2JbZp7RV/view?usp=share_link">aquí</a> os dejo el enlace con los rótulos definitivos</p>


</section>

 ]]></description>
  <category>estadística</category>
  <category>polémica</category>
  <category>2023</category>
  <category>textmining</category>
  <category>ocr</category>
  <category>linux</category>
  <category>cachitos</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/03/cachitos-2022-segunda-parte/index.html</guid>
  <pubDate>Mon, 02 Jan 2023 23:00:00 GMT</pubDate>
  <media:content url="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/03/cachitos-2022-segunda-parte/eldrogas.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Cachitos 2022. Primera parte</title>
  <dc:creator>José Luis Cañadas Reche</dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/02/cachitos-2022-primera-parte/index.html</link>
  <description><![CDATA[ 



<p>Retomando la entrada de <a href="https://muestrear-no-es-pecado.netlify.app/2021/01/11/cachitos-primera-parte/">cachitos de la nochevieja de 2020</a></p>
<p>Actualizamos el <a href="https://github.com/joscani/blog_quarto/raw/master/2023/01/02/cachitos-2022-primera-parte/extract_subtitles.sh">script</a> que se baja el vídeo, recorta y extrae los subtítulos.</p>
<p>Sea como sea, siempre ha dejado perlas como estas</p>
<p>Ejemplo:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="ejemplo_946.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/02/cachitos-2022-primera-parte/ejemplo_946.jpg" class="img-fluid figure-img"></a></p>
</figure>
</div>
<p>El fotograma se obtiene usando mplayer y sacando uno de 200 fotogramas como imagen, luego se recorta la parte del súbtitulo, se invierten los colores y se usa <code>tesseract</code> para el <code>ocr</code></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="00000946_subtitulo.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/02/cachitos-2022-primera-parte/00000946_subtitulo.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
<p>Y tesseract hace el trabajo de pasarlo a texto</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Izquierda...</span> Derecha... Como veis, tienen la postura tan</span>
<span id="cb1-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">sólidamente</span> definida como el gobierno respecto al Sahara.</span></code></pre></div>
<p>Veamos las partes importantes de <code>extract_subtitles.sh</code></p>
<section id="bajar-el-vídeo" class="level2">
<h2 class="anchored" data-anchor-id="bajar-el-vídeo">Bajar el vídeo</h2>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#!/bin/bash</span></span>
<span id="cb2-2"></span>
<span id="cb2-3"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">root_directory</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>/home/jose/proyecto_cachitos</span>
<span id="cb2-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$root_directory</span></span>
<span id="cb2-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$root_directory</span></span>
<span id="cb2-6"></span>
<span id="cb2-7"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"First arg: </span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$1</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb2-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> video</span>
<span id="cb2-9"></span>
<span id="cb2-10"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> video</span>
<span id="cb2-11"></span>
<span id="cb2-12"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ANNO</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$1</span></span>
<span id="cb2-13"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$ANNO</span></span>
<span id="cb2-14"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">suffix_video</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_cachitos.mp4"</span></span>
<span id="cb2-15"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">suffix_jpg_dir</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_jpg"</span></span>
<span id="cb2-16"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">suffix_txt_dir</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_txt"</span></span>
<span id="cb2-17"></span>
<span id="cb2-18"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">video_file</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$ANNO$suffix_video</span></span>
<span id="cb2-19"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$video_file</span></span>
<span id="cb2-20"></span>
<span id="cb2-21"></span>
<span id="cb2-22"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">[</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$ANNO</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2022"</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">]</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-23"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">then</span></span>
<span id="cb2-24">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">wget</span> https://rtvehlsvodlote7.rtve.es/mediavodv2/resources/TE_SHIECRO/mp4/1/5/1672556504451.mp4</span>
<span id="cb2-25">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mv</span> 1672556504451.mp4 <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$video_file</span></span>
<span id="cb2-26"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">fi</span></span>
<span id="cb2-27"></span>
<span id="cb2-28"></span></code></pre></div>
<p>Como se contaba en el post original hay que ir a la web de rtve play, ir a reproducir el cachitos correspondiente, y luego darle a inspeccionar código y ver de qué url está haciendo el request. Para 2021 por ejemplo estaba en <code>https://lote5-vod-hls-geoblockurl.akamaized.net/resources/TE_GLUCA/mp4/4/0/1641020001504.mp4</code> . Cómo vemos, no hay mucha coherencia en dónde dejan los archivos.</p>
</section>
<section id="convertir-a-jpg-cambiar-tamaño-y-extraer-subtítulos." class="level2">
<h2 class="anchored" data-anchor-id="convertir-a-jpg-cambiar-tamaño-y-extraer-subtítulos.">Convertir a jpg , cambiar tamaño y extraer subtítulos.</h2>
<p>Gracias a software de linux como <code>mplayer</code> <code>parallel</code> o <code>magick</code> se puede hacer un montón de cosas con los vídeos e imágenes.</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Pasar a jpg uno de cada 200 fotogramas</span></span>
<span id="cb3-2"></span>
<span id="cb3-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mplayer</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-vf</span> framestep=200 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-framedrop</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-nosound</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$video_file</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-speed</span> 100 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-vo</span> jpeg:outdir=<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$ANNO$suffix_jpg_dir</span> </span>
<span id="cb3-4"> </span>
<span id="cb3-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$ANNO$suffix_jpg_dir</span> </span>
<span id="cb3-6"> </span>
<span id="cb3-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Convertir a formato más pequño</span></span>
<span id="cb3-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">find</span> . <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-name</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'*.jpg'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">|</span>  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parallel</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-j</span> 8 mogrify <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-resize</span> 642x480 {}</span>
<span id="cb3-9"></span>
<span id="cb3-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Seleccionar cacho dond están subtitulos</span></span>
<span id="cb3-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">find</span> . <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-name</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'*.jpg'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">|</span>  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parallel</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-j</span> 8 convert {} <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-crop</span> 460x50+90+295 +repage <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-compress</span> none <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-depth</span> 8 {}.subtitulo.tif</span>
<span id="cb3-12"></span>
<span id="cb3-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Poner en negativo para que el ocr funcione mejor</span></span>
<span id="cb3-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">find</span> . <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-name</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'*.tif'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">|</span>  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parallel</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-j</span> 8 convert {} <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-negate</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fx</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.8*r+.8*g+0*b'</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-compress</span> none <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-depth</span> 8 {}</span></code></pre></div>
<ul>
<li>Con mplayer extraemso uno de cada 200 fotogramas y los guardamos como formato jpeg en la carpeta especificada.</li>
<li>Con la utilidad <code>mogrify</code> de <code>magick</code> reescalamos cada uno de los archivos anteriores a 642x480 píxeles. Con <code>parallel</code> ( <code>sudo apt install parallel</code> si no lo tienes instalado) le decimos que haga esto en paralelo usando 8 hilos de ejecución</li>
<li>Con <code>convert</code>y opción <code>crop</code> indicamos y recortamos la zona de la imagen dónde creemos que están los rótulos y creamos archivos tif que sólo tienen esa zona.</li>
<li>Con la opción <code>negate</code> de <code>convert</code> invertimos los colores de forma que sea más fácil para <code>tesseract</code> hacer el reconomicimiento óptico de caracteres.</li>
</ul>
</section>
<section id="ocr." class="level2">
<h2 class="anchored" data-anchor-id="ocr.">OCR.</h2>
<p>Con tesseract simplemente pasamos los archivos tif generados y le indicamos que lo haga en paralelo usando 8 hilos y que como lenguaje utilizando el español <code>-l spa</code></p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Pasar el ocr con idioma en español</span></span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">find</span> . <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-name</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'*.tif'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">|</span>  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parallel</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-j</span> 8 tesseract <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-l</span> spa {} {}</span></code></pre></div>
<p><code>tesseract</code> creará tantos archivos <code>txt</code> como fotogramas hayamos extraído (1302 ficheros para cachitos nochevieja de 2022), la mayoría estarán sin rótulos.</p>
<p>El nombre que hemos puesto a los archivos sigue este patrón <code>00000946.jpg.subtitulo.tif.txt</code> indicando el número de fotograma así como las diferentes extensiones, así será más fácil luego identificar un texto con la imagen de la que viene.</p>
<p>En la siguiente entrada veremos algo de limpieza de texto.</p>


</section>

 ]]></description>
  <category>estadística</category>
  <category>polémica</category>
  <category>2023</category>
  <category>textmining</category>
  <category>ocr</category>
  <category>linux</category>
  <category>cachitos</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/02/cachitos-2022-primera-parte/index.html</guid>
  <pubDate>Sun, 01 Jan 2023 23:00:00 GMT</pubDate>
  <media:content url="https://muestrear-no-es-pecado-rebranding.netlify.app/2023/01/02/cachitos-2022-primera-parte/00001031.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Consejos para dejar spss</title>
  <dc:creator>José Luis Cañadas Reche</dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2022/12/04/cosas-para-dejar-spss/index.html</link>
  <description><![CDATA[ 



<section id="intro" class="level2">
<h2 class="anchored" data-anchor-id="intro">Intro</h2>
<p>Estuve del 23 al 25 de Noviembre en las <a href="http://r-es.org/12jr/">Jornadas de R</a> en Córdoba, y como siempre, me lo pasé estupendamente. Resulta que a la misma vez se celebraba el congreso andaluz de sociología, y dado mi pasado trabajando con sociólogos pues me pasé el viernes a última hora a ver a los colegas.</p>
<p>Me sigue sorprendiendo el uso que se sigue haciendo de spss en este ámbito, un software privativo y no barato precisamente. Tengo que decir que para aquellos que son amigos de los GUIs, en R tenemos radiant, BlueSky, jamovi, etc, <a href="https://r4stats.com/articles/software-reviews/r-gui-comparison/">aquí</a> os dejo una comparación con algunos de ellos.</p>
<p>Por otro lado, siempre me comentan que spss se usa mucho para hacer tabulaciones básicas, cosas como tablas de frecuencias de variables , tanto univariantes como bivariantes. En R tenemos muchas formas de poner tablas bonitas usando librerías como <code>DT</code>, <code>reactable</code>, <code>formattable</code>, <code>gt</code>,<code>flextable</code> o otras más, veáse <a href="https://rfortherestofus.com/2019/11/how-to-make-beautiful-tables-in-r/">esto</a> por ejemplo.</p>
<p>Yo voy a poner un ejemplo del uso de librerías de <a href="https://github.com/strengejacke">Daniel strengejacke</a> que son unas de mis favoritas a la hora de extraer por ejemplo los efectos marginales de modelos lineales (incluyendo los mixtos) y que tiene algunas utilidades para hacer tablas de frecuencias y que queden bastante bien.</p>
</section>
<section id="datos." class="level2">
<h2 class="anchored" data-anchor-id="datos.">Datos.</h2>
<p>Para ejemplificar, voy a bajarme el fichero del barómetro del<a href="https://www.cis.es/cis/opencm/ES/1_encuestas/estudios/listaMuestras.jsp?estudio=14630">CIS de mayo de 2022</a> en formato <code>sav</code> de spss y de paso vemos como se lee con R</p>
</section>
<section id="librerías-y-lectura-de-datos" class="level2">
<h2 class="anchored" data-anchor-id="librerías-y-lectura-de-datos">Librerías y lectura de datos</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tidyverse por si acaso y haven para leer ficheros spss</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(haven) </span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># librerias de Daniel</span></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># library(sjlabelled)</span></span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(sjPlot)</span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(sjmisc)</span>
<span id="cb1-9"></span>
<span id="cb1-10">bar_mayo_2022 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_sav</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/3363.sav"</span>))</span>
<span id="cb1-11"></span>
<span id="cb1-12">bar_mayo_2022</span>
<span id="cb1-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 3,865 × 172</span></span>
<span id="cb1-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     ESTU REGISTRO  CUES CCAA    PROV    MUN      CAPITAL TAMUNI  ENTREV  TIPO_…¹</span></span>
<span id="cb1-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+lb&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+l&gt;</span></span>
<span id="cb1-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1  3363      552     1 1 [And… 4 [Alm…  0 [Mun… 3 [Otr… 3 [10.… 0 [Ano… 1 [Fij…</span></span>
<span id="cb1-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2  3363      585     2 1 [And… 4 [Alm…  0 [Mun… 3 [Otr… 3 [10.… 0 [Ano… 1 [Fij…</span></span>
<span id="cb1-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3  3363      670     3 1 [And… 4 [Alm…  0 [Mun… 3 [Otr… 3 [10.… 0 [Ano… 2 [Móv…</span></span>
<span id="cb1-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4  3363      882     4 1 [And… 4 [Alm…  0 [Mun… 3 [Otr… 3 [10.… 0 [Ano… 1 [Fij…</span></span>
<span id="cb1-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5  3363    14056     5 1 [And… 4 [Alm…  0 [Mun… 3 [Otr… 3 [10.… 0 [Ano… 1 [Fij…</span></span>
<span id="cb1-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6  3363    14787     6 1 [And… 4 [Alm…  0 [Mun… 3 [Otr… 1 [Men… 0 [Ano… 1 [Fij…</span></span>
<span id="cb1-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7  3363     1447     7 1 [And… 4 [Alm…  0 [Mun… 3 [Otr… 1 [Men… 0 [Ano… 1 [Fij…</span></span>
<span id="cb1-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8  3363     4590     8 1 [And… 4 [Alm…  0 [Mun… 3 [Otr… 3 [10.… 0 [Ano… 2 [Móv…</span></span>
<span id="cb1-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9  3363      223     9 1 [And… 4 [Alm… 13 [Alm… 2 [Cap… 5 [100… 0 [Ano… 2 [Móv…</span></span>
<span id="cb1-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10  3363      399    10 1 [And… 4 [Alm… 13 [Alm… 2 [Cap… 5 [100… 0 [Ano… 1 [Fij…</span></span>
<span id="cb1-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # … with 3,855 more rows, 162 more variables: SEXO &lt;dbl+lbl&gt;, EDAD &lt;dbl+lbl&gt;,</span></span>
<span id="cb1-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; #   P0 &lt;dbl+lbl&gt;, P1 &lt;dbl+lbl&gt;, P2 &lt;dbl+lbl&gt;, P3 &lt;dbl+lbl&gt;, P4 &lt;dbl+lbl&gt;,</span></span>
<span id="cb1-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; #   P5 &lt;dbl+lbl&gt;, P6 &lt;dbl+lbl&gt;, P7_1 &lt;dbl+lbl&gt;, P7_2 &lt;dbl+lbl&gt;, P7_3 &lt;dbl+lbl&gt;,</span></span>
<span id="cb1-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; #   P7_4 &lt;dbl+lbl&gt;, P7_5 &lt;dbl+lbl&gt;, P7_6 &lt;dbl+lbl&gt;, P7_7 &lt;dbl+lbl&gt;,</span></span>
<span id="cb1-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; #   ECOESP &lt;dbl+lbl&gt;, ECOPER &lt;dbl+lbl&gt;, PESPANNA1 &lt;dbl+lbl&gt;,</span></span>
<span id="cb1-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; #   PESPANNA2 &lt;dbl+lbl&gt;, PESPANNA3 &lt;dbl+lbl&gt;, PPERSONAL1 &lt;dbl+lbl&gt;,</span></span>
<span id="cb1-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; #   PPERSONAL2 &lt;dbl+lbl&gt;, PPERSONAL3 &lt;dbl+lbl&gt;, PREFPTE &lt;dbl+lbl&gt;, …</span></span></code></pre></div>
</div>
<p>Interesante que al leer con haven tengo los datos con el valor y con la etiqueta.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(bar_mayo_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>CCAA)</span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; &lt;labelled&lt;double&gt;[6]&gt;: Comunidad autónoma</span></span>
<span id="cb2-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] 1 1 1 1 1 1</span></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Labels:</span></span>
<span id="cb2-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  value                        label</span></span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      1                    Andalucía</span></span>
<span id="cb2-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      2                       Aragón</span></span>
<span id="cb2-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      3     Asturias (Principado de)</span></span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      4              Balears (Illes)</span></span>
<span id="cb2-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      5                     Canarias</span></span>
<span id="cb2-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      6                    Cantabria</span></span>
<span id="cb2-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      7           Castilla-La Mancha</span></span>
<span id="cb2-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      8              Castilla y León</span></span>
<span id="cb2-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;      9                     Cataluña</span></span>
<span id="cb2-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     10         Comunitat Valenciana</span></span>
<span id="cb2-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     11                  Extremadura</span></span>
<span id="cb2-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     12                      Galicia</span></span>
<span id="cb2-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     13        Madrid (Comunidad de)</span></span>
<span id="cb2-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     14           Murcia (Región de)</span></span>
<span id="cb2-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     15 Navarra (Comunidad Foral de)</span></span>
<span id="cb2-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     16                   País Vasco</span></span>
<span id="cb2-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     17                   Rioja (La)</span></span>
<span id="cb2-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     18   Ceuta (Ciudad Autónoma de)</span></span>
<span id="cb2-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     19 Melilla (Ciudad Autónoma de)</span></span></code></pre></div>
</div>
</section>
<section id="usando-las-librerías-de-daniel" class="level2">
<h2 class="anchored" data-anchor-id="usando-las-librerías-de-daniel">Usando las librerías de Daniel</h2>
<p>Podemos ver las frecuencias de gente que ha contestado por Comunidad autónoma y teniendo en cuenta la ponderación</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_frq</span>(bar_mayo_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>CCAA, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">weight.by =</span> bar_mayo_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>PESO)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-3-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2022/12/04/cosas-para-dejar-spss/index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<section id="tablas-de-frecuencias" class="level3">
<h3 class="anchored" data-anchor-id="tablas-de-frecuencias">Tablas de frecuencias</h3>
<p>Podemos ver las tablas de frecuencias en formato texto y sin ponderación</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">frq</span>(bar_mayo_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>CCAA, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">out =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"txt"</span>)</span>
<span id="cb4-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Comunidad autónoma (x) &lt;numeric&gt; </span></span>
<span id="cb4-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # total N=3865 valid N=3865 mean=6.94 sd=5.27</span></span>
<span id="cb4-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb4-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Value |                        Label |    N | Raw % | Valid % | Cum. %</span></span>
<span id="cb4-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; ----------------------------------------------------------------------</span></span>
<span id="cb4-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     1 |                    Andalucía | 1293 | 33.45 |   33.45 |  33.45</span></span>
<span id="cb4-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     2 |                       Aragón |   96 |  2.48 |    2.48 |  35.94</span></span>
<span id="cb4-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     3 |     Asturias (Principado de) |  101 |  2.61 |    2.61 |  38.55</span></span>
<span id="cb4-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     4 |              Balears (Illes) |   94 |  2.43 |    2.43 |  40.98</span></span>
<span id="cb4-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     5 |                     Canarias |  116 |  3.00 |    3.00 |  43.98</span></span>
<span id="cb4-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     6 |                    Cantabria |   93 |  2.41 |    2.41 |  46.39</span></span>
<span id="cb4-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     7 |           Castilla-La Mancha |  123 |  3.18 |    3.18 |  49.57</span></span>
<span id="cb4-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     8 |              Castilla y León |  163 |  4.22 |    4.22 |  53.79</span></span>
<span id="cb4-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;     9 |                     Cataluña |  423 | 10.94 |   10.94 |  64.73</span></span>
<span id="cb4-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    10 |         Comunitat Valenciana |  284 |  7.35 |    7.35 |  72.08</span></span>
<span id="cb4-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    11 |                  Extremadura |   93 |  2.41 |    2.41 |  74.49</span></span>
<span id="cb4-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    12 |                      Galicia |  186 |  4.81 |    4.81 |  79.30</span></span>
<span id="cb4-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    13 |        Madrid (Comunidad de) |  392 | 10.14 |   10.14 |  89.44</span></span>
<span id="cb4-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    14 |           Murcia (Región de) |   98 |  2.54 |    2.54 |  91.98</span></span>
<span id="cb4-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    15 | Navarra (Comunidad Foral de) |   87 |  2.25 |    2.25 |  94.23</span></span>
<span id="cb4-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    16 |                   País Vasco |  125 |  3.23 |    3.23 |  97.46</span></span>
<span id="cb4-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    17 |                   Rioja (La) |   79 |  2.04 |    2.04 |  99.51</span></span>
<span id="cb4-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    18 |   Ceuta (Ciudad Autónoma de) |   10 |  0.26 |    0.26 |  99.77</span></span>
<span id="cb4-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    19 | Melilla (Ciudad Autónoma de) |    9 |  0.23 |    0.23 | 100.00</span></span>
<span id="cb4-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  &lt;NA&gt; |                         &lt;NA&gt; |    0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;</span></span></code></pre></div>
</div>
<p>O usar la ponderación y verlas en formato de html</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"></span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">frq</span>(bar_mayo_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>CCAA, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">weights =</span> bar_mayo_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>PESO, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">out =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"viewer"</span>)</span></code></pre></div>
<div class="cell-output-display">

<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Comunidad autónoma (xw) <span style="font-weight: normal; font-style: italic">&lt;numeric&gt;</span></caption>
<tbody><tr>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align:left;text-align:left; ">val</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: left;">label</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: right;">frq</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: right;">raw.prc</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: right;">valid.prc</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: right;">cum.prc</th>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">1</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Andalucía</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">700</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">18.11</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">18.11</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">18.11</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">2</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Aragón</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">109</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">2.82</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">2.82</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">20.93</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">3</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Asturias (Principado de)</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">94</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">2.43</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">2.43</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">23.36</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">4</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Balears (Illes)</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">86</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">2.23</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">2.23</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">25.59</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">5</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Canarias</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">174</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">4.50</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">4.50</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">30.09</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">6</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Cantabria</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">52</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">1.35</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">1.35</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">31.44</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">7</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Castilla-La Mancha</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">171</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">4.42</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">4.42</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">35.86</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">8</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Castilla y León</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">216</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">5.59</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">5.59</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">41.45</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">9</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Cataluña</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">595</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">15.39</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">15.39</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">56.84</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">10</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Comunitat Valenciana</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">393</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">10.17</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">10.17</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">67.01</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">11</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Extremadura</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">95</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">2.46</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">2.46</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">69.47</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">12</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Galicia</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">247</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">6.39</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">6.39</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">75.86</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">13</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Madrid (Comunidad de)</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">534</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">13.82</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">13.82</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">89.68</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">14</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Murcia (Región de)</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">116</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">3.00</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">3.00</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">92.68</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">15</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Navarra (Comunidad Foral de)</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">54</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">1.40</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">1.40</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">94.08</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">16</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">País Vasco</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">190</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">4.92</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">4.92</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">98.99</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">17</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Rioja (La)</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">26</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">0.67</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">0.67</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">99.66</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">18</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Ceuta (Ciudad Autónoma de)</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">7</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">0.18</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">0.18</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">99.84</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">19</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">Melilla (Ciudad Autónoma de)</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">6</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">0.16</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">0.16</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">100.00</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; border-bottom: 1px solid; ">NA</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: left;">NA</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: right;">0</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: right;">0.00</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: right;">NA</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: right;">NA</td>
</tr>
<tr>
<td colspan="7" style="font-style:italic; border-top:double black; text-align:right;">total N=3865 · valid N=3865 · x̄=8.29 · σ=4.73
</td>
</tr>
</tbody></table>

</div>
</div>
<p>También podemos decirle que si hay una variable continua nos la intente agrupar</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">frq</span>(bar_mayo_2022, EDAD, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">auto.grp =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">weights =</span> PESO, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">out =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"viewer"</span>)</span></code></pre></div>
<div class="cell-output-display">

<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Edad de la persona entrevistada (EDAD) <span style="font-weight: normal; font-style: italic">&lt;numeric&gt;</span></caption>
<tbody><tr>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align:left;text-align:left; ">val</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: left;">label</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: right;">frq</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: right;">raw.prc</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: right;">valid.prc</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: right;">cum.prc</th>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">1</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">18-33</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">746</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">19.30</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">19.30</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">19.30</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">2</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">34-49</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">1058</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">27.37</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">27.37</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">46.66</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">3</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">50-65</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">1181</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">30.55</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">30.55</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">77.21</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">4</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">66-81</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">794</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">20.54</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">20.54</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">97.75</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">5</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">82-97</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">85</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">2.20</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">2.20</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">99.95</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">6</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">98-113</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">2</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">0.05</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">0.05</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">100.00</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; border-bottom: 1px solid; ">NA</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: left;">NA</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: right;">0</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: right;">0.00</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: right;">NA</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: right;">NA</td>
</tr>
<tr>
<td colspan="7" style="font-style:italic; border-top:double black; text-align:right;">total N=3866 · valid N=3866 · x̄=50.72 · σ=17.05
</td>
</tr>
</tbody></table>

</div>
</div>
<p>o que ordene en orden descendente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">frq</span>(bar_mayo_2022, EDAD, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">auto.grp =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sort.frq =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"desc"</span>, </span>
<span id="cb7-2">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{attributes(bar_mayo_2022$EDAD)$label} AGRUPADA"</span> ), </span>
<span id="cb7-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">weights =</span> PESO, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">out =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"viewer"</span>)</span></code></pre></div>
<div class="cell-output-display">

<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Edad de la persona entrevistada AGRUPADA</caption>
<tbody><tr>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align:left;text-align:left; ">val</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: left;">label</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: right;">frq</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: right;">raw.prc</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: right;">valid.prc</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align: right;">cum.prc</th>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">3</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">42-53</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">946</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">24.47</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">24.47</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">24.47</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">4</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">54-65</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">846</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">21.88</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">21.88</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">46.35</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">5</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">66-77</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">693</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">17.93</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">17.93</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">64.28</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">2</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">30-41</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">666</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">17.23</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">17.23</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">81.51</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">1</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">18-29</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">527</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">13.63</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">13.63</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">95.14</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">6</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">78-89</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">176</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">4.55</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">4.55</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">99.69</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; ">7</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: left;">90-101</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">12</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">0.31</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">0.31</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; text-align: right;">100.00</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left;text-align:left; border-bottom: 1px solid; ">NA</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: left;">NA</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: right;">0</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: right;">0.00</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: right;">NA</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: 1px solid; text-align: right;">NA</td>
</tr>
<tr>
<td colspan="7" style="font-style:italic; border-top:double black; text-align:right;">total N=3866 · valid N=3866 · x̄=50.72 · σ=17.05
</td>
</tr>
</tbody></table>

</div>
</div>
<p>¿No está mal verdad?</p>
<p>He estado buscando si también tenía como hacer tablas de medias y demás, pero aún no lo he encontrado, no obstante podemos hacer esto.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"></span>
<span id="cb8-2">(edad_media <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> bar_mayo_2022 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">CCAA =</span> forcats<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_factor</span>(CCAA) ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># con el as_factor  (de forcats o de haven) nos traemos las etiquetas </span></span>
<span id="cb8-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb8-5">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">edad_media =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">weighted.mean</span>(EDAD, PESO) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb8-6">        )</span>
<span id="cb8-7"> ) </span>
<span id="cb8-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 19 × 2</span></span>
<span id="cb8-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    CCAA                         edad_media</span></span>
<span id="cb8-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;    &lt;fct&gt;                             &lt;dbl&gt;</span></span>
<span id="cb8-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  1 Andalucía                          52.0</span></span>
<span id="cb8-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  2 Aragón                             54.6</span></span>
<span id="cb8-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  3 Asturias (Principado de)           52.8</span></span>
<span id="cb8-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  4 Balears (Illes)                    51.5</span></span>
<span id="cb8-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  5 Canarias                           49.3</span></span>
<span id="cb8-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  6 Cantabria                          52.7</span></span>
<span id="cb8-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  7 Castilla-La Mancha                 48.6</span></span>
<span id="cb8-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  8 Castilla y León                    52.4</span></span>
<span id="cb8-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  9 Cataluña                           49.8</span></span>
<span id="cb8-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 10 Comunitat Valenciana               49.2</span></span>
<span id="cb8-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 11 Extremadura                        51.5</span></span>
<span id="cb8-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 12 Galicia                            51.4</span></span>
<span id="cb8-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 13 Madrid (Comunidad de)              48.6</span></span>
<span id="cb8-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 14 Murcia (Región de)                 49.7</span></span>
<span id="cb8-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 15 Navarra (Comunidad Foral de)       54.8</span></span>
<span id="cb8-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 16 País Vasco                         52.5</span></span>
<span id="cb8-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 17 Rioja (La)                         53.8</span></span>
<span id="cb8-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 18 Ceuta (Ciudad Autónoma de)         53.9</span></span>
<span id="cb8-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 19 Melilla (Ciudad Autónoma de)       52.4</span></span></code></pre></div>
</div>
</section>
<section id="tablas-de-contingencia" class="level3">
<h3 class="anchored" data-anchor-id="tablas-de-contingencia">Tablas de contingencia</h3>
<p>Es usual en las tabulaciones de spss, hacer tablas dónde en filas (o columnas) siempre dejamos la misma variable y vemos el cruce con otras variables de interés. Por ejemplo queremos ver las respuestas a la pregunta <code>P1</code> por cada comunidad autónoma, y teniendo en cuenta la ponderación.</p>
<p>Para eso usamos la función <code>tab_xtab</code>, que por defecto además nos devuelve la V de Cramer o el estadístico Chi-cuadrado</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"></span>
<span id="cb9-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tab_xtab</span>(bar_mayo_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>CCAA, bar_mayo_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>P1, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">weight.by =</span> bar_mayo_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>PESO)</span></code></pre></div>
<div class="cell-output-display">

<table style="border-collapse:collapse; border:none;">
 <tbody><tr>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; border-bottom:1px solid;" rowspan="2">Comunidad autónoma</th>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal;" colspan="7">Grado de<br>preocupación ante la<br>situación del<br>coronavirus COVID-19</th>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; font-weight:bolder; font-style:italic; border-bottom:1px solid; " rowspan="2">Total</th>
 </tr>
 
<tr>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Mucho</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Bastante</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">(NO LEER) Regular</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Poco</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Nada</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">N.S.</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">N.C.</td>
 </tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Andalucía</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">222</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">276</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">18</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">141</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">35</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">701</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Aragón</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">20</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">49</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">31</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">109</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Asturias (Principado<br>de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">18</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">42</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">27</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">94</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Balears (Illes)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">15</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">29</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">28</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">8</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">87</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Canarias</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">51</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">63</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">44</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">13</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">174</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Cantabria</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">14</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">24</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">11</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">53</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Castilla-La Mancha</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">34</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">73</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">46</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">13</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">172</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Castilla y León</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">70</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">88</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">43</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">9</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">217</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Cataluña</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">130</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">246</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">11</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">152</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">47</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">9</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">595</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Comunitat Valenciana</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">82</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">175</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">8</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">97</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">28</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">393</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Extremadura</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">27</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">38</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">21</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">95</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Galicia</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">60</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">103</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">65</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">12</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">246</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Madrid (Comunidad<br>de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">126</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">222</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">12</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">145</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">28</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">534</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Murcia (Región de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">30</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">52</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">26</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">116</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Navarra (Comunidad<br>Foral de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">11</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">24</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">17</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">54</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">País Vasco</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">48</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">65</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">10</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">49</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">17</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">191</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Rioja (La)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">8</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">10</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">26</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Ceuta (Ciudad<br>Autónoma de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">7</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Melilla (Ciudad<br>Autónoma de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span></td>
<td style="padding:0.2cm; text-align:center;  "><span style="color:black;">7</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  border-bottom:double; font-weight:bolder; font-style:italic; text-align:left; vertical-align:middle;">Total</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;"><span style="color:black;">973</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;"><span style="color:black;">1583</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;"><span style="color:black;">84</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;"><span style="color:black;">952</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;"><span style="color:black;">232</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;"><span style="color:black;">14</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;"><span style="color:black;">33</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double;"><span style="color:black;">3871</span></td> 
</tr>
<tr><td style="text-align:right; font-size:0.9em; font-style:italic; padding:0.2cm;" colspan="9">χ<sup>2</sup>=160.797 · df=108 · Cramer's V=0.083 · Fisher's p=0.001</td> 
</tr>
 
</tbody></table>
</div>
</div>
<p>Pero no queremos ir una a una , sino que queremos tener rápidamente el cruce de varias preguntas con la comunidad autónoma.</p>
<p>Tabla cruzada por Comunidad autónoma y p1 a p6</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"></span>
<span id="cb10-2">(var_to_cruce <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"P"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>))</span>
<span id="cb10-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] "P1" "P2" "P3" "P4" "P5" "P6"</span></span></code></pre></div>
</div>
<p>Nos creamos una función para llamar a <code>tab_xtab</code> con algunas opciones por defecto y que devuelva el código html necesario para pintar. Nota. Uso lo de <code>res$knitr</code> al final porque quiero juntar en uno solo todas las tablas, si no lo hago así hay problemas para sacar todas las tablas en mismo html de forma programática.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"></span>
<span id="cb11-2"></span>
<span id="cb11-3">contingency_table_print <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb11-4">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(df, var_fila, var_columna, var_peso,</span>
<span id="cb11-5">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.cell.prc =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb11-6">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.row.prc  =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb11-7">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.col.prc  =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span></span>
<span id="cb11-8">             ) {</span>
<span id="cb11-9">             res <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tab_xtab</span>(</span>
<span id="cb11-10">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var.row =</span> df[[var_fila]],</span>
<span id="cb11-11">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var.col =</span> df[[var_columna]],</span>
<span id="cb11-12">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">weight.by =</span> df[[var_peso]], </span>
<span id="cb11-13">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">emph.total =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb11-14">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.cell.prc =</span> show.cell.prc,</span>
<span id="cb11-15">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.row.prc =</span> show.row.prc, </span>
<span id="cb11-16">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.col.prc =</span> show.col.prc,</span>
<span id="cb11-17">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(</span>
<span id="cb11-18">                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Pregunta: {var_columna}  "</span>,</span>
<span id="cb11-19">                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" Por {var_fila}"</span>)</span>
<span id="cb11-20">             )</span>
<span id="cb11-21">             <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(res<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>knitr)</span>
<span id="cb11-22">    }</span></code></pre></div>
</div>
<p>Hacemos un <code>map</code> para obtener de cada una de las preguntas (P1 a P6) su cruce con CCAA , utilizando PESO como variable de ponderación y que nos muestre los porcentajes de filas y de columnas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"></span>
<span id="cb12-2">cruces <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>(var_to_cruce,</span>
<span id="cb12-3">     <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x)</span>
<span id="cb12-4">  </span>
<span id="cb12-5">             <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">contingency_table_print</span>(bar_mayo_2022, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CCAA"</span>, x, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PESO"</span>,</span>
<span id="cb12-6">                                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.row.prc =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb12-7">                                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.col.prc =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb12-8">     )</span></code></pre></div>
</div>
<p>Para juntar todas las tablas, concateno los resultados y con la función <code>raw_html</code> los puedo pintar. En el chunk de R he puesto que el resultado sea <code>asis</code></p>
<pre><code>`{r, results= 'asis', error=FALSE, warning=FALSE, message=FALSE}
</code></pre>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"></span>
<span id="cb14-2">knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">raw_html</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_chr</span>(cruces, paste))</span></code></pre></div>
<div class="cell-output-display">

<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Pregunta: P1   Por CCAA</caption>
 <tbody><tr>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; border-bottom:1px solid;" rowspan="2">Comunidad autónoma</th>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal;" colspan="7">Grado de<br>preocupación ante la<br>situación del<br>coronavirus COVID-19</th>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; font-weight:bolder; font-style:italic; border-bottom:1px solid;  background-color:#f8f8f8;" rowspan="2">Total</th>
 </tr>
 
<tr>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Mucho</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Bastante</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">(NO LEER) Regular</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Poco</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Nada</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">N.S.</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">N.C.</td>
 </tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Andalucía</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">222</span><br><span style="color:#333399;">31.7&nbsp;%</span><br><span style="color:#339933;">22.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">276</span><br><span style="color:#333399;">39.4&nbsp;%</span><br><span style="color:#339933;">17.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">18</span><br><span style="color:#333399;">2.6&nbsp;%</span><br><span style="color:#339933;">21.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">141</span><br><span style="color:#333399;">20.1&nbsp;%</span><br><span style="color:#339933;">14.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">35</span><br><span style="color:#333399;">5&nbsp;%</span><br><span style="color:#339933;">15.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">0.3&nbsp;%</span><br><span style="color:#339933;">14.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span><br><span style="color:#333399;">1&nbsp;%</span><br><span style="color:#339933;">21.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">701</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">18.1&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Aragón</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">20</span><br><span style="color:#333399;">18.3&nbsp;%</span><br><span style="color:#339933;">2.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">49</span><br><span style="color:#333399;">45&nbsp;%</span><br><span style="color:#339933;">3.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">1.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">31</span><br><span style="color:#333399;">28.4&nbsp;%</span><br><span style="color:#339933;">3.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">5.5&nbsp;%</span><br><span style="color:#339933;">2.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">7.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">109</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Asturias (Principado<br>de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">18</span><br><span style="color:#333399;">19.1&nbsp;%</span><br><span style="color:#339933;">1.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">42</span><br><span style="color:#333399;">44.7&nbsp;%</span><br><span style="color:#339933;">2.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">1.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">27</span><br><span style="color:#333399;">28.7&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">4.3&nbsp;%</span><br><span style="color:#339933;">1.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">2.1&nbsp;%</span><br><span style="color:#339933;">6.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">94</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Balears (Illes)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">15</span><br><span style="color:#333399;">17.2&nbsp;%</span><br><span style="color:#339933;">1.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">29</span><br><span style="color:#333399;">33.3&nbsp;%</span><br><span style="color:#339933;">1.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">2.3&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">28</span><br><span style="color:#333399;">32.2&nbsp;%</span><br><span style="color:#339933;">2.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">8</span><br><span style="color:#333399;">9.2&nbsp;%</span><br><span style="color:#339933;">3.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">5.7&nbsp;%</span><br><span style="color:#339933;">15.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">87</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Canarias</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">51</span><br><span style="color:#333399;">29.3&nbsp;%</span><br><span style="color:#339933;">5.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">63</span><br><span style="color:#333399;">36.2&nbsp;%</span><br><span style="color:#339933;">4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">44</span><br><span style="color:#333399;">25.3&nbsp;%</span><br><span style="color:#339933;">4.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">13</span><br><span style="color:#333399;">7.5&nbsp;%</span><br><span style="color:#339933;">5.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">14.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.6&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">174</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.5&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Cantabria</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">14</span><br><span style="color:#333399;">26.4&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">24</span><br><span style="color:#333399;">45.3&nbsp;%</span><br><span style="color:#339933;">1.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.9&nbsp;%</span><br><span style="color:#339933;">1.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">11</span><br><span style="color:#333399;">20.8&nbsp;%</span><br><span style="color:#339933;">1.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">3.8&nbsp;%</span><br><span style="color:#339933;">0.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.9&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">53</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Castilla-La Mancha</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">34</span><br><span style="color:#333399;">19.8&nbsp;%</span><br><span style="color:#339933;">3.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">73</span><br><span style="color:#333399;">42.4&nbsp;%</span><br><span style="color:#339933;">4.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">2.3&nbsp;%</span><br><span style="color:#339933;">4.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">46</span><br><span style="color:#333399;">26.7&nbsp;%</span><br><span style="color:#339933;">4.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">13</span><br><span style="color:#333399;">7.6&nbsp;%</span><br><span style="color:#339933;">5.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">1.2&nbsp;%</span><br><span style="color:#339933;">14.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">172</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Castilla y León</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">70</span><br><span style="color:#333399;">32.3&nbsp;%</span><br><span style="color:#339933;">7.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">88</span><br><span style="color:#333399;">40.6&nbsp;%</span><br><span style="color:#339933;">5.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.4&nbsp;%</span><br><span style="color:#339933;">3.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">43</span><br><span style="color:#333399;">19.8&nbsp;%</span><br><span style="color:#339933;">4.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">9</span><br><span style="color:#333399;">4.1&nbsp;%</span><br><span style="color:#339933;">3.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.4&nbsp;%</span><br><span style="color:#339933;">21.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.5&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">217</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">5.6&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Cataluña</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">130</span><br><span style="color:#333399;">21.8&nbsp;%</span><br><span style="color:#339933;">13.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">246</span><br><span style="color:#333399;">41.3&nbsp;%</span><br><span style="color:#339933;">15.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">11</span><br><span style="color:#333399;">1.8&nbsp;%</span><br><span style="color:#339933;">13.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">152</span><br><span style="color:#333399;">25.5&nbsp;%</span><br><span style="color:#339933;">16&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">47</span><br><span style="color:#333399;">7.9&nbsp;%</span><br><span style="color:#339933;">20.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">9</span><br><span style="color:#333399;">1.5&nbsp;%</span><br><span style="color:#339933;">27.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">595</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">15.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Comunitat Valenciana</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">82</span><br><span style="color:#333399;">20.9&nbsp;%</span><br><span style="color:#339933;">8.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">175</span><br><span style="color:#333399;">44.5&nbsp;%</span><br><span style="color:#339933;">11.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">8</span><br><span style="color:#333399;">2&nbsp;%</span><br><span style="color:#339933;">9.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">97</span><br><span style="color:#333399;">24.7&nbsp;%</span><br><span style="color:#339933;">10.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">28</span><br><span style="color:#333399;">7.1&nbsp;%</span><br><span style="color:#339933;">12.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.3&nbsp;%</span><br><span style="color:#339933;">7.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">0.5&nbsp;%</span><br><span style="color:#339933;">6.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">393</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">10.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Extremadura</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">27</span><br><span style="color:#333399;">28.4&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">38</span><br><span style="color:#333399;">40&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">4.2&nbsp;%</span><br><span style="color:#339933;">4.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">21</span><br><span style="color:#333399;">22.1&nbsp;%</span><br><span style="color:#339933;">2.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">3.2&nbsp;%</span><br><span style="color:#339933;">1.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">7.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">95</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.5&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Galicia</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">60</span><br><span style="color:#333399;">24.4&nbsp;%</span><br><span style="color:#339933;">6.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">103</span><br><span style="color:#333399;">41.9&nbsp;%</span><br><span style="color:#339933;">6.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">2&nbsp;%</span><br><span style="color:#339933;">6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">65</span><br><span style="color:#333399;">26.4&nbsp;%</span><br><span style="color:#339933;">6.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">12</span><br><span style="color:#333399;">4.9&nbsp;%</span><br><span style="color:#339933;">5.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.4&nbsp;%</span><br><span style="color:#339933;">7.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">246</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">6.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Madrid (Comunidad<br>de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">126</span><br><span style="color:#333399;">23.6&nbsp;%</span><br><span style="color:#339933;">12.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">222</span><br><span style="color:#333399;">41.6&nbsp;%</span><br><span style="color:#339933;">14&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">12</span><br><span style="color:#333399;">2.2&nbsp;%</span><br><span style="color:#339933;">14.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">145</span><br><span style="color:#333399;">27.2&nbsp;%</span><br><span style="color:#339933;">15.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">28</span><br><span style="color:#333399;">5.2&nbsp;%</span><br><span style="color:#339933;">12.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.2&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">534</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">13.8&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Murcia (Región de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">30</span><br><span style="color:#333399;">25.9&nbsp;%</span><br><span style="color:#339933;">3.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">52</span><br><span style="color:#333399;">44.8&nbsp;%</span><br><span style="color:#339933;">3.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">2.6&nbsp;%</span><br><span style="color:#339933;">3.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">26</span><br><span style="color:#333399;">22.4&nbsp;%</span><br><span style="color:#339933;">2.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">3.4&nbsp;%</span><br><span style="color:#339933;">1.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">7.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">116</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Navarra (Comunidad<br>Foral de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">11</span><br><span style="color:#333399;">20.4&nbsp;%</span><br><span style="color:#339933;">1.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">24</span><br><span style="color:#333399;">44.4&nbsp;%</span><br><span style="color:#339933;">1.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">17</span><br><span style="color:#333399;">31.5&nbsp;%</span><br><span style="color:#339933;">1.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">3.7&nbsp;%</span><br><span style="color:#339933;">0.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">54</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">País Vasco</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">48</span><br><span style="color:#333399;">25.1&nbsp;%</span><br><span style="color:#339933;">4.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">65</span><br><span style="color:#333399;">34&nbsp;%</span><br><span style="color:#339933;">4.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">10</span><br><span style="color:#333399;">5.2&nbsp;%</span><br><span style="color:#339933;">11.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">49</span><br><span style="color:#333399;">25.7&nbsp;%</span><br><span style="color:#339933;">5.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">17</span><br><span style="color:#333399;">8.9&nbsp;%</span><br><span style="color:#339933;">7.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">1&nbsp;%</span><br><span style="color:#339933;">6.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">191</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.9&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Rioja (La)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">8</span><br><span style="color:#333399;">30.8&nbsp;%</span><br><span style="color:#339933;">0.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">10</span><br><span style="color:#333399;">38.5&nbsp;%</span><br><span style="color:#339933;">0.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">3.8&nbsp;%</span><br><span style="color:#339933;">1.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span><br><span style="color:#333399;">26.9&nbsp;%</span><br><span style="color:#339933;">0.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">26</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.7&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Ceuta (Ciudad<br>Autónoma de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">42.9&nbsp;%</span><br><span style="color:#339933;">0.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">42.9&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">14.3&nbsp;%</span><br><span style="color:#339933;">0.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">7</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Melilla (Ciudad<br>Autónoma de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">57.1&nbsp;%</span><br><span style="color:#339933;">0.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">14.3&nbsp;%</span><br><span style="color:#339933;">0.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">14.3&nbsp;%</span><br><span style="color:#339933;">0.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">14.3&nbsp;%</span><br><span style="color:#339933;">0.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">7</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  border-bottom:double; background-color:#f8f8f8; font-weight:bolder; font-style:italic; text-align:left; vertical-align:middle;">Total</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">973</span><br><span style="color:#333399;">25.1&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">1583</span><br><span style="color:#333399;">40.9&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">84</span><br><span style="color:#333399;">2.2&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">952</span><br><span style="color:#333399;">24.6&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">232</span><br><span style="color:#333399;">6&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">14</span><br><span style="color:#333399;">0.4&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">33</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">3871</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td> 
</tr>
<tr><td style="text-align:right; font-size:0.9em; font-style:italic; padding:0.2cm;" colspan="9">χ<sup>2</sup>=160.797 · df=108 · Cramer's V=0.083 · Fisher's p=0.001</td> 
</tr>
 
</tbody></table>
<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Pregunta: P2   Por CCAA</caption>
 <tbody><tr>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; border-bottom:1px solid;" rowspan="2">Comunidad autónoma</th>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal;" colspan="6">Efectos de la crisis<br>del COVID-19 que más<br>preocupan<br>personalmente</th>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; font-weight:bolder; font-style:italic; border-bottom:1px solid;  background-color:#f8f8f8;" rowspan="2">Total</th>
 </tr>
 
<tr>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Los efectos sobre la<br>salud</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Los efectos sobre la<br>economía y el empleo</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">(NO LEER) Ambos por<br>igual</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">(NO LEER) Ni unos ni<br>otros</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">N.S.</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">N.C.</td>
 </tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Andalucía</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">200</span><br><span style="color:#333399;">28.6&nbsp;%</span><br><span style="color:#339933;">19.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">333</span><br><span style="color:#333399;">47.6&nbsp;%</span><br><span style="color:#339933;">16.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">159</span><br><span style="color:#333399;">22.7&nbsp;%</span><br><span style="color:#339933;">20.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">0.4&nbsp;%</span><br><span style="color:#339933;">9.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.1&nbsp;%</span><br><span style="color:#339933;">16.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">0.4&nbsp;%</span><br><span style="color:#339933;">15.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">699</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">18.1&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Aragón</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">29</span><br><span style="color:#333399;">26.9&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">58</span><br><span style="color:#333399;">53.7&nbsp;%</span><br><span style="color:#339933;">2.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">20</span><br><span style="color:#333399;">18.5&nbsp;%</span><br><span style="color:#339933;">2.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">3.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">108</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Asturias (Principado<br>de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">29</span><br><span style="color:#333399;">31.2&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">41</span><br><span style="color:#333399;">44.1&nbsp;%</span><br><span style="color:#339933;">2.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">22</span><br><span style="color:#333399;">23.7&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">3.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">93</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Balears (Illes)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">16</span><br><span style="color:#333399;">18.6&nbsp;%</span><br><span style="color:#339933;">1.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">45</span><br><span style="color:#333399;">52.3&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">21</span><br><span style="color:#333399;">24.4&nbsp;%</span><br><span style="color:#339933;">2.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">2.3&nbsp;%</span><br><span style="color:#339933;">6.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">2.3&nbsp;%</span><br><span style="color:#339933;">10.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">86</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Canarias</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">54</span><br><span style="color:#333399;">31&nbsp;%</span><br><span style="color:#339933;">5.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">86</span><br><span style="color:#333399;">49.4&nbsp;%</span><br><span style="color:#339933;">4.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">26</span><br><span style="color:#333399;">14.9&nbsp;%</span><br><span style="color:#339933;">3.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.7&nbsp;%</span><br><span style="color:#339933;">9.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">33.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.7&nbsp;%</span><br><span style="color:#339933;">15.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">174</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.5&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Cantabria</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">13</span><br><span style="color:#333399;">25.5&nbsp;%</span><br><span style="color:#339933;">1.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">28</span><br><span style="color:#333399;">54.9&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">10</span><br><span style="color:#333399;">19.6&nbsp;%</span><br><span style="color:#339933;">1.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">51</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">1.3&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Castilla-La Mancha</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">42</span><br><span style="color:#333399;">24.7&nbsp;%</span><br><span style="color:#339933;">4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">103</span><br><span style="color:#333399;">60.6&nbsp;%</span><br><span style="color:#339933;">5.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">21</span><br><span style="color:#333399;">12.4&nbsp;%</span><br><span style="color:#339933;">2.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.8&nbsp;%</span><br><span style="color:#339933;">9.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.6&nbsp;%</span><br><span style="color:#339933;">5.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">170</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Castilla y León</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">49</span><br><span style="color:#333399;">22.8&nbsp;%</span><br><span style="color:#339933;">4.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">114</span><br><span style="color:#333399;">53&nbsp;%</span><br><span style="color:#339933;">5.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">46</span><br><span style="color:#333399;">21.4&nbsp;%</span><br><span style="color:#339933;">5.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">2.3&nbsp;%</span><br><span style="color:#339933;">15.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.5&nbsp;%</span><br><span style="color:#339933;">16.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">215</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">5.6&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Cataluña</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">148</span><br><span style="color:#333399;">24.9&nbsp;%</span><br><span style="color:#339933;">14.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">318</span><br><span style="color:#333399;">53.5&nbsp;%</span><br><span style="color:#339933;">16.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">123</span><br><span style="color:#333399;">20.7&nbsp;%</span><br><span style="color:#339933;">15.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">0.7&nbsp;%</span><br><span style="color:#339933;">12.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.2&nbsp;%</span><br><span style="color:#339933;">5.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">594</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">15.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Comunitat Valenciana</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">94</span><br><span style="color:#333399;">23.9&nbsp;%</span><br><span style="color:#339933;">9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">221</span><br><span style="color:#333399;">56.2&nbsp;%</span><br><span style="color:#339933;">11.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">71</span><br><span style="color:#333399;">18.1&nbsp;%</span><br><span style="color:#339933;">9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">1.3&nbsp;%</span><br><span style="color:#339933;">15.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">0.5&nbsp;%</span><br><span style="color:#339933;">10.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">393</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">10.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Extremadura</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">33</span><br><span style="color:#333399;">34.7&nbsp;%</span><br><span style="color:#339933;">3.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">42</span><br><span style="color:#333399;">44.2&nbsp;%</span><br><span style="color:#339933;">2.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">20</span><br><span style="color:#333399;">21.1&nbsp;%</span><br><span style="color:#339933;">2.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">95</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.5&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Galicia</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">75</span><br><span style="color:#333399;">30.4&nbsp;%</span><br><span style="color:#339933;">7.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">118</span><br><span style="color:#333399;">47.8&nbsp;%</span><br><span style="color:#339933;">6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">51</span><br><span style="color:#333399;">20.6&nbsp;%</span><br><span style="color:#339933;">6.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.2&nbsp;%</span><br><span style="color:#339933;">15.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">247</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">6.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Madrid (Comunidad<br>de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">152</span><br><span style="color:#333399;">28.5&nbsp;%</span><br><span style="color:#339933;">14.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">275</span><br><span style="color:#333399;">51.6&nbsp;%</span><br><span style="color:#339933;">13.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">99</span><br><span style="color:#333399;">18.6&nbsp;%</span><br><span style="color:#339933;">12.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">0.8&nbsp;%</span><br><span style="color:#339933;">12.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">0.4&nbsp;%</span><br><span style="color:#339933;">33.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.2&nbsp;%</span><br><span style="color:#339933;">5.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">533</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">13.8&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Murcia (Región de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">36</span><br><span style="color:#333399;">31&nbsp;%</span><br><span style="color:#339933;">3.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">51</span><br><span style="color:#333399;">44&nbsp;%</span><br><span style="color:#339933;">2.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">28</span><br><span style="color:#333399;">24.1&nbsp;%</span><br><span style="color:#339933;">3.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">5.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">116</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Navarra (Comunidad<br>Foral de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">14</span><br><span style="color:#333399;">25.9&nbsp;%</span><br><span style="color:#339933;">1.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">27</span><br><span style="color:#333399;">50&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">12</span><br><span style="color:#333399;">22.2&nbsp;%</span><br><span style="color:#339933;">1.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.9&nbsp;%</span><br><span style="color:#339933;">3.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">54</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">País Vasco</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">46</span><br><span style="color:#333399;">24.1&nbsp;%</span><br><span style="color:#339933;">4.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">93</span><br><span style="color:#333399;">48.7&nbsp;%</span><br><span style="color:#339933;">4.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">50</span><br><span style="color:#333399;">26.2&nbsp;%</span><br><span style="color:#339933;">6.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">1&nbsp;%</span><br><span style="color:#339933;">10.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">191</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">5&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Rioja (La)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">23.1&nbsp;%</span><br><span style="color:#339933;">0.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">14</span><br><span style="color:#333399;">53.8&nbsp;%</span><br><span style="color:#339933;">0.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">23.1&nbsp;%</span><br><span style="color:#339933;">0.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">26</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.7&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Ceuta (Ciudad<br>Autónoma de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">42.9&nbsp;%</span><br><span style="color:#339933;">0.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">42.9&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">14.3&nbsp;%</span><br><span style="color:#339933;">0.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">7</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Melilla (Ciudad<br>Autónoma de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">83.3&nbsp;%</span><br><span style="color:#339933;">0.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">16.7&nbsp;%</span><br><span style="color:#339933;">0.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">6</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  border-bottom:double; background-color:#f8f8f8; font-weight:bolder; font-style:italic; text-align:left; vertical-align:middle;">Total</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">1039</span><br><span style="color:#333399;">26.9&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">1975</span><br><span style="color:#333399;">51.2&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">787</span><br><span style="color:#333399;">20.4&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">32</span><br><span style="color:#333399;">0.8&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">6</span><br><span style="color:#333399;">0.2&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">19</span><br><span style="color:#333399;">0.5&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">3858</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td> 
</tr>
<tr><td style="text-align:right; font-size:0.9em; font-style:italic; padding:0.2cm;" colspan="8">χ<sup>2</sup>=106.010 · df=90 · Cramer's V=0.074 · Fisher's p=0.041</td> 
</tr>
 
</tbody></table>
<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Pregunta: P3   Por CCAA</caption>
 <tbody><tr>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; border-bottom:1px solid;" rowspan="2">Comunidad autónoma</th>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal;" colspan="5">Valoración sobre si<br>ha pasado lo peor o<br>no de la situación<br>sanitaria generada<br>por el coronavirus</th>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; font-weight:bolder; font-style:italic; border-bottom:1px solid;  background-color:#f8f8f8;" rowspan="2">Total</th>
 </tr>
 
<tr>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Lo peor ha pasado ya</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Seguimos en el peor<br>momento</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Lo peor está por<br>llegar</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">(NO LEER) No lo<br>sabe, duda</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">N.C.</td>
 </tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Andalucía</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">486</span><br><span style="color:#333399;">69.4&nbsp;%</span><br><span style="color:#339933;">17.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">86</span><br><span style="color:#333399;">12.3&nbsp;%</span><br><span style="color:#339933;">21.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">65</span><br><span style="color:#333399;">9.3&nbsp;%</span><br><span style="color:#339933;">19.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">55</span><br><span style="color:#333399;">7.9&nbsp;%</span><br><span style="color:#339933;">16.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">8</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">14.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">700</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">18.1&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Aragón</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">78</span><br><span style="color:#333399;">70.9&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">17</span><br><span style="color:#333399;">15.5&nbsp;%</span><br><span style="color:#339933;">4.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">5.5&nbsp;%</span><br><span style="color:#339933;">1.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span><br><span style="color:#333399;">6.4&nbsp;%</span><br><span style="color:#339933;">2.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">1.8&nbsp;%</span><br><span style="color:#339933;">3.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">110</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Asturias (Principado<br>de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">56</span><br><span style="color:#333399;">59.6&nbsp;%</span><br><span style="color:#339933;">2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">11</span><br><span style="color:#333399;">11.7&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">9</span><br><span style="color:#333399;">9.6&nbsp;%</span><br><span style="color:#339933;">2.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">16</span><br><span style="color:#333399;">17&nbsp;%</span><br><span style="color:#339933;">4.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">2.1&nbsp;%</span><br><span style="color:#339933;">3.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">94</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Balears (Illes)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">62</span><br><span style="color:#333399;">72.1&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">7&nbsp;%</span><br><span style="color:#339933;">1.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">7&nbsp;%</span><br><span style="color:#339933;">1.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">11</span><br><span style="color:#333399;">12.8&nbsp;%</span><br><span style="color:#339933;">3.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.2&nbsp;%</span><br><span style="color:#339933;">1.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">86</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Canarias</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">112</span><br><span style="color:#333399;">64.4&nbsp;%</span><br><span style="color:#339933;">4.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">20</span><br><span style="color:#333399;">11.5&nbsp;%</span><br><span style="color:#339933;">5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">16</span><br><span style="color:#333399;">9.2&nbsp;%</span><br><span style="color:#339933;">4.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">23</span><br><span style="color:#333399;">13.2&nbsp;%</span><br><span style="color:#339933;">7.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.7&nbsp;%</span><br><span style="color:#339933;">5.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">174</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.5&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Cantabria</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">32</span><br><span style="color:#333399;">61.5&nbsp;%</span><br><span style="color:#339933;">1.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">8</span><br><span style="color:#333399;">15.4&nbsp;%</span><br><span style="color:#339933;">2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">9.6&nbsp;%</span><br><span style="color:#339933;">1.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">11.5&nbsp;%</span><br><span style="color:#339933;">1.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.9&nbsp;%</span><br><span style="color:#339933;">1.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">52</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">1.3&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Castilla-La Mancha</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">135</span><br><span style="color:#333399;">78.9&nbsp;%</span><br><span style="color:#339933;">4.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">13</span><br><span style="color:#333399;">7.6&nbsp;%</span><br><span style="color:#339933;">3.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">10</span><br><span style="color:#333399;">5.8&nbsp;%</span><br><span style="color:#339933;">2.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">12</span><br><span style="color:#333399;">7&nbsp;%</span><br><span style="color:#339933;">3.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.6&nbsp;%</span><br><span style="color:#339933;">1.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">171</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Castilla y León</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">148</span><br><span style="color:#333399;">68.8&nbsp;%</span><br><span style="color:#339933;">5.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">21</span><br><span style="color:#333399;">9.8&nbsp;%</span><br><span style="color:#339933;">5.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">28</span><br><span style="color:#333399;">13&nbsp;%</span><br><span style="color:#339933;">8.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">16</span><br><span style="color:#333399;">7.4&nbsp;%</span><br><span style="color:#339933;">4.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">3.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">215</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">5.6&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Cataluña</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">434</span><br><span style="color:#333399;">72.8&nbsp;%</span><br><span style="color:#339933;">15.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">45</span><br><span style="color:#333399;">7.6&nbsp;%</span><br><span style="color:#339933;">11.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">60</span><br><span style="color:#333399;">10.1&nbsp;%</span><br><span style="color:#339933;">17.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">51</span><br><span style="color:#333399;">8.6&nbsp;%</span><br><span style="color:#339933;">15.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">1&nbsp;%</span><br><span style="color:#339933;">11.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">596</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">15.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Comunitat Valenciana</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">281</span><br><span style="color:#333399;">71.3&nbsp;%</span><br><span style="color:#339933;">10.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">37</span><br><span style="color:#333399;">9.4&nbsp;%</span><br><span style="color:#339933;">9.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">34</span><br><span style="color:#333399;">8.6&nbsp;%</span><br><span style="color:#339933;">10&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">32</span><br><span style="color:#333399;">8.1&nbsp;%</span><br><span style="color:#339933;">9.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">10</span><br><span style="color:#333399;">2.5&nbsp;%</span><br><span style="color:#339933;">18.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">394</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">10.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Extremadura</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">67</span><br><span style="color:#333399;">70.5&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">12</span><br><span style="color:#333399;">12.6&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">8</span><br><span style="color:#333399;">8.4&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">5.3&nbsp;%</span><br><span style="color:#339933;">1.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">3.2&nbsp;%</span><br><span style="color:#339933;">5.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">95</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.5&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Galicia</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">180</span><br><span style="color:#333399;">72.9&nbsp;%</span><br><span style="color:#339933;">6.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">22</span><br><span style="color:#333399;">8.9&nbsp;%</span><br><span style="color:#339933;">5.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">18</span><br><span style="color:#333399;">7.3&nbsp;%</span><br><span style="color:#339933;">5.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">24</span><br><span style="color:#333399;">9.7&nbsp;%</span><br><span style="color:#339933;">7.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.2&nbsp;%</span><br><span style="color:#339933;">5.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">247</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">6.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Madrid (Comunidad<br>de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">399</span><br><span style="color:#333399;">74.7&nbsp;%</span><br><span style="color:#339933;">14.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">55</span><br><span style="color:#333399;">10.3&nbsp;%</span><br><span style="color:#339933;">13.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">40</span><br><span style="color:#333399;">7.5&nbsp;%</span><br><span style="color:#339933;">11.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">33</span><br><span style="color:#333399;">6.2&nbsp;%</span><br><span style="color:#339933;">10.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span><br><span style="color:#333399;">1.3&nbsp;%</span><br><span style="color:#339933;">13&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">534</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">13.8&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Murcia (Región de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">78</span><br><span style="color:#333399;">67.2&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">17</span><br><span style="color:#333399;">14.7&nbsp;%</span><br><span style="color:#339933;">4.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">10</span><br><span style="color:#333399;">8.6&nbsp;%</span><br><span style="color:#339933;">2.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">9</span><br><span style="color:#333399;">7.8&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">1.7&nbsp;%</span><br><span style="color:#339933;">3.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">116</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Navarra (Comunidad<br>Foral de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">36</span><br><span style="color:#333399;">66.7&nbsp;%</span><br><span style="color:#339933;">1.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">8</span><br><span style="color:#333399;">14.8&nbsp;%</span><br><span style="color:#339933;">2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">5.6&nbsp;%</span><br><span style="color:#339933;">0.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">11.1&nbsp;%</span><br><span style="color:#339933;">1.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.9&nbsp;%</span><br><span style="color:#339933;">1.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">54</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">País Vasco</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">141</span><br><span style="color:#333399;">74.6&nbsp;%</span><br><span style="color:#339933;">5.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">16</span><br><span style="color:#333399;">8.5&nbsp;%</span><br><span style="color:#339933;">4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">16</span><br><span style="color:#333399;">8.5&nbsp;%</span><br><span style="color:#339933;">4.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">15</span><br><span style="color:#333399;">7.9&nbsp;%</span><br><span style="color:#339933;">4.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.5&nbsp;%</span><br><span style="color:#339933;">1.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">189</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.9&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Rioja (La)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">19</span><br><span style="color:#333399;">73.1&nbsp;%</span><br><span style="color:#339933;">0.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">3.8&nbsp;%</span><br><span style="color:#339933;">0.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">11.5&nbsp;%</span><br><span style="color:#339933;">0.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">11.5&nbsp;%</span><br><span style="color:#339933;">0.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">26</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.7&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Ceuta (Ciudad<br>Autónoma de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">57.1&nbsp;%</span><br><span style="color:#339933;">0.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">14.3&nbsp;%</span><br><span style="color:#339933;">0.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">14.3&nbsp;%</span><br><span style="color:#339933;">0.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">14.3&nbsp;%</span><br><span style="color:#339933;">1.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">7</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Melilla (Ciudad<br>Autónoma de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">57.1&nbsp;%</span><br><span style="color:#339933;">0.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">14.3&nbsp;%</span><br><span style="color:#339933;">0.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">14.3&nbsp;%</span><br><span style="color:#339933;">0.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">14.3&nbsp;%</span><br><span style="color:#339933;">0.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">7</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  border-bottom:double; background-color:#f8f8f8; font-weight:bolder; font-style:italic; text-align:left; vertical-align:middle;">Total</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">2752</span><br><span style="color:#333399;">71.2&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">397</span><br><span style="color:#333399;">10.3&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">339</span><br><span style="color:#333399;">8.8&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">325</span><br><span style="color:#333399;">8.4&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">54</span><br><span style="color:#333399;">1.4&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">3867</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td> 
</tr>
<tr><td style="text-align:right; font-size:0.9em; font-style:italic; padding:0.2cm;" colspan="7">χ<sup>2</sup>=82.878 · df=72 · Cramer's V=0.073 · Fisher's p=0.152</td> 
</tr>
 
</tbody></table>
<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Pregunta: P4   Por CCAA</caption>
 <tbody><tr>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; border-bottom:1px solid;" rowspan="2">Comunidad autónoma</th>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal;" colspan="7">Grado de<br>conocimiento por la<br>invasión de Rusia a<br>Ucrania</th>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; font-weight:bolder; font-style:italic; border-bottom:1px solid;  background-color:#f8f8f8;" rowspan="2">Total</th>
 </tr>
 
<tr>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Mucho</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Bastante</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Algo</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Poco</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Nada</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">N.S.</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">N.C.</td>
 </tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Andalucía</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">136</span><br><span style="color:#333399;">19.4&nbsp;%</span><br><span style="color:#339933;">20.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">243</span><br><span style="color:#333399;">34.7&nbsp;%</span><br><span style="color:#339933;">18.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">194</span><br><span style="color:#333399;">27.7&nbsp;%</span><br><span style="color:#339933;">16.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">92</span><br><span style="color:#333399;">13.1&nbsp;%</span><br><span style="color:#339933;">16.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">22</span><br><span style="color:#333399;">3.1&nbsp;%</span><br><span style="color:#339933;">22&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">20.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span><br><span style="color:#333399;">1&nbsp;%</span><br><span style="color:#339933;">14.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">700</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">18.1&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Aragón</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">21</span><br><span style="color:#333399;">19.1&nbsp;%</span><br><span style="color:#339933;">3.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">43</span><br><span style="color:#333399;">39.1&nbsp;%</span><br><span style="color:#339933;">3.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">31</span><br><span style="color:#333399;">28.2&nbsp;%</span><br><span style="color:#339933;">2.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">13</span><br><span style="color:#333399;">11.8&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">3.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">110</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Asturias (Principado<br>de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">10</span><br><span style="color:#333399;">10.6&nbsp;%</span><br><span style="color:#339933;">1.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">37</span><br><span style="color:#333399;">39.4&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">26</span><br><span style="color:#333399;">27.7&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">15</span><br><span style="color:#333399;">16&nbsp;%</span><br><span style="color:#339933;">2.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">3.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">4.3&nbsp;%</span><br><span style="color:#339933;">8.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">94</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Balears (Illes)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span><br><span style="color:#333399;">8&nbsp;%</span><br><span style="color:#339933;">1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">28</span><br><span style="color:#333399;">32.2&nbsp;%</span><br><span style="color:#339933;">2.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">32</span><br><span style="color:#333399;">36.8&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">16</span><br><span style="color:#333399;">18.4&nbsp;%</span><br><span style="color:#339933;">2.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">2.3&nbsp;%</span><br><span style="color:#339933;">2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">2.3&nbsp;%</span><br><span style="color:#339933;">6.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">87</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Canarias</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">22</span><br><span style="color:#333399;">12.7&nbsp;%</span><br><span style="color:#339933;">3.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">43</span><br><span style="color:#333399;">24.9&nbsp;%</span><br><span style="color:#339933;">3.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">64</span><br><span style="color:#333399;">37&nbsp;%</span><br><span style="color:#339933;">5.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">33</span><br><span style="color:#333399;">19.1&nbsp;%</span><br><span style="color:#339933;">6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">2.9&nbsp;%</span><br><span style="color:#339933;">5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">3.5&nbsp;%</span><br><span style="color:#339933;">12.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">173</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.5&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Cantabria</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">11.5&nbsp;%</span><br><span style="color:#339933;">0.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">21</span><br><span style="color:#333399;">40.4&nbsp;%</span><br><span style="color:#339933;">1.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">15</span><br><span style="color:#333399;">28.8&nbsp;%</span><br><span style="color:#339933;">1.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">9</span><br><span style="color:#333399;">17.3&nbsp;%</span><br><span style="color:#339933;">1.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.9&nbsp;%</span><br><span style="color:#339933;">1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">52</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">1.3&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Castilla-La Mancha</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">26</span><br><span style="color:#333399;">15.2&nbsp;%</span><br><span style="color:#339933;">3.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">49</span><br><span style="color:#333399;">28.7&nbsp;%</span><br><span style="color:#339933;">3.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">66</span><br><span style="color:#333399;">38.6&nbsp;%</span><br><span style="color:#339933;">5.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">25</span><br><span style="color:#333399;">14.6&nbsp;%</span><br><span style="color:#339933;">4.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">2.9&nbsp;%</span><br><span style="color:#339933;">5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">171</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Castilla y León</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">43</span><br><span style="color:#333399;">19.9&nbsp;%</span><br><span style="color:#339933;">6.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">63</span><br><span style="color:#333399;">29.2&nbsp;%</span><br><span style="color:#339933;">4.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">74</span><br><span style="color:#333399;">34.3&nbsp;%</span><br><span style="color:#339933;">6.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">26</span><br><span style="color:#333399;">12&nbsp;%</span><br><span style="color:#339933;">4.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.4&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.5&nbsp;%</span><br><span style="color:#339933;">3.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">2.8&nbsp;%</span><br><span style="color:#339933;">12.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">216</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">5.6&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Cataluña</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">117</span><br><span style="color:#333399;">19.6&nbsp;%</span><br><span style="color:#339933;">17.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">216</span><br><span style="color:#333399;">36.2&nbsp;%</span><br><span style="color:#339933;">16.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">165</span><br><span style="color:#333399;">27.7&nbsp;%</span><br><span style="color:#339933;">14.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">75</span><br><span style="color:#333399;">12.6&nbsp;%</span><br><span style="color:#339933;">13.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">14</span><br><span style="color:#333399;">2.3&nbsp;%</span><br><span style="color:#339933;">14&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">0.8&nbsp;%</span><br><span style="color:#339933;">17.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">0.7&nbsp;%</span><br><span style="color:#339933;">8.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">596</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">15.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Comunitat Valenciana</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">71</span><br><span style="color:#333399;">18&nbsp;%</span><br><span style="color:#339933;">10.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">120</span><br><span style="color:#333399;">30.5&nbsp;%</span><br><span style="color:#339933;">9.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">120</span><br><span style="color:#333399;">30.5&nbsp;%</span><br><span style="color:#339933;">10.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">62</span><br><span style="color:#333399;">15.7&nbsp;%</span><br><span style="color:#339933;">11.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">11</span><br><span style="color:#333399;">2.8&nbsp;%</span><br><span style="color:#339933;">11&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">1.3&nbsp;%</span><br><span style="color:#339933;">17.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">1.3&nbsp;%</span><br><span style="color:#339933;">10.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">394</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">10.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Extremadura</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">12</span><br><span style="color:#333399;">12.6&nbsp;%</span><br><span style="color:#339933;">1.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">30</span><br><span style="color:#333399;">31.6&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">28</span><br><span style="color:#333399;">29.5&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">21</span><br><span style="color:#333399;">22.1&nbsp;%</span><br><span style="color:#339933;">3.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">3.2&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">2.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">95</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.5&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Galicia</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">39</span><br><span style="color:#333399;">15.9&nbsp;%</span><br><span style="color:#339933;">5.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">77</span><br><span style="color:#333399;">31.3&nbsp;%</span><br><span style="color:#339933;">5.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">77</span><br><span style="color:#333399;">31.3&nbsp;%</span><br><span style="color:#339933;">6.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">39</span><br><span style="color:#333399;">15.9&nbsp;%</span><br><span style="color:#339933;">7.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">8</span><br><span style="color:#333399;">3.3&nbsp;%</span><br><span style="color:#339933;">8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">0.8&nbsp;%</span><br><span style="color:#339933;">6.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">1.6&nbsp;%</span><br><span style="color:#339933;">8.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">246</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">6.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Madrid (Comunidad<br>de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">98</span><br><span style="color:#333399;">18.4&nbsp;%</span><br><span style="color:#339933;">14.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">191</span><br><span style="color:#333399;">35.8&nbsp;%</span><br><span style="color:#339933;">14.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">163</span><br><span style="color:#333399;">30.5&nbsp;%</span><br><span style="color:#339933;">14.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">67</span><br><span style="color:#333399;">12.5&nbsp;%</span><br><span style="color:#339933;">12.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">10</span><br><span style="color:#333399;">1.9&nbsp;%</span><br><span style="color:#339933;">10&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">0.4&nbsp;%</span><br><span style="color:#339933;">6.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">0.6&nbsp;%</span><br><span style="color:#339933;">6.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">534</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">13.8&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Murcia (Región de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">25</span><br><span style="color:#333399;">21.4&nbsp;%</span><br><span style="color:#339933;">3.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">42</span><br><span style="color:#333399;">35.9&nbsp;%</span><br><span style="color:#339933;">3.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">32</span><br><span style="color:#333399;">27.4&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">14</span><br><span style="color:#333399;">12&nbsp;%</span><br><span style="color:#339933;">2.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">2.6&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">2.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">117</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Navarra (Comunidad<br>Foral de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">11</span><br><span style="color:#333399;">20.4&nbsp;%</span><br><span style="color:#339933;">1.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">21</span><br><span style="color:#333399;">38.9&nbsp;%</span><br><span style="color:#339933;">1.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">14</span><br><span style="color:#333399;">25.9&nbsp;%</span><br><span style="color:#339933;">1.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">11.1&nbsp;%</span><br><span style="color:#339933;">1.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.9&nbsp;%</span><br><span style="color:#339933;">1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.9&nbsp;%</span><br><span style="color:#339933;">2.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">54</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">País Vasco</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">23</span><br><span style="color:#333399;">12.1&nbsp;%</span><br><span style="color:#339933;">3.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">70</span><br><span style="color:#333399;">36.8&nbsp;%</span><br><span style="color:#339933;">5.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">45</span><br><span style="color:#333399;">23.7&nbsp;%</span><br><span style="color:#339933;">3.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">33</span><br><span style="color:#333399;">17.4&nbsp;%</span><br><span style="color:#339933;">6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">10</span><br><span style="color:#333399;">5.3&nbsp;%</span><br><span style="color:#339933;">10&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.6&nbsp;%</span><br><span style="color:#339933;">10.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">3.2&nbsp;%</span><br><span style="color:#339933;">12.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">190</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.9&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Rioja (La)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">15.4&nbsp;%</span><br><span style="color:#339933;">0.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">11</span><br><span style="color:#333399;">42.3&nbsp;%</span><br><span style="color:#339933;">0.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">23.1&nbsp;%</span><br><span style="color:#339933;">0.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">15.4&nbsp;%</span><br><span style="color:#339933;">0.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">3.8&nbsp;%</span><br><span style="color:#339933;">3.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">26</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.7&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Ceuta (Ciudad<br>Autónoma de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">16.7&nbsp;%</span><br><span style="color:#339933;">0.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">33.3&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">16.7&nbsp;%</span><br><span style="color:#339933;">0.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">33.3&nbsp;%</span><br><span style="color:#339933;">0.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">6</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Melilla (Ciudad<br>Autónoma de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">16.7&nbsp;%</span><br><span style="color:#339933;">0.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">50&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">16.7&nbsp;%</span><br><span style="color:#339933;">0.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">16.7&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">6</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  border-bottom:double; background-color:#f8f8f8; font-weight:bolder; font-style:italic; text-align:left; vertical-align:middle;">Total</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">673</span><br><span style="color:#333399;">17.4&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">1310</span><br><span style="color:#333399;">33.9&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">1154</span><br><span style="color:#333399;">29.8&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">553</span><br><span style="color:#333399;">14.3&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">100</span><br><span style="color:#333399;">2.6&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">29</span><br><span style="color:#333399;">0.7&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">48</span><br><span style="color:#333399;">1.2&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">3867</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td> 
</tr>
<tr><td style="text-align:right; font-size:0.9em; font-style:italic; padding:0.2cm;" colspan="9">χ<sup>2</sup>=132.477 · df=108 · Cramer's V=0.076 · Fisher's p=0.041</td> 
</tr>
 
</tbody></table>
<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Pregunta: P5   Por CCAA</caption>
 <tbody><tr>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; border-bottom:1px solid;" rowspan="2">Comunidad autónoma</th>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal;" colspan="9">Grado de<br>preocupación por la<br>invasión de Rusia a<br>Ucrania</th>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; font-weight:bolder; font-style:italic; border-bottom:1px solid;  background-color:#f8f8f8;" rowspan="2">Total</th>
 </tr>
 
<tr>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Muy preocupado/a</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Bastante<br>preocupado/a</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Algo preocupado/a</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Poco preocupado/a</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Nada preocupado/a</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">(NO LEER) No tiene<br>criterio</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">(NO LEER) Le es<br>indiferente</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">N.S.</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">N.C.</td>
 </tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Andalucía</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">213</span><br><span style="color:#333399;">30.4&nbsp;%</span><br><span style="color:#339933;">21&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">329</span><br><span style="color:#333399;">46.9&nbsp;%</span><br><span style="color:#339933;">17.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">102</span><br><span style="color:#333399;">14.6&nbsp;%</span><br><span style="color:#339933;">17.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">37</span><br><span style="color:#333399;">5.3&nbsp;%</span><br><span style="color:#339933;">17.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">11</span><br><span style="color:#333399;">1.6&nbsp;%</span><br><span style="color:#339933;">12.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.1&nbsp;%</span><br><span style="color:#339933;">50&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.1&nbsp;%</span><br><span style="color:#339933;">20&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span><br><span style="color:#333399;">1&nbsp;%</span><br><span style="color:#339933;">15.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">701</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">18.1&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Aragón</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">23</span><br><span style="color:#333399;">21.1&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">57</span><br><span style="color:#333399;">52.3&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">17</span><br><span style="color:#333399;">15.6&nbsp;%</span><br><span style="color:#339933;">2.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">8</span><br><span style="color:#333399;">7.3&nbsp;%</span><br><span style="color:#339933;">3.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">1.8&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">50&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">109</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Asturias (Principado<br>de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">24</span><br><span style="color:#333399;">25.5&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">42</span><br><span style="color:#333399;">44.7&nbsp;%</span><br><span style="color:#339933;">2.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">17</span><br><span style="color:#333399;">18.1&nbsp;%</span><br><span style="color:#339933;">2.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">5.3&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">4.3&nbsp;%</span><br><span style="color:#339933;">4.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">2.1&nbsp;%</span><br><span style="color:#339933;">4.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">94</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Balears (Illes)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">18</span><br><span style="color:#333399;">20.7&nbsp;%</span><br><span style="color:#339933;">1.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">39</span><br><span style="color:#333399;">44.8&nbsp;%</span><br><span style="color:#339933;">2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">19</span><br><span style="color:#333399;">21.8&nbsp;%</span><br><span style="color:#339933;">3.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">6.9&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">4.6&nbsp;%</span><br><span style="color:#339933;">4.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">87</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Canarias</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">55</span><br><span style="color:#333399;">31.6&nbsp;%</span><br><span style="color:#339933;">5.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">76</span><br><span style="color:#333399;">43.7&nbsp;%</span><br><span style="color:#339933;">4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">29</span><br><span style="color:#333399;">16.7&nbsp;%</span><br><span style="color:#339933;">4.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">2.9&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">3.4&nbsp;%</span><br><span style="color:#339933;">6.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.7&nbsp;%</span><br><span style="color:#339933;">6.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">174</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.5&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Cantabria</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">12</span><br><span style="color:#333399;">23.5&nbsp;%</span><br><span style="color:#339933;">1.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">26</span><br><span style="color:#333399;">51&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">8</span><br><span style="color:#333399;">15.7&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">3.9&nbsp;%</span><br><span style="color:#339933;">0.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">3.9&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">2&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">51</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">1.3&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Castilla-La Mancha</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">40</span><br><span style="color:#333399;">23.5&nbsp;%</span><br><span style="color:#339933;">4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">100</span><br><span style="color:#333399;">58.8&nbsp;%</span><br><span style="color:#339933;">5.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">21</span><br><span style="color:#333399;">12.4&nbsp;%</span><br><span style="color:#339933;">3.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">2.4&nbsp;%</span><br><span style="color:#339933;">1.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">2.4&nbsp;%</span><br><span style="color:#339933;">4.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.6&nbsp;%</span><br><span style="color:#339933;">20&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">170</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Castilla y León</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">63</span><br><span style="color:#333399;">29.2&nbsp;%</span><br><span style="color:#339933;">6.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">106</span><br><span style="color:#333399;">49.1&nbsp;%</span><br><span style="color:#339933;">5.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">29</span><br><span style="color:#333399;">13.4&nbsp;%</span><br><span style="color:#339933;">4.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">10</span><br><span style="color:#333399;">4.6&nbsp;%</span><br><span style="color:#339933;">4.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">2.8&nbsp;%</span><br><span style="color:#339933;">6.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.5&nbsp;%</span><br><span style="color:#339933;">20&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.5&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">216</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">5.6&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Cataluña</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">139</span><br><span style="color:#333399;">23.3&nbsp;%</span><br><span style="color:#339933;">13.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">289</span><br><span style="color:#333399;">48.5&nbsp;%</span><br><span style="color:#339933;">15.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">100</span><br><span style="color:#333399;">16.8&nbsp;%</span><br><span style="color:#339933;">17&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">45</span><br><span style="color:#333399;">7.6&nbsp;%</span><br><span style="color:#339933;">20.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">12</span><br><span style="color:#333399;">2&nbsp;%</span><br><span style="color:#339933;">13.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.2&nbsp;%</span><br><span style="color:#339933;">20&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">10</span><br><span style="color:#333399;">1.7&nbsp;%</span><br><span style="color:#339933;">22.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">596</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">15.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Comunitat Valenciana</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">95</span><br><span style="color:#333399;">24.2&nbsp;%</span><br><span style="color:#339933;">9.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">190</span><br><span style="color:#333399;">48.3&nbsp;%</span><br><span style="color:#339933;">9.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">70</span><br><span style="color:#333399;">17.8&nbsp;%</span><br><span style="color:#339933;">11.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">23</span><br><span style="color:#333399;">5.9&nbsp;%</span><br><span style="color:#339933;">10.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">9</span><br><span style="color:#333399;">2.3&nbsp;%</span><br><span style="color:#339933;">10.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">1.5&nbsp;%</span><br><span style="color:#339933;">13.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">393</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">10.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Extremadura</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">25</span><br><span style="color:#333399;">26.3&nbsp;%</span><br><span style="color:#339933;">2.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">50</span><br><span style="color:#333399;">52.6&nbsp;%</span><br><span style="color:#339933;">2.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">14</span><br><span style="color:#333399;">14.7&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">4.2&nbsp;%</span><br><span style="color:#339933;">1.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">1.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">95</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.5&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Galicia</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">61</span><br><span style="color:#333399;">24.8&nbsp;%</span><br><span style="color:#339933;">6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">127</span><br><span style="color:#333399;">51.6&nbsp;%</span><br><span style="color:#339933;">6.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">29</span><br><span style="color:#333399;">11.8&nbsp;%</span><br><span style="color:#339933;">4.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">17</span><br><span style="color:#333399;">6.9&nbsp;%</span><br><span style="color:#339933;">7.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">2.4&nbsp;%</span><br><span style="color:#339933;">6.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">2.4&nbsp;%</span><br><span style="color:#339933;">13.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">246</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">6.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Madrid (Comunidad<br>de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">145</span><br><span style="color:#333399;">27.1&nbsp;%</span><br><span style="color:#339933;">14.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">271</span><br><span style="color:#333399;">50.7&nbsp;%</span><br><span style="color:#339933;">14.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">77</span><br><span style="color:#333399;">14.4&nbsp;%</span><br><span style="color:#339933;">13.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">32</span><br><span style="color:#333399;">6&nbsp;%</span><br><span style="color:#339933;">14.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">9</span><br><span style="color:#333399;">1.7&nbsp;%</span><br><span style="color:#339933;">10.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.2&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">535</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">13.8&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Murcia (Región de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">30</span><br><span style="color:#333399;">25.9&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">65</span><br><span style="color:#333399;">56&nbsp;%</span><br><span style="color:#339933;">3.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">15</span><br><span style="color:#333399;">12.9&nbsp;%</span><br><span style="color:#339933;">2.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">0.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">1.7&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">2.6&nbsp;%</span><br><span style="color:#339933;">6.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">116</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Navarra (Comunidad<br>Foral de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">12</span><br><span style="color:#333399;">21.8&nbsp;%</span><br><span style="color:#339933;">1.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">31</span><br><span style="color:#333399;">56.4&nbsp;%</span><br><span style="color:#339933;">1.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">7.3&nbsp;%</span><br><span style="color:#339933;">0.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">3.6&nbsp;%</span><br><span style="color:#339933;">0.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">5.5&nbsp;%</span><br><span style="color:#339933;">3.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.8&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.8&nbsp;%</span><br><span style="color:#339933;">20&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.8&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">55</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">País Vasco</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">44</span><br><span style="color:#333399;">23.2&nbsp;%</span><br><span style="color:#339933;">4.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">97</span><br><span style="color:#333399;">51.1&nbsp;%</span><br><span style="color:#339933;">5.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">31</span><br><span style="color:#333399;">16.3&nbsp;%</span><br><span style="color:#339933;">5.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">12</span><br><span style="color:#333399;">6.3&nbsp;%</span><br><span style="color:#339933;">5.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">3.2&nbsp;%</span><br><span style="color:#339933;">6.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">190</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.9&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Rioja (La)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span><br><span style="color:#333399;">26.9&nbsp;%</span><br><span style="color:#339933;">0.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">13</span><br><span style="color:#333399;">50&nbsp;%</span><br><span style="color:#339933;">0.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">11.5&nbsp;%</span><br><span style="color:#339933;">0.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">11.5&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">26</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.7&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Ceuta (Ciudad<br>Autónoma de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">42.9&nbsp;%</span><br><span style="color:#339933;">0.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">14.3&nbsp;%</span><br><span style="color:#339933;">0.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">28.6&nbsp;%</span><br><span style="color:#339933;">0.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">14.3&nbsp;%</span><br><span style="color:#339933;">0.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">7</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Melilla (Ciudad<br>Autónoma de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">50&nbsp;%</span><br><span style="color:#339933;">0.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">50&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">6</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  border-bottom:double; background-color:#f8f8f8; font-weight:bolder; font-style:italic; text-align:left; vertical-align:middle;">Total</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">1012</span><br><span style="color:#333399;">26.2&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">1912</span><br><span style="color:#333399;">49.4&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">587</span><br><span style="color:#333399;">15.2&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">217</span><br><span style="color:#333399;">5.6&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">87</span><br><span style="color:#333399;">2.2&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">2</span><br><span style="color:#333399;">0.1&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">1</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">5</span><br><span style="color:#333399;">0.1&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">44</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">3867</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td> 
</tr>
<tr><td style="text-align:right; font-size:0.9em; font-style:italic; padding:0.2cm;" colspan="11">χ<sup>2</sup>=201.480 · df=144 · Cramer's V=0.081 · Fisher's p=0.086</td> 
</tr>
 
</tbody></table>
<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Pregunta: P6   Por CCAA</caption>
 <tbody><tr>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; border-bottom:1px solid;" rowspan="2">Comunidad autónoma</th>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal;" colspan="6">Posibilidad de una<br>invasión de Rusia a<br>países del Este de<br>Europa (su antigua<br>área de influencia)</th>
 <th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; font-weight:bolder; font-style:italic; border-bottom:1px solid;  background-color:#f8f8f8;" rowspan="2">Total</th>
 </tr>
 
<tr>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">Sí cree que es<br>posible</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">No cree que sea<br>posible</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">(NO LEER) No tiene<br>suficiente criterio<br>o información</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">(NO LEER) Le es<br>indiferente, no le<br>importa</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">N.S., duda</td>
 <td style="border-bottom:1px solid; text-align:center; padding:0.2cm;">N.C.</td>
 </tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Andalucía</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">536</span><br><span style="color:#333399;">76.6&nbsp;%</span><br><span style="color:#339933;">18.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">115</span><br><span style="color:#333399;">16.4&nbsp;%</span><br><span style="color:#339933;">17.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span><br><span style="color:#333399;">1&nbsp;%</span><br><span style="color:#339933;">20&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.1&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">38</span><br><span style="color:#333399;">5.4&nbsp;%</span><br><span style="color:#339933;">17.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">0.4&nbsp;%</span><br><span style="color:#339933;">12.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">700</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">18.1&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Aragón</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">73</span><br><span style="color:#333399;">67&nbsp;%</span><br><span style="color:#339933;">2.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">27</span><br><span style="color:#333399;">24.8&nbsp;%</span><br><span style="color:#339933;">4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">1.8&nbsp;%</span><br><span style="color:#339933;">5.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span><br><span style="color:#333399;">6.4&nbsp;%</span><br><span style="color:#339933;">3.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">109</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Asturias (Principado<br>de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">69</span><br><span style="color:#333399;">74.2&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">16</span><br><span style="color:#333399;">17.2&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span><br><span style="color:#333399;">7.5&nbsp;%</span><br><span style="color:#339933;">3.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">4.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">93</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Balears (Illes)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">64</span><br><span style="color:#333399;">73.6&nbsp;%</span><br><span style="color:#339933;">2.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">13</span><br><span style="color:#333399;">14.9&nbsp;%</span><br><span style="color:#339933;">1.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">2.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">9</span><br><span style="color:#333399;">10.3&nbsp;%</span><br><span style="color:#339933;">4.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">87</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.3&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Canarias</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">136</span><br><span style="color:#333399;">78.2&nbsp;%</span><br><span style="color:#339933;">4.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">28</span><br><span style="color:#333399;">16.1&nbsp;%</span><br><span style="color:#339933;">4.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span><br><span style="color:#333399;">4&nbsp;%</span><br><span style="color:#339933;">3.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.7&nbsp;%</span><br><span style="color:#339933;">12.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">174</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.5&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Cantabria</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">42</span><br><span style="color:#333399;">79.2&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">8</span><br><span style="color:#333399;">15.1&nbsp;%</span><br><span style="color:#339933;">1.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.9&nbsp;%</span><br><span style="color:#339933;">2.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">3.8&nbsp;%</span><br><span style="color:#339933;">0.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">53</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Castilla-La Mancha</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">132</span><br><span style="color:#333399;">77.6&nbsp;%</span><br><span style="color:#339933;">4.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">30</span><br><span style="color:#333399;">17.6&nbsp;%</span><br><span style="color:#339933;">4.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.8&nbsp;%</span><br><span style="color:#339933;">8.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">2.4&nbsp;%</span><br><span style="color:#339933;">1.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.6&nbsp;%</span><br><span style="color:#339933;">4.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">170</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Castilla y León</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">170</span><br><span style="color:#333399;">78.7&nbsp;%</span><br><span style="color:#339933;">5.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">30</span><br><span style="color:#333399;">13.9&nbsp;%</span><br><span style="color:#339933;">4.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.4&nbsp;%</span><br><span style="color:#339933;">8.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">13</span><br><span style="color:#333399;">6&nbsp;%</span><br><span style="color:#339933;">6.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">216</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">5.6&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Cataluña</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">425</span><br><span style="color:#333399;">71.4&nbsp;%</span><br><span style="color:#339933;">14.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">120</span><br><span style="color:#333399;">20.2&nbsp;%</span><br><span style="color:#339933;">18&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">4</span><br><span style="color:#333399;">0.7&nbsp;%</span><br><span style="color:#339933;">11.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">40</span><br><span style="color:#333399;">6.7&nbsp;%</span><br><span style="color:#339933;">18.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">1&nbsp;%</span><br><span style="color:#339933;">25&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">595</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">15.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Comunitat Valenciana</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">290</span><br><span style="color:#333399;">73.6&nbsp;%</span><br><span style="color:#339933;">9.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">82</span><br><span style="color:#333399;">20.8&nbsp;%</span><br><span style="color:#339933;">12.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">0.8&nbsp;%</span><br><span style="color:#339933;">8.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">14</span><br><span style="color:#333399;">3.6&nbsp;%</span><br><span style="color:#339933;">6.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">1.3&nbsp;%</span><br><span style="color:#339933;">20.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">394</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">10.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Extremadura</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">78</span><br><span style="color:#333399;">82.1&nbsp;%</span><br><span style="color:#339933;">2.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">14</span><br><span style="color:#333399;">14.7&nbsp;%</span><br><span style="color:#339933;">2.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">2.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">2.1&nbsp;%</span><br><span style="color:#339933;">0.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">95</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">2.5&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Galicia</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">193</span><br><span style="color:#333399;">78.1&nbsp;%</span><br><span style="color:#339933;">6.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">34</span><br><span style="color:#333399;">13.8&nbsp;%</span><br><span style="color:#339933;">5.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">1.2&nbsp;%</span><br><span style="color:#339933;">8.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">16</span><br><span style="color:#333399;">6.5&nbsp;%</span><br><span style="color:#339933;">7.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.4&nbsp;%</span><br><span style="color:#339933;">4.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">247</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">6.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Madrid (Comunidad<br>de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">411</span><br><span style="color:#333399;">77&nbsp;%</span><br><span style="color:#339933;">14.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">97</span><br><span style="color:#333399;">18.2&nbsp;%</span><br><span style="color:#339933;">14.5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">3</span><br><span style="color:#333399;">0.6&nbsp;%</span><br><span style="color:#339933;">8.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">22</span><br><span style="color:#333399;">4.1&nbsp;%</span><br><span style="color:#339933;">10.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.2&nbsp;%</span><br><span style="color:#339933;">4.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">534</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">13.8&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Murcia (Región de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">88</span><br><span style="color:#333399;">75.9&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">14</span><br><span style="color:#333399;">12.1&nbsp;%</span><br><span style="color:#339933;">2.1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">2.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">11</span><br><span style="color:#333399;">9.5&nbsp;%</span><br><span style="color:#339933;">5.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">1.7&nbsp;%</span><br><span style="color:#339933;">8.3&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">116</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">3&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Navarra (Comunidad<br>Foral de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">40</span><br><span style="color:#333399;">74.1&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span><br><span style="color:#333399;">13&nbsp;%</span><br><span style="color:#339933;">1&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">1.9&nbsp;%</span><br><span style="color:#339933;">2.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">11.1&nbsp;%</span><br><span style="color:#339933;">2.8&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">54</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">1.4&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">País Vasco</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">147</span><br><span style="color:#333399;">77.4&nbsp;%</span><br><span style="color:#339933;">5&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">28</span><br><span style="color:#333399;">14.7&nbsp;%</span><br><span style="color:#339933;">4.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">1.1&nbsp;%</span><br><span style="color:#339933;">5.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">12</span><br><span style="color:#333399;">6.3&nbsp;%</span><br><span style="color:#339933;">5.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">1</span><br><span style="color:#333399;">0.5&nbsp;%</span><br><span style="color:#339933;">4.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">190</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">4.9&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Rioja (La)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">18</span><br><span style="color:#333399;">72&nbsp;%</span><br><span style="color:#339933;">0.6&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">5</span><br><span style="color:#333399;">20&nbsp;%</span><br><span style="color:#339933;">0.7&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">2</span><br><span style="color:#333399;">8&nbsp;%</span><br><span style="color:#339933;">0.9&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">25</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.6&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Ceuta (Ciudad<br>Autónoma de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">7</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">7</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  text-align:left; vertical-align:middle;">Melilla (Ciudad<br>Autónoma de)</td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">6</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center; "><span style="color:black;">0</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">0&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   background-color:#f8f8f8;"><span style="color:black;">6</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">0.2&nbsp;%</span></td> 
</tr>
 
<tr> 
<td style="padding:0.2cm;  border-bottom:double; background-color:#f8f8f8; font-weight:bolder; font-style:italic; text-align:left; vertical-align:middle;">Total</td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">2925</span><br><span style="color:#333399;">75.7&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">668</span><br><span style="color:#333399;">17.3&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">35</span><br><span style="color:#333399;">0.9&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">1</span><br><span style="color:#333399;">0&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">212</span><br><span style="color:#333399;">5.5&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">24</span><br><span style="color:#333399;">0.6&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td>
<td style="padding:0.2cm; text-align:center;   border-bottom:double; background-color:#f8f8f8;"><span style="color:black;">3865</span><br><span style="color:#333399;">100&nbsp;%</span><br><span style="color:#339933;">100&nbsp;%</span></td> 
</tr>
<tr><td style="text-align:right; font-size:0.9em; font-style:italic; padding:0.2cm;" colspan="8">χ<sup>2</sup>=79.266 · df=90 · Cramer's V=0.064 · Fisher's p=0.257</td> 
</tr>
 
</tbody></table>
</div>
<p>Y bueno, esto era para mostrar que R además de ser un excelente sustituto de todo lo que se puede hacer con spss a nivel analítico (de hecho tiene muchas más cosas) también nos puede servir para sacar tabulaciones de estudios que vengan en formato de spss.</p>
<p>Os recomiendo encarecidamente que echéis un vistazo a las librerías <code>sjPlot</code> <code>sjmisc</code> de Daniel.</p>
<p>Hasta más ver.</p>


</section>
</section>

 ]]></description>
  <category>estadística</category>
  <category>sociología</category>
  <category>2022</category>
  <category>spss</category>
  <category>R</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2022/12/04/cosas-para-dejar-spss/index.html</guid>
  <pubDate>Sat, 03 Dec 2022 23:00:00 GMT</pubDate>
</item>
<item>
  <title>Api y docker con R. parte 2</title>
  <dc:creator>jlcr </dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2022/10/30/api-y-docker-con-r-parte-2.html</link>
  <description><![CDATA[ 



<p>En la entrada de <a href="https://muestrear-no-es-pecado.netlify.app/2022/10/12/api-y-docker-con-r-parte-1/">api y docker con R parte I</a> veíamos que es muy fácil construir una api y dockerizarla para tener un modelo bayesiano en producción. Pero hay un pequeño incoveniente, el docker que hemos creado se base en <a href="https://rocker-project.org/images/">rocker/verse</a> que se basan en ubuntu. Y ubuntu ocupa mucho. Pero gracias a gente como Gabor Csardi (autor entre otras librerías de <code>igraph</code>), tenemos <a href="https://github.com/r-hub/r-minimal">r-hub/minimal</a>, que permiten tener una imagen de docker con R basadas en alpine, de hecho una imagen de docker con R y dplyr son unos 50 mb.</p>
<p>Lo primero de todo es ver cuánto ocupa el docker creado en el primer post.</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">╰─</span> $ ▶ docker image ls mi_modelo_brms</span>
<span id="cb1-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">REPOSITORY</span>       TAG       IMAGE ID       CREATED       SIZE</span>
<span id="cb1-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mi_modelo_brms</span>   latest    9e641ec2c150   3 weeks ago   3.42GB</span></code></pre></div>
<p>Pues son unos cuántos gigas, mayoritariamente al estar basado en ubuntu y al que los docker de rocker/verse instalan todo el software de R recomendado, los ficheros de ayuda, las capacidades gráficas, etc..</p>
<p>Pero con r-hub/minimal podemos dejar bastante limpio el tema. Leyendo el Readme del repo vemos que han configurado una utilidad a la que llaman <code>installr</code> que permite instalar librerías del sistema o de R, instalando los compiladores de C, fortran etc que haga falta y eliminarlos una vez están compiladas la librerías.</p>
<p>Sin más, cambiamos el Dockerfile del otro día por este otro .</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"></span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Docker file para modelo brms</span></span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">FROM</span> rhub/r-minimal:4.2.1</span>
<span id="cb2-5"></span>
<span id="cb2-6"></span>
<span id="cb2-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">RUN</span> installr <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-d</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-a</span> linux-headers ps</span>
<span id="cb2-8"></span>
<span id="cb2-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">RUN</span> installr <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-d</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-a</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"curl-dev linux-headers gfortran libcurl libxml2 libsodium-dev libsodium automake autoconf"</span></span>
<span id="cb2-10"></span>
<span id="cb2-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">RUN</span> installr <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-d</span> Matrix MASS mgcv future codetools brms plumber tidybayes</span>
<span id="cb2-12"></span>
<span id="cb2-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## Copio el modelo y el fichero de la api</span></span>
<span id="cb2-14"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">COPY</span> brms_model.rds /opt/ml/brms_model.rds</span>
<span id="cb2-15"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">COPY</span> plumber.R /opt/ml/plumber.R</span>
<span id="cb2-16"></span>
<span id="cb2-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># exponemos el puerto</span></span>
<span id="cb2-18"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">EXPOSE</span> 8081</span>
<span id="cb2-19"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ENTRYPOINT</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-e"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pr &lt;- plumber::plumb('/opt/ml/plumber.R'); pr</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$run</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">(host = '0.0.0.0', port = 8081)"</span>]</span></code></pre></div>
<p>Y haciendo <code>docker build -t mi_modelo_brms_rminimal .</code> pasado un rato puesto que ha de compilar las librerías tenemos nuestra api dockerizada con la misma funcionalidad que el otro día.</p>
<p>Y con un tamaño mucho más contenido</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">╰─</span> $ ▶ docker image ls</span>
<span id="cb3-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">REPOSITORY</span>                    TAG                    IMAGE ID       CREATED         SIZE</span>
<span id="cb3-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mi_modelo_brms_rminimal</span>       latest                 8d791d2ebc74   2 hours ago     665MB</span></code></pre></div>
<p>que se va a unos 655 mb, de los cuales unos 300 MB se deben a <code>stan</code> y <code>rstan</code>. Pero vamos, no está mal, pasar de 3.4 Gb a 665MB.</p>
<section id="actualización-usando-renv" class="level2">
<h2 class="anchored" data-anchor-id="actualización-usando-renv">Actualización, usando renv</h2>
<p>Por temas de buenas prácticas es recomendable usar <code>renv</code> para crear el archivo <code>renv.lock</code> dónde se guarda qué versión de las librerías estamos usando, y además porque usa por defecto un repo con las librerías compiladas.</p>
<p>Lo primero que hago es crearme un nuevo proyecto dónde pongo el modelo entrenado que queremos usar <code>brms_model.rds</code> que entrené en el primer post y el fichero <code>plumber.R</code> y ningún fichero más.</p>
<p>Fichero <strong>plumber.R</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"></span>
<span id="cb4-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span></span>
<span id="cb4-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># This is a Plumber API. In RStudio 1.2 or newer you can run the API by</span></span>
<span id="cb4-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># clicking the 'Run API' button above.</span></span>
<span id="cb4-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span></span>
<span id="cb4-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># In RStudio 1.1 or older, see the Plumber documentation for details</span></span>
<span id="cb4-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># on running the API.</span></span>
<span id="cb4-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span></span>
<span id="cb4-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Find out more about building APIs with Plumber here:</span></span>
<span id="cb4-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span></span>
<span id="cb4-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#    https://www.rplumber.io/</span></span>
<span id="cb4-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span></span>
<span id="cb4-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># save as bos_rf_score.R</span></span>
<span id="cb4-14"></span>
<span id="cb4-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(brms)</span>
<span id="cb4-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(plumber)</span>
<span id="cb4-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidybayes)</span>
<span id="cb4-18"></span>
<span id="cb4-19">brms_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">readRDS</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"brms_model.rds"</span>)</span>
<span id="cb4-20"></span>
<span id="cb4-21"></span>
<span id="cb4-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#* @apiTitle brms predict Api</span></span>
<span id="cb4-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#* @apiDescription Endpoints for working with brms model</span></span>
<span id="cb4-24"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## ---- filter-logger</span></span>
<span id="cb4-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#* Log some information about the incoming request</span></span>
<span id="cb4-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#* @filter logger</span></span>
<span id="cb4-27"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(req){</span>
<span id="cb4-28">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.time</span>()), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>,</span>
<span id="cb4-29">        req<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>REQUEST_METHOD, req<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>PATH_INFO, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>,</span>
<span id="cb4-30">        req<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>HTTP_USER_AGENT, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"@"</span>, req<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>REMOTE_ADDR, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb4-31">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forward</span>()</span>
<span id="cb4-32">}</span>
<span id="cb4-33"></span>
<span id="cb4-34"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## ---- post-data</span></span>
<span id="cb4-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#* Submit data and get a prediction in return</span></span>
<span id="cb4-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#* @post /predict</span></span>
<span id="cb4-37"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(req, res) {</span>
<span id="cb4-38">    data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tryCatch</span>(jsonlite<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">parse_json</span>(req<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>postBody, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">simplifyVector =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>),</span>
<span id="cb4-39">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(e) <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>)</span>
<span id="cb4-40">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.null</span>(data)) {</span>
<span id="cb4-41">        res<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>status <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span></span>
<span id="cb4-42">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No data submitted"</span>))</span>
<span id="cb4-43">    }</span>
<span id="cb4-44">    </span>
<span id="cb4-45">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(brms_model, data) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-46">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>()</span>
<span id="cb4-47">}</span>
<span id="cb4-48"></span>
<span id="cb4-49"></span>
<span id="cb4-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#* @post /full_posterior</span></span>
<span id="cb4-51"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(req, res) {</span>
<span id="cb4-52">    data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tryCatch</span>(jsonlite<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">parse_json</span>(req<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>postBody, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">simplifyVector =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>),</span>
<span id="cb4-53">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(e) <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>)</span>
<span id="cb4-54">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.null</span>(data)) {</span>
<span id="cb4-55">        res<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>status <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span></span>
<span id="cb4-56">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No data submitted"</span>))</span>
<span id="cb4-57">    }</span>
<span id="cb4-58">    </span>
<span id="cb4-59">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_epred_draws</span>(data, brms_model) </span>
<span id="cb4-60">    </span>
<span id="cb4-61">}</span></code></pre></div>
</div>
<p>A continuación activo <code>renv</code> en el proyecto</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"> renv<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">activate</span>()</span>
<span id="cb5-2"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> Project <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'~/Rstudio_projects/r-api-minimal'</span> loaded. [renv <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">16.0</span>]</span></code></pre></div>
</div>
<p>Una vez que está activado y el fichero plumber.R está creado en el directorio uso <code>hydrate</code> para que encuentre qué librerías se usan en el proyecto</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"></span>
<span id="cb6-2"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> renv<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hydrate</span>()</span>
<span id="cb6-3"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> Discovering package dependencies ... Done<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span></span>
<span id="cb6-4"><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span> Copying packages into the cache ... Done<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span></span></code></pre></div>
</div>
<p>y ya podemos crear el fichero <code>renv::snapshot()</code>, donde pone todas las librerías que se van a instalar y si vienen de CRAN , de GitHub o de RSPM(rstudio package manager)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">renv<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">snapshot</span>()</span>
<span id="cb7-2">The following <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">package</span>(s) will be updated <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> the lockfile<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span></span>
<span id="cb7-3"></span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># CRAN ===============================</span></span>
<span id="cb7-5"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> Matrix           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>]</span>
<span id="cb7-6"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> R6               [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.1</span>]</span>
<span id="cb7-7"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> RColorBrewer     [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-3</span>]</span>
<span id="cb7-8"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> Rcpp             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>]</span>
<span id="cb7-9"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> base64enc        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-3</span>]</span>
<span id="cb7-10"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> bslib            [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.0</span>]</span>
<span id="cb7-11"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> cachem           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>]</span>
<span id="cb7-12"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> codetools        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-18</span>]</span>
<span id="cb7-13"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> colorspace       [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.0</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-3</span>]</span>
<span id="cb7-14"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> ellipsis         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.2</span>]</span>
<span id="cb7-15"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> fansi            [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>]</span>
<span id="cb7-16"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> farver           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>]</span>
<span id="cb7-17"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> fastmap          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.0</span>]</span>
<span id="cb7-18"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> generics         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.3</span>]</span>
<span id="cb7-19"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> ggplot2          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.6</span>]</span>
<span id="cb7-20"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> htmltools        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.3</span>]</span>
<span id="cb7-21"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> jquerylib        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.4</span>]</span>
<span id="cb7-22"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> labeling         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.2</span>]</span>
<span id="cb7-23"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> lattice          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.20</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-45</span>]</span>
<span id="cb7-24"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> lifecycle        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>]</span>
<span id="cb7-25"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> magrittr         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>]</span>
<span id="cb7-26"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> memoise          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>]</span>
<span id="cb7-27"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> mgcv             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.8</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-40</span>]</span>
<span id="cb7-28"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> mime             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.12</span>]</span>
<span id="cb7-29"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> munsell          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.0</span>]</span>
<span id="cb7-30"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> pkgconfig        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>]</span>
<span id="cb7-31"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> prettyunits      [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>]</span>
<span id="cb7-32"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> processx         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">7.0</span>]</span>
<span id="cb7-33"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> ps               [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">7.1</span>]</span>
<span id="cb7-34"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> rappdirs         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.3</span>]</span>
<span id="cb7-35"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> rprojroot        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>]</span>
<span id="cb7-36"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> sass             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.2</span>]</span>
<span id="cb7-37"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> stringi          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">7.8</span>]</span>
<span id="cb7-38"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> tibble           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.8</span>]</span>
<span id="cb7-39"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> utf8             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.2</span>]</span>
<span id="cb7-40"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> withr            [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.0</span>]</span>
<span id="cb7-41"></span>
<span id="cb7-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># GitHub =============================</span></span>
<span id="cb7-43"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> glue             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> jimhester<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>fstrings<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">@</span>HEAD]</span>
<span id="cb7-44"></span>
<span id="cb7-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># RSPM ===============================</span></span>
<span id="cb7-46"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> BH               [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">78.0</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-0</span>]</span>
<span id="cb7-47"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> Brobdingnag      [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-9</span>]</span>
<span id="cb7-48"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> DT               [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.26</span>]</span>
<span id="cb7-49"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> HDInterval       [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.2</span>]</span>
<span id="cb7-50"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> MASS             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">7.3-58.1</span>]</span>
<span id="cb7-51"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> RcppEigen        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">9.2</span>]</span>
<span id="cb7-52"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> RcppParallel     [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>]</span>
<span id="cb7-53"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> StanHeaders      [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">21.0</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-7</span>]</span>
<span id="cb7-54"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> abind            [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.4</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-5</span>]</span>
<span id="cb7-55"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> arrayhelpers     [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-0</span>]</span>
<span id="cb7-56"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> backports        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.1</span>]</span>
<span id="cb7-57"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> bayesplot        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">9.0</span>]</span>
<span id="cb7-58"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> bridgesampling   [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-2</span>]</span>
<span id="cb7-59"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> brms             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">18.0</span>]</span>
<span id="cb7-60"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> callr            [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">7.2</span>]</span>
<span id="cb7-61"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> checkmate        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.0</span>]</span>
<span id="cb7-62"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> cli              [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.1</span>]</span>
<span id="cb7-63"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> coda             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.19</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-4</span>]</span>
<span id="cb7-64"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> colourpicker     [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>]</span>
<span id="cb7-65"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> commonmark       [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8.1</span>]</span>
<span id="cb7-66"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> cpp11            [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.3</span>]</span>
<span id="cb7-67"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> crayon           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.2</span>]</span>
<span id="cb7-68"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> crosstalk        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.0</span>]</span>
<span id="cb7-69"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> curl             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.3</span>]</span>
<span id="cb7-70"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> desc             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.2</span>]</span>
<span id="cb7-71"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> digest           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6.30</span>]</span>
<span id="cb7-72"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> distributional   [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.1</span>]</span>
<span id="cb7-73"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> dplyr            [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.10</span>]</span>
<span id="cb7-74"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> dygraphs         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.6</span>]</span>
<span id="cb7-75"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> fontawesome      [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.0</span>]</span>
<span id="cb7-76"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> fs               [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.2</span>]</span>
<span id="cb7-77"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> future           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">28.0</span>]</span>
<span id="cb7-78"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> ggdist           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.0</span>]</span>
<span id="cb7-79"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> ggridges         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.4</span>]</span>
<span id="cb7-80"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> globals          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">16.1</span>]</span>
<span id="cb7-81"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> gridExtra        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.3</span>]</span>
<span id="cb7-82"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> gtable           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.1</span>]</span>
<span id="cb7-83"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> gtools           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">9.3</span>]</span>
<span id="cb7-84"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> htmlwidgets      [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.4</span>]</span>
<span id="cb7-85"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> httpuv           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6.6</span>]</span>
<span id="cb7-86"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> igraph           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.5</span>]</span>
<span id="cb7-87"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> inline           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.19</span>]</span>
<span id="cb7-88"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> isoband          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.6</span>]</span>
<span id="cb7-89"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> jsonlite         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8.2</span>]</span>
<span id="cb7-90"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> later            [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.0</span>]</span>
<span id="cb7-91"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> lazyeval         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.2</span>]</span>
<span id="cb7-92"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> listenv          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8.0</span>]</span>
<span id="cb7-93"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> loo              [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.1</span>]</span>
<span id="cb7-94"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> markdown         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span>]</span>
<span id="cb7-95"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> matrixStats      [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">62.0</span>]</span>
<span id="cb7-96"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> miniUI           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>]</span>
<span id="cb7-97"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> mvtnorm          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-3</span>]</span>
<span id="cb7-98"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> nleqslv          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.3</span>]</span>
<span id="cb7-99"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> nlme             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.1</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-160</span>]</span>
<span id="cb7-100"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> numDeriv         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2016.8-1.1</span>]</span>
<span id="cb7-101"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> parallelly       [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">32.1</span>]</span>
<span id="cb7-102"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> pillar           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8.1</span>]</span>
<span id="cb7-103"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> pkgbuild         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.1</span>]</span>
<span id="cb7-104"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> plumber          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.1</span>]</span>
<span id="cb7-105"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> plyr             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8.7</span>]</span>
<span id="cb7-106"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> posterior        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.1</span>]</span>
<span id="cb7-107"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> promises         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>]</span>
<span id="cb7-108"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> purrr            [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.5</span>]</span>
<span id="cb7-109"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> renv             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">16.0</span>]</span>
<span id="cb7-110"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> reshape2         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.4</span>]</span>
<span id="cb7-111"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> rlang            [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>]</span>
<span id="cb7-112"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> rstan            [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">21.7</span>]</span>
<span id="cb7-113"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> rstantools       [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.0</span>]</span>
<span id="cb7-114"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> scales           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.1</span>]</span>
<span id="cb7-115"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> shiny            [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">7.2</span>]</span>
<span id="cb7-116"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> shinyjs          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.0</span>]</span>
<span id="cb7-117"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> shinystan        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6.0</span>]</span>
<span id="cb7-118"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> shinythemes      [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.0</span>]</span>
<span id="cb7-119"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> sodium           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.1</span>]</span>
<span id="cb7-120"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> sourcetools      [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.7</span>]</span>
<span id="cb7-121"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> stringr          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.1</span>]</span>
<span id="cb7-122"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> svUnit           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>]</span>
<span id="cb7-123"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> swagger          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">33.1</span>]</span>
<span id="cb7-124"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> tensorA          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">36.2</span>]</span>
<span id="cb7-125"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> threejs          [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.3</span>]</span>
<span id="cb7-126"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> tidybayes        [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>]</span>
<span id="cb7-127"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> tidyr            [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.1</span>]</span>
<span id="cb7-128"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> tidyselect       [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.0</span>]</span>
<span id="cb7-129"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> vctrs            [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.2</span>]</span>
<span id="cb7-130"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> viridisLite      [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.1</span>]</span>
<span id="cb7-131"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> webutils         [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>]</span>
<span id="cb7-132"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> xfun             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.34</span>]</span>
<span id="cb7-133"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> xtable           [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.8</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-4</span>]</span>
<span id="cb7-134"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> xts              [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12.2</span>]</span>
<span id="cb7-135"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> yaml             [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.6</span>]</span>
<span id="cb7-136"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> zoo              [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.8</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-11</span>]</span>
<span id="cb7-137"></span>
<span id="cb7-138">The version of R recorded <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> the lockfile will be updated<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span></span>
<span id="cb7-139"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> R                [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>.<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.1</span>]</span>
<span id="cb7-140"></span>
<span id="cb7-141">Do you want to proceed? [y<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>N]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> y</span>
<span id="cb7-142"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> Lockfile written to <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'~/Rstudio_projects/r-api-minimal/renv.lock'</span>.</span></code></pre></div>
</div>
<p>Y ya sólo queda crear el Dockerfile usando como base r-hub/minimal</p>
<p><strong>Dockerfile</strong></p>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Docker file para modelo brms</span></span>
<span id="cb8-2"></span>
<span id="cb8-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">FROM</span> rhub/r-minimal:4.2.1</span>
<span id="cb8-4"></span>
<span id="cb8-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># copio fichero de las librerías</span></span>
<span id="cb8-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">COPY</span> renv.lock renv.lock</span>
<span id="cb8-7"></span>
<span id="cb8-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># uso -c para que se queden instaladas los compiladores de c y fortran</span></span>
<span id="cb8-9"></span>
<span id="cb8-10"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">RUN</span> installr <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-a</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"curl-dev linux-headers gfortran libcurl libxml2 libsodium-dev libsodium automake autoconf"</span></span>
<span id="cb8-11"></span>
<span id="cb8-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#instalo renv</span></span>
<span id="cb8-13"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">RUN</span> installr <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> renv</span>
<span id="cb8-14"></span>
<span id="cb8-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># uso renv para instlar la versión de las librerías que hay en renv.lock</span></span>
<span id="cb8-16"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">RUN</span> Rscript <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"renv::restore()"</span></span>
<span id="cb8-17"></span>
<span id="cb8-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## Copio el modelo y el fichero de la api</span></span>
<span id="cb8-19"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">COPY</span> brms_model.rds /opt/ml/brms_model.rds</span>
<span id="cb8-20"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">COPY</span> plumber.R /opt/ml/plumber.R</span>
<span id="cb8-21"></span>
<span id="cb8-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># exponemos el puerto</span></span>
<span id="cb8-23"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">EXPOSE</span> 8081</span>
<span id="cb8-24"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ENTRYPOINT</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-e"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pr &lt;- plumber::plumb('/opt/ml/plumber.R'); pr</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$run</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">(host = '0.0.0.0', port = 8081)"</span>]</span></code></pre></div>
<p>y como antes construimos el docker image</p>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> build <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-t</span> mi_modelo_brms_rminimal_renv .</span></code></pre></div>
<p>El docker usando renv es sustancialmente más pesado, ocupa 1.29 Gb</p>
<p>Seguramente se puede optimizar más si no usara <code>brms</code>, puesto que importa shinystan, bayesplot y otras librerías que no son estrictamente necesarias para nuestro propósito. Habrá que esperar a que <a href="https://twitter.com/precariobecario">Virgilio</a> haga la función predict de INLA para darle una vuelta a esto</p>


</section>

 ]]></description>
  <category>api</category>
  <category>docker</category>
  <category>R</category>
  <category>2022</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2022/10/30/api-y-docker-con-r-parte-2.html</guid>
  <pubDate>Sat, 29 Oct 2022 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Leaflet example</title>
  <dc:creator>José Luis Cañadas Reche</dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/posts/leaflet_ejemplo/index.html</link>
  <description><![CDATA[ 



<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(leaflet)</span>
<span id="cb1-2"></span>
<span id="cb1-3">m <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">leaflet</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addTiles</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add default OpenStreetMap map tiles</span></span>
<span id="cb1-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addMarkers</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lng=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">174.768</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lat=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">36.852</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">popup=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"The birthplace of R"</span>)</span>
<span id="cb1-6">m  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Print the map</span></span></code></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-fa2db32acb8c0b5b229d" style="width:100%;height:464px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-fa2db32acb8c0b5b229d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[-36.852,174.768,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"The birthplace of R",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-36.852,-36.852],"lng":[174.768,174.768]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>



 ]]></description>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/posts/leaflet_ejemplo/index.html</guid>
  <pubDate>Fri, 28 Oct 2022 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Aquí estoy de nuevo</title>
  <dc:creator>José Luis Cañadas Reche</dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/posts/welcome/index.html</link>
  <description><![CDATA[ 



<p>Estoy cambiando el blog de blogdown a quarto Welcome!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="thumbnail.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/posts/welcome/thumbnail.jpg" class="img-fluid figure-img"></a></p>
</figure>
</div>



 ]]></description>
  <category>news</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/posts/welcome/index.html</guid>
  <pubDate>Wed, 26 Oct 2022 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Sigo trasteando con julia</title>
  <dc:creator>jlcr </dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2022/10/26/sigo-trasteando-con-julia/index.html</link>
  <description><![CDATA[ 



<p>Siguiendo con lo que contaba <a href="https://muestrear-no-es-pecado.netlify.app/2021/08/16/palabras-para-julia-parte-2-n/">aquí</a> me he construido un binario para predecir usando un modelo de xgboost con Julia. La ventaja es que tengo un tar.gz que puedo descomprimir en cualquier linux (por ejemplo un entorno de producción sin acceso a internet y que no tenga ni vaya a tener julia instalado, ni docker ni nada de nada), descomprimir y poder hacer un <code>miapp_para_predecir mi_modelo_entrenado.jls csv_to_predict.csv resultado.csv</code> y que funcione y vaya como un tiro.</p>
<p>Pongo aquí los ficheros relevantes.</p>
<p>Por ejemplo mi fichero para entrenar un modelo y salvarlo .</p>
<p>Fichero <code>train_ boston.jl</code></p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Training model julia</span></span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span>  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">CSV</span>,<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">CategoricalArrays</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">DataFrames</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">MLJ</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">MLJXGBoostInterface</span></span>
<span id="cb1-3"></span>
<span id="cb1-4"></span>
<span id="cb1-5">df1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> CSV.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/boston.csv"</span>, DataFrame)</span>
<span id="cb1-6"></span>
<span id="cb1-7">df1[<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>target] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>.(df1[!, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>medv_20]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"NG20"</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb1-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">const</span> target <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">CategoricalArray</span>(df1[<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>target])</span>
<span id="cb1-9"></span>
<span id="cb1-10"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">const</span> X <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Not</span>([<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>medv_20, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>target])]</span>
<span id="cb1-11"></span>
<span id="cb1-12">Tree <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">@load</span> XGBoostClassifier pkg<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>XGBoost</span>
<span id="cb1-13">tree_model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Tree</span>(objective<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"binary:logistic"</span>, max_depth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, num_round <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">800</span>)</span>
<span id="cb1-14">mach <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">machine</span>(tree_model, X, target)</span>
<span id="cb1-15"></span>
<span id="cb1-16"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Threads</span>.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nthreads</span>()</span>
<span id="cb1-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">evaluate</span>(tree_model, X, target, resampling<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">CV</span>(shuffle<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">true</span>),measure<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>log_loss, verbosity<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb1-18"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">evaluate</span>(tree_model, X, target,</span>
<span id="cb1-19">                resampling<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">CV</span>(shuffle<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">true</span>), measure<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>bac, operation<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>predict_mode, verbosity<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb1-20"></span>
<span id="cb1-21"></span>
<span id="cb1-22"></span>
<span id="cb1-23">train, test <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">partition</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">eachindex</span>(target), <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, shuffle<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">true</span>)</span>
<span id="cb1-24"></span>
<span id="cb1-25"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fit!</span>(mach, rows<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>train)</span>
<span id="cb1-26"></span>
<span id="cb1-27">yhat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(mach, X[test,<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>])</span>
<span id="cb1-28"></span>
<span id="cb1-29"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">evaluate</span>(tree_model, X[test,<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>], target[test], measure<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>auc, operation<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>predict_mode, verbosity<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb1-30"></span>
<span id="cb1-31">niveles <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">levels</span>.(yhat)[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb1-32">niveles[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb1-33"></span>
<span id="cb1-34"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log_loss</span>(yhat, target[test]) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> mean</span>
<span id="cb1-35"></span>
<span id="cb1-36">res <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pdf</span>(yhat, niveles)</span>
<span id="cb1-37">res_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">DataFrame</span>(res,<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>auto)</span>
<span id="cb1-38"></span>
<span id="cb1-39">MLJ.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">save</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"models/boston_xg.jls"</span>, mach)</span></code></pre></div>
<p>Y luego los ficheros que uso para construirme la app binaria .. Recordemos del <a href="https://muestrear-no-es-pecado.netlify.app/2021/08/16/palabras-para-julia-parte-2-n/">post que mencionaba</a> que lo que necesito es el código del programa principal (el main) y un fichero de precompilación que sirve para que al crear la app se compilen las funciones que voy a usar.</p>
<p>fichero <code>precomp.jl</code>,</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">CSV</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">DataFrames</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">MLJ</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">MLJBase</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">MLJXGBoostInterface</span></span>
<span id="cb2-2"></span>
<span id="cb2-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># uso rutas absolutas</span></span>
<span id="cb2-4">df1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> CSV.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/iris.csv"</span>, DataFrame)</span>
<span id="cb2-5">X <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Not</span>(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>Species)]</span>
<span id="cb2-6"></span>
<span id="cb2-7">predict_only_mach <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">machine</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"models/mimodelo_xg_binario.jls"</span>)</span>
<span id="cb2-8"></span>
<span id="cb2-9">ŷ <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(predict_only_mach, X) </span>
<span id="cb2-10"></span>
<span id="cb2-11"></span>
<span id="cb2-12"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict_mode</span>(predict_only_mach, X)</span>
<span id="cb2-13"></span>
<span id="cb2-14">niveles <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">levels</span>.(ŷ)[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb2-15"></span>
<span id="cb2-16">res <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pdf</span>(ŷ, niveles) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># con pdf nos da la probabilidad de cada nivel</span></span>
<span id="cb2-17">res_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">DataFrame</span>(res,<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>auto)</span>
<span id="cb2-18"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename!</span>(res_df, [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"target_0"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"target_1"</span>])</span>
<span id="cb2-19"></span>
<span id="cb2-20">CSV.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">write</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/predicciones.csv"</span>, res_df)</span></code></pre></div>
<p>fichero <code>xgboost_predict_binomial.jl</code> , aquí es dónde está el main</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">module</span> xgboost_predict_binomial</span>
<span id="cb3-2"></span>
<span id="cb3-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">CSV</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">DataFrames</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">MLJ</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">MLJBase</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">MLJXGBoostInterface</span></span>
<span id="cb3-4"></span>
<span id="cb3-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">julia_main</span>()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Cint</span></span>
<span id="cb3-6">    try</span>
<span id="cb3-7">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">real_main</span>()</span>
<span id="cb3-8">    catch</span>
<span id="cb3-9">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Base</span>.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">invokelatest</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Base</span>.display_error, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Base</span>.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">catch_stack</span>())</span>
<span id="cb3-10">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb3-11">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb3-12">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb3-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb3-14"></span>
<span id="cb3-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ARGS son los argumentos pasados por consola </span></span>
<span id="cb3-16"></span>
<span id="cb3-17"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">real_main</span>()</span>
<span id="cb3-18">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">ARGS</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb3-19">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">error</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pass arguments"</span>)</span>
<span id="cb3-20">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb3-21"></span>
<span id="cb3-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Read model</span></span>
<span id="cb3-23">    modelo <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">machine</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">ARGS</span>[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb3-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># read data. El fichero qeu pasemos tiene que tener solo las X.(con su nombre)</span></span>
<span id="cb3-25">    X <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> CSV.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">ARGS</span>[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>], DataFrame, ntasks<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Sys</span>.<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">CPU_THREADS</span>)</span>
<span id="cb3-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Predict    </span></span>
<span id="cb3-27">    ŷ <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(modelo, X)            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># predict</span></span>
<span id="cb3-28">    niveles <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">levels</span>.(ŷ)[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]           <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># get levels of target</span></span>
<span id="cb3-29">    res <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pdf</span>(ŷ, niveles)             <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># predict probabilities for each level</span></span>
<span id="cb3-30">    </span>
<span id="cb3-31">    res_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">DataFrame</span>(res,<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>auto)     <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># convert to DataFrame</span></span>
<span id="cb3-32">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename!</span>(res_df, [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"target_0"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"target_1"</span>])          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Column rename</span></span>
<span id="cb3-33">    CSV.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">write</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">ARGS</span>[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>], res_df)        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Write in csv</span></span>
<span id="cb3-34"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb3-35"></span>
<span id="cb3-36"></span>
<span id="cb3-37"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># module</span></span></code></pre></div>
<p>y si todo está correcto y siguiendo las instrucciones del post anterior, se compilaría haciendo por ejemplo esto</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">PackageCompiler</span></span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create_app</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"../xgboost_predict_binomial"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"../xg_binomial_inference"</span>,</span>
<span id="cb4-3"> precompile_execution_file<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"../xgboost_predict_binomial/src/precomp_file.jl"</span>, force<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">true</span>, filter_stdlibs <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">true</span>, cpu_target <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x86_64"</span>)</span></code></pre></div>
<p>Y esto me crea una estructura de directorios dónde está mi app y todo lo necesario para ejecutar julia en cualqueir linux.</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"></span>
<span id="cb5-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">╰─</span> $ ▶ tree <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-L</span> 2 xg_binomial_inference</span>
<span id="cb5-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">xg_binomial_inference</span></span>
<span id="cb5-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> bin</span>
<span id="cb5-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│&nbsp;&nbsp;</span> ├── julia</span>
<span id="cb5-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│&nbsp;&nbsp;</span> └── xgboost_predict_binomial</span>
<span id="cb5-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> lib</span>
<span id="cb5-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│&nbsp;&nbsp;</span> ├── julia</span>
<span id="cb5-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│&nbsp;&nbsp;</span> ├── libjulia.so <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> libjulia.so.1.8</span>
<span id="cb5-10"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│&nbsp;&nbsp;</span> ├── libjulia.so.1 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> libjulia.so.1.8</span>
<span id="cb5-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│&nbsp;&nbsp;</span> └── libjulia.so.1.8</span>
<span id="cb5-12"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">└──</span> share</span>
<span id="cb5-13">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">└──</span> julia</span></code></pre></div>
<p>y poner por ejemplo en el <code>.bashrc</code> el siguiente alias.</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">alias</span> motor_xgboost=/home/jose/Julia_projects/xgboost_model/xg_binomial_inference/bin/xgboost_predict_binomial</span></code></pre></div>
<p>y ya está listo.</p>
<p>Ahora tengo un dataset a predecir de 5 millones de filas</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"></span>
<span id="cb7-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">╰─</span> $ ▶ wc <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-l</span> data/test.csv </span>
<span id="cb7-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">5060001</span> data/test.csv</span></code></pre></div>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"></span>
<span id="cb8-2"> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-n4</span> data/test.csv </span>
<span id="cb8-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">crim,zn,indus,chas,nox,rm,age,dis,rad,tax,ptratio,lstat</span></span>
<span id="cb8-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">0.00632,18,2.31,0,0.538,6.575,65.2,4.09,1,296,15.3,4.98</span></span>
<span id="cb8-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">0.02731,0,7.07,0,0.469,6.421,78.9,4.9671,2,242,17.8,9.14</span></span>
<span id="cb8-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">0.02729,0,7.07,0,0.469,7.185,61.1,4.9671,2,242,17.8,4.03</span></span></code></pre></div>
<p>y bueno, tardo unos 11 segundos en obtener las predicciones y escribir el resultado</p>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">╰─</span> $ ▶ time motor_xgboost models/boston_xg.jls data/test.csv pred.csv</span>
<span id="cb9-2"></span>
<span id="cb9-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">real</span>    0m11,091s</span>
<span id="cb9-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">user</span>    0m53,293s</span>
<span id="cb9-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">sys</span> 0m2,321s</span>
<span id="cb9-6"></span></code></pre></div>
<p>y comprobamos que lo ha hecho bien</p>
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"></span>
<span id="cb10-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">╰─</span> $ ▶ wc <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-l</span>  pred.csv </span>
<span id="cb10-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">5060001</span> pred.csv</span>
<span id="cb10-4"></span>
<span id="cb10-5"></span>
<span id="cb10-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">╰─</span> $ ▶ head <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-n</span> 5 pred.csv </span>
<span id="cb10-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">target_0,target_1</span></span>
<span id="cb10-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">0.9999237,7.63197e-5</span></span>
<span id="cb10-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">0.99120975,0.008790266</span></span>
<span id="cb10-10"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">0.99989164,0.00010834133</span></span>
<span id="cb10-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">0.99970543,0.00029458306</span></span></code></pre></div>
<p>Y nada, pues esto puede servir para subir modelos a producción en entornos poco amigables (sin python3, sin R, sin julia, sin spark, sin docker, sin internet). Es un poco <code>old style</code> que me diría mi arquenazi favorito Rubén, pero</p>
<p>Os dejo el tar.gz para que probéis, también os dejo el <code>Project.toml</code>y el <code>Manifest.toml</code> y el fichero con el que he entrenado los datos. para que uséis el mismo entorno de julia que he usado yo.</p>
<p><a href="https://drive.google.com/drive/folders/1jQW-QQNoABlMdUHhlwHvY9MQnZh1x_Yi?usp=sharing">enlace_drive</a></p>



 ]]></description>
  <category>Julia</category>
  <category>produccion</category>
  <category>linux</category>
  <category>2022</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2022/10/26/sigo-trasteando-con-julia/index.html</guid>
  <pubDate>Tue, 25 Oct 2022 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Api y docker con R. parte 1</title>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2022/10/12/api-y-docker-con-r-parte-1/index.html</link>
  <description><![CDATA[ 



<p>Todo el mundo anda haciendo apis para poner modelos en producción, y oye, está bien. Si además lo complementas con dockerizarlo para tener un entorno controlado y que te valga para ponerlo en cualquier sitio dónde esté docker instalado pues mejor.</p>
<p>Aquí voy a contar un ejemplo de como se puede hacer con R usando <code>plumber</code> y docker, en siguentes post contaré como hacerlo con <code>vetiver</code> que es una librería que está para R y Python que tiene algún extra, como versionado de modelos y demás.</p>
<p>Lo primero de todo es trabajar en un proyecto nuevo y usar <a href="https://rstudio.github.io/renv/articles/renv.html"><code>renv</code></a>. renv es para gestionar <em>entornos</em> de R, ojo que también funciona bien si tienes que mezclar R y python. Tiene cosas interesantes como descubrir las librerías que usas en tu proyecto y aún mejor, si estas librerías ya las tienes instaladas pues te crea enlaces simbólicos a dónde están y te permite ahorrar un montón de espacio, que al menos yo, no he conseguido ver cómo hacer eso con <code>conda</code>.</p>
<section id="objetivo" class="level2">
<h2 class="anchored" data-anchor-id="objetivo">Objetivo</h2>
<p>Mi objetivo es ver cómo pondría un modelo bayesiano ajustado con <a href="https://github.com/paul-buerkner/brms"><code>brms</code></a> para que me devuelva predicciones puntuales y las posterioris en un entorno de producción.</p>
</section>
<section id="entrenando-modelo" class="level2">
<h2 class="anchored" data-anchor-id="entrenando-modelo">Entrenando modelo</h2>
<p>Para eso voy a usar datos de un <a href="https://muestrear-no-es-pecado.netlify.app/2021/06/04/big-data-para-pobres-iii-bayesiano/">antiguo post</a>.</p>
<p>Una vez que estemos en ese nuevo proyecto, ajustamos y guardamos un modelo .</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.3.6      ✔ purrr   0.3.5 
## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
## ✔ tidyr   1.2.1      ✔ stringr 1.4.1 
## ✔ readr   2.1.3      ✔ forcats 0.5.2 
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(brms)</span></code></pre></div>
<pre><code>## Loading required package: Rcpp
## Loading 'brms' package (version 2.18.0). Useful instructions
## can be found by typing help('brms'). A more detailed introduction
## to the package is available through vignette('brms_overview').
## 
## Attaching package: 'brms'
## 
## The following object is masked from 'package:stats':
## 
##     ar</code></pre>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(cmdstanr)</span></code></pre></div>
<pre><code>## Warning: package 'cmdstanr' was built under R version 4.3.0</code></pre>
<pre><code>## This is cmdstanr version 0.5.2
## - CmdStanR documentation and vignettes: mc-stan.org/cmdstanr
## - Use set_cmdstan_path() to set the path to CmdStan
## - Use install_cmdstan() to install CmdStan</code></pre>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Using all cores. 12 in my machine, y que haga las cadenas en paralelo</span></span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">options</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mc.cores =</span> parallel<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">detectCores</span>())</span>
<span id="cb8-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set_cmdstan_path</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"~/cmdstan/"</span>)</span></code></pre></div>
<pre><code>## CmdStan path set to: /home/jose/cmdstan</code></pre>
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">train <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/train_local.csv"</span>))</span></code></pre></div>
<pre><code>## Rows: 662 Columns: 5
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr (3): segmento, tipo, edad_cat
## dbl (2): valor_cliente, n
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># guiña a librería antigua</span></span>
<span id="cb12-2">car<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">some</span>(train)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 5
##    segmento tipo  valor_cliente edad_cat     n
##    &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;
##  1 Rec      SM                2 21- 40       4
##  2 Best     SM                1 41-50      475
##  3 Best     C                 4 &gt;60       2807
##  4 No_way   C                 1 41-50      356
##  5 No_way   B                 5 40-60      221
##  6 Rec      SF                2 &gt;60        152
##  7 Rec      B                 4 40-60      194
##  8 Best     C                 5 41-50     4934
##  9 No_way   B                 3 41-50     1064
## 10 No_way   SF                8 41-50       29</code></pre>
<p>Ajustamos un modelo bayesiano con efectos aleatorios y usando la columna <code>n</code> como pesos de las filas. (leer el post dónde usé estos datos para saber más)</p>
<div class="sourceCode" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">train <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> train <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb14-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">target1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_factor</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(segmento <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Best"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Best"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Other"</span>)))</span>
<span id="cb14-3"></span>
<span id="cb14-4"></span>
<span id="cb14-5">formula <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">brmsformula</span>(</span>
<span id="cb14-6">    target1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">resp_weights</span>(n)  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> edad_cat) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> valor_cliente) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> tipo)</span>
<span id="cb14-7">    )</span>
<span id="cb14-8"></span>
<span id="cb14-9">mod <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">brm</span>(</span>
<span id="cb14-10">    formula,</span>
<span id="cb14-11">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bernoulli"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> train, </span>
<span id="cb14-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">iter =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4000</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">warmup =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cores =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chains =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>,</span>
<span id="cb14-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">seed =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>,</span>
<span id="cb14-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">backend =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cmdstanr"</span>, </span>
<span id="cb14-15">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">refresh =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># refresh 0 qu eno quiero que se me llene el post de los output de las cadenas mcm</span></span>
<span id="cb14-16"></span>
<span id="cb14-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">saveRDS</span>(mod, here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"brms_model.rds"</span>))</span></code></pre></div>
</section>
<section id="comprobamos-que-nuestro-modelo-funciona" class="level2">
<h2 class="anchored" data-anchor-id="comprobamos-que-nuestro-modelo-funciona">Comprobamos que nuestro modelo funciona</h2>
<div class="sourceCode" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidybayes)</span></code></pre></div>
<pre><code>## 
## Attaching package: 'tidybayes'</code></pre>
<pre><code>## The following objects are masked from 'package:brms':
## 
##     dstudent_t, pstudent_t, qstudent_t, rstudent_t</code></pre>
<div class="sourceCode" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">mod_reload <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">readRDS</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"brms_model.rds"</span>))</span>
<span id="cb18-2"> </span>
<span id="cb18-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># </span></span>
<span id="cb18-4"></span>
<span id="cb18-5">test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/test_local.csv"</span>))</span></code></pre></div>
<pre><code>## Rows: 656 Columns: 5</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr (3): segmento, tipo, edad_cat
## dbl (2): valor_cliente, n
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># estimacion puntual</span></span>
<span id="cb21-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(mod_reload, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(test))</span></code></pre></div>
<pre><code>##        Estimate Est.Error Q2.5 Q97.5
## [1,] 0.23216667 0.4222324    0     1
## [2,] 0.13233333 0.3388669    0     1
## [3,] 0.16075000 0.3673155    0     1
## [4,] 0.13825000 0.3451766    0     1
## [5,] 0.12716667 0.3331735    0     1
## [6,] 0.07333333 0.2606937    0     1</code></pre>
<div class="sourceCode" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># full posterior</span></span>
<span id="cb23-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># para 6 filas guarda los valores obtenidos en las 3000 iteraciones de cada cadena</span></span>
<span id="cb23-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3000 * 4 * 6 = 72000 valores </span></span>
<span id="cb23-4"></span>
<span id="cb23-5">posterior_pred <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_epred_draws</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(test), mod_reload) </span>
<span id="cb23-6"></span>
<span id="cb23-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(posterior_pred )</span></code></pre></div>
<pre><code>## # A tibble: 6 × 10
## # Groups:   segmento, tipo, valor_cliente, edad_cat, n, .row [1]
##   segmento tipo  valor_cliente edad_cat     n  .row .chain .itera…¹ .draw .epred
##   &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt;  &lt;int&gt;    &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
## 1 Rec      C                 0 21- 40     132     1     NA       NA     1  0.230
## 2 Rec      C                 0 21- 40     132     1     NA       NA     2  0.234
## 3 Rec      C                 0 21- 40     132     1     NA       NA     3  0.233
## 4 Rec      C                 0 21- 40     132     1     NA       NA     4  0.230
## 5 Rec      C                 0 21- 40     132     1     NA       NA     5  0.232
## 6 Rec      C                 0 21- 40     132     1     NA       NA     6  0.226
## # … with abbreviated variable name ¹​.iteration</code></pre>
<div class="sourceCode" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(posterior_pred)</span></code></pre></div>
<pre><code>## [1] 72000    10</code></pre>
<p>Para la primer fila podemos tener la distribución a posteriori</p>
<div class="sourceCode" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1">posterior_pred <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb27-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(.row <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb27-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span>.epred)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb27-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_density</span>() </span></code></pre></div>
<p><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2022/10/12/api-y-docker-con-r-parte-1/unnamed-chunk-4-1.png" width="672"></p>
<p>Pues listo, ya tenemos el modelo entrenado y guardado, ahora sólo queda escribir el código para la api y el Dockerfile..</p>
</section>
<section id="creando-el-plumber.r" class="level2">
<h2 class="anchored" data-anchor-id="creando-el-plumber.r">Creando el plumber.R</h2>
<p>Una cosa importante, si hemos usado <code>renv</code> es escribir el fichero con las dependencias que usamos. Eso se hace con <code>renv::snapshot()</code> y se crea un fichero dónde están descritas las dependencias versionadas de nuestro proyecto.</p>
<p>Pero quizá para el docker no necesitemos todas, en este caso, partiendo del fichero anterior nos creamos otro con sólo las dependencias necesarias. Yo lo he llamado <code>vetiver_renv.lock</code> porque empecé trasteando con vetiver y soy demasiado vago como para cambiar ahora el nombre. El contenido del fichero es</p>
<p><code>vetiver_renv.lock</code></p>
<pre><code>{
  "R": {
    "Version": "4.2.1",
    "Repositories": [
      {
        "Name": "binarios",
        "URL": "https://packagemanager.rstudio.com/all/latest"
      },
      {
        "Name": "ropenspain",
        "URL": "https://ropenspain.r-universe.dev"
      }
    ]
  },
  "Packages": {
    "plumber": {
      "Package": "plumber",
      "Version": "1.2.1",
      "Source": "Repository",
      "Repository": "RSPM",
      "Hash": "8b65a7a00ef8edc5ddc6fabf0aff1194",
      "Requirements": [
        "R6",
        "crayon",
        "ellipsis",
        "httpuv",
        "jsonlite",
        "lifecycle",
        "magrittr",
        "mime",
        "promises",
        "rlang",
        "sodium",
        "stringi",
        "swagger",
        "webutils"
      ]
    },
    "brms": {
      "Package": "brms",
      "Version": "2.18.0",
      "Source": "Repository",
      "Repository": "RSPM",
      "Hash": "afcb0d871e1759b68b29eb6affd37a10",
      "Requirements": [
        "Matrix",
        "Rcpp",
        "abind",
        "backports",
        "bayesplot",
        "bridgesampling",
        "coda",
        "future",
        "ggplot2",
        "glue",
        "loo",
        "matrixStats",
        "mgcv",
        "nleqslv",
        "nlme",
        "posterior",
        "rstan",
        "rstantools",
        "shinystan"
      ]
    },
    "tidybayes": {
      "Package": "tidybayes",
      "Version": "3.0.2",
      "Source": "Repository",
      "Repository": "RSPM",
      "Hash": "d501501261b724f35ec9f2b80f4421b5",
      "Requirements": [
        "arrayhelpers",
        "coda",
        "dplyr",
        "ggdist",
        "ggplot2",
        "magrittr",
        "posterior",
        "rlang",
        "tibble",
        "tidyr",
        "tidyselect",
        "vctrs",
        "withr"
      ]
    }
  }
}
</code></pre>
<p>Cómo veis también he añadido la librería tidybayes, porque me va a resultar útil para sacar la posteriori de las predicciones de los nuevos datos.</p>
<p>Creamos el fichero <code>plumber.R</code> que no es más que decir cómo se va a predecir y crear un par de endpoints que permiten tanto obtener estimaciones puntuales como la full posterior. Con la librería <code>plumber</code> se hace fácil sin más que usar decoradores.</p>
<p>Fichero <code>plumber.R</code></p>
<div class="sourceCode" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(brms)</span>
<span id="cb29-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(plumber)</span>
<span id="cb29-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidybayes)</span>
<span id="cb29-4"></span>
<span id="cb29-5">brms_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">readRDS</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"brms_model.rds"</span>)</span>
<span id="cb29-6"></span>
<span id="cb29-7"></span>
<span id="cb29-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#* @apiTitle brms predict Api</span></span>
<span id="cb29-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#* @apiDescription Endpoints for working with brms model</span></span>
<span id="cb29-10"></span>
<span id="cb29-11"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## ---- filter-logger</span></span>
<span id="cb29-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#* Log some information about the incoming request</span></span>
<span id="cb29-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#* @filter logger</span></span>
<span id="cb29-14"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(req){</span>
<span id="cb29-15">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.time</span>()), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>,</span>
<span id="cb29-16">        req<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>REQUEST_METHOD, req<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>PATH_INFO, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>,</span>
<span id="cb29-17">        req<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>HTTP_USER_AGENT, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"@"</span>, req<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>REMOTE_ADDR, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb29-18">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forward</span>()</span>
<span id="cb29-19">}</span>
<span id="cb29-20"></span>
<span id="cb29-21"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## ---- post-data</span></span>
<span id="cb29-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#* Submit data and get a prediction in return</span></span>
<span id="cb29-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#* @post /predict</span></span>
<span id="cb29-24"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(req, res) {</span>
<span id="cb29-25">    data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tryCatch</span>(jsonlite<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">parse_json</span>(req<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>postBody, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">simplifyVector =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>),</span>
<span id="cb29-26">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(e) <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>)</span>
<span id="cb29-27">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.null</span>(data)) {</span>
<span id="cb29-28">        res<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>status <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span></span>
<span id="cb29-29">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No data submitted"</span>))</span>
<span id="cb29-30">    }</span>
<span id="cb29-31">    </span>
<span id="cb29-32">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(brms_model, data) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb29-33">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>()</span>
<span id="cb29-34">}</span>
<span id="cb29-35"></span>
<span id="cb29-36"></span>
<span id="cb29-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#* @post /full_posterior</span></span>
<span id="cb29-38"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(req, res) {</span>
<span id="cb29-39">    data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tryCatch</span>(jsonlite<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">parse_json</span>(req<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>postBody, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">simplifyVector =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>),</span>
<span id="cb29-40">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(e) <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>)</span>
<span id="cb29-41">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.null</span>(data)) {</span>
<span id="cb29-42">        res<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>status <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span></span>
<span id="cb29-43">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No data submitted"</span>))</span>
<span id="cb29-44">    }</span>
<span id="cb29-45">    </span>
<span id="cb29-46">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_epred_draws</span>(data, brms_model) </span>
<span id="cb29-47">        </span>
<span id="cb29-48">}</span></code></pre></div>
<p>No tiene mucho misterio, los endpoint se crean usando</p>
<pre><code>#* @post  /nombre_endpoing</code></pre>
<p>y creando una función que va a tomar los datos que le pasemos en formato json a la api, los pasa a data.frame y usa el modelo previamente cargado para obtener las estimaciones puntuales en un caso y la full posterior (con <code>add_epred_draws</code>) en el otro.</p>
</section>
<section id="creamos-el-docker" class="level2">
<h2 class="anchored" data-anchor-id="creamos-el-docker">Creamos el docker</h2>
<p>Iba a contar lo que es docker, pero mejor lo miráis en su <a href="https://www.docker.com/">web</a>. Sólo quedarnos con la idea que es como tener una máquina virtual que puedo usar en otro sitio, pero es mucho más ligera y puede usar cosas del sistema anfitrión e interactuar con él.</p>
<p>Para crear nuestra <em>imagen</em> docker tenemos que crear un fichero que se llame <code>Dockerfile</code> dónde vamos a ir diciéndole como cree nuestra máquina virtual.</p>
<p>Es importante que estén los ficheros anteriores, el modelo salvado , el plumber.R y el fichero .lock en las rutas correctas dónde los busca el Dockerfile, en mi caso, lo he puesto todo en el mismo sitio.</p>
<p>Contendido del Dockerfile</p>
<pre><code># Docker file para modelo brms

FROM rocker/r-ver:4.2.1
ENV RENV_CONFIG_REPOS_OVERRIDE https://packagemanager.rstudio.com/cran/latest

RUN apt-get update -qq &amp;&amp; apt-get install -y --no-install-recommends \
  default-jdk \
  libcurl4-openssl-dev \
  libicu-dev \
  libsodium-dev \
  libssl-dev \
  make \
  zlib1g-dev \
  libxml2-dev \
  libglpk-dev \
  &amp;&amp; apt-get clean


COPY vetiver_renv.lock renv.lock
RUN Rscript -e "install.packages('renv')"
RUN Rscript -e "renv::restore()"

## Copio el modelo y el fichero de la api
COPY brms_model.rds /opt/ml/brms_model.rds
COPY plumber.R /opt/ml/plumber.R

EXPOSE 8081
ENTRYPOINT ["R", "-e", "pr &lt;- plumber::plumb('/opt/ml/plumber.R'); pr$run(host = '0.0.0.0', port = 8081)"]

</code></pre>
<p>Importante que el puerto que se exponga con <code>EXPOSE</code> sea el mismo que usa el plumber, en este caso el 8081.</p>
<p>Ahora para construir la imagen docker y ejecutarla</p>
<pre><code>docker build -t mi_modelo_brms .
</code></pre>
<p>Y despues de un rato podemos ejecutarlo mapeando el puerto</p>
<pre><code>nohup docker container run --rm -p 8081:8081 mi_modelo_brms &amp; </code></pre>
</section>
<section id="funciona" class="level2">
<h2 class="anchored" data-anchor-id="funciona">¿Funciona?</h2>
<p>Podemos usar curl, python, php o cualquier otra cosa para mandar peticiones a la api y que nos devuelva predicciones, con R sería algo así.</p>
<div class="sourceCode" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1">test <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb34-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) </span></code></pre></div>
<pre><code>## # A tibble: 2 × 5
##   segmento tipo  valor_cliente edad_cat     n
##   &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;
## 1 Rec      C                 0 21- 40     132
## 2 Best     B                 0 41-50       19</code></pre>
<div class="sourceCode" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1">base_url <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"http://0.0.0.0:8081"</span></span>
<span id="cb36-2"></span>
<span id="cb36-3">api_res <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> httr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">POST</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">url =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(base_url, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/predict"</span>),</span>
<span id="cb36-4">                      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">body =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(test),</span>
<span id="cb36-5">                      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">encode =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"json"</span>)</span>
<span id="cb36-6">predicted_values <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> httr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">content</span>(api_res, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">as =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">encoding =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"UTF-8"</span>)</span>
<span id="cb36-7"></span>
<span id="cb36-8">jsonlite<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fromJSON</span>(predicted_values)</span></code></pre></div>
<pre><code>##   Estimate Est.Error Q2.5 Q97.5
## 1   0.2283    0.4198    0     1
## 2   0.1356    0.3424    0     1
## 3   0.1604    0.3670    0     1
## 4   0.1320    0.3385    0     1
## 5   0.1215    0.3267    0     1
## 6   0.0737    0.2612    0     1</code></pre>
<div class="sourceCode" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1">api_res2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> httr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">POST</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">url =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(base_url, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/full_posterior"</span>),</span>
<span id="cb38-2">                      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">body =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(test,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb38-3">                      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">encode =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"json"</span>)</span>
<span id="cb38-4">posterior_values <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> httr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">content</span>(api_res2, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">as =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">encoding =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"UTF-8"</span>)</span>
<span id="cb38-5"></span>
<span id="cb38-6"></span>
<span id="cb38-7">jsonlite<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fromJSON</span>(posterior_values)  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb38-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)</span></code></pre></div>
<pre><code>##     segmento tipo valor_cliente edad_cat   n .row .draw .epred
## 1        Rec    C             0   21- 40 132    1     1 0.2297
## 2        Rec    C             0   21- 40 132    1     2 0.2341
## 3        Rec    C             0   21- 40 132    1     3 0.2330
## 4        Rec    C             0   21- 40 132    1     4 0.2296
## 5        Rec    C             0   21- 40 132    1     5 0.2321
## 6        Rec    C             0   21- 40 132    1     6 0.2256
## 7        Rec    C             0   21- 40 132    1     7 0.2211
## 8        Rec    C             0   21- 40 132    1     8 0.2215
## 9        Rec    C             0   21- 40 132    1     9 0.2259
## 10       Rec    C             0   21- 40 132    1    10 0.2245
## 11       Rec    C             0   21- 40 132    1    11 0.2330
## 12       Rec    C             0   21- 40 132    1    12 0.2263
## 13       Rec    C             0   21- 40 132    1    13 0.2262
## 14       Rec    C             0   21- 40 132    1    14 0.2426
## 15       Rec    C             0   21- 40 132    1    15 0.2307
## 16       Rec    C             0   21- 40 132    1    16 0.2348
## 17       Rec    C             0   21- 40 132    1    17 0.2293
## 18       Rec    C             0   21- 40 132    1    18 0.2281
## 19       Rec    C             0   21- 40 132    1    19 0.2304
## 20       Rec    C             0   21- 40 132    1    20 0.2277
## 21       Rec    C             0   21- 40 132    1    21 0.2283
## 22       Rec    C             0   21- 40 132    1    22 0.2355
## 23       Rec    C             0   21- 40 132    1    23 0.2297
## 24       Rec    C             0   21- 40 132    1    24 0.2257
## 25       Rec    C             0   21- 40 132    1    25 0.2191
## 26       Rec    C             0   21- 40 132    1    26 0.2275
## 27       Rec    C             0   21- 40 132    1    27 0.2328
## 28       Rec    C             0   21- 40 132    1    28 0.2312
## 29       Rec    C             0   21- 40 132    1    29 0.2190
## 30       Rec    C             0   21- 40 132    1    30 0.2370
## 31       Rec    C             0   21- 40 132    1    31 0.2303
## 32       Rec    C             0   21- 40 132    1    32 0.2252
## 33       Rec    C             0   21- 40 132    1    33 0.2190
## 34       Rec    C             0   21- 40 132    1    34 0.2269
## 35       Rec    C             0   21- 40 132    1    35 0.2311
## 36       Rec    C             0   21- 40 132    1    36 0.2309
## 37       Rec    C             0   21- 40 132    1    37 0.2313
## 38       Rec    C             0   21- 40 132    1    38 0.2361
## 39       Rec    C             0   21- 40 132    1    39 0.2335
## 40       Rec    C             0   21- 40 132    1    40 0.2414
## 41       Rec    C             0   21- 40 132    1    41 0.2333
## 42       Rec    C             0   21- 40 132    1    42 0.2283
## 43       Rec    C             0   21- 40 132    1    43 0.2354
## 44       Rec    C             0   21- 40 132    1    44 0.2314
## 45       Rec    C             0   21- 40 132    1    45 0.2357
## 46       Rec    C             0   21- 40 132    1    46 0.2240
## 47       Rec    C             0   21- 40 132    1    47 0.2241
## 48       Rec    C             0   21- 40 132    1    48 0.2355
## 49       Rec    C             0   21- 40 132    1    49 0.2260
## 50       Rec    C             0   21- 40 132    1    50 0.2268
## 51       Rec    C             0   21- 40 132    1    51 0.2278
## 52       Rec    C             0   21- 40 132    1    52 0.2213
## 53       Rec    C             0   21- 40 132    1    53 0.2246
## 54       Rec    C             0   21- 40 132    1    54 0.2316
## 55       Rec    C             0   21- 40 132    1    55 0.2313
## 56       Rec    C             0   21- 40 132    1    56 0.2209
## 57       Rec    C             0   21- 40 132    1    57 0.2269
## 58       Rec    C             0   21- 40 132    1    58 0.2323
## 59       Rec    C             0   21- 40 132    1    59 0.2280
## 60       Rec    C             0   21- 40 132    1    60 0.2357
## 61       Rec    C             0   21- 40 132    1    61 0.2275
## 62       Rec    C             0   21- 40 132    1    62 0.2387
## 63       Rec    C             0   21- 40 132    1    63 0.2387
## 64       Rec    C             0   21- 40 132    1    64 0.2231
## 65       Rec    C             0   21- 40 132    1    65 0.2370
## 66       Rec    C             0   21- 40 132    1    66 0.2313
## 67       Rec    C             0   21- 40 132    1    67 0.2243
## 68       Rec    C             0   21- 40 132    1    68 0.2335
## 69       Rec    C             0   21- 40 132    1    69 0.2275
## 70       Rec    C             0   21- 40 132    1    70 0.2340
## 71       Rec    C             0   21- 40 132    1    71 0.2250
## 72       Rec    C             0   21- 40 132    1    72 0.2373
## 73       Rec    C             0   21- 40 132    1    73 0.2259
## 74       Rec    C             0   21- 40 132    1    74 0.2405
## 75       Rec    C             0   21- 40 132    1    75 0.2227
## 76       Rec    C             0   21- 40 132    1    76 0.2210
## 77       Rec    C             0   21- 40 132    1    77 0.2337
## 78       Rec    C             0   21- 40 132    1    78 0.2306
## 79       Rec    C             0   21- 40 132    1    79 0.2242
## 80       Rec    C             0   21- 40 132    1    80 0.2235
## 81       Rec    C             0   21- 40 132    1    81 0.2247
## 82       Rec    C             0   21- 40 132    1    82 0.2188
## 83       Rec    C             0   21- 40 132    1    83 0.2129
## 84       Rec    C             0   21- 40 132    1    84 0.2415
## 85       Rec    C             0   21- 40 132    1    85 0.2293
## 86       Rec    C             0   21- 40 132    1    86 0.2312
## 87       Rec    C             0   21- 40 132    1    87 0.2189
## 88       Rec    C             0   21- 40 132    1    88 0.2236
## 89       Rec    C             0   21- 40 132    1    89 0.2262
## 90       Rec    C             0   21- 40 132    1    90 0.2317
## 91       Rec    C             0   21- 40 132    1    91 0.2316
## 92       Rec    C             0   21- 40 132    1    92 0.2288
## 93       Rec    C             0   21- 40 132    1    93 0.2299
## 94       Rec    C             0   21- 40 132    1    94 0.2288
## 95       Rec    C             0   21- 40 132    1    95 0.2311
## 96       Rec    C             0   21- 40 132    1    96 0.2264
## 97       Rec    C             0   21- 40 132    1    97 0.2269
## 98       Rec    C             0   21- 40 132    1    98 0.2287
## 99       Rec    C             0   21- 40 132    1    99 0.2283
## 100      Rec    C             0   21- 40 132    1   100 0.2191</code></pre>
<p>Seguramente usar una api para obtener la posteriori que tiene tantos valores para cada dato no sea lo más eficiente, porque lo devuelve en formato json y luego hay que convertirlo a data.frame, pero funciona.</p>
</section>
<section id="salvar-docker-en-un-tar.gz" class="level2">
<h2 class="anchored" data-anchor-id="salvar-docker-en-un-tar.gz">Salvar docker en un tar.gz</h2>
<p>Si no tenemos un sitio estilo docker hub dónde registrar nuestros docker o por cualquier otra causa, podemos usar <code>docker save</code> para generar un fichero comprimido y <code>docker load</code> para importarlo.</p>
<p>Sería algo así como</p>
<div class="sourceCode" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb40-1"></span>
<span id="cb40-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> save mi_modelo_brms <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gzip</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> mi_modelo_brms_docker.tar.gz</span></code></pre></div>
<p>Copiar ese tar.gz a dónde toque</p>
<div class="sourceCode" id="cb41" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb41-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> load <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> mi_modelo_brms_docker.tar.gz</span></code></pre></div>
</section>
<section id="adelanto-con-vetiver" class="level2">
<h2 class="anchored" data-anchor-id="adelanto-con-vetiver">Adelanto con vetiver</h2>
<p>Con la librería vetiver se simplifica todo este proceso, puesto que crea por ti el plumber.R y el dockerfile y tiene movidas para guardar la monitorización del modelo y demás. Está tanto para R como para python. En R soporta los modelos que estén en <code>tidymodels</code> y en python soporta <code>scikit-learn</code>, <code>statmodels</code>, <code>xgboost</code> y creo que también <code>pytorch</code></p>


</section>

 ]]></description>
  <category>docker</category>
  <category>R</category>
  <category>api</category>
  <category>2022</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2022/10/12/api-y-docker-con-r-parte-1/index.html</guid>
  <pubDate>Tue, 11 Oct 2022 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Veeelooosidad</title>
  <dc:creator>jlcr </dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2022/09/18/veloooosidad/index.html</link>
  <description><![CDATA[ 



<p>No, este post no va sobre la canción de <a href="https://www.youtube.com/watch?v=hEj1z_ihVX8">Medina Azahara</a> sino de comparar un par de librerías para lectura y procesamiento de datos. A saber, <a href="https://pola-rs.github.io/polars-book/user-guide/index.html">polars</a> escrita en Rust y con api en <strong>python</strong> versus <a href="https://vroom.r-lib.org/">vroom</a> en combinación con librerías como <a href="https://github.com/Rdatatable/data.table">data.table</a> o <a href="https://sebkrantz.github.io/collapse/">collapse</a> en R. Estas últimas usan por debajo C++, así que tanto por el lado de python como por el de R el principal mérito se debe a usar Rust y C++.</p>
<section id="datos-hardware-y-entornos" class="level2">
<h2 class="anchored" data-anchor-id="datos-hardware-y-entornos">Datos, hardware y entornos</h2>
<p>Para hacer la comparación vamos a usar un dataset de 100 millones de filas y 9 columnas, el mismo que se usa en <a href="https://github.com/h2oai/db-benchmark">h2o.ai db-benchmark</a>.</p>
<p>Lo voy a probar en mi pc, que es un <a href="https://slimbook.es/">slimbook</a> de justo antes de la pandemia, con 1gb de ssd, 32Gb de RAM y procesador Intel i7-9750H (12) @ 4.500GHz con 6 núcleos (12 hilos) y corriendo Linux Mint 20.</p>
<section id="r" class="level3">
<h3 class="anchored" data-anchor-id="r">R</h3>
<p>Para R voy a chequear vroom y data.table para leer los datos y data.table, tidytable y collapse para el procesamiento</p>
<p>R: Uso R version 4.2.1 (2022-06-23) – “Funny-Looking Kid” vroom: 1.5.7 data.table: 1.14.2 tidytable: 0.8.1.9 collapse: 1.8.8</p>
</section>
<section id="python" class="level3">
<h3 class="anchored" data-anchor-id="python">Python</h3>
<p>Uso un entorno de conda con python 3.6.12 polars: ‘0.12.5’</p>
</section>
</section>
<section id="scripts" class="level2">
<h2 class="anchored" data-anchor-id="scripts">Scripts</h2>
<section id="r-1" class="level3">
<h3 class="anchored" data-anchor-id="r-1">R</h3>
<p>En R voy a usar microbenchmark para realizar varias ejecuciones</p>
<p>Fichero: tests.R</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(data.table)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(collapse)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(vroom)</span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidytable)</span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(microbenchmark)</span>
<span id="cb1-8"></span>
<span id="cb1-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check lectu</span></span>
<span id="cb1-10"></span>
<span id="cb1-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">setDTthreads</span>(0L)</span>
<span id="cb1-12"></span>
<span id="cb1-13">lectura <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">microbenchmark</span>(</span>
<span id="cb1-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vroom  =</span> vroom<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vroom</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/home/jose/Rstudio_projects/db-benchmark/data/G1_1e8_1e1_5_1.csv"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show_col_types =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>), </span>
<span id="cb1-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data.table =</span> data.table<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fread</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/home/jose/Rstudio_projects/db-benchmark/data/G1_1e8_1e1_5_1.csv"</span>),</span>
<span id="cb1-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">times =</span> 3L</span>
<span id="cb1-17">)</span>
<span id="cb1-18"></span>
<span id="cb1-19"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(lectura)</span>
<span id="cb1-20"></span>
<span id="cb1-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># group by sum</span></span>
<span id="cb1-22"></span>
<span id="cb1-23">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> vroom<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vroom</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/home/jose/Rstudio_projects/db-benchmark/data/G1_1e8_1e1_5_1.csv"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show_col_types =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb1-24"></span>
<span id="cb1-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># x= sample_frac(x, size = 0.1)</span></span>
<span id="cb1-26">x_dt <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">qDT</span>(x)</span>
<span id="cb1-27"></span>
<span id="cb1-28">group_by_performance <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">microbenchmark</span>(</span>
<span id="cb1-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data.table =</span> x_dt[, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(.SD, mean, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">keyby =</span> id1, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.SDcols =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>],</span>
<span id="cb1-30">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># dplyr      = x %&gt;%</span></span>
<span id="cb1-31">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     group_by(id1, id2) %&gt;%</span></span>
<span id="cb1-32">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     summarise(v1 = sum(v1, na.rm = TRUE)) %&gt;% </span></span>
<span id="cb1-33">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     ungroup(),</span></span>
<span id="cb1-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tidytable =</span> x_dt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-35">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarize.</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(v1),</span>
<span id="cb1-36">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(v2),</span>
<span id="cb1-37">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v3 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(v3),</span>
<span id="cb1-38">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(id1, id2)),</span>
<span id="cb1-39">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># base_R = tapply(x$v1, list(x$id1, x$id2), sum, na.rm = TRUE),</span></span>
<span id="cb1-40"></span>
<span id="cb1-41">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse=</span> x_dt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-42">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fgroup_by</span>(id1, id2) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-43">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fsummarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fsum</span>(v1),</span>
<span id="cb1-44">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fsum</span>(v2),</span>
<span id="cb1-45">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v3 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fsum</span>(v3)),</span>
<span id="cb1-46"></span>
<span id="cb1-47">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse_pure =</span> {</span>
<span id="cb1-48">        g <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">GRP</span>(x, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> id1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>id2)</span>
<span id="cb1-49">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fsum</span>(x<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>v1, g)</span>
<span id="cb1-50">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fsum</span>(x<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>v2, g)</span>
<span id="cb1-51">    },</span>
<span id="cb1-52">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">times =</span> 5L</span>
<span id="cb1-53">)</span>
<span id="cb1-54"></span>
<span id="cb1-55"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(group_by_performance)</span></code></pre></div>
</section>
<section id="python-1" class="level3">
<h3 class="anchored" data-anchor-id="python-1">Python</h3>
<p>Fichero: tests.py</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> polars <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pl</span>
<span id="cb2-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> time</span>
<span id="cb2-3"></span>
<span id="cb2-4">start <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> time.time()</span>
<span id="cb2-5">df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pl.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/home/jose/Rstudio_projects/db-benchmark/data/G1_1e8_1e1_5_1.csv"</span>)</span>
<span id="cb2-6">end <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> time.time()</span>
<span id="cb2-7"></span>
<span id="cb2-8"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(end <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>start)</span>
<span id="cb2-9"></span>
<span id="cb2-10">start <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> time.time()</span>
<span id="cb2-11"></span>
<span id="cb2-12">(</span>
<span id="cb2-13">    df</span>
<span id="cb2-14">.lazy()</span>
<span id="cb2-15">    .groupby([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'id1'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'id2'</span>])</span>
<span id="cb2-16">    .agg(</span>
<span id="cb2-17">        [</span>
<span id="cb2-18">            pl.col(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"v1"</span>).<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().alias(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'v1_sum'</span>),</span>
<span id="cb2-19">            pl.col(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"v2"</span>).<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().alias(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'v2_sum'</span>),</span>
<span id="cb2-20">            pl.col(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"v3"</span>).<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().alias(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'v3_sum'</span>)</span>
<span id="cb2-21">        ]</span>
<span id="cb2-22">    )</span>
<span id="cb2-23">.collect()</span>
<span id="cb2-24">)</span>
<span id="cb2-25">end <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> time.time()</span>
<span id="cb2-26"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(end <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> start)</span></code></pre></div>
</section>
</section>
<section id="resultados" class="level2">
<h2 class="anchored" data-anchor-id="resultados">Resultados</h2>
<p>Para comparar, ejecuto los scripts desde consola y teniendo cerrado navegadores, ides y demás.</p>
<section id="r-2" class="level3">
<h3 class="anchored" data-anchor-id="r-2">R</h3>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> tests.R</span></code></pre></div>
<p><strong>Lectura en R</strong></p>
<pre><code>Unit: seconds
       expr       min        lq      mean    median        uq       max neval
      vroom  7.783958  7.953598  8.185716  8.123239  8.386596  8.649953     3
 data.table 41.914928 42.809751 45.213309 43.704575 46.862499 50.020424     3
</code></pre>
<p>Group by y sum en R.</p>
<pre><code>Unit: seconds
          expr      min       lq     mean   median       uq       max neval cld
    data.table 1.469617 1.476545 1.550360 1.486647 1.633409  1.685581     5   a
     tidytable 1.182273 1.189111 1.291734 1.279313 1.314287  1.493686     5   a
      collapse 1.799175 1.813744 6.255215 1.891603 2.076616 23.694936     5   a
 collapse_pure 1.553002 1.555598 1.570758 1.566454 1.571605  1.607132     5   a
</code></pre>
<p>Por lo que más o menos, usar vroom para leer y tidytable, data.table o collapse para hacer el cálculo sale por unos 10 segundos o un poco menos.</p>
</section>
<section id="python-2" class="level3">
<h3 class="anchored" data-anchor-id="python-2">Python</h3>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python</span> tests.py </span></code></pre></div>
<pre><code>7.755492448806763
1.8228027820587158
</code></pre>
<p>Y vemos que con polars tenemos más o menos los mismos tiempos.</p>
</section>
</section>
<section id="conclusiones" class="level2">
<h2 class="anchored" data-anchor-id="conclusiones">Conclusiones</h2>
<p>Tanto en R como en Python tenemos librerías muy rápidas que , si tenemos suficiente RAM podemos trabajar con conjunto de datos bastante tochos y hacer cosas en tiempos más que razonables.</p>
<p>Polars es una librería muy nueva y muy bien hecha, ojalá hagan api para R. No obstante, data.table lleva tiempo en R y su desempeño es consistente en múltiples situaciones. Mi consejo es echarle un ojo al <a href="https://github.com/fastverse/fastverse">fastverse</a>.</p>


</section>

 ]]></description>
  <category>R</category>
  <category>python</category>
  <category>C++</category>
  <category>Rust</category>
  <category>2022</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2022/09/18/veloooosidad/index.html</guid>
  <pubDate>Sat, 17 Sep 2022 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Indios y jefes, IO al servicio del mal.</title>
  <dc:creator>jlcr </dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2022/08/01/indios-y-jefes-io-al-servicio-del-mal/index.html</link>
  <description><![CDATA[ 



<section id="introducción" class="level2">
<h2 class="anchored" data-anchor-id="introducción">Introducción</h2>
<p>Voy a poner un ejemplo de como utilizar solvers para investigación operativa dentro de R.</p>
<p>Tenemos la siguiente información: * Listado de códigos postales de España con la longitud y latitud del centroide del polígono. * Listado de códigos postales de la ubicación de las sedes de una empresa. * En la empresa hay jefes e indios, no es necesario que haya un jefe por sede.</p>
<p>Se quiere, para cada provincia de España</p>
<ul>
<li>Asignar cada código postal de esa provincia a un empleado de la empres (jefe o indio).</li>
<li>Un mismo código postal no puede estar asignado a más de un empleado.</li>
<li>En la medida de lo posible asignar a los empleados los códigos postales más cercanos al lugar de su sede.</li>
<li>A igualdad de distancia entre un código postal y una sede, se debería asignar ese código postal a un indio.</li>
<li>Ningún indio debe tener asignados menos códigos postales que ningún jefe.</li>
<li>Los jefes como <strong>máximo</strong> han de tener 7 códigos postales asignados.</li>
<li>Los indios como <strong>mínimo</strong> han de tener 3 códigos postales asignados.</li>
<li>No puede haber ningún empleado que esté “desasignado”.</li>
</ul>
<p>Dados estos requisitos debería plantear como es la definición del problema, pero no tengo ganas de ponerme a escribir fórmulas en latex, así que en vez de eso voy a utilizar unos datos simulados y directamente al código..</p>
</section>
<section id="carga-de-datos-y-crear-datos-ficticios." class="level2">
<h2 class="anchored" data-anchor-id="carga-de-datos-y-crear-datos-ficticios.">Carga de datos y crear datos ficticios.</h2>
<section id="carga-códigos-postales" class="level3">
<h3 class="anchored" data-anchor-id="carga-códigos-postales">Carga códigos postales</h3>
<p>Casualmente, tengo por mi pc un shapefile algo antiguo (de cuando está capa estaba en cartociudad) con la capa de códigos postales de España, la cual si se quiere actualizada vale un dinerillo. <a href="https://www.market.correos.es/es/product/capa-cartografica-de-codigos-postales">correos</a>, 6000 Euros la versión sin actualizaciones.. Bueno, si hacienda y correos somos todos me gustaría al menos poder utilizar esto actualizado sin que me cueste 6k.</p>
<p>Vamos a cargar la capa, obtener los centroides, pasar la geometría a longitud y latitud</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.3.6     ✔ purrr   0.3.4
## ✔ tibble  3.1.8     ✔ dplyr   1.0.9
## ✔ tidyr   1.2.0     ✔ stringr 1.4.0
## ✔ readr   2.1.2     ✔ forcats 0.5.1
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(sf)</span></code></pre></div>
<pre><code>## Linking to GEOS 3.8.0, GDAL 3.0.4, PROJ 6.3.1; sf_use_s2() is TRUE</code></pre>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">cod_postales_raw <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">readRDS</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/cp_boundaries.rds"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>cp_num, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>cp_2_num)</span>
<span id="cb5-3"></span>
<span id="cb5-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(cod_postales_raw)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 3 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -1536953 ymin: 3373964 xmax: -41802.13 ymax: 5247186
## Projected CRS: WGS 84 / Pseudo-Mercator
##      cp cp_2   area_m2                       geometry
## 1 35560   35 187875455 MULTIPOLYGON (((-1518970 33...
## 2 27330   27   6659413 MULTIPOLYGON (((-821864.3 5...
## 3 46680   46  69190773 MULTIPOLYGON (((-51610.46 4...
## 4 49706   49  90229134 MULTIPOLYGON (((-641488.4 5...
## 5 21120   21  20068648 MULTIPOLYGON (((-776955.2 4...
## 6 16623   16 132859998 MULTIPOLYGON (((-256256.7 4...</code></pre>
<p>Pintamos algunos códigos</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_geometry</span>(cod_postales_raw[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>, ]))</span></code></pre></div>
<p><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2022/08/01/indios-y-jefes-io-al-servicio-del-mal/unnamed-chunk-3-1.png" width="672"></p>
<p>Para obtener los centroides, usamos la función <code>st_centroid</code> y pasamos la capa de polígonos a una de puntos</p>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">cod_postales_raw <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_centroid</span>(cod_postales_raw)</span></code></pre></div>
<pre><code>## Warning in st_centroid.sf(cod_postales_raw): st_centroid assumes attributes are
## constant over geometries of x</code></pre>
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(cod_postales_raw)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 3 fields
## Geometry type: POINT
## Dimension:     XY
## Bounding box:  xmin: -1525406 ymin: 3382025 xmax: -47782.92 ymax: 5245455
## Projected CRS: WGS 84 / Pseudo-Mercator
##      cp cp_2   area_m2                  geometry
## 1 35560   35 187875455  POINT (-1525406 3382025)
## 2 27330   27   6659413 POINT (-823274.9 5245455)
## 3 46680   46  69190773 POINT (-47782.92 4752325)
## 4 49706   49  90229134 POINT (-637415.5 5057096)
## 5 21120   21  20068648 POINT (-778872.1 4479315)
## 6 16623   16 132859998 POINT (-262034.3 4818194)</code></pre>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_geometry</span>(cod_postales_raw[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>, ]), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cex =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>)</span></code></pre></div>
<p><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2022/08/01/indios-y-jefes-io-al-servicio-del-mal/unnamed-chunk-4-1.png" width="672"></p>
<p>Ahora extraemos de la geometría la longitud y latitud. Para eso hay que transformar la geometría.</p>
<div class="sourceCode" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">cod_postales_raw <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cod_postales_raw <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_transform</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"+proj=longlat +ellps=WGS84 +datum=WGS84"</span>)</span>
<span id="cb13-3"></span>
<span id="cb13-4">cod_postales <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cod_postales_raw <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb13-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">centroide_longitud =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>(geometry, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)),</span>
<span id="cb13-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">centroide_latitud =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>(geometry, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))</span>
<span id="cb13-8">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_drop_geometry</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># quitamos la geometría y nos quedamos solo con la longitud y latitud</span></span>
<span id="cb13-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename</span>(</span>
<span id="cb13-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cod_postal =</span> cp,</span>
<span id="cb13-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cod_prov =</span> cp_2</span>
<span id="cb13-13">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(centroide_longitud)) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tenía un polígono con NAS</span></span>
<span id="cb13-15"></span>
<span id="cb13-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(cod_postales)</span></code></pre></div>
<pre><code>##   cod_postal cod_prov   area_m2 centroide_longitud centroide_latitud
## 1      35560       35 187875455        -13.7029565          29.05011
## 2      27330       27   6659413         -7.3956047          42.56144
## 3      46680       46  69190773         -0.4292412          39.21368
## 4      49706       49  90229134         -5.7260007          41.30272
## 5      21120       21  20068648         -6.9967272          37.28791
## 6      16623       16 132859998         -2.3538946          39.67063</code></pre>
<p>Por otro lado me interesa añadir el literal de provincia, tengo una tabla extraída del INE con la correspondencia entre cod_prov y el literal</p>
<div class="sourceCode" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">provincia <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/codprov.csv"</span>))</span></code></pre></div>
<pre><code>## Rows: 52 Columns: 2
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr (2): CODIGO, LITERAL
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(provincia)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   CODIGO LITERAL         
##   &lt;chr&gt;  &lt;chr&gt;           
## 1 02     Albacete        
## 2 03     Alicante/Alacant
## 3 04     Almería         
## 4 01     Araba/Álava     
## 5 33     Asturias        
## 6 05     Ávila</code></pre>
<p>Normalizo a mayúsculas y sin tildes y se lo pego a los códigos postales</p>
<div class="sourceCode" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">provincia <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> provincia <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb19-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">provincia =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">toupper</span>(stringi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stri_trans_general</span>(LITERAL, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Latin-ASCII"</span>)))</span>
<span id="cb19-3"></span>
<span id="cb19-4">cod_postales <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cod_postales <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb19-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(provincia <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb19-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(</span>
<span id="cb19-7">      CODIGO,</span>
<span id="cb19-8">      provincia</span>
<span id="cb19-9">    ),</span>
<span id="cb19-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cod_prov"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CODIGO"</span>)</span>
<span id="cb19-11">  )</span>
<span id="cb19-12"></span>
<span id="cb19-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(cod_postales)</span></code></pre></div>
<pre><code>## [1] 10808     6</code></pre>
<div class="sourceCode" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(cod_postales <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb21-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(provincia, cod_prov, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">everything</span>()))</span></code></pre></div>
<pre><code>##           provincia cod_prov cod_postal   area_m2 centroide_longitud
## 1       PALMAS, LAS       35      35560 187875455        -13.7029565
## 2              LUGO       27      27330   6659413         -7.3956047
## 3 VALENCIA/VALENCIA       46      46680  69190773         -0.4292412
## 4            ZAMORA       49      49706  90229134         -5.7260007
## 5            HUELVA       21      21120  20068648         -6.9967272
## 6            CUENCA       16      16623 132859998         -2.3538946
##   centroide_latitud
## 1          29.05011
## 2          42.56144
## 3          39.21368
## 4          41.30272
## 5          37.28791
## 6          39.67063</code></pre>
</section>
<section id="datos-ficticios-de-las-sedes-de-las-empresas" class="level3">
<h3 class="anchored" data-anchor-id="datos-ficticios-de-las-sedes-de-las-empresas">Datos ficticios de las sedes de las empresas</h3>
<p>Lo que voy a hacer es seleccionar aleatoriamente un número de códigos postales en cada provincia, que serán las sedes de la empresa. En cada provincia pongo al menos a un empleado de tipo = “jefe”. Luego, reparto de forma aleatoria entre los códigos postales que han sido elegidos como sedes otros 120 jefes y 480 indios.</p>
<div class="sourceCode" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">155</span>)</span>
<span id="cb23-2"></span>
<span id="cb23-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## En cada provincia nos quedamos con  un 6% de códigos postales</span></span>
<span id="cb23-4"></span>
<span id="cb23-5">sedes_alea <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cod_postales <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(provincia) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_sample</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prop =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.06</span>)</span>
<span id="cb23-8"></span>
<span id="cb23-9"></span>
<span id="cb23-10"></span>
<span id="cb23-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># en cada provincia al menos un jefe y resto de empleados de forma aleatoria, en las diferentes sedes elegidas</span></span>
<span id="cb23-12"></span>
<span id="cb23-13">personal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(</span>
<span id="cb23-14">  sedes_alea <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-15">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(provincia, cod_postal) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-16">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(provincia) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-17">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_sample</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-18">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-19">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(cod_postal) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-20">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tipo =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jefe"</span>),</span>
<span id="cb23-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb23-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tipo =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jefe"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">120</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"indio"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">360</span>)),</span>
<span id="cb23-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cod_postal =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(sedes_alea<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cod_postal, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">480</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replace =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb23-24">  )</span>
<span id="cb23-25">)</span></code></pre></div>
<p>Creamos data set sedes</p>
<div class="sourceCode" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1">sedes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> personal <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb24-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(sedes_alea)</span></code></pre></div>
<pre><code>## Joining, by = "cod_postal"</code></pre>
<div class="sourceCode" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(sedes)</span></code></pre></div>
<pre><code>## [1] 530   7</code></pre>
<div class="sourceCode" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample_n</span>(sedes, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>)</span></code></pre></div>
<pre><code>## # A tibble: 7 × 7
##   cod_postal tipo  cod_prov    area_m2 centroide_longitud centroide_la…¹ provi…²
##   &lt;fct&gt;      &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;              &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;  
## 1 37660      indio 37        36448279.              -5.99           40.5 SALAMA…
## 2 41770      jefe  41       183345907.              -5.55           37.0 SEVILLA
## 3 08011      jefe  08          968836.               2.16           41.4 BARCEL…
## 4 34479      indio 34        49891663.              -4.42           42.4 PALENC…
## 5 34859      indio 34       118812672.              -4.59           42.8 PALENC…
## 6 09348      indio 09       249695400.              -3.61           42.0 BURGOS 
## 7 29750      indio 29        14389642.              -4.04           36.8 MALAGA 
## # … with abbreviated variable names ¹​centroide_latitud, ²​provincia</code></pre>
</section>
</section>
<section id="io-al-servicio-del-mal-en-granada" class="level2">
<h2 class="anchored" data-anchor-id="io-al-servicio-del-mal-en-granada">IO al servicio del mal en GRANADA</h2>
<p>Como ejemplo, vamos a ver como sería para Granada</p>
<div class="sourceCode" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1">cod_postales_granada <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cod_postales <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb30-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(provincia <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GRANADA"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb30-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>())</span>
<span id="cb30-4"></span>
<span id="cb30-5">sedes_granada <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sedes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb30-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(provincia <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GRANADA"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb30-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(tipo)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb30-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id_sede =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>())</span>
<span id="cb30-9"></span>
<span id="cb30-10">sedes_granada</span></code></pre></div>
<pre><code>## # A tibble: 11 × 8
##    cod_postal tipo  cod_prov    area_m2 centroide_long…¹ centr…² provi…³ id_sede
##    &lt;fct&gt;      &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;            &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;int&gt;
##  1 18328      jefe  18        58574459.            -3.87    37.2 GRANADA       1
##  2 18006      jefe  18         3245912.            -3.61    37.2 GRANADA       2
##  3 18516      jefe  18       146541813.            -3.24    37.2 GRANADA       3
##  4 18516      jefe  18       146541813.            -3.24    37.2 GRANADA       4
##  5 18197      indio 18        10003524.            -3.61    37.2 GRANADA       5
##  6 18516      indio 18       146541813.            -3.24    37.2 GRANADA       6
##  7 18414      indio 18        40411565.            -3.34    36.9 GRANADA       7
##  8 18197      indio 18        10003524.            -3.61    37.2 GRANADA       8
##  9 18369      indio 18        17670871.            -4.01    37.2 GRANADA       9
## 10 18611      indio 18        33542783.            -3.60    36.8 GRANADA      10
## 11 18514      indio 18       110524485.            -3.08    37.2 GRANADA      11
## # … with abbreviated variable names ¹​centroide_longitud, ²​centroide_latitud,
## #   ³​provincia</code></pre>
<p>Es importante haber ordenado por tipo , porque vamos a utilizar el mismo índice <code>j</code> para empleados jefe y empleados indios.</p>
<p>Ahora definimos: * <code>m</code> como el número de empleados en las sedes de Granada * <code>n</code> como el número de códigos postales a asignar en Granada * <code>n_sedes</code> como el número de sedes * <code>njefes</code> como el número de jefes * <code>n_indios</code> como el número de indios</p>
<div class="sourceCode" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1">m <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(sedes_granada)</span>
<span id="cb32-2">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(cod_postales_granada)</span>
<span id="cb32-3">n_sedes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(sedes_granada<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cod_postal))</span>
<span id="cb32-4"></span>
<span id="cb32-5">njefes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sedes_granada <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb32-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(tipo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jefe"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb32-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb32-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(n)</span>
<span id="cb32-9"></span>
<span id="cb32-10">n_indios <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> m <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> njefes</span></code></pre></div>
<p>Necesitamos definir una función de distancia entre los códigos postales a asignar y las sedes. Para eso usamos la distancia Haversine que está implementada en la librería <code>geosphere</code>. Y aquí ya introducimos uno de los requerimientos. Básicamente aumentamos la distancia un 10% si el empleado es un jefe, de forma que sea peor asignarle ese código postal al jefe en términos de minimizar el total de distancias.</p>
<div class="sourceCode" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1">transportcost_granada <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(i, j) {</span>
<span id="cb33-2">  cliente <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cod_postales_granada[i, ]</span>
<span id="cb33-3">  comercial <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sedes_granada[j, ]</span>
<span id="cb33-4">  distancia <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb33-5">    geosphere<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distHaversine</span>(</span>
<span id="cb33-6">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(cliente<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>centroide_longitud, cliente<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>centroide_latitud),</span>
<span id="cb33-7">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(comercial<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>centroide_longitud, comercial<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>centroide_latitud)</span>
<span id="cb33-8">    )</span>
<span id="cb33-9"></span>
<span id="cb33-10">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (comercial[, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tipo"</span>] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jefe"</span>) {</span>
<span id="cb33-11">    distancia <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> distancia <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span></span>
<span id="cb33-12">  }</span>
<span id="cb33-13"></span>
<span id="cb33-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(distancia <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># devolvemos la disancia en km</span></span>
<span id="cb33-15">}</span>
<span id="cb33-16"></span>
<span id="cb33-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># distancia entre sede 1 y empleado 3</span></span>
<span id="cb33-18"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">transportcost_granada</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<pre><code>## [1] 51.54738</code></pre>
<p>Pintamos los códigos postales y las sedes. Los granadinos reconoceremos la forma de la provincia.</p>
<div class="sourceCode" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1">p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb35-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(</span>
<span id="cb35-3">    cod_postales_granada,</span>
<span id="cb35-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(centroide_longitud, centroide_latitud)</span>
<span id="cb35-5">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb35-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rel</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb35-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(</span>
<span id="cb35-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> sedes_granada,</span>
<span id="cb35-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rel</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>),</span>
<span id="cb35-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkorange"</span></span>
<span id="cb35-11">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb35-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb35-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb35-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb35-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb35-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>()</span>
<span id="cb35-17">  )</span>
<span id="cb35-18">p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggtitle</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sin asignar"</span>)</span></code></pre></div>
<p><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2022/08/01/indios-y-jefes-io-al-servicio-del-mal/unnamed-chunk-13-1.png" width="672"></p>
</section>
<section id="optimización" class="level2">
<h2 class="anchored" data-anchor-id="optimización">Optimización</h2>
<p>Para optimizar el problema vamos a usar la librería <code>ompr</code> que permite plantear el problema de optimización lineal entera de forma sencilla, y se conecta a la librería <code>ROI</code> que es la que al final llama al solver. Como solver vamos a utilizar <code>glpk</code> que es software libre y lo suficientemente bueno para este ejemplo.</p>
<div class="sourceCode" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ompr)</span>
<span id="cb36-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ompr.roi)</span>
<span id="cb36-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ROI.plugin.glpk)</span>
<span id="cb36-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(patchwork) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pa unir los ggplots resultantes</span></span></code></pre></div>
<p>Definimos el modelo</p>
<div class="sourceCode" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1">mip_model_granada <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">MIPModel</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-2">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># variable indicadora que indica si una tienda i se asigna a comercial j</span></span>
<span id="cb37-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_variable</span>(x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"binary"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-4">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Minimizar el objetivo de distancia</span></span>
<span id="cb37-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set_objective</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">transportcost_granada</span>(i, j) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"min"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-6">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># cada tienda (código postal) solo debe ir a un comerciial. el comercial puede atender varios</span></span>
<span id="cb37-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_constraint</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-8">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># todo el mundo tiene que atender al minimo a una tienda</span></span>
<span id="cb37-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_constraint</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-10">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   Los jefes curran menos, como máximo 7 tiendas</span></span>
<span id="cb37-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_constraint</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>njefes) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-12">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span></span>
<span id="cb37-13">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># # Los indios al menos atienden a 3 tiendas</span></span>
<span id="cb37-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_constraint</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> (njefes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-15">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># para no sobrecargar mucho a los indios, les pongo un máximo que sea 1.5 veces el núemro de tiendas entre total currantes (jefes + indios)</span></span>
<span id="cb37-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_constraint</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> m), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> (njefes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_constraint</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(x[i, k], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> (njefes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">k =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>njefes)</span></code></pre></div>
<p>Algunas aclaraciones de la sintaxis anterior.</p>
<ul>
<li><p>Nuestra variable auxilizar es <code>\(X_{i,j}\)</code> dónde la i son los códigos postales y la j cada empleado.</p></li>
<li><p>Se trata de minimizar la suma total de distancias cuando se asigna un código postal a un empleado, para todos los códigos postales y todos los empleados.</p></li>
<li><p>La restricción <code>add_constraint(sum_over(x[i, j], j = 1:m) == 1  , i = 1:n)</code> si nos fijamos en el sum_over significa sumar en j (empleados) para cada código postal (i) y que esa suma valga 1. Es decir, para cada código postal (i) sólo se permite que sea asignado a un empleado</p></li>
<li><p><code>add_constraint(sum_over(x[i, j], i = 1:n) &gt;= 1  , j = 1:m)</code> Que para cada empleado (j) la suma de todos los códigos postales que se le asignen sea mayor o igual que 1. Vamos que no se quede ninguno ocioso.</p></li>
<li><p><code>add_constraint(sum_over( x[i,j], i = 1:n)  &lt;= 7, j = 1:njefes)</code> por eso ordeanmos por tipo para que el índice 1:njefes corresponda a los empleados jefes, esta restricción asegura que a un jefe no se le asignen más de 7 códigos postales.</p></li>
<li><p><code>add_constraint(sum_over( x[i,j], i = 1:n)  &gt;=  3 , j = (njefes +1):m)</code> Mínimo 3 códigos postales para los indios.</p></li>
<li><p><code>add_constraint(sum_over( x[i,j], i = 1:n)  &lt;=  round(1.5 * n/m) , j = (njefes +1):m)</code> Esta restricción intenta equilibrar el número de asignaciones para los indios, de forma que como mucho a un empleado tenga 1.5 veces la media de códigos postales por empleado.</p></li>
<li><p><code>add_constraint(sum_over( x[i,j], i = 1:n)  &gt;=  sum_over( x[i,k], i = 1:n) , j = (njefes +1):m, k = 1:njefes)</code> En esta restricción es dónde aseguramos que ningún empleado tenga menos asignaciones que ningún jefe, por eso se ha usado el índice k.</p></li>
</ul>
<p>Pues el problema tiene 2200 variables (todas binarias) y 257 restricciones.</p>
<div class="sourceCode" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1">mip_model_granada</span></code></pre></div>
<pre><code>## Mixed integer linear optimization problem
## Variables:
##   Continuous: 0 
##   Integer: 0 
##   Binary: 2200 
## Model sense: minimize 
## Constraints: 257</code></pre>
<p>Resolvemos con glpk</p>
<div class="sourceCode" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1">result_granada <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">solve_model</span>(mip_model_granada, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with_ROI</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">solver =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"glpk"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">verbose =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>))</span></code></pre></div>
<pre><code>## &lt;SOLVER MSG&gt;  ----
## GLPK Simplex Optimizer, v4.65
## 257 rows, 2200 columns, 19200 non-zeros
##       0: obj =   0.000000000e+00 inf =   2.320e+02 (218)
##     397: obj =   9.427540716e+03 inf =   5.627e-13 (0) 1
## *   870: obj =   3.723682515e+03 inf =   0.000e+00 (0) 2
## OPTIMAL LP SOLUTION FOUND
## GLPK Integer Optimizer, v4.65
## 257 rows, 2200 columns, 19200 non-zeros
## 2200 integer variables, all of which are binary
## Integer optimization begins...
## Long-step dual simplex will be used
## +   870: mip =     not found yet &gt;=              -inf        (1; 0)
## +   870: &gt;&gt;&gt;&gt;&gt;   3.723682515e+03 &gt;=   3.723682515e+03   0.0% (1; 0)
## +   870: mip =   3.723682515e+03 &gt;=     tree is empty   0.0% (0; 1)
## INTEGER OPTIMAL SOLUTION FOUND
## &lt;!SOLVER MSG&gt; ----</code></pre>
<div class="sourceCode" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1">result_granada</span></code></pre></div>
<pre><code>## Status: success
## Objective value: 3723.683</code></pre>
<p>Y ahora procedemos a ver las asignaciones. Para eso utilizamos la función <code>get_solution</code> que nos va a devolver la solución obtenida para nuestra variable <code>\(X_{i,j}\)</code></p>
<div class="sourceCode" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1">matching <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> result_granada <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb44-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_solution</span>(x[i, j]) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb44-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(i, j, value) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb44-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># nons quedamos con las asignaciones</span></span>
<span id="cb44-5"></span>
<span id="cb44-6">matching</span></code></pre></div>
<pre><code>##       i  j value
## 1    16  1     1
## 2    27  1     1
## 3    55  1     1
## 4    68  1     1
## 5   119  1     1
## 6   157  1     1
## 7   173  1     1
## 8    13  2     1
## 9    37  2     1
## 10   96  2     1
## 11  113  2     1
## 12  161  2     1
## 13  169  2     1
## 14  178  2     1
## 15  141  3     1
## 16   34  4     1
## 17    1  5     1
## 18    8  5     1
## 19   23  5     1
## 20   30  5     1
## 21   32  5     1
## 22   71  5     1
## 23   98  5     1
## 24  102  5     1
## 25  108  5     1
## 26  112  5     1
## 27  117  5     1
## 28  120  5     1
## 29  122  5     1
## 30  124  5     1
## 31  130  5     1
## 32  132  5     1
## 33  134  5     1
## 34  137  5     1
## 35  138  5     1
## 36  140  5     1
## 37  149  5     1
## 38  170  5     1
## 39  182  5     1
## 40  191  5     1
## 41  192  5     1
## 42  194  5     1
## 43  198  5     1
## 44   10  6     1
## 45   15  6     1
## 46   20  6     1
## 47   65  6     1
## 48   69  6     1
## 49   82  6     1
## 50   83  6     1
## 51   86  6     1
## 52   87  6     1
## 53   92  6     1
## 54   93  6     1
## 55  116  6     1
## 56  128  6     1
## 57  133  6     1
## 58  135  6     1
## 59  144  6     1
## 60  151  6     1
## 61  153  6     1
## 62  163  6     1
## 63  168  6     1
## 64  174  6     1
## 65  177  6     1
## 66  190  6     1
## 67  199  6     1
## 68    2  7     1
## 69    5  7     1
## 70    6  7     1
## 71    7  7     1
## 72   11  7     1
## 73   12  7     1
## 74   17  7     1
## 75   24  7     1
## 76   26  7     1
## 77   28  7     1
## 78   31  7     1
## 79   44  7     1
## 80   48  7     1
## 81   53  7     1
## 82   56  7     1
## 83   72  7     1
## 84   77  7     1
## 85   91  7     1
## 86  104  7     1
## 87  105  7     1
## 88  131  7     1
## 89  147  7     1
## 90  156  7     1
## 91  166  7     1
## 92  171  7     1
## 93  187  7     1
## 94  193  7     1
## 95   14  8     1
## 96   39  8     1
## 97   40  8     1
## 98   47  8     1
## 99   54  8     1
## 100  59  8     1
## 101  60  8     1
## 102  62  8     1
## 103  70  8     1
## 104  73  8     1
## 105  75  8     1
## 106  78  8     1
## 107  79  8     1
## 108  84  8     1
## 109  85  8     1
## 110  90  8     1
## 111  97  8     1
## 112  99  8     1
## 113 101  8     1
## 114 109  8     1
## 115 110  8     1
## 116 118  8     1
## 117 126  8     1
## 118 167  8     1
## 119 185  8     1
## 120 189  8     1
## 121 195  8     1
## 122   9  9     1
## 123  25  9     1
## 124  29  9     1
## 125  33  9     1
## 126  35  9     1
## 127  46  9     1
## 128  50  9     1
## 129  51  9     1
## 130  57  9     1
## 131  63  9     1
## 132  67  9     1
## 133  74  9     1
## 134  80  9     1
## 135  88  9     1
## 136 103  9     1
## 137 107  9     1
## 138 111  9     1
## 139 114  9     1
## 140 115  9     1
## 141 125  9     1
## 142 136  9     1
## 143 162  9     1
## 144 172  9     1
## 145 175  9     1
## 146 179  9     1
## 147 180  9     1
## 148 196  9     1
## 149   3 10     1
## 150   4 10     1
## 151  22 10     1
## 152  36 10     1
## 153  38 10     1
## 154  45 10     1
## 155  49 10     1
## 156  61 10     1
## 157  64 10     1
## 158  76 10     1
## 159  89 10     1
## 160 106 10     1
## 161 127 10     1
## 162 129 10     1
## 163 139 10     1
## 164 143 10     1
## 165 148 10     1
## 166 152 10     1
## 167 154 10     1
## 168 155 10     1
## 169 159 10     1
## 170 176 10     1
## 171 181 10     1
## 172 183 10     1
## 173 186 10     1
## 174  18 11     1
## 175  19 11     1
## 176  21 11     1
## 177  41 11     1
## 178  42 11     1
## 179  43 11     1
## 180  52 11     1
## 181  58 11     1
## 182  66 11     1
## 183  81 11     1
## 184  94 11     1
## 185  95 11     1
## 186 100 11     1
## 187 121 11     1
## 188 123 11     1
## 189 142 11     1
## 190 145 11     1
## 191 146 11     1
## 192 150 11     1
## 193 158 11     1
## 194 160 11     1
## 195 164 11     1
## 196 165 11     1
## 197 184 11     1
## 198 188 11     1
## 199 197 11     1
## 200 200 11     1</code></pre>
<p>Ahora vemos cuántas asignaciones tiene cada empleado y pintamos los resultados</p>
<div class="sourceCode" id="cb46" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1">asignaciones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> matching <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb46-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(j) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb46-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">asignaciones =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(value)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb46-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(asignaciones)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb46-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(sedes_granada, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"j"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id_sede"</span>))</span>
<span id="cb46-6"></span>
<span id="cb46-7">asignaciones</span></code></pre></div>
<pre><code>## # A tibble: 11 × 9
##        j asignaciones cod_postal tipo  cod_prov  area_m2 centr…¹ centr…² provi…³
##    &lt;int&gt;        &lt;dbl&gt; &lt;fct&gt;      &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  
##  1     5           27 18197      indio 18         1.00e7   -3.61    37.2 GRANADA
##  2     7           27 18414      indio 18         4.04e7   -3.34    36.9 GRANADA
##  3     8           27 18197      indio 18         1.00e7   -3.61    37.2 GRANADA
##  4     9           27 18369      indio 18         1.77e7   -4.01    37.2 GRANADA
##  5    11           27 18514      indio 18         1.11e8   -3.08    37.2 GRANADA
##  6    10           25 18611      indio 18         3.35e7   -3.60    36.8 GRANADA
##  7     6           24 18516      indio 18         1.47e8   -3.24    37.2 GRANADA
##  8     1            7 18328      jefe  18         5.86e7   -3.87    37.2 GRANADA
##  9     2            7 18006      jefe  18         3.25e6   -3.61    37.2 GRANADA
## 10     3            1 18516      jefe  18         1.47e8   -3.24    37.2 GRANADA
## 11     4            1 18516      jefe  18         1.47e8   -3.24    37.2 GRANADA
## # … with abbreviated variable names ¹​centroide_longitud, ²​centroide_latitud,
## #   ³​provincia</code></pre>
<div class="sourceCode" id="cb48" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1">plot_assignment <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> matching <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb48-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">inner_join</span>(cod_postales_granada, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"i"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb48-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">inner_join</span>(sedes_granada, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"j"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id_sede"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">suffix =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_clientes"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_comerciales"</span>))</span>
<span id="cb48-4"></span>
<span id="cb48-5"></span>
<span id="cb48-6"></span>
<span id="cb48-7"></span>
<span id="cb48-8"></span>
<span id="cb48-9">p_jefes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb48-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_segment</span>(</span>
<span id="cb48-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> plot_assignment <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb48-12">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(tipo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jefe"</span>),</span>
<span id="cb48-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(</span>
<span id="cb48-14">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> centroide_longitud_comerciales,</span>
<span id="cb48-15">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> centroide_latitud_comerciales,</span>
<span id="cb48-16">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> centroide_longitud_clientes,</span>
<span id="cb48-17">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> centroide_latitud_clientes</span>
<span id="cb48-18">    )</span>
<span id="cb48-19">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb48-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggtitle</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Asignaciones para los jefes"</span>))</span>
<span id="cb48-21"></span>
<span id="cb48-22"></span>
<span id="cb48-23">p_indios <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb48-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_segment</span>(</span>
<span id="cb48-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> plot_assignment <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb48-26">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(tipo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"indio"</span>),</span>
<span id="cb48-27">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(</span>
<span id="cb48-28">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> centroide_longitud_comerciales,</span>
<span id="cb48-29">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> centroide_latitud_comerciales,</span>
<span id="cb48-30">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> centroide_longitud_clientes,</span>
<span id="cb48-31">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> centroide_latitud_clientes</span>
<span id="cb48-32">    )</span>
<span id="cb48-33">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb48-34">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggtitle</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Asignaciones para los indios"</span>))</span>
<span id="cb48-35"></span>
<span id="cb48-36"></span>
<span id="cb48-37">p_or <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb48-38">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb48-39">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sin asignar"</span>,</span>
<span id="cb48-40">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Granada"</span></span>
<span id="cb48-41">  )</span>
<span id="cb48-42">p_final <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p_or <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> p_jefes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> p_indios</span>
<span id="cb48-43"></span>
<span id="cb48-44">p_final</span></code></pre></div>
<p><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2022/08/01/indios-y-jefes-io-al-servicio-del-mal/unnamed-chunk-21-1.png" width="384"></p>
</section>
<section id="io-al-servicio-del-mal-eligiendo-provincia" class="level2">
<h2 class="anchored" data-anchor-id="io-al-servicio-del-mal-eligiendo-provincia">IO al servicio del mal eligiendo provincia</h2>
<p>Creo función (francamente mejorable y modularizable) para poder elegir provincia o provincias</p>
<div class="sourceCode" id="cb49" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1">get_asignaciones_x_provincia <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cod_postales =</span> cod_postales, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sedes =</span> sedes,</span>
<span id="cb49-2">                                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">provincia_sel =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MADRID"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, ...) {</span>
<span id="cb49-3">  cod_postales_filt <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cod_postales <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(provincia <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> provincia_sel) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>())</span>
<span id="cb49-6"></span>
<span id="cb49-7">  sedes_filt <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sedes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(provincia <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> provincia_sel) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(tipo)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id_sede =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>())</span>
<span id="cb49-11"></span>
<span id="cb49-12">  m <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(sedes_filt)</span>
<span id="cb49-13">  n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(cod_postales_filt)</span>
<span id="cb49-14">  n_sedes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(sedes_filt<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cod_postal))</span>
<span id="cb49-15"></span>
<span id="cb49-16">  njefes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sedes_filt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-17">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(tipo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jefe"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-18">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-19">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(n)</span>
<span id="cb49-20"></span>
<span id="cb49-21">  n_indios <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> m <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> njefes</span>
<span id="cb49-22"></span>
<span id="cb49-23">  transportcost <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(i, j) {</span>
<span id="cb49-24">    cliente <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cod_postales_filt[i, ]</span>
<span id="cb49-25">    comercial <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sedes_filt[j, ]</span>
<span id="cb49-26">    distancia <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> geosphere<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distHaversine</span>(</span>
<span id="cb49-27">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(cliente<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>centroide_longitud, cliente<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>centroide_latitud),</span>
<span id="cb49-28">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(comercial<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>centroide_longitud, comercial<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>centroide_latitud)</span>
<span id="cb49-29">    )</span>
<span id="cb49-30"></span>
<span id="cb49-31">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (comercial[, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tipo"</span>] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jefe"</span>) distancia <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> distancia <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span></span>
<span id="cb49-32"></span>
<span id="cb49-33">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(distancia <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>)</span>
<span id="cb49-34">  }</span>
<span id="cb49-35"></span>
<span id="cb49-36"></span>
<span id="cb49-37">  p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(cod_postales_filt, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(centroide_longitud, centroide_latitud)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb49-38">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rel</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb49-39">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> sedes_filt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rel</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkorange"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb49-40">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># scale_x_continuous(limits = c(0, grid_size+1)) +</span></span>
<span id="cb49-41">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># scale_y_continuous(limits = c(0, grid_size+1)) +</span></span>
<span id="cb49-42">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb49-43">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb49-44">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb49-45">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>()</span>
<span id="cb49-46">    )</span>
<span id="cb49-47"></span>
<span id="cb49-48">  mip_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">MIPModel</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-49">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># variable indicadora que indica si una tienda i se asigna a comercial j</span></span>
<span id="cb49-50">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_variable</span>(x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"binary"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-51">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Minimizar el objetivo de distancia</span></span>
<span id="cb49-52">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set_objective</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">transportcost</span>(i, j) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"min"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-53">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># cada tienda (código postal) solo debe ir a un comerciial. el comercial puede atender varios</span></span>
<span id="cb49-54">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_constraint</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-55">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># todo el mundo tiene que atender al minimo a una tienda</span></span>
<span id="cb49-56">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_constraint</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-57">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># %&gt;%</span></span>
<span id="cb49-58"></span>
<span id="cb49-59">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   Los jefes curran menos, como máximo 7 tiendas</span></span>
<span id="cb49-60">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_constraint</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>njefes) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-61">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span></span>
<span id="cb49-62">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># # Los indios al menos atienden a 3 tiendas</span></span>
<span id="cb49-63">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_constraint</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> (njefes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-64">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># para no sobrecargar mucho a los indios, les pongo un máximo que sea 1.5 veces el núemro de tiendas entre total currantes (jefes + indios)</span></span>
<span id="cb49-65">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_constraint</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> m), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> (njefes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-66">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_constraint</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(x[i, j], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_over</span>(x[i, k], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">i =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> (njefes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>m, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">k =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>njefes)</span>
<span id="cb49-67"></span>
<span id="cb49-68"></span>
<span id="cb49-69">  result2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">solve_model</span>(mip_model, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with_ROI</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">solver =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"glpk"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">verbose =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>))</span>
<span id="cb49-70"></span>
<span id="cb49-71"></span>
<span id="cb49-72">  matching <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> result2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-73">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_solution</span>(x[i, j]) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-74">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(i, j, value) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-75">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb49-76"></span>
<span id="cb49-77"></span>
<span id="cb49-78"></span>
<span id="cb49-79">  asignaciones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> matching <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-80">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(j) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-81">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">asignaciones =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(value)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-82">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(asignaciones)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-83">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(sedes_filt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"j"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id_sede"</span>))</span>
<span id="cb49-84"></span>
<span id="cb49-85"></span>
<span id="cb49-86">  plot_assignment <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> matching <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-87">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">inner_join</span>(cod_postales_filt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"i"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-88">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">inner_join</span>(sedes_filt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"j"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id_sede"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">suffix =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_clientes"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_comerciales"</span>))</span>
<span id="cb49-89"></span>
<span id="cb49-90"></span>
<span id="cb49-91"></span>
<span id="cb49-92">  p_jefes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb49-93">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_segment</span>(</span>
<span id="cb49-94">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> plot_assignment <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-95">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(tipo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jefe"</span>),</span>
<span id="cb49-96">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(</span>
<span id="cb49-97">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> centroide_longitud_comerciales,</span>
<span id="cb49-98">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> centroide_latitud_comerciales,</span>
<span id="cb49-99">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> centroide_longitud_clientes,</span>
<span id="cb49-100">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> centroide_latitud_clientes</span>
<span id="cb49-101">      )</span>
<span id="cb49-102">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb49-103">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggtitle</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Asignaciones para los jefes"</span>))</span>
<span id="cb49-104"></span>
<span id="cb49-105"></span>
<span id="cb49-106">  p_indios <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb49-107">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_segment</span>(</span>
<span id="cb49-108">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> plot_assignment <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb49-109">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(tipo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"indio"</span>),</span>
<span id="cb49-110">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(</span>
<span id="cb49-111">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> centroide_longitud_comerciales,</span>
<span id="cb49-112">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> centroide_latitud_comerciales,</span>
<span id="cb49-113">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> centroide_longitud_clientes,</span>
<span id="cb49-114">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> centroide_latitud_clientes</span>
<span id="cb49-115">      )</span>
<span id="cb49-116">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb49-117">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggtitle</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Asignaciones para los indios"</span>))</span>
<span id="cb49-118"></span>
<span id="cb49-119">  subtitulo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reduce</span>(provincia_sel, <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x, y) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(x, y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>))</span>
<span id="cb49-120">  p_or <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb49-121">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb49-122">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sin asignar"</span>,</span>
<span id="cb49-123">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> subtitulo</span>
<span id="cb49-124">    )</span>
<span id="cb49-125">  p_final <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p_or <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> p_jefes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> p_indios</span>
<span id="cb49-126"></span>
<span id="cb49-127">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (plot) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(p_final)</span>
<span id="cb49-128"></span>
<span id="cb49-129">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb49-130">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">comerciales =</span> sedes_filt,</span>
<span id="cb49-131">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cod_postales =</span> cod_postales_filt,</span>
<span id="cb49-132">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">matching =</span> matching, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tot_asignaciones =</span> asignaciones, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot_final =</span> p_final</span>
<span id="cb49-133">  ))</span>
<span id="cb49-134">}</span></code></pre></div>
<p>Y veamos algunos ejemplos.</p>
<section id="madrid" class="level3">
<h3 class="anchored" data-anchor-id="madrid">MADRID</h3>
<div class="sourceCode" id="cb50" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1">madrid <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_asignaciones_x_provincia</span>(cod_postales, sedes, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">provincia_sel =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MADRID"</span>)</span></code></pre></div>
<pre><code>## &lt;SOLVER MSG&gt;  ----
## GLPK Simplex Optimizer, v4.65
## 385 rows, 4425 columns, 45725 non-zeros
##       0: obj =   0.000000000e+00 inf =   3.400e+02 (320)
##     498: obj =   1.415569938e+04 inf =   5.690e-14 (0) 1
## Perturbing LP to avoid stalling [939]...
## Removing LP perturbation [1341]...
## *  1341: obj =   5.881701905e+03 inf =   0.000e+00 (0) 4
## OPTIMAL LP SOLUTION FOUND
## GLPK Integer Optimizer, v4.65
## 385 rows, 4425 columns, 45725 non-zeros
## 4425 integer variables, all of which are binary
## Integer optimization begins...
## Long-step dual simplex will be used
## +  1341: mip =     not found yet &gt;=              -inf        (1; 0)
## +  1341: &gt;&gt;&gt;&gt;&gt;   5.881701905e+03 &gt;=   5.881701905e+03   0.0% (1; 0)
## +  1341: mip =   5.881701905e+03 &gt;=     tree is empty   0.0% (0; 1)
## INTEGER OPTIMAL SOLUTION FOUND
## &lt;!SOLVER MSG&gt; ----</code></pre>
<p><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2022/08/01/indios-y-jefes-io-al-servicio-del-mal/unnamed-chunk-23-1.png" width="384"></p>
<p>Podemos ver cuántos códigos postales le han tocado a cada empleado.</p>
<p>Se ve que se cumplen las restricciones. Seguramente para ser más equitativo habría que tocar algo a mano, para que a los empleados indios de la misma sede se repartan mejor los códigos postales. pero como primera aproximación no está mal</p>
<div class="sourceCode" id="cb52" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1">madrid<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>tot_asignaciones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb52-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(cod_postal)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 9
##        j asignaciones cod_postal tipo  cod_prov  area_m2 centr…¹ centr…² provi…³
##    &lt;int&gt;        &lt;dbl&gt; &lt;fct&gt;      &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  
##  1     2            7 28011      jefe  28         3.03e7   -3.75    40.4 MADRID 
##  2     1            7 28015      jefe  28         2.59e6   -3.71    40.4 MADRID 
##  3     5            7 28015      jefe  28         2.59e6   -3.71    40.4 MADRID 
##  4    12           30 28035      indio 28         2.20e7   -3.74    40.5 MADRID 
##  5    14           30 28213      indio 28         8.52e7   -4.19    40.4 MADRID 
##  6     9           30 28521      indio 28         3.53e7   -3.50    40.3 MADRID 
##  7     7           30 28668      indio 28         3.65e6   -3.84    40.4 MADRID 
##  8    13           30 28755      indio 28         1.23e8   -3.60    41.1 MADRID 
##  9     6           25 28755      indio 28         1.23e8   -3.60    41.1 MADRID 
## 10     8           17 28755      indio 28         1.23e8   -3.60    41.1 MADRID 
## 11    11            8 28755      indio 28         1.23e8   -3.60    41.1 MADRID 
## 12     4            7 28817      jefe  28         6.04e7   -3.26    40.5 MADRID 
## 13    15           30 28901      indio 28         1.62e6   -3.73    40.3 MADRID 
## 14    10           30 28931      indio 28         8.78e5   -3.86    40.3 MADRID 
## 15     3            7 28931      jefe  28         8.78e5   -3.86    40.3 MADRID 
## # … with abbreviated variable names ¹​centroide_longitud, ²​centroide_latitud,
## #   ³​provincia</code></pre>
<p>Podemos ver el detalle, por ejemplo qué códigos postales le toca al empleado j=4</p>
<div class="sourceCode" id="cb54" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1">madrid_asignaciones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  madrid<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>tot_asignaciones  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb54-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(madrid<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>matching, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"j"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb54-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(madrid<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cod_postales, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"i"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">suffix =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_tienda"</span>)) </span>
<span id="cb54-4"></span>
<span id="cb54-5">madrid_asignaciones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb54-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(j<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb54-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(tipo ,j, i, cod_postal, cod_postal_tienda)</span></code></pre></div>
<pre><code>## # A tibble: 7 × 5
##   tipo      j     i cod_postal cod_postal_tienda
##   &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;fct&gt;      &lt;fct&gt;            
## 1 jefe      4    61 28817      28810            
## 2 jefe      4    71 28817      28812            
## 3 jefe      4    89 28817      28818            
## 4 jefe      4   121 28817      28515            
## 5 jefe      4   155 28817      28804            
## 6 jefe      4   172 28817      28817            
## 7 jefe      4   219 28817      28811</code></pre>
</section>
<section id="barcelona" class="level3">
<h3 class="anchored" data-anchor-id="barcelona">Barcelona</h3>
<div class="sourceCode" id="cb56" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1">barcelona <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_asignaciones_x_provincia</span>(cod_postales, sedes, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">provincia_sel =</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BARCELONA"</span>)</span></code></pre></div>
<pre><code>## &lt;SOLVER MSG&gt;  ----
## GLPK Simplex Optimizer, v4.65
## 471 rows, 5715 columns, 59055 non-zeros
##       0: obj =   0.000000000e+00 inf =   4.260e+02 (406)
##     600: obj =   1.389502410e+04 inf =   9.258e-13 (0) 1
## Perturbing LP to avoid stalling [1077]...
## Removing LP perturbation [1716]...
## *  1716: obj =   7.841913058e+03 inf =   0.000e+00 (0) 5
## OPTIMAL LP SOLUTION FOUND
## GLPK Integer Optimizer, v4.65
## 471 rows, 5715 columns, 59055 non-zeros
## 5715 integer variables, all of which are binary
## Integer optimization begins...
## Long-step dual simplex will be used
## +  1716: mip =     not found yet &gt;=              -inf        (1; 0)
## +  1716: &gt;&gt;&gt;&gt;&gt;   7.841913058e+03 &gt;=   7.841913058e+03   0.0% (1; 0)
## +  1716: mip =   7.841913058e+03 &gt;=     tree is empty   0.0% (0; 1)
## INTEGER OPTIMAL SOLUTION FOUND
## &lt;!SOLVER MSG&gt; ----</code></pre>
<p><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2022/08/01/indios-y-jefes-io-al-servicio-del-mal/unnamed-chunk-26-1.png" width="384"></p>
</section>
<section id="sevilla" class="level3">
<h3 class="anchored" data-anchor-id="sevilla">Sevilla</h3>
<div class="sourceCode" id="cb58" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1">sevilla <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_asignaciones_x_provincia</span>(cod_postales, sedes, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">provincia_sel =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SEVILLA"</span>)</span></code></pre></div>
<pre><code>## &lt;SOLVER MSG&gt;  ----
## GLPK Simplex Optimizer, v4.65
## 182 rows, 1064 columns, 7448 non-zeros
##       0: obj =   0.000000000e+00 inf =   1.710e+02 (163)
##     243: obj =   8.653234667e+03 inf =   5.145e-13 (0)
## *   572: obj =   3.623165871e+03 inf =   0.000e+00 (0) 1
## OPTIMAL LP SOLUTION FOUND
## GLPK Integer Optimizer, v4.65
## 182 rows, 1064 columns, 7448 non-zeros
## 1064 integer variables, all of which are binary
## Integer optimization begins...
## Long-step dual simplex will be used
## +   572: mip =     not found yet &gt;=              -inf        (1; 0)
## +   572: &gt;&gt;&gt;&gt;&gt;   3.623165871e+03 &gt;=   3.623165871e+03   0.0% (1; 0)
## +   572: mip =   3.623165871e+03 &gt;=     tree is empty   0.0% (0; 1)
## INTEGER OPTIMAL SOLUTION FOUND
## &lt;!SOLVER MSG&gt; ----</code></pre>
<p><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2022/08/01/indios-y-jefes-io-al-servicio-del-mal/unnamed-chunk-27-1.png" width="384"></p>
</section>
<section id="granada-y-málaga-juntas" class="level3">
<h3 class="anchored" data-anchor-id="granada-y-málaga-juntas">Granada y Málaga juntas</h3>
<div class="sourceCode" id="cb60" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1">granada_malaga <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_asignaciones_x_provincia</span>(cod_postales, sedes, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">provincia_sel =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GRANADA"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MALAGA"</span>))</span></code></pre></div>
<pre><code>## &lt;SOLVER MSG&gt;  ----
## GLPK Simplex Optimizer, v4.65
## 488 rows, 7160 columns, 80550 non-zeros
##       0: obj =   0.000000000e+00 inf =   4.230e+02 (393)
##     515: obj =   2.754380624e+04 inf =   4.807e-13 (0) 1
## Perturbing LP to avoid stalling [1388]...
## Removing LP perturbation [1688]...
## *  1688: obj =   7.728634950e+03 inf =   0.000e+00 (0) 5
## OPTIMAL LP SOLUTION FOUND
## GLPK Integer Optimizer, v4.65
## 488 rows, 7160 columns, 80550 non-zeros
## 7160 integer variables, all of which are binary
## Integer optimization begins...
## Long-step dual simplex will be used
## +  1688: mip =     not found yet &gt;=              -inf        (1; 0)
## +  1688: &gt;&gt;&gt;&gt;&gt;   7.728634950e+03 &gt;=   7.728634950e+03   0.0% (1; 0)
## +  1688: mip =   7.728634950e+03 &gt;=     tree is empty   0.0% (0; 1)
## INTEGER OPTIMAL SOLUTION FOUND
## &lt;!SOLVER MSG&gt; ----</code></pre>
<p><img src="https://muestrear-no-es-pecado-rebranding.netlify.app/2022/08/01/indios-y-jefes-io-al-servicio-del-mal/unnamed-chunk-28-1.png" width="384"></p>
<p>Y hasta aquí ha llegado el uso de la IO para el mal. Feliz verano !!</p>


</section>
</section>

 ]]></description>
  <category>estadística</category>
  <category>Investigación operativa</category>
  <category>R</category>
  <category>2022</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2022/08/01/indios-y-jefes-io-al-servicio-del-mal/index.html</guid>
  <pubDate>Sun, 31 Jul 2022 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Palabras para Julia (Parte 4 /n). Predicción con Turing</title>
  <dc:creator>jlcr </dc:creator>
  <link>https://muestrear-no-es-pecado-rebranding.netlify.app/2022/07/01/palabras-para-julia-parte-4-n/index.html</link>
  <description><![CDATA[ 



<p>En <a href="https://muestrear-no-es-pecado.netlify.app/2022/03/20/palabras-para-julia-parte-3-n/">Palabras para Julia parte 3</a> hablaba de modelos bayesianos con <a href="https://turing.ml/stable/">Turing.jl</a>, y me quedé con una espinita clavada, que era la de poder predecir de forma relativamente fácil con Turing, o incluso guardar de alguna forma la “posterior samples” y poder usar mi modelo en otra sesión de Julia.</p>
<p>Empiezo una serie de entradas cuyo objetivo es ver si puedo llegar a la lógica para poner “en producción” un modelo bayesiando con Turing, pero llegando incluso a crear un binario en linux que me permita predecir con un modelo y desplegarlo incluso en entornos dónde no está instalado Julia. La verdad, que no sé si lo conseguiré, pero al menos aprendo algo por el camino.</p>
<p>Si, ya sé que existen los dockers y todo eso, pero no está de más saber que existen alternativas que quizá sean mejores. Ya en el pasado he tratado temas de cómo productivizar modelos de h2o sobre spark <a href="https://muestrear-no-es-pecado.netlify.app/2019/03/12/productivizando-modelos-binarios-con-h20/">aquí</a> o con Julia <a href="https://muestrear-no-es-pecado.netlify.app/2021/08/16/palabras-para-julia-parte-2-n/">aquí</a>. El objetivo final será llegar a tener un binario en linux que tome como argumento la ruta dónde se haya guardado las posterior samples de un modelo bayesiano y la ruta con especificación de dicho modelo en texto (para que Turing sepa como usar esas posterior samples) y que nos genere la posterior predictive para nuevos datos.</p>
<p>Así que vamos al lío. Empezamos por ver como entrenamos un modelo bayesiano con Turing y como se puede guardar y utilizar posteriormente.</p>
<section id="entrenamiento-con-julia" class="level2">
<h2 class="anchored" data-anchor-id="entrenamiento-con-julia">Entrenamiento con Julia</h2>
<p>Vamos a hacer un ejemplo sencillo, entrenando una regresión lineal múltiple de forma bayesiana. El dataset forma parte del material del libro Introduction to Statistical Learning. <a href="https://www.statlearning.com/s/Advertising.csv">Advertising</a></p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"></span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">LinearAlgebra</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Plots</span></span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Turing</span></span>
<span id="cb1-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">ReverseDiff</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Memoization </span></span>
<span id="cb1-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">DataFrames</span></span>
<span id="cb1-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">CSV</span></span>
<span id="cb1-7"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Random</span></span>
<span id="cb1-8"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">StatsPlots</span></span>
<span id="cb1-9"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Distributions</span></span>
<span id="cb1-10"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">StatsBase</span></span>
<span id="cb1-11"></span>
<span id="cb1-12"></span>
<span id="cb1-13"></span>
<span id="cb1-14"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Logging</span></span>
<span id="cb1-15"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Logging</span>.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">disable_logging</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Logging</span>.Warn)</span>
<span id="cb1-16"></span>
<span id="cb1-17">mm <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">DataFrame</span>(CSV.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">File</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/Advertising.csv"</span>))</span>
<span id="cb1-18"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">describe</span>(mm)</span>
<span id="cb1-19"></span></code></pre></div>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"></span>
<span id="cb2-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">200×5</span> DataFrame</span>
<span id="cb2-3"> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Row</span> │ Column1  TV       radio    newspaper  sales   </span>
<span id="cb2-4">     <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│</span> Int64    Float64  Float64  Float64    Float64 </span>
<span id="cb2-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">─────┼───────────────────────────────────────────────</span></span>
<span id="cb2-6">   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">1</span> │       1    230.1     37.8       69.2     22.1</span>
<span id="cb2-7">   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">2</span> │       2     44.5     39.3       45.1     10.4</span>
<span id="cb2-8">   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">3</span> │       3     17.2     45.9       69.3      9.3</span>
<span id="cb2-9">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">⋮</span>  │    ⋮        ⋮        ⋮         ⋮         ⋮</span>
<span id="cb2-10"> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">198</span> │     198    177.0      9.3        6.4     12.8</span>
<span id="cb2-11"> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">199</span> │     199    283.6     42.0       66.2     25.5</span>
<span id="cb2-12"> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">200</span> │     200    232.1      8.6        8.7     13.4</span>
<span id="cb2-13">                                     <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">194</span> rows omitted</span>
<span id="cb2-14"></span>
<span id="cb2-15"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">julia</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> describe<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mm</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb2-16"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">5×7</span> DataFrame</span>
<span id="cb2-17"> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Row</span> │ variable   mean      min   median   max    nmissing  eltype   </span>
<span id="cb2-18">     <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│</span> Symbol     Float64   Real  Float64  Real   Int64     DataType </span>
<span id="cb2-19"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">─────┼───────────────────────────────────────────────────────────────</span></span>
<span id="cb2-20">   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">1</span> │ Column1    100.5      1     100.5   200           0  Int64</span>
<span id="cb2-21">   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">2</span> │ TV         147.043    0.7   149.75  296.4         0  Float64</span>
<span id="cb2-22">   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">3</span> │ radio       23.264    0.0    22.9    49.6         0  Float64</span>
<span id="cb2-23">   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">4</span> │ newspaper   30.554    0.3    25.75  114.0         0  Float64</span>
<span id="cb2-24">   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">5</span> │ sales       14.0225   1.6    12.9    27.0         0  Float64</span></code></pre></div>
<p>Especificamos el modelo, y aquí tengo que comentar un par de cosas. Una que julia gracias a que implementa eficazmente el <a href="https://en.wikipedia.org/wiki/Multiple_dispatch">Multiple dispatch</a>, podemos tener una misma función que devuelva cosas diferentes dependiendo de que le pasemos, así una función puede tener diferentes métodos. El otro aspecto es el uso del condition en Turing (alias <code>|</code>) se puede especificar el modelo sin pasar como argumento la variable dependiente y usarla solo para obtener la posterior, lo cual nos va a permitir hacer algo como <code>predict( modelo(Xs), cadena_mcmc)</code>, y no tener que pasar la <code>y</code> como un valor perdido.</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"></span>
<span id="cb3-2"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">@model</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mm_model_sin_sales</span>(TV<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Real</span>, radio<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Real</span>, newspaper<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Real</span>)</span>
<span id="cb3-3">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Prior coeficientes</span></span>
<span id="cb3-4">    a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb3-5">    tv_coef  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb3-6">    radio_coef  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb3-7">    newspaper_coef  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb3-8">    σ₁ <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Gamma</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb3-9">    </span>
<span id="cb3-10">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># antes </span></span>
<span id="cb3-11">    mu <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> tv_coef <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> TV <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> radio_coef <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> radio <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> newspaper_coef <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> newspaper </span>
<span id="cb3-12">    sales <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(mu, σ₁)</span>
<span id="cb3-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb3-14"></span>
<span id="cb3-15"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">@model</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mm_model_sin_sales</span>(TV<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">AbstractVector{&lt;:Real}</span>,</span>
<span id="cb3-16">    </span>
<span id="cb3-17">    radio<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">AbstractVector{&lt;:Real}</span>,</span>
<span id="cb3-18">    newspaper<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">AbstractVector{&lt;:Real}</span>)</span>
<span id="cb3-19">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Prior coeficientes</span></span>
<span id="cb3-20">    a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb3-21">    tv_coef  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb3-22">    radio_coef  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb3-23">    newspaper_coef  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb3-24">    σ₁ <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Gamma</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb3-25">           </span>
<span id="cb3-26">    mu <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.+</span> tv_coef <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.*</span> TV <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.+</span> radio_coef <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.*</span> radio <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.+</span> newspaper_coef <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.*</span> newspaper </span>
<span id="cb3-27">    sales <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">MvNormal</span>(mu, σ₁<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> I)</span>
<span id="cb3-28"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb3-29"></span></code></pre></div>
<p>Ahora tenemos el mismo modelo, que me a servir tanto para pasarle como argumentos escalares como vectores, nótese que la función Normal tomo como argumento la desviación típica, mientrar que MvNormal toma una matriz de varianzas/covarianzas. Se aconseja el uso de MvNormal en Turing pues mejora el tiempo de cálculo de la posteriori.</p>
<p>Obtenemos la posteriori de los parámetros, pasándole como datos el dataset de Advertising. Es importante que la columna de la variable dependiente se pase como <code>NamedTuple</code>, esto se puede hacer en julia usando <code>(; vector_y)</code> .</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"></span>
<span id="cb4-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># utilizamos 4 cadenas con n_samples = 2000  para cada una</span></span>
<span id="cb4-3"></span>
<span id="cb4-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># usamos | para pasarle los datos de Y que no habiamos pasado en la especificacion del modelo</span></span>
<span id="cb4-5"></span>
<span id="cb4-6">chain <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mm_model_sin_sales</span>(mm.TV, mm.radio, mm.newspaper) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> (; mm.sales),</span>
<span id="cb4-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">NUTS</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.65</span>),<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">MCMCThreads</span>(),</span>
<span id="cb4-8">    <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2_000</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)</span>
<span id="cb4-9">    </span></code></pre></div>
<p>Y en unos 18 segundos tenemos nuestra MCMC Chain.</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Chains</span> MCMC chain <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">2000×17×4</span> Array{Float64, 3}<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">:</span></span>
<span id="cb5-2"></span>
<span id="cb5-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Iterations</span>        = 1001:1:3000</span>
<span id="cb5-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Number</span> of chains  = 4</span>
<span id="cb5-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Samples</span> per chain = 2000</span>
<span id="cb5-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Wall</span> duration     = 18.06 seconds</span>
<span id="cb5-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Compute</span> duration  = 71.54 seconds</span>
<span id="cb5-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parameters</span>        = a, tv_coef, radio_coef, newspaper_coef, σ₁</span>
<span id="cb5-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">internals</span>         = lp, n_steps, is_accept, acceptance_rate, log_density, hamiltonian_energy, hamiltonian_energy_error, max_hamiltonian_energy_error, tree_depth, numerical_error, step_size, nom_step_size</span>
<span id="cb5-10"></span>
<span id="cb5-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Summary</span> Statistics</span>
<span id="cb5-12">      <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parameters</span>      mean       std   naive_se      mcse         ess      rhat   ess_per_sec </span>
<span id="cb5-13">          <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Symbol</span>   Float64   Float64    Float64   Float64     Float64   Float64       Float64 </span>
<span id="cb5-14"></span>
<span id="cb5-15">               <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">a</span>    2.0952    0.2712     0.0030    0.0038   5123.1176    0.9999       71.6139</span>
<span id="cb5-16">         <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tv_coef</span>    0.0481    0.0013     0.0000    0.0000   7529.0954    0.9998      105.2461</span>
<span id="cb5-17">      <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">radio_coef</span>    0.1983    0.0087     0.0001    0.0001   5230.9995    1.0000       73.1220</span>
<span id="cb5-18">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">newspaper_coef</span>    0.0040    0.0059     0.0001    0.0001   6203.9490    1.0002       86.7224</span>
<span id="cb5-19">              <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">σ₁</span>    1.7205    0.0874     0.0010    0.0011   5441.9631    1.0000       76.0709</span>
<span id="cb5-20"></span>
<span id="cb5-21"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Quantiles</span></span>
<span id="cb5-22">      <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parameters</span>      2.5%     25.0%     50.0%     75.0%     97.5% </span>
<span id="cb5-23">          <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Symbol</span>   Float64   Float64   Float64   Float64   Float64 </span>
<span id="cb5-24"></span>
<span id="cb5-25">               <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">a</span>    1.5635    1.9104    2.0982    2.2788    2.6182</span>
<span id="cb5-26">         <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tv_coef</span>    0.0455    0.0472    0.0481    0.0489    0.0508</span>
<span id="cb5-27">      <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">radio_coef</span>    0.1814    0.1923    0.1983    0.2042    0.2155</span>
<span id="cb5-28">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">newspaper_coef</span>   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-0.0077</span>    0.0001    0.0040    0.0078    0.0157</span>
<span id="cb5-29">              <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">σ₁</span>    1.5585    1.6607    1.7169    1.7781    1.8997</span></code></pre></div>
<p>Vale, estupendo,en <code>chain</code> tenemos las 8000 samples para cada uno de los 5 parámetros , y también las de temas del ajuste interno por HMC, de ahí lo de (2000×17×4 Array{Float64, 3}).<br>
Pero ¿cómo podemos predecir para nuevos datos?</p>
<p>Pues podemos pasarle simplemente 3 escalares correspondientes a las variables TV, radio y newspaper.</p>
<p>Es necesario pasarle a la función predict la llamada al modelo con los nuevos datos <code>mm_model_sin_sales(tv_valor, radio_valor,newspaper_valor)</code> y las posterioris (la cadena MCMC) de los parámetros.</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"></span>
<span id="cb6-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">julia</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> predict<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mm_model_sin_sales</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">2,</span> 5, 7<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">,</span> chain<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb6-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Chains</span> MCMC chain <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">2000×1×4</span> Array{Float64, 3}<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">:</span></span>
<span id="cb6-4"></span>
<span id="cb6-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Iterations</span>        = 1:1:2000</span>
<span id="cb6-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Number</span> of chains  = 4</span>
<span id="cb6-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Samples</span> per chain = 2000</span>
<span id="cb6-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parameters</span>        = sales</span>
<span id="cb6-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">internals</span>         = </span>
<span id="cb6-10"></span>
<span id="cb6-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Summary</span> Statistics</span>
<span id="cb6-12">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parameters</span>      mean       std   naive_se      mcse         ess      rhat </span>
<span id="cb6-13">      <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Symbol</span>   Float64   Float64    Float64   Float64     Float64   Float64 </span>
<span id="cb6-14"></span>
<span id="cb6-15">       <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">sales</span>    3.2203    1.7435     0.0195    0.0176   8053.9924    1.0000</span>
<span id="cb6-16"></span>
<span id="cb6-17"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Quantiles</span></span>
<span id="cb6-18">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parameters</span>      2.5%     25.0%     50.0%     75.0%     97.5% </span>
<span id="cb6-19">      <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Symbol</span>   Float64   Float64   Float64   Float64   Float64 </span>
<span id="cb6-20"></span>
<span id="cb6-21">       <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">sales</span>   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-0.1863</span>    2.0441    3.2553    4.4030    6.6547</span></code></pre></div>
<p>También podemos pasarle más valores</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"></span>
<span id="cb7-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">julia</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> mm_last = last<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mm,</span> 3<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb7-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">3×5</span> DataFrame</span>
<span id="cb7-4"> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Row</span> │ Column1  TV       radio    newspaper  sales   </span>
<span id="cb7-5">     <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│</span> Int64    Float64  Float64  Float64    Float64 </span>
<span id="cb7-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">─────┼───────────────────────────────────────────────</span></span>
<span id="cb7-7">   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">1</span> │     198    177.0      9.3        6.4     12.8</span>
<span id="cb7-8">   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">2</span> │     199    283.6     42.0       66.2     25.5</span>
<span id="cb7-9">   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">3</span> │     200    232.1      8.6        8.7     13.4</span>
<span id="cb7-10"></span>
<span id="cb7-11"></span>
<span id="cb7-12"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">julia</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> predicciones = predict<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mm_model_sin_sales</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mm_last.TV,</span> mm_last.radio, mm_last.newspaper<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">,</span> chain<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb7-13"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Chains</span> MCMC chain <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">2000×3×4</span> Array{Float64, 3}<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">:</span></span>
<span id="cb7-14"></span>
<span id="cb7-15"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Iterations</span>        = 1:1:2000</span>
<span id="cb7-16"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Number</span> of chains  = 4</span>
<span id="cb7-17"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Samples</span> per chain = 2000</span>
<span id="cb7-18"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parameters</span>        = sales[1], sales[2], sales[3]</span>
<span id="cb7-19"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">internals</span>         = </span>
<span id="cb7-20"></span>
<span id="cb7-21"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Summary</span> Statistics</span>
<span id="cb7-22">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parameters</span>      mean       std   naive_se      mcse         ess      rhat </span>
<span id="cb7-23">      <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Symbol</span>   Float64   Float64    Float64   Float64     Float64   Float64 </span>
<span id="cb7-24"></span>
<span id="cb7-25">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span>   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">12.5192</span>    1.7427     0.0195    0.0170   8270.6268    1.0000</span>
<span id="cb7-26">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span>   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">24.3266</span>    1.7560     0.0196    0.0222   7720.4172    1.0001</span>
<span id="cb7-27">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span>   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">14.9901</span>    1.7327     0.0194    0.0188   8039.4940    0.9999</span>
<span id="cb7-28"></span>
<span id="cb7-29"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Quantiles</span></span>
<span id="cb7-30">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parameters</span>      2.5%     25.0%     50.0%     75.0%     97.5% </span>
<span id="cb7-31">      <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Symbol</span>   Float64   Float64   Float64   Float64   Float64 </span>
<span id="cb7-32"></span>
<span id="cb7-33">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span>    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">9.0888</span>   11.3344   12.5241   13.6990   15.9571</span>
<span id="cb7-34">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span>   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">20.8369</span>   23.1519   24.3414   25.4967   27.7429</span>
<span id="cb7-35">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sales</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span>   <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">11.6549</span>   13.8304   14.9617   16.1471   18.3733</span></code></pre></div>
<p>Podría quedarme con las predicciones para sales[1] y calcular el intervalo de credibilidad el 80%</p>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">julia</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> quantile<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">reshape</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Array</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">predicciones</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sales[1]"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">,</span> 8000<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">,</span> [0.1, 0.5, 0.9]<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb8-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">3-element</span> Vector{Float64}:</span>
<span id="cb8-3"> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">10.28185973755853</span></span>
<span id="cb8-4"> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">12.524091380928425</span></span>
<span id="cb8-5"> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">14.74877121738519</span></span></code></pre></div>
</section>
<section id="guardar-cadena-y-predecir" class="level2">
<h2 class="anchored" data-anchor-id="guardar-cadena-y-predecir">Guardar cadena y predecir</h2>
<p>Ahora viene la parte que nos interesa a los que nos dedicamos a esto y queremos usar un modelo entrenado hace 6 meses sobre datos de hoy. Guardar lo que hicimos y predecir sin necesidad de reentrenar.</p>
<p>Guardamos la posteriori</p>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"></span>
<span id="cb9-2"></span>
<span id="cb9-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">write</span>( <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cadena.jls"</span>, chain)</span></code></pre></div>
<p>Y ahora, cerramos julia y abrimos de nuevo.</p>
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1"></span>
<span id="cb10-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">LinearAlgebra</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Plots</span></span>
<span id="cb10-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Turing</span></span>
<span id="cb10-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">ReverseDiff</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Memoization </span></span>
<span id="cb10-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">DataFrames</span></span>
<span id="cb10-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">CSV</span></span>
<span id="cb10-7"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Random</span></span>
<span id="cb10-8"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">StatsPlots</span></span>
<span id="cb10-9"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Distributions</span></span>
<span id="cb10-10"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">StatsBase</span></span>
<span id="cb10-11"></span>
<span id="cb10-12"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Logging</span></span>
<span id="cb10-13"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Logging</span>.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">disable_logging</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Logging</span>.Warn)</span>
<span id="cb10-14"></span>
<span id="cb10-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># posteriori guardada</span></span>
<span id="cb10-16">chain <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cadena.jls"</span>, Chains)</span>
<span id="cb10-17"></span>
<span id="cb10-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Especificación del modelo (esto puede ir en otro fichero .jl)</span></span>
<span id="cb10-19"></span>
<span id="cb10-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Si tengo en un fichero jl el código de @model, lo puedo incluir ahí. </span></span>
<span id="cb10-21"></span>
<span id="cb10-22"></span>
<span id="cb10-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ruta = "especificacion_modelo.jl"</span></span>
<span id="cb10-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># include(ruta)</span></span>
<span id="cb10-25"></span>
<span id="cb10-26"></span>
<span id="cb10-27"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">@model</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mm_model_sin_sales</span>(TV<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Real</span>, radio<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Real</span>, newspaper<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Real</span>)</span>
<span id="cb10-28">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Prior coeficientes</span></span>
<span id="cb10-29">    a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb10-30">    tv_coef  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb10-31">    radio_coef  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb10-32">    newspaper_coef  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb10-33">    σ₁ <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Gamma</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb10-34">    </span>
<span id="cb10-35">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># antes </span></span>
<span id="cb10-36">    mu <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> tv_coef <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> TV <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> radio_coef <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> radio <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> newspaper_coef <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> newspaper </span>
<span id="cb10-37">    sales <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(mu, σ₁)</span>
<span id="cb10-38"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb10-39"></span>
<span id="cb10-40"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">@model</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mm_model_sin_sales</span>(TV<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">AbstractVector{&lt;:Real}</span>,</span>
<span id="cb10-41">     radio<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">AbstractVector{&lt;:Real}</span>,</span>
<span id="cb10-42">      newspaper<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">AbstractVector{&lt;:Real}</span>)</span>
<span id="cb10-43">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Prior coeficientes</span></span>
<span id="cb10-44">    a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb10-45">    tv_coef  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb10-46">    radio_coef  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb10-47">    newspaper_coef  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb10-48">    σ₁ <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Gamma</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb10-49">           </span>
<span id="cb10-50">    mu <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.+</span> tv_coef <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.*</span> TV <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.+</span> radio_coef <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.*</span> radio <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.+</span> newspaper_coef <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.*</span> newspaper </span>
<span id="cb10-51">    sales <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">MvNormal</span>(mu, σ₁<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> I)</span>
<span id="cb10-52"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb10-53"></span>
<span id="cb10-54"></span>
<span id="cb10-55"></span>
<span id="cb10-56"></span></code></pre></div>
<p>Y aqui viene la parte importante. En la que utilizamos el modelo guardado, que no es más que las posterioris de los parámetros que hemos salvado en disco previamente.</p>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb11-1"></span>
<span id="cb11-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## predecimos la misma observación , fila 198 del dataset</span></span>
<span id="cb11-3"></span>
<span id="cb11-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mm_model_sin_sales</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">177</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">9.3</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6.4</span> ), chain)</span></code></pre></div>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Chains</span> MCMC chain <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">2000×1×4</span> Array{Float64, 3}<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">:</span></span>
<span id="cb12-2"></span>
<span id="cb12-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Iterations</span>        = 1:1:2000</span>
<span id="cb12-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Number</span> of chains  = 4</span>
<span id="cb12-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Samples</span> per chain = 2000</span>
<span id="cb12-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parameters</span>        = sales</span>
<span id="cb12-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">internals</span>         = </span>
<span id="cb12-8"></span>
<span id="cb12-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Summary</span> Statistics</span>
<span id="cb12-10">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parameters</span>      mean       std   naive_se      mcse         ess      rhat </span>
<span id="cb12-11">      <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Symbol</span>   Float64   Float64    Float64   Float64     Float64   Float64 </span>
<span id="cb12-12"></span>
<span id="cb12-13">       <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">sales</span>   12.4723    1.7285     0.0193    0.0186   8326.7650    0.9998</span>
<span id="cb12-14"></span>
<span id="cb12-15"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Quantiles</span></span>
<span id="cb12-16">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">parameters</span>      2.5%     25.0%     50.0%     75.0%     97.5% </span>
<span id="cb12-17">      <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Symbol</span>   Float64   Float64   Float64   Float64   Float64 </span>
<span id="cb12-18"></span>
<span id="cb12-19">       <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">sales</span>    9.0844   11.3106   12.4727   13.6334   15.7902</span>
<span id="cb12-20">       </span></code></pre></div>
<p>Y voilá. Sabiendo que se puede guardar la posteriori y usarla luego , veo bastante factible poder llegar al objetivo de crear un “motor de predicción” de modelos bayesianos con Turing, que sea un ejecutable y que tome como argumentos la posteriori guardada de un modelo ajustado y en texto (con extensión jl ) y escriba el resultado en disco. Y lo dicho, que pueda desplegar este ejecutable en cualquier sistema linux, sin tener que instalar docker ni nada, solo hacer un <code>unzip</code></p>


</section>

 ]]></description>
  <category>Julia</category>
  <category>análisis bayesiano</category>
  <category>2022</category>
  <guid>https://muestrear-no-es-pecado-rebranding.netlify.app/2022/07/01/palabras-para-julia-parte-4-n/index.html</guid>
  <pubDate>Thu, 30 Jun 2022 22:00:00 GMT</pubDate>
</item>
</channel>
</rss>
