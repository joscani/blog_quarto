<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="José Luis Cañadas Reche">
<meta name="dcterms.date" content="2023-01-29">

<title>Muestrear no es pecado - Explicatividad no usual</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<script src="../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script src="../../../../site_libs/htmlwidgets-1.6.0/htmlwidgets.js"></script>
<link href="../../../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../../../../site_libs/datatables-binding-0.26/datatables.js"></script>
<script src="../../../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../../../site_libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../../../../site_libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../../../../site_libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="../../../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title">Muestrear no es pecado</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../blog.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/joscani" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/joscani" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://fosstodon.org/@joscani" rel="" target=""><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../../../blog.xml" rel="" target=""><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-resources" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Resources</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-resources">    
        <li>
    <a class="dropdown-item" href="https://rweekly.org/" rel="" target="">
 <span class="dropdown-text">R Weekly</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://www.r-bloggers.com/" rel="" target="">
 <span class="dropdown-text">R Bloggers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://www.datanalytics.com/" rel="" target="">
 <span class="dropdown-text">Datanalytics</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../../../archive.html" rel="" target="">
 <span class="menu-text">Archivo</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#intro" id="toc-intro" class="nav-link active" data-scroll-target="#intro">Intro</a></li>
  <li><a href="#ejemplo-1" id="toc-ejemplo-1" class="nav-link" data-scroll-target="#ejemplo-1">Ejemplo 1</a></li>
  <li><a href="#todo-junto." id="toc-todo-junto." class="nav-link" data-scroll-target="#todo-junto.">Todo junto.</a></li>
  <li><a href="#agrupando-observaciones-con-similar-importancia-de-variables" id="toc-agrupando-observaciones-con-similar-importancia-de-variables" class="nav-link" data-scroll-target="#agrupando-observaciones-con-similar-importancia-de-variables">Agrupando observaciones con similar importancia de variables</a></li>
  <li><a href="#ejemplo-2" id="toc-ejemplo-2" class="nav-link" data-scroll-target="#ejemplo-2">Ejemplo 2</a>
  <ul class="collapse">
  <li><a href="#modelo-con-ranger" id="toc-modelo-con-ranger" class="nav-link" data-scroll-target="#modelo-con-ranger">Modelo con ranger</a></li>
  <li><a href="#agrupando" id="toc-agrupando" class="nav-link" data-scroll-target="#agrupando">Agrupando</a></li>
  </ul></li>
  <li><a href="#nota" id="toc-nota" class="nav-link" data-scroll-target="#nota">Nota</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Explicatividad no usual</h1>
  <div class="quarto-categories">
    <div class="quarto-category">estadística</div>
    <div class="quarto-category">ranger</div>
    <div class="quarto-category">Explicatividad</div>
    <div class="quarto-category">2023</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>José Luis Cañadas Reche </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 29, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="intro" class="level2">
<h2 class="anchored" data-anchor-id="intro">Intro</h2>
<p>Buscando en el portátil sobre otras cosas me he encontrado un pequeño ejercicio para implementar la idea que se comenta <a href="https://www.datanalytics.com/2020/10/14/explicacion-de-los-scorings-de-ciertos-modelos/">aquí</a></p>
<p>La idea es muy sencilla, tal y como comenta Carlos. Si tengo un modelo que sea tipo randomForest</p>
<ul>
<li>De cada observación a predecir se anota en qué nodo terminal ha caído en cada árbol</li>
<li>Para cada nodo terminal en cada árbol se recorre el camino hacia “arriba” para saber qué variables están implicadas en ese nodo</li>
<li>Se cuenta para cada nodo terminal el número de veces que aparece una variable en cada árbol (o se da más importancia a las qeu estén más altos en el árbol)</li>
<li>Se agrega de alguna manera para cada observación qué variables y cómo de importantes están en los caminos de los nodos terminales en los que han caído.</li>
<li>Esa info sería la importancia de las variables a nivel individual</li>
<li>Se podría clusterizar observaciones con similares variables importantes</li>
</ul>
<p>Antes de nada, sí, ya sé que existen cosas como los shap values y que a partir de ellos se puede hacer algo parecido. Pero no está de más de vez en cuando buscarse uno las habichueleas de forma más artesanal..</p>
</section>
<section id="ejemplo-1" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-1">Ejemplo 1</h2>
<p>Pues ale, vamos a hacerlo con iris, tan denostado hoy en día. Pobre Fisher o Anderson si levantaran la cabeza.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ranger)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ya veremos para que usamos furrr y FactoMineR</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(furrr) </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FactoMineR)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(factoextra)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 5 arbolitos tiene mi.. </span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">47</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>rg_iris <span class="ot">&lt;-</span>  <span class="fu">ranger</span>(Species <span class="sc">~</span> . , <span class="at">data =</span> iris, <span class="at">num.trees =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Info del árbol 3</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(arbol3 <span class="ot">&lt;-</span> <span class="fu">treeInfo</span>(rg_iris, <span class="at">tree =</span> <span class="dv">3</span>))</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    nodeID leftChild rightChild splitvarID splitvarName splitval terminal</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1       0         1          2          0 Sepal.Length     5.55    FALSE</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2       1         3          4          2 Petal.Length     2.45    FALSE</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3       2         5          6          3  Petal.Width     1.70    FALSE</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4       3        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5       4         7          8          2 Petal.Length     4.25    FALSE</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6       5         9         10          1  Sepal.Width     3.60    FALSE</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7       6        11         12          0 Sepal.Length     6.00    FALSE</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8       7        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9       8        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10      9        13         14          2 Petal.Length     4.95    FALSE</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11     10        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12     11        15         16          2 Petal.Length     4.85    FALSE</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13     12        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14     13        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15     14        17         18          3  Petal.Width     1.55    FALSE</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16     15        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17     16        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18     17        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19     18        19         20          2 Petal.Length     5.45    FALSE</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20     19        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 21     20        NA         NA         NA         &lt;NA&gt;       NA     TRUE</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    prediction</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1        &lt;NA&gt;</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2        &lt;NA&gt;</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3        &lt;NA&gt;</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4      setosa</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5        &lt;NA&gt;</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6        &lt;NA&gt;</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7        &lt;NA&gt;</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  versicolor</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9   virginica</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10       &lt;NA&gt;</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11     setosa</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12       &lt;NA&gt;</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13  virginica</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14 versicolor</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15       &lt;NA&gt;</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 versicolor</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17  virginica</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18  virginica</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19       &lt;NA&gt;</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 versicolor</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 21  virginica</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Analizando un poco, vemos que el nodo raíz (0) se parte por la variable <code>Sepal.Length</code>. Luego el nodo 1 se bifurca a la izquierda hacia el 3 y a la derecha hacia el 4, siendo <code>Petal.Length</code> la variable que decide esa partición.</p>
<p>La idea sería recorrer el árbol partiendo de un nodo terminal y ver qué camino ha seguido. Para eso hacemos el siguiente código</p>
<p>Hacemos un ejemplo, partiendo del nodo terminal 8</p>
<p>Camino del Nodo 8</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>nodo_terminal <span class="ot">&lt;-</span>  <span class="dv">8</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>nodos <span class="ot">&lt;-</span> nodo_terminal <span class="co"># vamos a ir sobreescribiendo la variable nodos hasta llegar al nodo raíz 0 </span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>variables <span class="ot">&lt;-</span> <span class="fu">vector</span>() <span class="co"># guardamos el nombre de las variables de split</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (<span class="sc">!</span><span class="dv">0</span> <span class="sc">%in%</span> nodos) {</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span> arbol3 <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(leftChild <span class="sc">%in%</span> nodos <span class="sc">|</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        rightChild <span class="sc">%in%</span> nodos)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">str_glue</span>(<span class="st">"Nodo hijo: {nodos}"</span>))</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    nodos <span class="ot">&lt;-</span> <span class="fu">unique</span>(tmp<span class="sc">$</span>nodeID)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">str_glue</span>(<span class="st">"Nodo padre: {nodos}"</span>))</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">str_glue</span>(<span class="st">"variable de split en nodo padre: {tmp$splitvarName}"</span>))</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    variables <span class="ot">&lt;-</span> <span class="fu">c</span>(variables, <span class="fu">unique</span>(tmp<span class="sc">$</span>splitvarName)) <span class="co"># la última variable de este vector es la que está más arriba en el árbol</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Nodo hijo: 8</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Nodo padre: 4</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; variable de split en nodo padre: Petal.Length</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Nodo hijo: 4</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Nodo padre: 1</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; variable de split en nodo padre: Petal.Length</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Nodo hijo: 1</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Nodo padre: 0</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; variable de split en nodo padre: Sepal.Length</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Y vemos que para llegar al nodo terminal 8 ha utilizado dos veces la variable <code>Petal.Length</code> y una la variable <code>Sepal.Length</code></p>
<p>Nos creamos una funcioncita para esto, donde al final construyo un data.frame donde guardo eel nodo terminal que estamos investigando, las variables que se han usado para llegar a ese nodo y una variable peso que se calcula asignando un peso igual 1 a la variable que está más alta en el árbol y menos a las demás. Si hay 4 variables se crea un vector c(4,3,2,1) en orden de más alta en el árbol a más baja y se divide por el número de variables. así se tendrían estos pesos 1, 0.75, 0.5, 0.25</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>extraerVariables_nodos <span class="ot">&lt;-</span> <span class="cf">function</span>(nodo_terminal, info_arbol) {</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  nodos <span class="ot">&lt;-</span> nodo_terminal</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  variables <span class="ot">&lt;-</span> <span class="fu">vector</span>()</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (<span class="sc">!</span><span class="dv">0</span> <span class="sc">%in%</span> nodos) {</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span> info_arbol <span class="sc">%&gt;%</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(leftChild <span class="sc">%in%</span> nodos <span class="sc">|</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        rightChild <span class="sc">%in%</span> nodos)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    variables <span class="ot">&lt;-</span> <span class="fu">c</span>(variables, <span class="fu">unique</span>(tmp<span class="sc">$</span>splitvarName))</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    nodos <span class="ot">&lt;-</span> <span class="fu">unique</span>(tmp<span class="sc">$</span>nodeID)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">data.frame</span>(</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>          <span class="at">nodo_terminal =</span> nodo_terminal,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>          <span class="at">variables =</span> variables,</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>          <span class="at">peso =</span> <span class="fu">seq_along</span>(variables) <span class="sc">/</span> <span class="fu">sum</span>(<span class="fu">length</span>(variables))</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Comprobamos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">extraerVariables_nodos</span>(<span class="at">nodo_terminal =</span> <span class="dv">8</span>, <span class="at">info_arbol =</span> arbol3)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   nodo_terminal    variables      peso</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1             8 Petal.Length 0.3333333</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2             8 Petal.Length 0.6666667</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3             8 Sepal.Length 1.0000000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Ok. Lo suyo sería extraer la misma info pero para cada nodo terminal del árbol que estamos considerando. Pues nos creamos la funcioncita, que dado un modelo y un número de árbol, saque la info anterior para todos los nodos terminales</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>extraerVariablePorArbol <span class="ot">&lt;-</span> <span class="cf">function</span>(modelo, arbol, <span class="at">verbose =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  info_arbol <span class="ot">&lt;-</span> <span class="fu">treeInfo</span>(modelo, arbol)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  nodos_terminales <span class="ot">&lt;-</span> <span class="fu">treeInfo</span>(modelo, arbol) <span class="sc">%&gt;%</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(terminal <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(nodeID) <span class="sc">%&gt;%</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unique</span>()</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a> <span class="cf">if</span>(verbose) <span class="fu">print</span>(nodos_terminales)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  variables_por_arbol <span class="ot">&lt;-</span> <span class="fu">map_df</span>(</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    nodos_terminales,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">function</span>(nodos) {</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">extraerVariables_nodos</span>(nodos, info_arbol)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  variables_por_arbol<span class="sc">$</span>arbol <span class="ot">&lt;-</span> arbol</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  variables_por_arbol</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Comprobemos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># arbol 3 </span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>(importancia_individual_arbol3 <span class="ot">&lt;-</span> <span class="fu">extraerVariablePorArbol</span>(rg_iris, <span class="dv">3</span>))</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    nodo_terminal    variables      peso arbol</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1              3 Petal.Length 0.5000000     3</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2              3 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3              7 Petal.Length 0.3333333     3</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4              7 Petal.Length 0.6666667     3</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5              7 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6              8 Petal.Length 0.3333333     3</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7              8 Petal.Length 0.6666667     3</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8              8 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9             10  Sepal.Width 0.3333333     3</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10            10  Petal.Width 0.6666667     3</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11            10 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12            12 Sepal.Length 0.3333333     3</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13            12  Petal.Width 0.6666667     3</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14            12 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15            13 Petal.Length 0.2500000     3</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16            13  Sepal.Width 0.5000000     3</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17            13  Petal.Width 0.7500000     3</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18            13 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19            15 Petal.Length 0.2500000     3</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20            15 Sepal.Length 0.5000000     3</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 21            15  Petal.Width 0.7500000     3</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 22            15 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23            16 Petal.Length 0.2500000     3</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 24            16 Sepal.Length 0.5000000     3</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 25            16  Petal.Width 0.7500000     3</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 26            16 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 27            17  Petal.Width 0.2000000     3</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 28            17 Petal.Length 0.4000000     3</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 29            17  Sepal.Width 0.6000000     3</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 30            17  Petal.Width 0.8000000     3</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 31            17 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 32            19 Petal.Length 0.1666667     3</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 33            19  Petal.Width 0.3333333     3</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 34            19 Petal.Length 0.5000000     3</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 35            19  Sepal.Width 0.6666667     3</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 36            19  Petal.Width 0.8333333     3</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 37            19 Sepal.Length 1.0000000     3</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 38            20 Petal.Length 0.1666667     3</span></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 39            20  Petal.Width 0.3333333     3</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 40            20 Petal.Length 0.5000000     3</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 41            20  Sepal.Width 0.6666667     3</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 42            20  Petal.Width 0.8333333     3</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 43            20 Sepal.Length 1.0000000     3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Solo queda extraer lo mismo pero para cada arbolito</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>extraerVariablesPorModelo <span class="ot">&lt;-</span> <span class="cf">function</span>(modelo, <span class="at">parallel =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  arboles <span class="ot">&lt;-</span> modelo<span class="sc">$</span>num.trees</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (parallel) {</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Si hay muchos árboles usamos procesamiento en paralelo</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    future<span class="sc">::</span><span class="fu">plan</span>(multisession)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    furrr<span class="sc">::</span><span class="fu">future_map_dfr</span>(</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">seq_len</span>(arboles),</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>      <span class="cf">function</span>(arbol) {</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">extraerVariablePorArbol</span>(modelo, <span class="at">arbol =</span> arbol)</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span>{</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">map_df</span>(</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>          <span class="fu">seq_len</span>(arboles),</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>          <span class="cf">function</span>(arbol) {</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>              <span class="fu">extraerVariablePorArbol</span>(modelo, <span class="at">arbol =</span> arbol)</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>      )  </span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>(importancia_individual_todos_arboles <span class="ot">&lt;-</span>  <span class="fu">extraerVariablesPorModelo</span>(rg_iris, <span class="at">parallel =</span> <span class="cn">FALSE</span>))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     nodo_terminal    variables      peso arbol</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1               1  Petal.Width 1.0000000     1</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2               5 Petal.Length 0.3333333     1</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3               5  Petal.Width 0.6666667     1</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4               5  Petal.Width 1.0000000     1</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5               8  Petal.Width 0.3333333     1</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6               8  Petal.Width 0.6666667     1</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7               8  Petal.Width 1.0000000     1</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8               9  Petal.Width 0.2500000     1</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9               9 Petal.Length 0.5000000     1</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10              9  Petal.Width 0.7500000     1</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11              9  Petal.Width 1.0000000     1</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12             10  Petal.Width 0.2500000     1</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13             10 Petal.Length 0.5000000     1</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14             10  Petal.Width 0.7500000     1</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15             10  Petal.Width 1.0000000     1</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16             11 Petal.Length 0.2500000     1</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17             11  Petal.Width 0.5000000     1</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18             11  Petal.Width 0.7500000     1</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19             11  Petal.Width 1.0000000     1</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20             12 Petal.Length 0.2500000     1</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 21             12  Petal.Width 0.5000000     1</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 22             12  Petal.Width 0.7500000     1</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23             12  Petal.Width 1.0000000     1</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 24              3  Petal.Width 0.5000000     2</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 25              3 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 26              4  Petal.Width 0.5000000     2</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 27              4 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 28              8  Sepal.Width 0.3333333     2</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 29              8  Petal.Width 0.6666667     2</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 30              8 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 31             10 Sepal.Length 0.3333333     2</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 32             10  Petal.Width 0.6666667     2</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 33             10 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 34             11 Petal.Length 0.2500000     2</span></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 35             11  Sepal.Width 0.5000000     2</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 36             11  Petal.Width 0.7500000     2</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 37             11 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 38             13  Sepal.Width 0.2500000     2</span></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 39             13 Sepal.Length 0.5000000     2</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 40             13  Petal.Width 0.7500000     2</span></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 41             13 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 42             14  Sepal.Width 0.2500000     2</span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 43             14 Sepal.Length 0.5000000     2</span></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 44             14  Petal.Width 0.7500000     2</span></span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 45             14 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 46             15  Sepal.Width 0.2000000     2</span></span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 47             15 Petal.Length 0.4000000     2</span></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 48             15  Sepal.Width 0.6000000     2</span></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 49             15  Petal.Width 0.8000000     2</span></span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 50             15 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 51             17  Sepal.Width 0.1666667     2</span></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 52             17  Sepal.Width 0.3333333     2</span></span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 53             17 Petal.Length 0.5000000     2</span></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 54             17  Sepal.Width 0.6666667     2</span></span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 55             17  Petal.Width 0.8333333     2</span></span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 56             17 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 57             18  Sepal.Width 0.1666667     2</span></span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 58             18  Sepal.Width 0.3333333     2</span></span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 59             18 Petal.Length 0.5000000     2</span></span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 60             18  Sepal.Width 0.6666667     2</span></span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 61             18  Petal.Width 0.8333333     2</span></span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 62             18 Sepal.Length 1.0000000     2</span></span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 63              3 Petal.Length 0.5000000     3</span></span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 64              3 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 65              7 Petal.Length 0.3333333     3</span></span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 66              7 Petal.Length 0.6666667     3</span></span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 67              7 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 68              8 Petal.Length 0.3333333     3</span></span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 69              8 Petal.Length 0.6666667     3</span></span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 70              8 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 71             10  Sepal.Width 0.3333333     3</span></span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 72             10  Petal.Width 0.6666667     3</span></span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 73             10 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-76"><a href="#cb10-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 74             12 Sepal.Length 0.3333333     3</span></span>
<span id="cb10-77"><a href="#cb10-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 75             12  Petal.Width 0.6666667     3</span></span>
<span id="cb10-78"><a href="#cb10-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76             12 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-79"><a href="#cb10-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 77             13 Petal.Length 0.2500000     3</span></span>
<span id="cb10-80"><a href="#cb10-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 78             13  Sepal.Width 0.5000000     3</span></span>
<span id="cb10-81"><a href="#cb10-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 79             13  Petal.Width 0.7500000     3</span></span>
<span id="cb10-82"><a href="#cb10-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 80             13 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-83"><a href="#cb10-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 81             15 Petal.Length 0.2500000     3</span></span>
<span id="cb10-84"><a href="#cb10-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 82             15 Sepal.Length 0.5000000     3</span></span>
<span id="cb10-85"><a href="#cb10-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 83             15  Petal.Width 0.7500000     3</span></span>
<span id="cb10-86"><a href="#cb10-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 84             15 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-87"><a href="#cb10-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 85             16 Petal.Length 0.2500000     3</span></span>
<span id="cb10-88"><a href="#cb10-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 86             16 Sepal.Length 0.5000000     3</span></span>
<span id="cb10-89"><a href="#cb10-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 87             16  Petal.Width 0.7500000     3</span></span>
<span id="cb10-90"><a href="#cb10-90" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 88             16 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-91"><a href="#cb10-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 89             17  Petal.Width 0.2000000     3</span></span>
<span id="cb10-92"><a href="#cb10-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 90             17 Petal.Length 0.4000000     3</span></span>
<span id="cb10-93"><a href="#cb10-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 91             17  Sepal.Width 0.6000000     3</span></span>
<span id="cb10-94"><a href="#cb10-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 92             17  Petal.Width 0.8000000     3</span></span>
<span id="cb10-95"><a href="#cb10-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 93             17 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-96"><a href="#cb10-96" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 94             19 Petal.Length 0.1666667     3</span></span>
<span id="cb10-97"><a href="#cb10-97" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 95             19  Petal.Width 0.3333333     3</span></span>
<span id="cb10-98"><a href="#cb10-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 96             19 Petal.Length 0.5000000     3</span></span>
<span id="cb10-99"><a href="#cb10-99" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 97             19  Sepal.Width 0.6666667     3</span></span>
<span id="cb10-100"><a href="#cb10-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 98             19  Petal.Width 0.8333333     3</span></span>
<span id="cb10-101"><a href="#cb10-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 99             19 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-102"><a href="#cb10-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 100            20 Petal.Length 0.1666667     3</span></span>
<span id="cb10-103"><a href="#cb10-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 101            20  Petal.Width 0.3333333     3</span></span>
<span id="cb10-104"><a href="#cb10-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 102            20 Petal.Length 0.5000000     3</span></span>
<span id="cb10-105"><a href="#cb10-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 103            20  Sepal.Width 0.6666667     3</span></span>
<span id="cb10-106"><a href="#cb10-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 104            20  Petal.Width 0.8333333     3</span></span>
<span id="cb10-107"><a href="#cb10-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 105            20 Sepal.Length 1.0000000     3</span></span>
<span id="cb10-108"><a href="#cb10-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 106             1  Petal.Width 1.0000000     4</span></span>
<span id="cb10-109"><a href="#cb10-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 107             5  Petal.Width 0.3333333     4</span></span>
<span id="cb10-110"><a href="#cb10-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 108             5 Petal.Length 0.6666667     4</span></span>
<span id="cb10-111"><a href="#cb10-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 109             5  Petal.Width 1.0000000     4</span></span>
<span id="cb10-112"><a href="#cb10-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 110             6  Petal.Width 0.3333333     4</span></span>
<span id="cb10-113"><a href="#cb10-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 111             6 Petal.Length 0.6666667     4</span></span>
<span id="cb10-114"><a href="#cb10-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 112             6  Petal.Width 1.0000000     4</span></span>
<span id="cb10-115"><a href="#cb10-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 113             9 Sepal.Length 0.2500000     4</span></span>
<span id="cb10-116"><a href="#cb10-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 114             9 Petal.Length 0.5000000     4</span></span>
<span id="cb10-117"><a href="#cb10-117" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 115             9 Petal.Length 0.7500000     4</span></span>
<span id="cb10-118"><a href="#cb10-118" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 116             9  Petal.Width 1.0000000     4</span></span>
<span id="cb10-119"><a href="#cb10-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 117            10 Sepal.Length 0.2500000     4</span></span>
<span id="cb10-120"><a href="#cb10-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 118            10 Petal.Length 0.5000000     4</span></span>
<span id="cb10-121"><a href="#cb10-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 119            10 Petal.Length 0.7500000     4</span></span>
<span id="cb10-122"><a href="#cb10-122" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 120            10  Petal.Width 1.0000000     4</span></span>
<span id="cb10-123"><a href="#cb10-123" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 121            12  Petal.Width 0.2500000     4</span></span>
<span id="cb10-124"><a href="#cb10-124" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 122            12 Petal.Length 0.5000000     4</span></span>
<span id="cb10-125"><a href="#cb10-125" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 123            12 Petal.Length 0.7500000     4</span></span>
<span id="cb10-126"><a href="#cb10-126" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 124            12  Petal.Width 1.0000000     4</span></span>
<span id="cb10-127"><a href="#cb10-127" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 125            13 Sepal.Length 0.2000000     4</span></span>
<span id="cb10-128"><a href="#cb10-128" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 126            13  Petal.Width 0.4000000     4</span></span>
<span id="cb10-129"><a href="#cb10-129" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 127            13 Petal.Length 0.6000000     4</span></span>
<span id="cb10-130"><a href="#cb10-130" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 128            13 Petal.Length 0.8000000     4</span></span>
<span id="cb10-131"><a href="#cb10-131" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 129            13  Petal.Width 1.0000000     4</span></span>
<span id="cb10-132"><a href="#cb10-132" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 130            14 Sepal.Length 0.2000000     4</span></span>
<span id="cb10-133"><a href="#cb10-133" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 131            14  Petal.Width 0.4000000     4</span></span>
<span id="cb10-134"><a href="#cb10-134" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 132            14 Petal.Length 0.6000000     4</span></span>
<span id="cb10-135"><a href="#cb10-135" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 133            14 Petal.Length 0.8000000     4</span></span>
<span id="cb10-136"><a href="#cb10-136" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 134            14  Petal.Width 1.0000000     4</span></span>
<span id="cb10-137"><a href="#cb10-137" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 135             1 Petal.Length 1.0000000     5</span></span>
<span id="cb10-138"><a href="#cb10-138" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 136             6  Sepal.Width 0.3333333     5</span></span>
<span id="cb10-139"><a href="#cb10-139" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 137             6  Petal.Width 0.6666667     5</span></span>
<span id="cb10-140"><a href="#cb10-140" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 138             6 Petal.Length 1.0000000     5</span></span>
<span id="cb10-141"><a href="#cb10-141" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 139             8 Petal.Length 0.3333333     5</span></span>
<span id="cb10-142"><a href="#cb10-142" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 140             8  Petal.Width 0.6666667     5</span></span>
<span id="cb10-143"><a href="#cb10-143" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 141             8 Petal.Length 1.0000000     5</span></span>
<span id="cb10-144"><a href="#cb10-144" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 142            10 Petal.Length 0.2500000     5</span></span>
<span id="cb10-145"><a href="#cb10-145" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 143            10  Sepal.Width 0.5000000     5</span></span>
<span id="cb10-146"><a href="#cb10-146" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 144            10  Petal.Width 0.7500000     5</span></span>
<span id="cb10-147"><a href="#cb10-147" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 145            10 Petal.Length 1.0000000     5</span></span>
<span id="cb10-148"><a href="#cb10-148" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 146            11 Sepal.Length 0.2500000     5</span></span>
<span id="cb10-149"><a href="#cb10-149" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 147            11 Petal.Length 0.5000000     5</span></span>
<span id="cb10-150"><a href="#cb10-150" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 148            11  Petal.Width 0.7500000     5</span></span>
<span id="cb10-151"><a href="#cb10-151" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 149            11 Petal.Length 1.0000000     5</span></span>
<span id="cb10-152"><a href="#cb10-152" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 150            12 Sepal.Length 0.2500000     5</span></span>
<span id="cb10-153"><a href="#cb10-153" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 151            12 Petal.Length 0.5000000     5</span></span>
<span id="cb10-154"><a href="#cb10-154" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 152            12  Petal.Width 0.7500000     5</span></span>
<span id="cb10-155"><a href="#cb10-155" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 153            12 Petal.Length 1.0000000     5</span></span>
<span id="cb10-156"><a href="#cb10-156" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 154            14 Sepal.Length 0.2000000     5</span></span>
<span id="cb10-157"><a href="#cb10-157" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 155            14 Petal.Length 0.4000000     5</span></span>
<span id="cb10-158"><a href="#cb10-158" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 156            14  Sepal.Width 0.6000000     5</span></span>
<span id="cb10-159"><a href="#cb10-159" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 157            14  Petal.Width 0.8000000     5</span></span>
<span id="cb10-160"><a href="#cb10-160" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 158            14 Petal.Length 1.0000000     5</span></span>
<span id="cb10-161"><a href="#cb10-161" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 159            15 Petal.Length 0.1666667     5</span></span>
<span id="cb10-162"><a href="#cb10-162" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 160            15 Sepal.Length 0.3333333     5</span></span>
<span id="cb10-163"><a href="#cb10-163" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 161            15 Petal.Length 0.5000000     5</span></span>
<span id="cb10-164"><a href="#cb10-164" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 162            15  Sepal.Width 0.6666667     5</span></span>
<span id="cb10-165"><a href="#cb10-165" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 163            15  Petal.Width 0.8333333     5</span></span>
<span id="cb10-166"><a href="#cb10-166" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 164            15 Petal.Length 1.0000000     5</span></span>
<span id="cb10-167"><a href="#cb10-167" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 165            16 Petal.Length 0.1666667     5</span></span>
<span id="cb10-168"><a href="#cb10-168" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 166            16 Sepal.Length 0.3333333     5</span></span>
<span id="cb10-169"><a href="#cb10-169" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 167            16 Petal.Length 0.5000000     5</span></span>
<span id="cb10-170"><a href="#cb10-170" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 168            16  Sepal.Width 0.6666667     5</span></span>
<span id="cb10-171"><a href="#cb10-171" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 169            16  Petal.Width 0.8333333     5</span></span>
<span id="cb10-172"><a href="#cb10-172" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 170            16 Petal.Length 1.0000000     5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Ahora ya tenemos qué variables llevan a cada nodo terminal en cada árbol e incluso un peso que vale 1 si la variable es la primera en el “camino” hacia el nodo</p>
<p>Pero lo que nosotros queremos es para cada observación que predecimos, ver su nodo terminal en cada árbol y pegarle las variables importantes en cada nodo.</p>
<p>Sería algo así.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># lo hacems de momento con todo iris, en la realidad serían los datos de test o el conjunto de datos a predecir. </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>nodos_terminales <span class="ot">&lt;-</span> <span class="fu">predict</span>(rg_iris, iris, <span class="at">type =</span> <span class="st">"terminalNodes"</span>)<span class="sc">$</span>predictions</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># cada fila corresponde a una observación y cada columna al nodo terminal en cada árbol</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nodos_terminales, <span class="dv">10</span> )</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5]</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1,]    1    3    3    1    1</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2,]    1    3    3    1    1</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3,]    1    3    3    1    1</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4,]    1    3    3    1    1</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5,]    1    3    3    1    1</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6,]    1    3    3    1    1</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7,]    1    3    3    1    1</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8,]    1    3    3    1    1</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9,]    1    3    3    1    1</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10,]    1    3    3    1    1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Lo ponemos de otra forma.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># añadimos el id de la fila</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>nodos_terminales_df <span class="ot">&lt;-</span> nodos_terminales <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">"id"</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(nodos_terminales_df)[<span class="sc">-</span><span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span>(<span class="fu">ncol</span>(nodos_terminales_df)<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nodos_terminales_df)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   id 1 2 3 4 5</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  1 1 3 3 1 1</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2 1 3 3 1 1</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  3 1 3 3 1 1</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  4 1 3 3 1 1</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  5 1 3 3 1 1</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  6 1 3 3 1 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Pivotamos para facilitar luego las agregaciones por observaciones</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a> nodos_terminales_df <span class="ot">&lt;-</span> nodos_terminales_df <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>( <span class="fu">colnames</span>(nodos_terminales_df)[<span class="sc">-</span><span class="dv">1</span>], <span class="at">names_to =</span> <span class="st">"arbol"</span>, <span class="at">values_to =</span> <span class="st">"nodo_terminal"</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nodos_terminales_df)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   id    arbol nodo_terminal</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 1     1                 1</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 1     2                 3</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 1     3                 3</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 1     4                 1</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 1     5                 1</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 2     1                 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>a la importancia en todos los árboles lo llamo info_modelo</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>info_modelo <span class="ot">&lt;-</span>  importancia_individual_todos_arboles</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>info_modelo<span class="sc">$</span>arbol <span class="ot">&lt;-</span> <span class="fu">as.character</span>(info_modelo<span class="sc">$</span>arbol)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(info_modelo)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   nodo_terminal    variables      peso arbol</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1             1  Petal.Width 1.0000000     1</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2             5 Petal.Length 0.3333333     1</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3             5  Petal.Width 0.6666667     1</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4             5  Petal.Width 1.0000000     1</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5             8  Petal.Width 0.3333333     1</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6             8  Petal.Width 0.6666667     1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Hacemos el join con la info de cada nodo terminal para cada observación con las variables que llevan a cada nodo terminal (en cada árbol)</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>final <span class="ot">&lt;-</span> nodos_terminales_df <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(info_modelo, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"nodo_terminal"</span>, <span class="st">"arbol"</span>))</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># para el individuo 30</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>final <span class="sc">%&gt;%</span> </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(id <span class="sc">==</span> <span class="dv">30</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 7 × 5</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   id    arbol nodo_terminal variables     peso</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 30    1                 1 Petal.Width    1  </span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 30    2                 3 Petal.Width    0.5</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 30    2                 3 Sepal.Length   1  </span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 30    3                 3 Petal.Length   0.5</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 30    3                 3 Sepal.Length   1  </span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 30    4                 1 Petal.Width    1  </span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 30    5                 1 Petal.Length   1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Agregamos la info para cada individuo, de forma que contemos cuántas veces aparece cada variable, sumamos los pesos y ordenamos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> final <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(id, variables) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">total =</span> <span class="fu">n</span>(),</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">ponderado =</span> <span class="fu">sum</span>(peso)) <span class="sc">%&gt;%</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">importancia_caso =</span> total <span class="sc">/</span> <span class="fu">sum</span>(total),</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">importancia_ponderada =</span> ponderado <span class="sc">/</span> <span class="fu">sum</span>(ponderado)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">top_n</span>(<span class="dv">10</span>, importancia_ponderada) <span class="sc">%&gt;%</span> </span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">as.numeric</span>(id), <span class="fu">desc</span>(importancia_ponderada))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>res <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(id <span class="sc">==</span> <span class="dv">30</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 6</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   id    variables    total ponderado importancia_caso importancia_ponderada</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;        &lt;int&gt;     &lt;dbl&gt;            &lt;dbl&gt;                 &lt;dbl&gt;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 30    Petal.Width      3       2.5            0.429                 0.417</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 30    Sepal.Length     2       2              0.286                 0.333</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 30    Petal.Length     2       1.5            0.286                 0.25</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Y esa sería la importancia de las variables específica para la observación 30</p>
</section>
<section id="todo-junto." class="level2">
<h2 class="anchored" data-anchor-id="todo-junto.">Todo junto.</h2>
<p>Nos podemos crear una funcioncita que lo haga todo.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>getIndividualImportance <span class="ot">&lt;-</span>  <span class="cf">function</span>(modelo, data, <span class="at">top =</span> modelo<span class="sc">$</span>num.independent.variables, ...){</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a> params_ellipsis <span class="ot">&lt;-</span> <span class="fu">list</span>(...)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get terminalNodes</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  nodos_terminales <span class="ot">&lt;-</span> <span class="fu">predict</span>(modelo, data, <span class="at">type =</span> <span class="st">"terminalNodes"</span>)<span class="sc">$</span>predictions</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  nodos_terminales_df <span class="ot">&lt;-</span> nodos_terminales <span class="sc">%&gt;%</span> </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() </span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  nodos_terminales_df<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="fu">rownames</span>(data)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  nodos_terminales_df <span class="ot">&lt;-</span>  nodos_terminales_df <span class="sc">%&gt;%</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(id, <span class="fu">everything</span>())</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(nodos_terminales_df)[<span class="sc">-</span><span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span>(<span class="fu">ncol</span>(nodos_terminales_df)<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  nodos_terminales_df <span class="ot">&lt;-</span> nodos_terminales_df <span class="sc">%&gt;%</span> </span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>( <span class="fu">colnames</span>(nodos_terminales_df)[<span class="sc">-</span><span class="dv">1</span>], <span class="at">names_to =</span> <span class="st">"arbol"</span>, <span class="at">values_to =</span> <span class="st">"nodo_terminal"</span>)</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get variables_path for each tree and terminal node</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  info_modelo <span class="ot">&lt;-</span>  <span class="fu">extraerVariablesPorModelo</span>(modelo, <span class="at">parallel =</span> params_ellipsis<span class="sc">$</span>parallel)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  info_modelo<span class="sc">$</span>arbol <span class="ot">&lt;-</span> <span class="fu">as.character</span>(info_modelo<span class="sc">$</span>arbol)</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># join both</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  final <span class="ot">&lt;-</span> nodos_terminales_df <span class="sc">%&gt;%</span> </span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(info_modelo, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"nodo_terminal"</span>, <span class="st">"arbol"</span>))</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> final <span class="sc">%&gt;%</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(id, variables) <span class="sc">%&gt;%</span></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">total =</span> <span class="fu">n</span>(),</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">ponderado =</span> <span class="fu">sum</span>(peso)) <span class="sc">%&gt;%</span></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># para poder comparar luego observaciones, para cadda individuo, divido las veces qeu </span></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>     <span class="co"># aparece una variable por el total de veces que han aparecido todas sus variables</span></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">importancia_caso =</span> total <span class="sc">/</span> <span class="fu">sum</span>(total),</span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">importancia_ponderada =</span> ponderado <span class="sc">/</span> <span class="fu">sum</span>(ponderado)</span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">top_n</span>(top, importancia_ponderada) <span class="sc">%&gt;%</span> </span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">as.numeric</span>(id), <span class="fu">desc</span>(importancia_ponderada))</span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Y comprobamos</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>explicatividad_iris <span class="ot">&lt;-</span>  <span class="fu">getIndividualImportance</span>(rg_iris, iris, <span class="at">parallel =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(explicatividad_iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-8ed300990c16c588b585" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-8ed300990c16c588b585">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516"],["1","1","1","2","2","2","3","3","3","4","4","4","5","5","5","6","6","6","7","7","7","8","8","8","9","9","9","10","10","10","11","11","11","12","12","12","13","13","13","14","14","14","15","15","15","15","16","16","16","16","17","17","17","18","18","18","19","19","19","19","20","20","20","21","21","21","22","22","22","23","23","23","24","24","24","25","25","25","26","26","26","27","27","27","28","28","28","29","29","29","30","30","30","31","31","31","32","32","32","33","33","33","34","34","34","34","35","35","35","36","36","36","37","37","37","37","38","38","38","39","39","39","40","40","40","41","41","41","42","42","42","43","43","43","44","44","44","45","45","45","46","46","46","47","47","47","48","48","48","49","49","49","50","50","50","51","51","51","51","52","52","52","52","53","53","53","53","54","54","54","54","55","55","55","55","56","56","56","56","57","57","57","57","58","58","58","58","59","59","59","59","60","60","60","60","61","61","61","61","62","62","62","62","63","63","63","63","64","64","64","64","65","65","65","65","66","66","66","66","67","67","67","67","68","68","68","68","69","69","69","69","70","70","70","70","71","71","71","71","72","72","72","72","73","73","73","73","74","74","74","74","75","75","75","75","76","76","76","76","77","77","77","77","78","78","78","78","79","79","79","79","80","80","80","80","81","81","81","81","82","82","82","82","83","83","83","83","84","84","84","84","85","85","85","85","86","86","86","86","87","87","87","87","88","88","88","88","89","89","89","89","90","90","90","90","91","91","91","91","92","92","92","92","93","93","93","93","94","94","94","94","95","95","95","95","96","96","96","96","97","97","97","97","98","98","98","98","99","99","99","99","100","100","100","100","101","101","101","102","102","102","102","103","103","103","104","104","104","105","105","105","106","106","106","107","107","107","107","108","108","108","109","109","109","110","110","110","111","111","111","112","112","112","113","113","113","114","114","114","114","115","115","115","115","116","116","116","117","117","117","118","118","118","119","119","119","120","120","120","120","121","121","121","122","122","122","122","123","123","123","124","124","124","125","125","125","126","126","126","127","127","127","128","128","128","129","129","129","130","130","130","130","131","131","131","132","132","132","133","133","133","134","134","134","134","135","135","135","135","136","136","136","137","137","137","138","138","138","139","139","139","140","140","140","141","141","141","142","142","142","143","143","143","143","144","144","144","145","145","145","146","146","146","147","147","147","148","148","148","149","149","149","150","150","150","150"],["Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Petal.Width","Petal.Length","Sepal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Sepal.Width","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Sepal.Length","Petal.Length","Petal.Width","Petal.Length","Sepal.Length","Sepal.Width"],[3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,4,2,1,2,4,2,1,2,3,2,2,3,2,2,4,2,1,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,1,3,2,2,3,2,2,3,2,2,1,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,3,2,2,7,5,2,3,7,5,2,3,7,5,2,3,6,7,3,2,7,5,2,3,7,5,2,3,7,5,2,3,6,7,3,1,7,5,2,3,6,5,2,1,6,6,3,1,7,5,2,3,7,6,3,3,7,5,2,3,7,5,2,3,7,5,2,3,7,5,2,3,7,5,2,3,7,6,3,3,7,6,3,3,8,5,5,1,7,5,2,3,7,6,3,3,7,5,2,3,7,5,2,3,7,5,2,3,7,5,2,3,8,7,3,5,7,5,2,3,7,6,3,3,6,7,3,2,6,7,3,2,7,5,2,3,9,7,3,5,6,5,2,1,7,5,2,3,7,5,2,3,7,6,3,3,7,5,2,3,6,7,3,2,6,7,3,2,7,5,2,3,7,6,3,3,6,6,3,1,7,5,2,3,7,5,2,3,7,5,2,3,7,5,2,3,6,6,3,1,7,5,2,3,8,4,4,8,4,5,1,8,4,4,8,5,4,8,4,4,8,4,4,6,7,3,1,8,5,4,8,5,4,8,4,4,8,4,4,8,4,4,8,4,4,7,5,5,1,8,4,5,1,8,4,4,8,5,4,8,4,4,8,4,4,8,7,3,4,8,4,4,8,4,4,1,8,4,4,8,4,4,8,4,4,8,5,4,8,5,4,8,4,4,8,4,4,9,7,3,5,8,4,4,8,4,4,8,4,4,9,6,3,5,9,7,3,4,8,4,4,8,4,4,8,5,4,8,5,5,8,4,4,8,4,4,8,4,4,8,4,5,1,8,4,4,8,4,4,8,4,4,7,5,4,8,4,4,8,4,4,8,6,4,1],[2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,3.33333333333333,2,1,0.666666666666667,3.33333333333333,2,1,0.666666666666667,2.5,2,1.5,2.5,2,1.5,3.33333333333333,2,1,0.666666666666667,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.66666666666667,2,1.5,0.333333333333333,2.5,2,1.5,2.5,2,1.5,2.66666666666667,2,1.5,0.333333333333333,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,2.5,2,1.5,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,4.55,3.65,2.2,1.1,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,4.33333333333333,3.66666666666667,2.33333333333333,0.666666666666667,5.16666666666667,2.5,2,1.33333333333333,4.16666666666667,3,2,0.333333333333333,4.3,3.4,2.2,0.6,5.16666666666667,2.5,2,1.33333333333333,5.3,2.9,2.2,1.6,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.3,2.9,2.2,1.6,5.3,2.9,2.2,1.6,5.83333333333333,3.25,2.66666666666667,0.25,5.16666666666667,2.5,2,1.33333333333333,5.3,2.9,2.2,1.6,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.66666666666667,3.91666666666667,2.25,2.16666666666667,5.16666666666667,2.5,2,1.33333333333333,5.3,2.9,2.2,1.6,4.55,3.65,2.2,1.1,4.55,3.65,2.2,1.1,5.16666666666667,2.5,2,1.33333333333333,6.06666666666667,4.06666666666667,2.2,2.16666666666667,4.16666666666667,3,2,0.333333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.3,2.9,2.2,1.6,5.16666666666667,2.5,2,1.33333333333333,4.55,3.65,2.2,1.1,4.55,3.65,2.2,1.1,5.16666666666667,2.5,2,1.33333333333333,5.3,2.9,2.2,1.6,4.3,3.4,2.2,0.6,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,5.16666666666667,2.5,2,1.33333333333333,4.3,3.4,2.2,0.6,5.16666666666667,2.5,2,1.33333333333333,5.25,2.66666666666667,2.58333333333333,5.41666666666667,3,2.83333333333333,0.25,5.25,2.66666666666667,2.58333333333333,5.5,2.83333333333333,2.66666666666667,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,4.33333333333333,3.66666666666667,2.33333333333333,0.666666666666667,5.5,2.83333333333333,2.66666666666667,5.5,2.83333333333333,2.66666666666667,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.16666666666667,3.25,2.83333333333333,0.25,5.41666666666667,3,2.83333333333333,0.25,5.25,2.66666666666667,2.58333333333333,5.5,2.83333333333333,2.66666666666667,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.55,3.8,2.25,1.9,5.25,2.66666666666667,2.58333333333333,5.5,3,2.25,0.25,5.25,2.66666666666667,2.58333333333333,5.58333333333333,2.66666666666667,2.25,5.25,2.66666666666667,2.58333333333333,5.5,2.83333333333333,2.66666666666667,5.66666666666667,2.91666666666667,2.41666666666667,5.58333333333333,2.66666666666667,2.25,5.25,2.66666666666667,2.58333333333333,6.06666666666667,4.06666666666667,2.2,2.16666666666667,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.9,3.8,2.2,2.1,5.95,3.95,2.2,1.9,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.5,2.83333333333333,2.66666666666667,5.75,3.08333333333333,2.66666666666667,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.41666666666667,3,2.83333333333333,0.25,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5,2.91666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.25,2.66666666666667,2.58333333333333,5.66666666666667,3.08333333333333,3,0.25],[0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.444444444444444,0.222222222222222,0.111111111111111,0.222222222222222,0.444444444444444,0.222222222222222,0.111111111111111,0.222222222222222,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.444444444444444,0.222222222222222,0.111111111111111,0.222222222222222,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.375,0.25,0.25,0.125,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.375,0.25,0.25,0.125,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.428571428571429,0.285714285714286,0.285714285714286,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.333333333333333,0.388888888888889,0.166666666666667,0.111111111111111,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.352941176470588,0.411764705882353,0.176470588235294,0.0588235294117647,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.428571428571429,0.357142857142857,0.142857142857143,0.0714285714285714,0.375,0.375,0.1875,0.0625,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.368421052631579,0.315789473684211,0.157894736842105,0.157894736842105,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.368421052631579,0.315789473684211,0.157894736842105,0.157894736842105,0.368421052631579,0.315789473684211,0.157894736842105,0.157894736842105,0.421052631578947,0.263157894736842,0.263157894736842,0.0526315789473684,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.368421052631579,0.315789473684211,0.157894736842105,0.157894736842105,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.347826086956522,0.304347826086957,0.130434782608696,0.217391304347826,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.368421052631579,0.315789473684211,0.157894736842105,0.157894736842105,0.333333333333333,0.388888888888889,0.166666666666667,0.111111111111111,0.333333333333333,0.388888888888889,0.166666666666667,0.111111111111111,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.375,0.291666666666667,0.125,0.208333333333333,0.428571428571429,0.357142857142857,0.142857142857143,0.0714285714285714,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.368421052631579,0.315789473684211,0.157894736842105,0.157894736842105,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.333333333333333,0.388888888888889,0.166666666666667,0.111111111111111,0.333333333333333,0.388888888888889,0.166666666666667,0.111111111111111,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.368421052631579,0.315789473684211,0.157894736842105,0.157894736842105,0.375,0.375,0.1875,0.0625,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.375,0.375,0.1875,0.0625,0.411764705882353,0.294117647058824,0.117647058823529,0.176470588235294,0.5,0.25,0.25,0.444444444444444,0.222222222222222,0.277777777777778,0.0555555555555556,0.5,0.25,0.25,0.470588235294118,0.294117647058824,0.235294117647059,0.5,0.25,0.25,0.5,0.25,0.25,0.352941176470588,0.411764705882353,0.176470588235294,0.0588235294117647,0.470588235294118,0.294117647058824,0.235294117647059,0.470588235294118,0.294117647058824,0.235294117647059,0.5,0.25,0.25,0.5,0.25,0.25,0.5,0.25,0.25,0.5,0.25,0.25,0.388888888888889,0.277777777777778,0.277777777777778,0.0555555555555556,0.444444444444444,0.222222222222222,0.277777777777778,0.0555555555555556,0.5,0.25,0.25,0.470588235294118,0.294117647058824,0.235294117647059,0.5,0.25,0.25,0.5,0.25,0.25,0.363636363636364,0.318181818181818,0.136363636363636,0.181818181818182,0.5,0.25,0.25,0.470588235294118,0.235294117647059,0.235294117647059,0.0588235294117647,0.5,0.25,0.25,0.5,0.25,0.25,0.5,0.25,0.25,0.470588235294118,0.294117647058824,0.235294117647059,0.470588235294118,0.294117647058824,0.235294117647059,0.5,0.25,0.25,0.5,0.25,0.25,0.375,0.291666666666667,0.125,0.208333333333333,0.5,0.25,0.25,0.5,0.25,0.25,0.5,0.25,0.25,0.391304347826087,0.260869565217391,0.130434782608696,0.217391304347826,0.391304347826087,0.304347826086957,0.130434782608696,0.173913043478261,0.5,0.25,0.25,0.5,0.25,0.25,0.470588235294118,0.294117647058824,0.235294117647059,0.444444444444444,0.277777777777778,0.277777777777778,0.5,0.25,0.25,0.5,0.25,0.25,0.5,0.25,0.25,0.444444444444444,0.222222222222222,0.277777777777778,0.0555555555555556,0.5,0.25,0.25,0.5,0.25,0.25,0.5,0.25,0.25,0.4375,0.3125,0.25,0.5,0.25,0.25,0.5,0.25,0.25,0.421052631578947,0.315789473684211,0.210526315789474,0.0526315789473684],[0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.476190476190476,0.285714285714286,0.142857142857143,0.0952380952380952,0.476190476190476,0.285714285714286,0.142857142857143,0.0952380952380952,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.476190476190476,0.285714285714286,0.142857142857143,0.0952380952380952,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.41025641025641,0.307692307692308,0.230769230769231,0.0512820512820513,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.41025641025641,0.307692307692308,0.230769230769231,0.0512820512820513,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.416666666666667,0.333333333333333,0.25,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.395652173913043,0.317391304347826,0.191304347826087,0.0956521739130435,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.393939393939394,0.333333333333333,0.212121212121212,0.0606060606060606,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.43859649122807,0.315789473684211,0.210526315789474,0.0350877192982456,0.40952380952381,0.323809523809524,0.20952380952381,0.0571428571428571,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.441666666666667,0.241666666666667,0.183333333333333,0.133333333333333,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.441666666666667,0.241666666666667,0.183333333333333,0.133333333333333,0.441666666666667,0.241666666666667,0.183333333333333,0.133333333333333,0.486111111111111,0.270833333333333,0.222222222222222,0.0208333333333333,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.441666666666667,0.241666666666667,0.183333333333333,0.133333333333333,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.404761904761905,0.279761904761905,0.160714285714286,0.154761904761905,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.441666666666667,0.241666666666667,0.183333333333333,0.133333333333333,0.395652173913043,0.317391304347826,0.191304347826087,0.0956521739130435,0.395652173913043,0.317391304347826,0.191304347826087,0.0956521739130435,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.418390804597701,0.280459770114942,0.151724137931035,0.149425287356322,0.43859649122807,0.315789473684211,0.210526315789474,0.0350877192982456,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.441666666666667,0.241666666666667,0.183333333333333,0.133333333333333,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.395652173913043,0.317391304347826,0.191304347826087,0.0956521739130435,0.395652173913043,0.317391304347826,0.191304347826087,0.0956521739130435,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.441666666666667,0.241666666666667,0.183333333333333,0.133333333333333,0.40952380952381,0.323809523809524,0.20952380952381,0.0571428571428571,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.40952380952381,0.323809523809524,0.20952380952381,0.0571428571428571,0.46969696969697,0.227272727272727,0.181818181818182,0.121212121212121,0.5,0.253968253968254,0.246031746031746,0.471014492753623,0.260869565217391,0.246376811594203,0.0217391304347826,0.5,0.253968253968254,0.246031746031746,0.5,0.257575757575758,0.242424242424242,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.393939393939394,0.333333333333333,0.212121212121212,0.0606060606060606,0.5,0.257575757575758,0.242424242424242,0.5,0.257575757575758,0.242424242424242,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.449275362318841,0.282608695652174,0.246376811594203,0.0217391304347826,0.471014492753623,0.260869565217391,0.246376811594203,0.0217391304347826,0.5,0.253968253968254,0.246031746031746,0.5,0.257575757575758,0.242424242424242,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.411111111111111,0.281481481481481,0.166666666666667,0.140740740740741,0.5,0.253968253968254,0.246031746031746,0.5,0.272727272727273,0.204545454545455,0.0227272727272727,0.5,0.253968253968254,0.246031746031746,0.531746031746032,0.253968253968254,0.214285714285714,0.5,0.253968253968254,0.246031746031746,0.5,0.257575757575758,0.242424242424242,0.515151515151515,0.265151515151515,0.21969696969697,0.531746031746032,0.253968253968254,0.214285714285714,0.5,0.253968253968254,0.246031746031746,0.418390804597701,0.280459770114942,0.151724137931035,0.149425287356322,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.421428571428571,0.271428571428571,0.157142857142857,0.15,0.425,0.282142857142857,0.157142857142857,0.135714285714286,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.5,0.257575757575758,0.242424242424242,0.5,0.268115942028986,0.231884057971014,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.471014492753623,0.260869565217391,0.246376811594203,0.0217391304347826,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.476190476190476,0.277777777777778,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.5,0.253968253968254,0.246031746031746,0.472222222222222,0.256944444444444,0.25,0.0208333333333333]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>variables<\/th>\n      <th>total<\/th>\n      <th>ponderado<\/th>\n      <th>importancia_caso<\/th>\n      <th>importancia_ponderada<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="agrupando-observaciones-con-similar-importancia-de-variables" class="level2">
<h2 class="anchored" data-anchor-id="agrupando-observaciones-con-similar-importancia-de-variables">Agrupando observaciones con similar importancia de variables</h2>
<p>Podríamos hacer ahora un PCA pero yo voy a utilizar un CA usando la importancia_ponderada</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  tabla_para_diagonalizar <span class="ot">&lt;-</span> <span class="fu">xtabs</span>(ponderado <span class="sc">~</span> id<span class="sc">+</span> variables, <span class="at">data=</span> explicatividad_iris)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  tabla_para_diagonalizar</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      variables</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; id    Petal.Length Petal.Width Sepal.Length Sepal.Width</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   10     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   100    2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   101    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   102    2.8333333   5.4166667    3.0000000   0.2500000</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   103    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   104    2.8333333   5.5000000    2.6666667   0.0000000</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   105    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   106    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   107    3.6666667   4.3333333    2.3333333   0.6666667</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   108    2.8333333   5.5000000    2.6666667   0.0000000</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   109    2.8333333   5.5000000    2.6666667   0.0000000</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   11     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   110    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   111    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   112    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   113    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   114    2.8333333   5.1666667    3.2500000   0.2500000</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   115    2.8333333   5.4166667    3.0000000   0.2500000</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   116    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   117    2.8333333   5.5000000    2.6666667   0.0000000</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   118    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   119    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   12     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   120    3.8000000   5.5500000    2.2500000   1.9000000</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   121    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   122    2.2500000   5.5000000    3.0000000   0.2500000</span></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   123    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   124    2.2500000   5.5833333    2.6666667   0.0000000</span></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   125    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   126    2.8333333   5.5000000    2.6666667   0.0000000</span></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   127    2.4166667   5.6666667    2.9166667   0.0000000</span></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   128    2.2500000   5.5833333    2.6666667   0.0000000</span></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   129    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   13     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   130    4.0666667   6.0666667    2.2000000   2.1666667</span></span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   131    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   132    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   133    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   134    3.8000000   5.9000000    2.2000000   2.1000000</span></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   135    3.9500000   5.9500000    2.2000000   1.9000000</span></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   136    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   137    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   138    2.8333333   5.5000000    2.6666667   0.0000000</span></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   139    2.6666667   5.7500000    3.0833333   0.0000000</span></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   14     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   140    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   141    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   142    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   143    2.8333333   5.4166667    3.0000000   0.2500000</span></span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   144    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   145    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   146    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   147    2.5833333   5.0000000    2.9166667   0.0000000</span></span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   148    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   149    2.5833333   5.2500000    2.6666667   0.0000000</span></span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   15     1.0000000   3.3333333    2.0000000   0.6666667</span></span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   150    3.0833333   5.6666667    3.0000000   0.2500000</span></span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   16     1.0000000   3.3333333    2.0000000   0.6666667</span></span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   17     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   18     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   19     1.0000000   3.3333333    2.0000000   0.6666667</span></span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   2      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-69"><a href="#cb21-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   20     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-70"><a href="#cb21-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   21     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-71"><a href="#cb21-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   22     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-72"><a href="#cb21-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   23     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-73"><a href="#cb21-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   24     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-74"><a href="#cb21-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   25     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-75"><a href="#cb21-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   26     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-76"><a href="#cb21-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   27     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-77"><a href="#cb21-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   28     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-78"><a href="#cb21-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   29     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-79"><a href="#cb21-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   3      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-80"><a href="#cb21-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   30     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-81"><a href="#cb21-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   31     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-82"><a href="#cb21-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   32     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-83"><a href="#cb21-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   33     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-84"><a href="#cb21-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   34     1.5000000   2.6666667    2.0000000   0.3333333</span></span>
<span id="cb21-85"><a href="#cb21-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   35     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-86"><a href="#cb21-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   36     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-87"><a href="#cb21-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   37     1.5000000   2.6666667    2.0000000   0.3333333</span></span>
<span id="cb21-88"><a href="#cb21-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   38     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-89"><a href="#cb21-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   39     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-90"><a href="#cb21-90" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   4      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-91"><a href="#cb21-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   40     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-92"><a href="#cb21-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   41     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-93"><a href="#cb21-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   42     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-94"><a href="#cb21-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   43     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-95"><a href="#cb21-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   44     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-96"><a href="#cb21-96" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   45     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-97"><a href="#cb21-97" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   46     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-98"><a href="#cb21-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   47     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-99"><a href="#cb21-99" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   48     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-100"><a href="#cb21-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   49     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-101"><a href="#cb21-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   5      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-102"><a href="#cb21-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   50     1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-103"><a href="#cb21-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   51     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-104"><a href="#cb21-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   52     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-105"><a href="#cb21-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   53     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-106"><a href="#cb21-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   54     3.6500000   4.5500000    2.2000000   1.1000000</span></span>
<span id="cb21-107"><a href="#cb21-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   55     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-108"><a href="#cb21-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   56     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-109"><a href="#cb21-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   57     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-110"><a href="#cb21-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   58     3.6666667   4.3333333    2.3333333   0.6666667</span></span>
<span id="cb21-111"><a href="#cb21-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   59     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-112"><a href="#cb21-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   6      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-113"><a href="#cb21-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   60     3.0000000   4.1666667    2.0000000   0.3333333</span></span>
<span id="cb21-114"><a href="#cb21-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   61     3.4000000   4.3000000    2.2000000   0.6000000</span></span>
<span id="cb21-115"><a href="#cb21-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   62     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-116"><a href="#cb21-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   63     2.9000000   5.3000000    2.2000000   1.6000000</span></span>
<span id="cb21-117"><a href="#cb21-117" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   64     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-118"><a href="#cb21-118" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   65     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-119"><a href="#cb21-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   66     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-120"><a href="#cb21-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   67     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-121"><a href="#cb21-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   68     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-122"><a href="#cb21-122" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   69     2.9000000   5.3000000    2.2000000   1.6000000</span></span>
<span id="cb21-123"><a href="#cb21-123" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   7      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-124"><a href="#cb21-124" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   70     2.9000000   5.3000000    2.2000000   1.6000000</span></span>
<span id="cb21-125"><a href="#cb21-125" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   71     2.6666667   5.8333333    3.2500000   0.2500000</span></span>
<span id="cb21-126"><a href="#cb21-126" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   72     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-127"><a href="#cb21-127" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   73     2.9000000   5.3000000    2.2000000   1.6000000</span></span>
<span id="cb21-128"><a href="#cb21-128" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   74     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-129"><a href="#cb21-129" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   75     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-130"><a href="#cb21-130" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   76     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-131"><a href="#cb21-131" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   77     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-132"><a href="#cb21-132" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   78     3.9166667   5.6666667    2.2500000   2.1666667</span></span>
<span id="cb21-133"><a href="#cb21-133" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   79     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-134"><a href="#cb21-134" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   8      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-135"><a href="#cb21-135" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   80     2.9000000   5.3000000    2.2000000   1.6000000</span></span>
<span id="cb21-136"><a href="#cb21-136" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   81     3.6500000   4.5500000    2.2000000   1.1000000</span></span>
<span id="cb21-137"><a href="#cb21-137" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   82     3.6500000   4.5500000    2.2000000   1.1000000</span></span>
<span id="cb21-138"><a href="#cb21-138" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   83     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-139"><a href="#cb21-139" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   84     4.0666667   6.0666667    2.2000000   2.1666667</span></span>
<span id="cb21-140"><a href="#cb21-140" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   85     3.0000000   4.1666667    2.0000000   0.3333333</span></span>
<span id="cb21-141"><a href="#cb21-141" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   86     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-142"><a href="#cb21-142" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   87     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-143"><a href="#cb21-143" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   88     2.9000000   5.3000000    2.2000000   1.6000000</span></span>
<span id="cb21-144"><a href="#cb21-144" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   89     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-145"><a href="#cb21-145" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   9      1.5000000   2.5000000    2.0000000   0.0000000</span></span>
<span id="cb21-146"><a href="#cb21-146" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   90     3.6500000   4.5500000    2.2000000   1.1000000</span></span>
<span id="cb21-147"><a href="#cb21-147" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   91     3.6500000   4.5500000    2.2000000   1.1000000</span></span>
<span id="cb21-148"><a href="#cb21-148" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   92     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-149"><a href="#cb21-149" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   93     2.9000000   5.3000000    2.2000000   1.6000000</span></span>
<span id="cb21-150"><a href="#cb21-150" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   94     3.4000000   4.3000000    2.2000000   0.6000000</span></span>
<span id="cb21-151"><a href="#cb21-151" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   95     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-152"><a href="#cb21-152" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   96     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-153"><a href="#cb21-153" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   97     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-154"><a href="#cb21-154" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   98     2.5000000   5.1666667    2.0000000   1.3333333</span></span>
<span id="cb21-155"><a href="#cb21-155" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   99     3.4000000   4.3000000    2.2000000   0.6000000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Y al hacer un CA podemos ver qué individuos están asociados con las variables pero por la importancia ponderada.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>res_ca <span class="ot">&lt;-</span> FactoMineR<span class="sc">::</span><span class="fu">CA</span>(tabla_para_diagonalizar, <span class="at">graph =</span> <span class="cn">FALSE</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_ca</span>(res_ca)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-22-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="index_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ejemplo-2" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-2">Ejemplo 2</h2>
<p>Utilicemos esto para los datos de Boston Housing</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>boston_df <span class="ot">&lt;-</span>  MASS<span class="sc">::</span>Boston</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<blockquote class="blockquote">
<p>Housing Values in Suburbs of Boston Description The Boston data frame has 506 rows and 14 columns.</p>
</blockquote>
<blockquote class="blockquote">
<p>Usage Boston Format This data frame contains the following columns:</p>
</blockquote>
<blockquote class="blockquote">
<p>crim per capita crime rate by town.</p>
</blockquote>
<blockquote class="blockquote">
<p>zn proportion of residential land zoned for lots over 25,000 sq.ft.</p>
</blockquote>
<blockquote class="blockquote">
<p>indus proportion of non-retail business acres per town.</p>
</blockquote>
<blockquote class="blockquote">
<p>chas Charles River dummy variable (= 1 if tract bounds river; 0 otherwise).</p>
</blockquote>
<blockquote class="blockquote">
<p>nox nitrogen oxides concentration (parts per 10 million).</p>
</blockquote>
<blockquote class="blockquote">
<p>rm average number of rooms per dwelling.</p>
</blockquote>
<blockquote class="blockquote">
<p>age proportion of owner-occupied units built prior to 1940.</p>
</blockquote>
<blockquote class="blockquote">
<p>dis weighted mean of distances to five Boston employment centres.</p>
</blockquote>
<blockquote class="blockquote">
<p>rad index of accessibility to radial highways.</p>
</blockquote>
<blockquote class="blockquote">
<p>tax full-value property-tax rate per $10,000.</p>
</blockquote>
<blockquote class="blockquote">
<p>ptratio pupil-teacher ratio by town.</p>
</blockquote>
<blockquote class="blockquote">
<p>black 1000(Bk−0.63)^2 where BkBk is the proportion of blacks by town.</p>
</blockquote>
<blockquote class="blockquote">
<p>lstat lower status of the population (percent).</p>
</blockquote>
<blockquote class="blockquote">
<p>medv median value of owner-occupied homes in $1000s.</p>
</blockquote>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">47</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>idx <span class="ot">&lt;-</span>  <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(boston_df),<span class="dv">300</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>train_df <span class="ot">&lt;-</span> boston_df[idx,]</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>test_df <span class="ot">&lt;-</span> boston_df[<span class="sc">-</span>idx, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="modelo-con-ranger" class="level3">
<h3 class="anchored" data-anchor-id="modelo-con-ranger">Modelo con ranger</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>rg_boston <span class="ot">&lt;-</span>  <span class="fu">ranger</span>(medv <span class="sc">~</span> ., <span class="at">data =</span> train_df, <span class="at">num.trees =</span> <span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Variables importantes a nivel individual</p>
<p>Por simplificar, voy a seleccionar solo las 5 variables más importantes para cada observación</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>importancia_individual <span class="ot">&lt;-</span> <span class="fu">getIndividualImportance</span>(rg_boston, test_df,<span class="at">top =</span> <span class="dv">5</span>, <span class="at">parallel =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(importancia_individual)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1030    6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(importancia_individual)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-6c8be787ec44e39a8a0b" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6c8be787ec44e39a8a0b">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783","784","785","786","787","788","789","790","791","792","793","794","795","796","797","798","799","800","801","802","803","804","805","806","807","808","809","810","811","812","813","814","815","816","817","818","819","820","821","822","823","824","825","826","827","828","829","830","831","832","833","834","835","836","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","870","871","872","873","874","875","876","877","878","879","880","881","882","883","884","885","886","887","888","889","890","891","892","893","894","895","896","897","898","899","900","901","902","903","904","905","906","907","908","909","910","911","912","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","930","931","932","933","934","935","936","937","938","939","940","941","942","943","944","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","970","971","972","973","974","975","976","977","978","979","980","981","982","983","984","985","986","987","988","989","990","991","992","993","994","995","996","997","998","999","1000","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1012","1013","1014","1015","1016","1017","1018","1019","1020","1021","1022","1023","1024","1025","1026","1027","1028","1029","1030"],["2","2","2","2","2","7","7","7","7","7","14","14","14","14","14","17","17","17","17","17","19","19","19","19","19","21","21","21","21","21","23","23","23","23","23","24","24","24","24","24","25","25","25","25","25","30","30","30","30","30","31","31","31","31","31","34","34","34","34","34","36","36","36","36","36","37","37","37","37","37","39","39","39","39","39","40","40","40","40","40","43","43","43","43","43","48","48","48","48","48","52","52","52","52","52","53","53","53","53","53","54","54","54","54","54","58","58","58","58","58","60","60","60","60","60","65","65","65","65","65","66","66","66","66","66","71","71","71","71","71","72","72","72","72","72","74","74","74","74","74","76","76","76","76","76","77","77","77","77","77","79","79","79","79","79","80","80","80","80","80","83","83","83","83","83","86","86","86","86","86","89","89","89","89","89","90","90","90","90","90","94","94","94","94","94","97","97","97","97","97","98","98","98","98","98","100","100","100","100","100","108","108","108","108","108","110","110","110","110","110","111","111","111","111","111","112","112","112","112","112","119","119","119","119","119","121","121","121","121","121","123","123","123","123","123","124","124","124","124","124","127","127","127","127","127","130","130","130","130","130","132","132","132","132","132","133","133","133","133","133","142","142","142","142","142","146","146","146","146","146","149","149","149","149","149","154","154","154","154","154","159","159","159","159","159","166","166","166","166","166","167","167","167","167","167","169","169","169","169","169","170","170","170","170","170","172","172","172","172","172","179","179","179","179","179","180","180","180","180","180","182","182","182","182","182","184","184","184","184","184","185","185","185","185","185","187","187","187","187","187","189","189","189","189","189","190","190","190","190","190","192","192","192","192","192","193","193","193","193","193","194","194","194","194","194","195","195","195","195","195","201","201","201","201","201","202","202","202","202","202","207","207","207","207","207","209","209","209","209","209","210","210","210","210","210","214","214","214","214","214","215","215","215","215","215","216","216","216","216","216","218","218","218","218","218","219","219","219","219","219","220","220","220","220","220","222","222","222","222","222","225","225","225","225","225","226","226","226","226","226","228","228","228","228","228","233","233","233","233","233","235","235","235","235","235","237","237","237","237","237","239","239","239","239","239","245","245","245","245","245","246","246","246","246","246","250","250","250","250","250","252","252","252","252","252","255","255","255","255","255","258","258","258","258","258","259","259","259","259","259","262","262","262","262","262","266","266","266","266","266","269","269","269","269","269","270","270","270","270","270","271","271","271","271","271","272","272","272","272","272","275","275","275","275","275","276","276","276","276","276","281","281","281","281","281","282","282","282","282","282","286","286","286","286","286","287","287","287","287","287","291","291","291","291","291","292","292","292","292","292","293","293","293","293","293","296","296","296","296","296","297","297","297","297","297","298","298","298","298","298","299","299","299","299","299","301","301","301","301","301","302","302","302","302","302","305","305","305","305","305","306","306","306","306","306","307","307","307","307","307","308","308","308","308","308","315","315","315","315","315","316","316","316","316","316","323","323","323","323","323","327","327","327","327","327","328","328","328","328","328","331","331","331","331","331","332","332","332","332","332","336","336","336","336","336","337","337","337","337","337","339","339","339","339","339","340","340","340","340","340","342","342","342","342","342","345","345","345","345","345","346","346","346","346","346","348","348","348","348","348","350","350","350","350","350","351","351","351","351","351","352","352","352","352","352","355","355","355","355","355","359","359","359","359","359","361","361","361","361","361","363","363","363","363","363","369","369","369","369","369","376","376","376","376","376","378","378","378","378","378","381","381","381","381","381","386","386","386","386","386","387","387","387","387","387","388","388","388","388","388","389","389","389","389","389","395","395","395","395","395","397","397","397","397","397","398","398","398","398","398","399","399","399","399","399","400","400","400","400","400","403","403","403","403","403","404","404","404","404","404","406","406","406","406","406","409","409","409","409","409","412","412","412","412","412","413","413","413","413","413","415","415","415","415","415","416","416","416","416","416","417","417","417","417","417","418","418","418","418","418","419","419","419","419","419","420","420","420","420","420","423","423","423","423","423","424","424","424","424","424","425","425","425","425","425","427","427","427","427","427","428","428","428","428","428","431","431","431","431","431","434","434","434","434","434","436","436","436","436","436","439","439","439","439","439","444","444","444","444","444","445","445","445","445","445","447","447","447","447","447","448","448","448","448","448","458","458","458","458","458","463","463","463","463","463","464","464","464","464","464","466","466","466","466","466","467","467","467","467","467","471","471","471","471","471","474","474","474","474","474","475","475","475","475","475","480","480","480","480","480","481","481","481","481","481","483","483","483","483","483","485","485","485","485","485","486","486","486","486","486","487","487","487","487","487","491","491","491","491","491","496","496","496","496","496","498","498","498","498","498","499","499","499","499","499","500","500","500","500","500","502","502","502","502","502","503","503","503","503","503"],["lstat","rm","dis","indus","ptratio","lstat","rm","indus","nox","dis","rm","lstat","nox","indus","dis","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","age","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","age","lstat","rm","nox","indus","age","lstat","rm","nox","indus","dis","lstat","rm","nox","dis","indus","rm","lstat","indus","nox","age","rm","lstat","indus","age","dis","lstat","rm","indus","age","nox","rm","lstat","indus","dis","tax","lstat","rm","indus","dis","ptratio","lstat","rm","nox","indus","age","rm","lstat","indus","ptratio","dis","rm","lstat","indus","ptratio","tax","rm","lstat","indus","ptratio","tax","rm","lstat","indus","age","ptratio","rm","lstat","indus","age","ptratio","rm","lstat","indus","age","ptratio","rm","lstat","indus","dis","ptratio","lstat","rm","nox","indus","dis","lstat","rm","indus","nox","dis","lstat","rm","nox","indus","dis","lstat","rm","indus","nox","age","lstat","rm","indus","age","dis","lstat","rm","indus","age","nox","lstat","rm","indus","nox","age","rm","lstat","indus","ptratio","tax","lstat","rm","indus","tax","dis","lstat","rm","nox","indus","ptratio","rm","lstat","indus","ptratio","nox","lstat","rm","indus","nox","ptratio","rm","lstat","indus","dis","ptratio","rm","lstat","indus","age","nox","rm","lstat","indus","age","nox","lstat","rm","nox","dis","indus","lstat","rm","nox","dis","age","lstat","rm","indus","dis","nox","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","dis","lstat","rm","nox","dis","age","lstat","rm","nox","indus","age","lstat","rm","nox","indus","age","lstat","nox","rm","dis","crim","lstat","rm","nox","dis","age","lstat","rm","nox","dis","crim","lstat","nox","rm","dis","age","lstat","rm","nox","age","dis","lstat","rm","nox","age","dis","lstat","rm","nox","age","dis","lstat","rm","nox","dis","crim","lstat","rm","nox","dis","indus","rm","lstat","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","indus","age","nox","rm","lstat","indus","ptratio","age","rm","lstat","indus","ptratio","dis","lstat","rm","dis","ptratio","indus","lstat","rm","indus","age","dis","rm","lstat","indus","age","dis","rm","lstat","indus","dis","ptratio","rm","lstat","indus","ptratio","age","rm","lstat","indus","ptratio","age","rm","lstat","indus","ptratio","age","rm","lstat","indus","ptratio","tax","rm","lstat","indus","dis","ptratio","rm","lstat","indus","age","ptratio","rm","lstat","indus","ptratio","dis","lstat","rm","indus","age","nox","lstat","rm","indus","nox","dis","lstat","rm","nox","indus","age","lstat","rm","indus","nox","dis","lstat","rm","nox","indus","dis","lstat","rm","indus","nox","age","lstat","rm","dis","nox","indus","lstat","rm","nox","indus","age","lstat","rm","nox","indus","dis","lstat","rm","indus","age","nox","lstat","rm","indus","age","nox","lstat","rm","nox","indus","age","lstat","rm","nox","indus","age","lstat","rm","indus","age","nox","lstat","rm","indus","age","nox","lstat","rm","indus","nox","age","rm","lstat","indus","tax","ptratio","lstat","rm","indus","age","nox","lstat","rm","indus","age","nox","lstat","rm","indus","ptratio","tax","rm","lstat","indus","age","tax","rm","lstat","indus","ptratio","tax","rm","lstat","indus","age","nox","rm","lstat","indus","nox","dis","rm","lstat","age","indus","nox","rm","lstat","indus","dis","age","rm","lstat","indus","dis","age","lstat","rm","indus","age","dis","lstat","rm","indus","dis","age","rm","lstat","indus","ptratio","dis","rm","lstat","indus","ptratio","age","rm","lstat","indus","ptratio","age","rm","lstat","indus","age","dis","rm","lstat","indus","age","ptratio","rm","lstat","indus","ptratio","age","rm","lstat","indus","age","ptratio","rm","lstat","indus","ptratio","dis","rm","lstat","indus","ptratio","crim","rm","lstat","indus","tax","dis","lstat","rm","nox","indus","age","lstat","rm","nox","indus","age","lstat","rm","indus","nox","age","rm","lstat","indus","tax","ptratio","rm","lstat","indus","ptratio","age","rm","lstat","indus","age","ptratio","rm","lstat","indus","ptratio","tax","rm","lstat","indus","age","ptratio","rm","lstat","indus","age","ptratio","lstat","rm","indus","ptratio","age","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","dis","rm","lstat","indus","nox","dis","lstat","rm","indus","nox","dis","lstat","rm","indus","nox","age","lstat","rm","dis","indus","ptratio","rm","lstat","indus","age","ptratio","rm","lstat","indus","nox","age","rm","lstat","indus","age","dis","rm","lstat","indus","age","dis","rm","lstat","indus","age","dis","rm","lstat","indus","ptratio","tax","rm","lstat","indus","ptratio","dis","rm","lstat","indus","age","dis","rm","lstat","indus","tax","ptratio","rm","lstat","indus","ptratio","dis","rm","lstat","indus","tax","age","rm","lstat","indus","ptratio","dis","rm","lstat","indus","ptratio","dis","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","nox","age","crim","rm","lstat","nox","dis","crim","lstat","rm","nox","age","indus","lstat","nox","rm","crim","age","lstat","rm","nox","age","dis","lstat","nox","rm","dis","crim","lstat","nox","rm","dis","crim","lstat","nox","rm","dis","age","lstat","nox","rm","dis","crim","lstat","rm","nox","dis","crim","lstat","nox","rm","age","crim","lstat","nox","rm","crim","dis","lstat","nox","rm","dis","crim","lstat","nox","rm","dis","crim","lstat","nox","rm","crim","dis","lstat","nox","rm","dis","crim","lstat","nox","rm","dis","crim","lstat","rm","nox","dis","crim","lstat","nox","rm","dis","age","lstat","rm","nox","dis","age","lstat","nox","rm","dis","crim","lstat","nox","rm","dis","crim","lstat","rm","nox","dis","crim","lstat","nox","rm","dis","age","lstat","rm","nox","dis","crim","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","nox","dis","indus","lstat","rm","nox","dis","indus","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","nox","age","dis","lstat","rm","nox","crim","age","lstat","rm","nox","dis","crim","lstat","nox","rm","crim","age","lstat","nox","rm","crim","dis","lstat","rm","nox","crim","age","lstat","nox","rm","crim","age","lstat","nox","rm","dis","age","lstat","rm","nox","dis","age","lstat","rm","nox","age","dis","lstat","rm","dis","nox","age","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","rm","dis","nox","age","lstat","nox","rm","dis","age","lstat","rm","nox","dis","age","lstat","rm","dis","nox","indus","lstat","rm","nox","dis","age","lstat","rm","nox","dis","indus","lstat","rm","nox","dis","age","lstat","rm","nox","dis","age","lstat","nox","rm","dis","age","lstat","rm","indus","nox","dis","lstat","rm","indus","dis","nox","lstat","rm","indus","nox","dis","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","dis","lstat","rm","nox","indus","dis"],[82,75,49,37,45,77,77,50,48,59,77,71,50,43,45,65,67,43,40,39,64,54,41,35,36,71,56,48,36,37,81,66,53,41,43,71,62,48,40,39,82,64,55,40,49,87,63,48,39,44,71,52,51,37,42,73,56,52,47,34,95,82,51,39,40,84,73,53,44,48,87,83,53,45,39,67,52,35,40,33,78,79,43,47,40,86,73,45,38,43,89,82,44,45,47,79,69,33,37,42,83,87,40,39,46,56,47,29,23,26,86,75,47,42,37,54,51,32,29,28,70,50,35,37,32,77,73,41,39,49,72,77,45,47,49,76,70,41,41,47,78,78,44,43,44,77,73,51,46,53,73,76,50,46,43,79,83,45,46,42,87,84,38,42,44,79,82,39,44,46,60,61,35,31,28,63,60,35,31,33,73,70,38,37,36,74,75,50,43,29,59,49,33,27,27,62,59,38,31,33,80,63,57,62,49,84,65,55,61,52,78,69,52,54,45,85,67,50,44,48,87,63,62,48,50,77,68,54,44,50,81,53,56,47,43,76,49,48,43,39,76,45,51,40,42,88,65,62,57,54,83,64,66,53,47,86,68,65,60,58,79,57,53,43,33,68,51,44,37,36,71,53,49,41,41,76,57,48,46,41,73,60,47,42,32,76,60,50,55,35,48,45,27,21,18,83,56,56,49,36,87,59,60,49,39,83,64,57,56,40,75,75,36,35,30,58,49,39,28,27,61,64,40,38,40,55,53,37,32,30,66,59,38,36,37,62,47,34,27,28,61,50,36,31,31,57,58,30,38,29,65,55,39,33,26,57,51,32,26,23,66,55,38,35,36,71,45,31,35,31,59,41,27,24,26,66,52,30,40,34,82,79,50,50,42,67,68,52,43,51,75,53,45,38,36,80,78,43,41,50,62,52,42,38,40,79,83,47,47,44,72,69,54,39,41,77,57,52,42,44,79,57,43,40,43,68,63,38,41,39,53,57,25,26,23,55,58,23,22,21,67,69,38,29,25,50,54,22,23,19,74,65,34,33,29,69,65,38,35,36,90,74,39,46,44,75,69,44,43,34,72,69,44,38,31,79,79,41,47,39,66,54,33,33,27,77,54,36,38,38,55,46,19,20,18,50,44,17,20,24,56,45,24,19,19,59,52,35,34,26,57,49,25,30,21,71,67,44,35,41,76,71,48,40,34,73,71,40,37,36,61,52,29,31,25,66,58,32,31,26,56,43,29,24,27,60,49,36,26,31,79,59,38,43,34,64,55,36,26,25,62,59,30,28,30,63,49,31,26,28,69,57,36,31,32,75,73,41,37,41,74,78,45,40,40,66,71,48,46,40,66,47,36,30,31,59,58,29,45,29,81,78,44,43,43,64,53,35,35,39,61,60,37,31,34,61,48,32,29,28,59,56,31,32,28,81,72,42,40,46,95,88,58,56,61,91,78,47,46,46,82,79,41,42,45,74,77,50,47,47,73,71,49,40,37,81,70,45,35,33,86,74,44,39,38,86,68,46,45,47,90,70,44,40,42,86,71,45,40,44,70,53,36,39,34,65,61,41,32,30,83,72,46,43,48,72,68,31,37,36,64,57,34,31,37,67,54,33,39,29,62,54,33,35,37,69,49,38,30,31,64,51,51,50,44,67,64,45,46,46,76,54,56,50,49,40,44,34,33,26,43,39,32,29,16,65,53,51,51,39,46,41,38,33,32,61,53,44,47,54,58,51,42,45,51,57,53,44,46,34,55,51,48,47,52,65,50,55,54,59,82,66,57,48,53,78,60,53,65,60,58,49,43,40,50,62,47,42,48,43,71,56,55,61,49,59,51,40,44,55,55,52,45,45,51,78,57,56,50,45,63,60,54,42,30,65,49,51,43,25,52,44,38,41,44,50,49,39,42,46,64,45,42,45,46,54,43,37,39,29,52,42,48,41,47,53,42,38,44,33,73,48,56,46,38,71,52,53,53,33,69,51,47,37,28,71,50,51,42,27,51,40,37,40,30,78,57,60,48,37,83,60,58,47,52,72,50,46,43,39,56,43,44,49,47,80,62,49,59,48,69,49,43,56,50,92,61,60,57,54,81,62,51,58,50,59,47,46,45,36,75,59,47,59,46,80,58,53,51,55,73,60,56,52,41,69,55,52,49,36,88,68,65,57,49,59,46,44,40,37,84,61,59,51,43,72,51,60,49,39,90,63,61,55,39,57,48,43,34,29,83,72,60,61,41,84,66,53,60,55,94,63,63,59,47,68,56,43,36,27,78,65,47,46,49,85,79,58,58,52,86,78,54,54,57,81,68,54,48,53,73,60,48,36,35,71,58,48,36,32],[49.9637598512599,44.4160644910645,24.3260378510378,23.9880591630592,23.6369325119325,49.3313948693206,47.9811072742187,32.0930414356885,27.9945857934635,27.2249799692911,45.539565989566,44.3143606393606,28.6992895992896,27.5273615273615,23.1583194583195,41.3938311688312,39.2115079365079,26.0562770562771,24.7823232323232,20.5645021645022,42.5981601731602,31.6794733044733,24.2708152958153,23.1016594516595,20.1804834054834,43.1855158730159,34.0814033189033,28.1732864357864,23.3054112554113,20.2352453102453,49.9216244539774,39.6736586942469,31.2734242881302,25.2593434343434,23.4628317760671,45.0955097190391,37.0052032934386,29.6342288430524,25.1844877344877,21.0082739156269,51.1549952498482,39.1620050700933,32.6157167179226,25.4251248751249,24.8407899290252,51.7765375147728,38.1046797973269,28.649982860277,23.9528233204704,23.5526101349631,43.7354073214367,33.9784296585767,29.8548104673105,22.9011766011766,22.2355577429107,46.351893612923,35.5246778548249,31.2888292263292,24.1090065163595,21.928305028305,54.3537226662227,50.8747877122877,29.620072982573,22.6428848928849,22.5186327561328,49.5628593628594,49.1221792096792,31.7663336663337,24.374377011877,21.508701021201,52.6937479187479,49.5101898101898,31.3671786546787,24.5763972138972,22.44831002331,42.0463425463425,32.0120837495838,21.5766178266178,19.0196164946165,17.0828754578755,46.2197899322899,45.2951187701188,25.5441586191586,24.2339937839938,22.6580669330669,49.3079781329781,45.5024503274503,25.9288295038295,24.7906343656344,24.353243978244,52.8082617545853,49.3151919975449,28.2205717485129,24.6396145521146,21.7074049316696,44.9115662115662,41.6605672105672,22.2363830613831,21.9751998001998,21.4612248862249,49.7561361024596,48.5900088473618,26.3106455635867,22.9450174825175,20.7691312772195,36.6698412698413,30.768253968254,17.5503968253968,14.3083333333333,13.6884920634921,50.7917735042735,46.1567904317904,27.4206016206016,22.4353951603952,20.7912046287046,34.7156565656566,33.9214646464646,19.7571428571429,17.6459595959596,17.1655122655123,44.0008297258297,32.4585137085137,21.5270562770563,18.3532467532468,17.5399350649351,46.2626105920224,43.6021955169014,25.8526058908412,24.9356088356088,23.2783380018674,45.1659326784327,44.2061119436119,27.0775016650017,27.0249333999334,24.2879717504718,46.3134359104947,43.5565134212193,25.8829365079365,25.6529157117392,23.623778998779,48.3211066711067,45.9240759240759,27.4391941391941,25.3729603729604,24.1826090576091,50.2969447219447,41.9025335775336,30.5066322566323,27.0253524253524,25.5854673104673,46.870077798019,43.6570063923005,30.956717465541,26.3710229313171,24.2428016428016,47.5404882699,46.7649633046692,27.4923909423909,26.5856173238526,22.6119407553231,52.7436799311799,49.8940129315129,24.3059482184482,24.2515248640249,23.1150946275946,46.8941239316239,46.8159534909535,23.810656010656,21.7944902319902,21.6850413475413,38.6008574758575,37.6235264735265,19.5055194805195,18.4676684426684,16.8304279054279,38.9152236652237,38.5803751803752,20.8309163059163,18.8489718614719,18.0586940836941,43.7761072261072,42.3735847485847,23.2911255411255,22.4749167499168,19.4148656898657,44.465811965812,43.3624165050636,28.0015603677368,21.2075199310493,19.0016250089779,34.5539682539683,32.1507936507937,19.3686507936508,15.784126984127,15.2765873015873,38.4095238095238,37.8142857142857,21.9555555555556,18.3426587301587,17.2039682539683,50.7332821590175,41.0700188700189,34.2309532787474,28.5103898552428,27.882226433697,51.243926579956,42.0824675324675,33.0217578989638,29.2931152181152,27.7886842732431,49.4759612119906,43.2138923984512,33.533315377433,27.2785458006046,26.9014387573211,54.2505883005883,39.8012526688997,30.611949814891,25.53335357453,24.5391977303742,53.8536390080508,39.1169616331381,35.9238423341365,28.2896778058543,26.337854955502,49.2081607934549,41.681313784255,31.5676335102806,27.9766425567896,24.8352833441069,49.7456195765019,36.4817564788153,34.3468910174793,22.3708046855106,22.3312517547812,44.5737845487846,33.3232989232989,29.9746558996559,23.131018981019,20.2339799089799,44.9719627594628,31.7920038295038,30.0637432012432,22.3874042624043,20.780192030192,52.5299936174936,37.2270632145632,36.1265886890887,28.9062687312687,25.5504412254412,51.9293401043401,37.9805833055833,36.9155996780997,28.1241217116217,24.3870185370185,52.6126096126096,39.1603271728272,37.424198024198,30.0588383838384,26.4886252636253,45.4922799422799,32.2830086580087,32.0679653679654,22.6895382395382,19.5786796536797,40.8992063492064,30.0285714285714,27.3293650793651,21.7623015873016,18.0539682539683,42.7592685092685,30.968512043512,29.4527472527473,23.1162448662449,20.5175685425685,45.0611943611944,33.9262903762904,28.6949161949162,24.1449966699967,19.7146353646354,42.0621212121212,35.1989538239538,27.7395743145743,21.3473304473304,16.5222943722944,47.3636251820075,37.7632388852977,29.4763379594262,28.5341607738667,18.8966947268418,31.0575396825397,26.4988095238095,17.3297619047619,12.4753968253968,11.8130952380952,51.3380243939067,35.5116515837104,32.2940632896515,24.6280030427089,21.3595817581112,53.3064587373411,36.6985022330611,33.6017472723355,24.9945254092313,22.6681135041429,52.2829795204795,38.6358571983572,33.4676587301587,27.0539155289155,22.7654983904984,49.6317599067599,43.7847541347541,22.0618603618604,20.4895937395937,20.0840603840604,35.5440476190476,32.7388888888889,21.4242063492063,17.7964285714286,15.5281746031746,40.336936266348,38.4908029878618,23.0063492063492,20.8565656565657,18.6011480349716,35.9431096681097,34.3919913419913,18.6191919191919,18.0793650793651,17.3027777777778,39.8513680763681,37.6476384726385,21.0173382173382,20.0828754578755,17.6821844821845,36.0444444444444,31.2190476190476,19.3313492063492,15.9460317460317,14.0650793650794,38.6366161616162,31.1920634920635,22.7051587301587,16.0849567099567,15.5816738816739,37.7587301587302,35.179329004329,19.1916666666667,17.319696969697,16.958658008658,40.5977272727273,35.418253968254,22.6789682539683,15.9435786435786,15.2246753246753,36.9700216450216,30.3698051948052,19.8571428571429,14.9014069264069,14.3809523809524,40.1988095238095,35.4007936507937,22.2190476190476,19.7373015873016,17.225,42.7885281385281,28.6026515151515,20.8757936507936,17.4804834054834,17.2018398268398,37.4900793650794,27.2611111111111,16.6396825396825,14.0694444444444,13.9753968253968,40.8617784992785,33.3265512265512,20.0274891774892,17.4947691197691,17.250487012987,51.6596792096792,46.6621878121878,31.0011682761683,27.3442501942502,26.2501082251082,46.2483849483849,41.3774864024864,29.8478604728605,25.8884032634033,23.7814754689755,46.3080086580087,33.9543650793651,26.3158008658009,23.6606421356421,19.1706349206349,49.847113997114,45.0604270729271,26.6910977910978,26.6032467532468,22.5402777777778,40.6848124098124,32.0536075036075,24.7874098124098,24.5537518037518,17.3515512265512,51.1398906648907,49.5490773115773,28.9651237651238,28.82224997225,24.0953268953269,45.0436091686092,40.7441891441891,25.4160284160284,24.7156038406038,24.3911421911422,49.2662684537685,38.0795843045843,30.5392371517372,25.3600371850372,23.3846792096792,49.434299034299,36.7371989121989,26.7855907980908,24.4628010878011,22.6287573537574,42.194647019647,39.5234376734377,23.7469419469419,22.8684787434787,22.310150960151,33.7166666666667,33.3126623376623,16.6457431457431,15.4630952380952,15.4497474747475,33.8001803751804,33.4091991341991,15.4533189033189,15.2952380952381,13.977380952381,42.8483405483405,40.4795815295815,22.7185064935065,18.5823953823954,16.4488816738817,31.6630952380952,30.922619047619,15.452380952381,14.5166666666667,13.1583333333333,45.6904206904207,39.9593545343545,21.5668081918082,19.6726412476412,18.7164946164946,43.4355133428663,40.2922012627895,23.1476043564279,22.4376484626485,20.041055023408,51.0896298146298,46.9502386502387,25.0852647352647,24.6659756909757,23.9489316239316,45.3202713952714,41.923470973471,28.2408702408702,23.7796231546232,18.9066156066156,43.4894130379424,42.4446248196248,29.3187950937951,22.8286817757406,17.7250615397674,48.8258824508825,48.4873501498502,25.2406690531691,24.7090298590299,22.5052572427572,40.8186688311688,32.2147546897547,21.2680555555556,16.0061327561328,15.9544191919192,46.5033966033966,35.5589688089688,23.3261821511822,20.3582833832834,20.110434010434,33.1738095238095,28.1964285714286,13.0428571428571,12.4107142857143,11.847619047619,33.3138888888889,27.7170634920635,12.675,12.1428571428571,11.6218253968254,34.5361111111111,29.190873015873,14.093253968254,12.8809523809524,12.1690476190476,36.671984959485,34.6903152403152,21.1319347319347,16.82524003774,16.2474025974026,36.0825396825397,28.8952380952381,16.2063492063492,15.0428571428571,13.4404761904762,43.9970265845266,41.7984876234876,27.1804778554779,20.9828615828616,20.3484015984016,46.2228923853924,44.6305555555556,28.5108197358197,20.3356768231768,20.0699439449439,44.583436008436,41.8043956043956,24.2442113442113,21.7384143634144,18.2797924297924,38.5835137085137,32.9700937950938,17.4440115440115,17.1134920634921,14.6243506493506,41.1159312909313,35.5990786990787,19.4836885336885,18.1232017982018,15.3308441558442,35.1313492063492,27.5019841269841,18.0539682539683,14.5321428571429,12.6265873015873,38.9565934065934,30.9721916971917,19.9984126984127,16.3255494505494,14.7706349206349,46.6965049656226,35.5399548164254,24.1154725992961,22.3218062982769,18.8842479416009,38.2363636363636,35.0234126984127,21.850468975469,16.5250721500721,16.4475108225108,37.7617826617827,35.9903846153846,19.0242368742369,16.2904456654457,14.487148962149,38.3142857142857,31.2988095238095,18.0198412698413,15.7857142857143,14.372619047619,42.4759601509601,34.2152583527584,21.8150738150738,15.9842823842824,15.5931374181374,46.6440892440892,43.4914474414474,23.7364357864358,23.493561993562,20.096756021756,45.4554667554668,45.4090687090687,26.034126984127,24.8790598290598,22.1488289488289,43.609151959152,42.8379093129093,30.2489121989122,26.8362554112554,22.9707070707071,39.9339993339993,30.0461788211788,21.7162504162504,16.4108474858475,15.8028110778111,38.3527056277056,36.5507215007215,19.4521284271284,17.7958152958153,17.2388528138528,49.8577579283462,46.5305571879101,26.8975238813474,22.8950551899081,22.587651319269,39.7031440781441,35.5779914529915,21.147619047619,19.6964438339438,16.9244047619048,39.6726911976912,36.8309163059163,23.1091630591631,18.7273629148629,18.6602272727273,37.3844932844933,33.8236568986569,19.4101648351648,16.9909645909646,16.989590964591,37.206376956377,37.1628121878122,20.0038156288156,18.1159257409257,16.5688145188145,48.6616355866356,43.14864996115,26.9828282828283,25.1817834942835,22.7418081918082,59.2993945596887,51.1867261565404,34.9577209555151,34.6455796740239,30.3021942410874,49.5325110347169,49.201173173232,28.1074028912264,27.8889721389721,22.937944000444,50.800013222072,46.3234353881413,25.8688914027149,25.477886002886,23.093450993451,48.592316017316,46.1921051171051,31.376751026751,26.1630785880786,25.350419025419,43.753058379529,42.7659988704106,24.4123179108473,24.046455505279,22.0957072339425,47.8445637695638,43.8864663114663,29.049802974803,19.8219696969697,18.8553751803752,50.0204337329337,46.7584845709846,27.8758241758242,22.1766247641248,21.6913197913198,50.1133490692314,44.0853674103674,28.4966033966034,23.3215452847806,23.1932984499161,52.6442257089316,45.3419617963736,27.8536574536575,22.4395117953941,21.0855821466116,51.1959029360732,45.189155735905,28.2569505657741,22.198535107823,22.1626354510642,42.0599206349206,33.8622655122655,20.3424603174603,19.4530303030303,16.0062049062049,42.5742590742591,37.7547813297813,23.2388084138084,16.9089188589189,15.8150738150738,50.1113525363525,44.9533272283272,28.0812576312576,22.7372211122211,21.8442085692086,42.1617299367299,41.8430236430236,20.0319902319902,19.4701021201021,18.7368548118548,37.97886002886,35.5686507936508,19.4433982683983,17.9224025974026,15.6357864357864,41.6092851592852,35.3834443334443,19.9926434676435,19.9777361527362,17.9348928848929,37.9860084360084,35.1312687312687,18.8951076701077,18.7765318015318,17.3071428571429,39.1072871572872,32.9404761904762,23.3837301587302,16.803354978355,16.3310606060606,40.4763236763237,32.6101981351981,27.6092102342102,25.1421023421023,24.048285048285,37.5789488289488,36.813875013875,27.4644189144189,24.8482989232989,24.437678987679,43.2565725940726,32.3820304695305,31.3258325008325,27.3139596514597,26.2574009324009,27.3781746031746,26.9571428571429,20.0805555555556,14.331746031746,13.4611111111111,28.4872655122655,25.2253968253968,19.8013347763348,16.5963924963925,12.4582251082251,40.9017704517705,29.603663003663,29.3476911976912,23.6567737817738,21.6225996225996,29.2633477633478,25.7901154401154,22.6970779220779,19.2496392496392,16.6266594516595,37.2545870795871,29.6250305250305,27.1693833943834,23.8173215673216,22.2284576534577,36.7339826839827,28.9115079365079,26.5071428571429,22.672113997114,20.0006493506494,34.9048534798535,29.0098595848596,28.0688339438339,22.4212759462759,18.7626984126984,36.4940836940837,29.2281746031746,27.803354978355,23.3786796536797,21.7892496392496,41.8131424131424,30.2298174048174,29.0353285603286,27.3098207348207,25.930217005217,47.6547369297369,34.5698218448218,32.7783882783883,27.3175824175824,27.1077145077145,45.0921162171162,33.7537698412698,31.9179029304029,31.5196234321234,27.5220404595405,36.6619047619048,27.4424603174603,26.1515873015873,22.0305555555556,19.7238095238095,38.062987012987,27.3460317460317,25.9606060606061,22.145670995671,18.9886002886003,42.3004467754468,31.4952561327561,30.5102966477966,29.0035755910756,24.9521742146742,37.7455627705628,27.6291486291486,25.8546176046176,24.0542207792208,20.6119769119769,36.0925324675325,28.5529942279942,27.5421717171717,23.0700937950938,20.237481962482,44.9402861027861,34.2151667776668,33.6041000666001,24.9466866466866,20.913653013653,39.7582167832168,31.6603951603952,31.105994005994,22.5139749139749,17.8093101343101,38.9850566100566,29.6240315240315,29.3010517260517,21.933238983239,16.3401542901543,34.6833333333333,24.5833333333333,24.1154761904762,20.1746031746032,17.8746031746032,34.3360028860029,25.9511904761905,24.775,21.6085497835498,19.3523448773449,37.9200965700966,27.6383116883117,24.6131146631147,22.0568181818182,21.278021978022,33.5801587301587,24.3511904761905,23.9142857142857,20.2297619047619,18.0253968253968,35.659126984127,26.0349206349206,25.627380952381,21.0952380952381,19.0015873015873,35.1545093795094,25.9518398268398,21.8439754689755,21.6111832611833,18.9024891774892,42.1657703407703,32.6043928293928,31.2623404373404,23.7180874680875,21.3798368298368,42.4355616605617,33.6047313797314,30.6721916971917,23.9076617826618,19.9926434676435,42.8408508158508,30.6957653457653,28.5968337218337,20.5278360528361,19.4522089022089,43.8770340770341,30.3017898767899,29.2968337218337,23.8897047397047,18.9422521922522,32.5717171717172,24.2857142857143,21.8195887445887,20.359126984127,18.0050505050505,48.4659561843385,34.2631056851645,33.7201497032379,25.5343952616011,22.1878382238676,49.3293276168276,35.1306152181152,33.3525335775336,26.7550518925519,25.1739621489622,41.524136974137,30.1973304473304,28.7580280830281,22.6092268842269,22.5600455100455,35.4078282828283,27.4559523809524,25.5722222222222,23.0395021645022,20.7015512265512,45.6411519036519,34.0004911754912,30.5989746364746,28.8616605616606,25.6653388278388,40.7537545787546,28.4157120657121,28.1196608946609,25.2760739260739,23.7532106782107,50.0122932622933,35.1526903651904,34.6532259407259,30.1523823398823,29.9050505050505,47.2318736818737,34.3195679320679,32.1453685203685,27.784897047397,27.4784743034743,39.7006493506493,28.1031385281385,27.1689393939394,21.2516594516595,19.9507215007215,44.3550144300144,36.6139804639805,27.9168220668221,27.6480796980797,24.9757936507937,46.1982947607948,36.2775696525697,30.8598013098013,27.9725621600622,27.1547064047064,46.0036955691367,36.2070327548269,28.1217878526702,26.9020257520258,22.6027703505645,44.055525030525,34.1907592407592,27.771978021978,23.0546731046731,20.8441003441003,54.6760739260739,40.5189393939394,36.2433483183483,28.9412087912088,26.4598401598402,37.3619963369963,29.7110500610501,22.8034188034188,22.3220695970696,21.0688034188034,50.9516136641137,35.3995268620269,34.6035797535798,26.4064477189477,23.1882659007659,42.5226356976357,33.7188616938617,32.2370268620269,25.0037629037629,22.398618048618,53.3242056146468,38.9419284147225,31.8776472710296,31.552886002886,26.2244719332955,36.6566738816739,30.7953823953824,25.3648268398268,18.7027777777778,17.2936507936508,52.7263215542627,41.7262301424066,34.7675845396434,32.2287434787435,26.5211308299544,51.5666132070544,39.1927054154995,32.6492895992896,31.8682261366085,26.5620013972955,55.2217143967144,37.9621045621046,37.0146159396159,30.781191031191,25.0210178710179,41.5181734931735,30.2177183927184,28.7529276279276,19.3883366633367,17.0753635253635,48.4545263559969,41.0185226538168,29.9681540681541,27.1781039222216,24.1945995181289,53.2607689695925,48.8054812834225,35.3556241144476,29.4441755956462,28.924636311401,53.5428577141812,47.720993467317,33.5488309076544,30.3247216019275,28.0903682102212,50.765959040959,41.5195290004114,31.0447212917801,30.9014013764014,25.8871809562986,43.3895821498763,37.0788899009487,27.9160080115962,24.238853956501,19.1310444457503,43.6612373737374,35.5108405483405,28.2737012987013,23.766847041847,17.8289682539683],[0.162698412698413,0.148809523809524,0.0972222222222222,0.0734126984126984,0.0892857142857143,0.140255009107468,0.140255009107468,0.0910746812386157,0.087431693989071,0.107468123861566,0.15843621399177,0.146090534979424,0.102880658436214,0.088477366255144,0.0925925925925926,0.148063781321185,0.152619589977221,0.0979498861047836,0.0911161731207289,0.0888382687927107,0.16452442159383,0.138817480719794,0.105398457583548,0.089974293059126,0.0925449871465296,0.167848699763593,0.132387706855792,0.113475177304965,0.0851063829787234,0.0874704491725768,0.167010309278351,0.136082474226804,0.109278350515464,0.0845360824742268,0.088659793814433,0.155361050328228,0.135667396061269,0.105032822757112,0.087527352297593,0.0853391684901532,0.161735700197239,0.126232741617357,0.108481262327416,0.0788954635108481,0.0966469428007889,0.182389937106918,0.132075471698113,0.10062893081761,0.0817610062893082,0.0922431865828092,0.163594470046083,0.119815668202765,0.117511520737327,0.0852534562211982,0.0967741935483871,0.15938864628821,0.122270742358079,0.11353711790393,0.102620087336245,0.074235807860262,0.175600739371534,0.151571164510166,0.0942698706099815,0.0720887245841035,0.0739371534195934,0.161228406909789,0.140115163147793,0.101727447216891,0.0844529750479846,0.0921305182341651,0.159633027522936,0.152293577981651,0.0972477064220184,0.0825688073394495,0.0715596330275229,0.172680412371134,0.134020618556701,0.0902061855670103,0.103092783505155,0.0850515463917526,0.156312625250501,0.158316633266533,0.0861723446893788,0.094188376753507,0.0801603206412826,0.172690763052209,0.146586345381526,0.0903614457831325,0.0763052208835341,0.0863453815261044,0.165120593692022,0.152133580705009,0.0816326530612245,0.0834879406307978,0.0871985157699443,0.17439293598234,0.152317880794702,0.0728476821192053,0.0816777041942605,0.0927152317880795,0.16403162055336,0.171936758893281,0.0790513833992095,0.0770750988142292,0.0909090909090909,0.176100628930818,0.147798742138365,0.0911949685534591,0.0723270440251572,0.0817610062893082,0.172690763052209,0.150602409638554,0.0943775100401606,0.0843373493975904,0.0742971887550201,0.152542372881356,0.144067796610169,0.0903954802259887,0.0819209039548023,0.0790960451977401,0.179487179487179,0.128205128205128,0.0897435897435897,0.0948717948717949,0.0820512820512821,0.15650406504065,0.148373983739837,0.0833333333333333,0.0792682926829268,0.0995934959349594,0.148148148148148,0.15843621399177,0.0925925925925926,0.0967078189300412,0.10082304526749,0.153225806451613,0.141129032258065,0.0826612903225806,0.0826612903225806,0.094758064516129,0.151750972762646,0.151750972762646,0.0856031128404669,0.0836575875486381,0.0856031128404669,0.14638783269962,0.138783269961977,0.096958174904943,0.0874524714828897,0.100760456273764,0.14484126984127,0.150793650793651,0.0992063492063492,0.0912698412698413,0.0853174603174603,0.152215799614644,0.159922928709056,0.0867052023121387,0.0886319845857418,0.0809248554913295,0.165399239543726,0.159695817490494,0.0722433460076046,0.0798479087452472,0.0836501901140684,0.160896130346232,0.167006109979633,0.0794297352342159,0.0896130346232179,0.0936863543788187,0.160427807486631,0.163101604278075,0.0935828877005348,0.0828877005347594,0.0748663101604278,0.159493670886076,0.151898734177215,0.0886075949367089,0.0784810126582278,0.0835443037974684,0.161504424778761,0.154867256637168,0.084070796460177,0.081858407079646,0.079646017699115,0.161220043572985,0.163398692810458,0.108932461873638,0.093681917211329,0.0631808278867102,0.183800623052959,0.152647975077882,0.102803738317757,0.0841121495327103,0.0841121495327103,0.158974358974359,0.151282051282051,0.0974358974358974,0.0794871794871795,0.0846153846153846,0.145719489981785,0.114754098360656,0.103825136612022,0.112932604735883,0.0892531876138433,0.153005464480874,0.1183970856102,0.100182149362477,0.111111111111111,0.0947176684881603,0.146067415730337,0.129213483146067,0.0973782771535581,0.101123595505618,0.0842696629213483,0.16504854368932,0.130097087378641,0.0970873786407767,0.0854368932038835,0.0932038834951456,0.168278529980658,0.121856866537718,0.119922630560928,0.0928433268858801,0.0967117988394584,0.14922480620155,0.131782945736434,0.104651162790698,0.0852713178294574,0.0968992248062016,0.167701863354037,0.109730848861284,0.115942028985507,0.0973084886128364,0.0890269151138716,0.175519630484988,0.113163972286374,0.110854503464203,0.0993071593533487,0.0900692840646651,0.179245283018868,0.106132075471698,0.120283018867925,0.0943396226415094,0.0990566037735849,0.172549019607843,0.127450980392157,0.12156862745098,0.111764705882353,0.105882352941176,0.162109375,0.125,0.12890625,0.103515625,0.091796875,0.16195856873823,0.128060263653484,0.12241054613936,0.112994350282486,0.109227871939736,0.185011709601874,0.133489461358314,0.124121779859485,0.100702576112412,0.0772833723653396,0.177083333333333,0.1328125,0.114583333333333,0.0963541666666667,0.09375,0.172330097087379,0.128640776699029,0.118932038834951,0.0995145631067961,0.0995145631067961,0.182692307692308,0.137019230769231,0.115384615384615,0.110576923076923,0.0985576923076923,0.175903614457831,0.144578313253012,0.113253012048193,0.101204819277108,0.0771084337349398,0.163440860215054,0.129032258064516,0.10752688172043,0.118279569892473,0.0752688172043011,0.186046511627907,0.174418604651163,0.104651162790698,0.0813953488372093,0.0697674418604651,0.175105485232068,0.118143459915612,0.118143459915612,0.10337552742616,0.0759493670886076,0.175403225806452,0.118951612903226,0.120967741935484,0.0987903225806452,0.0786290322580645,0.165009940357853,0.127236580516899,0.113320079522863,0.111332007952286,0.0795228628230616,0.16304347826087,0.16304347826087,0.0782608695652174,0.0760869565217391,0.0652173913043478,0.160664819944598,0.135734072022161,0.10803324099723,0.0775623268698061,0.074792243767313,0.146282973621103,0.15347721822542,0.0959232613908873,0.0911270983213429,0.0959232613908873,0.151515151515152,0.146005509641873,0.101928374655647,0.0881542699724518,0.0826446280991736,0.164588528678304,0.14713216957606,0.0947630922693267,0.0897755610972569,0.0922693266832918,0.182890855457227,0.138643067846608,0.100294985250737,0.079646017699115,0.0825958702064897,0.173789173789174,0.142450142450142,0.102564102564103,0.0883190883190883,0.0883190883190883,0.159663865546218,0.162464985994398,0.0840336134453782,0.106442577030812,0.0812324929971989,0.180555555555556,0.152777777777778,0.108333333333333,0.0916666666666667,0.0722222222222222,0.176470588235294,0.157894736842105,0.0990712074303406,0.0804953560371517,0.0712074303405573,0.179347826086957,0.14945652173913,0.103260869565217,0.0951086956521739,0.0978260869565217,0.198324022346369,0.125698324022346,0.0865921787709497,0.0977653631284916,0.0865921787709497,0.196013289036545,0.136212624584718,0.0897009966777409,0.079734219269103,0.0863787375415282,0.176943699731903,0.13941018766756,0.0804289544235925,0.107238605898123,0.0911528150134048,0.147482014388489,0.142086330935252,0.0899280575539568,0.0899280575539568,0.0755395683453237,0.139004149377593,0.141078838174274,0.107883817427386,0.0892116182572614,0.105809128630705,0.182481751824818,0.128953771289538,0.109489051094891,0.0924574209245742,0.0875912408759124,0.158102766798419,0.154150197628458,0.0849802371541502,0.0810276679841897,0.0988142292490119,0.164456233421751,0.137931034482759,0.111405835543767,0.10079575596817,0.106100795755968,0.141831238779174,0.149012567324955,0.0843806104129264,0.0843806104129264,0.0789946140035907,0.15450643776824,0.148068669527897,0.11587982832618,0.0836909871244635,0.0879828326180258,0.160416666666667,0.11875,0.108333333333333,0.0875,0.0916666666666667,0.170626349892009,0.123110151187905,0.0928725701943845,0.0863930885529158,0.0928725701943845,0.165450121654501,0.153284671532847,0.0924574209245742,0.0997566909975669,0.0948905109489051,0.168253968253968,0.180952380952381,0.0793650793650794,0.0825396825396825,0.073015873015873,0.177993527508091,0.187702265372168,0.0744336569579288,0.0711974110032362,0.0679611650485437,0.170918367346939,0.176020408163265,0.0969387755102041,0.0739795918367347,0.0637755102040816,0.168918918918919,0.182432432432432,0.0743243243243243,0.0777027027027027,0.0641891891891892,0.185929648241206,0.163316582914573,0.085427135678392,0.0829145728643216,0.0728643216080402,0.163507109004739,0.154028436018957,0.0900473933649289,0.0829383886255924,0.0853080568720379,0.17578125,0.14453125,0.076171875,0.08984375,0.0859375,0.164113785557987,0.150984682713348,0.0962800875273523,0.0940919037199125,0.074398249452954,0.160714285714286,0.154017857142857,0.0982142857142857,0.0848214285714286,0.0691964285714286,0.15863453815261,0.15863453815261,0.0823293172690763,0.0943775100401606,0.0783132530120482,0.172774869109948,0.141361256544503,0.0863874345549738,0.0863874345549738,0.0706806282722513,0.187347931873479,0.131386861313869,0.0875912408759124,0.0924574209245742,0.0924574209245742,0.197841726618705,0.165467625899281,0.0683453237410072,0.0719424460431655,0.0647482014388489,0.189393939393939,0.166666666666667,0.0643939393939394,0.0757575757575758,0.0909090909090909,0.197879858657244,0.159010600706714,0.0848056537102474,0.0671378091872792,0.0671378091872792,0.165730337078652,0.146067415730337,0.098314606741573,0.0955056179775281,0.0730337078651685,0.188741721854305,0.162251655629139,0.0827814569536424,0.0993377483443709,0.0695364238410596,0.157777777777778,0.148888888888889,0.0977777777777778,0.0777777777777778,0.0911111111111111,0.158995815899582,0.148535564853556,0.100418410041841,0.0836820083682008,0.0711297071129707,0.16331096196868,0.158836689038031,0.0894854586129754,0.0827740492170022,0.0805369127516778,0.178362573099415,0.152046783625731,0.0847953216374269,0.0906432748538012,0.0730994152046784,0.171428571428571,0.150649350649351,0.0831168831168831,0.0805194805194805,0.0675324675324675,0.181229773462783,0.13915857605178,0.0938511326860841,0.0776699029126214,0.087378640776699,0.172910662824208,0.141210374639769,0.103746397694524,0.0749279538904899,0.0893371757925072,0.188995215311005,0.141148325358852,0.0909090909090909,0.102870813397129,0.0813397129186603,0.179271708683473,0.15406162464986,0.100840336134454,0.0728291316526611,0.0700280112044818,0.171745152354571,0.163434903047091,0.0831024930747922,0.0775623268698061,0.0831024930747922,0.182080924855491,0.141618497109827,0.0895953757225433,0.0751445086705202,0.0809248554913295,0.177377892030848,0.146529562982005,0.0925449871465296,0.0796915167095116,0.0822622107969152,0.159914712153518,0.155650319829424,0.0874200426439232,0.0788912579957356,0.0874200426439232,0.15071283095723,0.158859470468432,0.0916496945010183,0.0814663951120163,0.0814663951120163,0.137214137214137,0.147609147609148,0.0997920997920998,0.0956340956340956,0.0831600831600832,0.189111747851003,0.134670487106017,0.103151862464183,0.0859598853868195,0.0888252148997135,0.163434903047091,0.160664819944598,0.0803324099722992,0.124653739612188,0.0803324099722992,0.164634146341463,0.158536585365854,0.0894308943089431,0.0873983739837398,0.0873983739837398,0.163265306122449,0.135204081632653,0.0892857142857143,0.0892857142857143,0.0994897959183673,0.155612244897959,0.153061224489796,0.0943877551020408,0.0790816326530612,0.086734693877551,0.170868347338936,0.134453781512605,0.0896358543417367,0.0812324929971989,0.0784313725490196,0.159029649595687,0.150943396226415,0.0835579514824798,0.0862533692722372,0.0754716981132075,0.165644171779141,0.147239263803681,0.0858895705521472,0.081799591002045,0.0940695296523517,0.144817073170732,0.134146341463415,0.0884146341463415,0.0853658536585366,0.0929878048780488,0.166058394160584,0.142335766423358,0.0857664233576642,0.0839416058394161,0.0839416058394161,0.154425612052731,0.148775894538606,0.0772128060263653,0.0790960451977401,0.0847457627118644,0.140417457305503,0.146110056925996,0.094876660341556,0.0891840607210626,0.0891840607210626,0.156652360515021,0.152360515021459,0.105150214592275,0.0858369098712446,0.0793991416309013,0.172340425531915,0.148936170212766,0.0957446808510638,0.074468085106383,0.0702127659574468,0.170974155069582,0.147117296222664,0.0874751491053678,0.0775347912524851,0.0755467196819085,0.173387096774194,0.137096774193548,0.092741935483871,0.0907258064516129,0.094758064516129,0.179282868525896,0.139442231075697,0.0876494023904383,0.0796812749003984,0.0836653386454183,0.169291338582677,0.139763779527559,0.0885826771653543,0.078740157480315,0.0866141732283465,0.191256830601093,0.144808743169399,0.0983606557377049,0.10655737704918,0.092896174863388,0.165394402035623,0.155216284987277,0.104325699745547,0.0814249363867685,0.0763358778625954,0.166666666666667,0.144578313253012,0.0923694779116466,0.0863453815261044,0.0963855421686747,0.173076923076923,0.163461538461538,0.0745192307692308,0.0889423076923077,0.0865384615384615,0.176795580110497,0.157458563535912,0.0939226519337017,0.0856353591160221,0.102209944751381,0.169191919191919,0.136363636363636,0.0833333333333333,0.0984848484848485,0.0732323232323232,0.165775401069519,0.144385026737968,0.0882352941176471,0.0935828877005348,0.0989304812834225,0.1875,0.133152173913043,0.103260869565217,0.0815217391304348,0.0842391304347826,0.15421686746988,0.12289156626506,0.12289156626506,0.120481927710843,0.106024096385542,0.160671462829736,0.15347721822542,0.107913669064748,0.11031175059952,0.11031175059952,0.168141592920354,0.119469026548673,0.123893805309735,0.110619469026549,0.108407079646018,0.145985401459854,0.160583941605839,0.124087591240876,0.12043795620438,0.0948905109489051,0.165384615384615,0.15,0.123076923076923,0.111538461538462,0.0615384615384615,0.167095115681234,0.136246786632391,0.131105398457584,0.131105398457584,0.10025706940874,0.154362416107383,0.13758389261745,0.12751677852349,0.110738255033557,0.10738255033557,0.16010498687664,0.139107611548556,0.115485564304462,0.123359580052493,0.141732283464567,0.158904109589041,0.13972602739726,0.115068493150685,0.123287671232877,0.13972602739726,0.156593406593407,0.145604395604396,0.120879120879121,0.126373626373626,0.0934065934065934,0.145118733509235,0.134564643799472,0.12664907651715,0.12401055408971,0.137203166226913,0.154394299287411,0.118764845605701,0.130641330166271,0.128266033254157,0.140142517814727,0.174468085106383,0.140425531914894,0.121276595744681,0.102127659574468,0.112765957446809,0.166666666666667,0.128205128205128,0.113247863247863,0.138888888888889,0.128205128205128,0.162464985994398,0.137254901960784,0.120448179271709,0.112044817927171,0.140056022408964,0.171270718232044,0.129834254143646,0.116022099447514,0.132596685082873,0.11878453038674,0.163218390804598,0.128735632183908,0.126436781609195,0.140229885057471,0.11264367816092,0.160326086956522,0.138586956521739,0.108695652173913,0.119565217391304,0.14945652173913,0.14945652173913,0.141304347826087,0.122282608695652,0.122282608695652,0.138586956521739,0.172566371681416,0.126106194690265,0.123893805309735,0.110619469026549,0.0995575221238938,0.1640625,0.15625,0.140625,0.109375,0.078125,0.178082191780822,0.134246575342466,0.13972602739726,0.117808219178082,0.0684931506849315,0.1625,0.1375,0.11875,0.128125,0.1375,0.14792899408284,0.144970414201183,0.115384615384615,0.124260355029586,0.136094674556213,0.179271708683473,0.126050420168067,0.117647058823529,0.126050420168067,0.128851540616246,0.169278996865204,0.134796238244514,0.115987460815047,0.122257053291536,0.0909090909090909,0.151603498542274,0.122448979591837,0.139941690962099,0.119533527696793,0.137026239067055,0.16012084592145,0.126888217522659,0.114803625377644,0.132930513595166,0.0996978851963746,0.172169811320755,0.113207547169811,0.132075471698113,0.108490566037736,0.089622641509434,0.171084337349398,0.125301204819277,0.127710843373494,0.127710843373494,0.0795180722891566,0.179220779220779,0.132467532467532,0.122077922077922,0.0961038961038961,0.0727272727272727,0.179292929292929,0.126262626262626,0.128787878787879,0.106060606060606,0.0681818181818182,0.166123778501629,0.130293159609121,0.120521172638436,0.130293159609121,0.0977198697068404,0.174107142857143,0.127232142857143,0.133928571428571,0.107142857142857,0.0825892857142857,0.182417582417582,0.131868131868132,0.127472527472527,0.103296703296703,0.114285714285714,0.18,0.125,0.115,0.1075,0.0975,0.153846153846154,0.118131868131868,0.120879120879121,0.134615384615385,0.129120879120879,0.175824175824176,0.136263736263736,0.107692307692308,0.12967032967033,0.105494505494505,0.168292682926829,0.119512195121951,0.104878048780488,0.136585365853659,0.121951219512195,0.185483870967742,0.122983870967742,0.120967741935484,0.11491935483871,0.108870967741935,0.172340425531915,0.131914893617021,0.108510638297872,0.123404255319149,0.106382978723404,0.162087912087912,0.129120879120879,0.126373626373626,0.123626373626374,0.0989010989010989,0.164835164835165,0.12967032967033,0.103296703296703,0.12967032967033,0.101098901098901,0.169133192389006,0.12262156448203,0.112050739957717,0.107822410147992,0.116279069767442,0.16331096196868,0.134228187919463,0.125279642058166,0.116331096196868,0.0917225950782998,0.169117647058824,0.134803921568627,0.127450980392157,0.120098039215686,0.0882352941176471,0.165413533834586,0.12781954887218,0.12218045112782,0.107142857142857,0.0921052631578947,0.164804469273743,0.128491620111732,0.122905027932961,0.111731843575419,0.103351955307263,0.175,0.127083333333333,0.122916666666667,0.10625,0.0895833333333333,0.167832167832168,0.118881118881119,0.13986013986014,0.114219114219114,0.0909090909090909,0.171102661596958,0.119771863117871,0.115969581749049,0.104562737642586,0.0741444866920152,0.164739884393064,0.138728323699422,0.124277456647399,0.0982658959537572,0.0838150289017341,0.151459854014599,0.131386861313869,0.109489051094891,0.111313868613139,0.0748175182481752,0.157894736842105,0.12406015037594,0.0996240601503759,0.112781954887218,0.103383458646617,0.178368121442125,0.119544592030361,0.119544592030361,0.111954459203036,0.0891840607210626,0.180371352785146,0.148541114058355,0.114058355437666,0.0954907161803713,0.0716180371352785,0.156941649899396,0.130784708249497,0.0945674044265594,0.0925553319919517,0.0985915492957746,0.142857142857143,0.132773109243697,0.0974789915966387,0.0974789915966387,0.0873949579831933,0.146757679180887,0.133105802047782,0.0921501706484642,0.0921501706484642,0.0972696245733788,0.152830188679245,0.128301886792453,0.10188679245283,0.0905660377358491,0.1,0.175059952038369,0.143884892086331,0.115107913669065,0.0863309352517986,0.0839328537170264,0.174447174447174,0.142506142506143,0.117936117936118,0.0884520884520884,0.0786240786240786],[0.180374584300577,0.160346803216839,0.0878196312311836,0.0865994915633905,0.0853318863246661,0.164712503737297,0.160204030965672,0.107155397114152,0.0934710710967062,0.0909014356236765,0.16992375369241,0.165352091937913,0.107086901489887,0.102714035549856,0.0864116397698487,0.169299922980905,0.16037426558899,0.106569640311972,0.101359195224226,0.0841083933108473,0.19406906684811,0.144325618699195,0.110573190413737,0.105246740098676,0.0919384209817012,0.182602604114232,0.144107413610585,0.119125946874361,0.0985429651391596,0.0855612909524115,0.186622895155056,0.148312742782232,0.116909997338804,0.0944274520910035,0.0877115206581947,0.177891557077077,0.14597713330745,0.116900311017958,0.099347091654784,0.0828728754068121,0.183680413823512,0.14061761245994,0.117112088753762,0.09129308752289,0.0891949369085286,0.196495398538037,0.144609790502189,0.108728587705036,0.0909025552959028,0.0893837196772792,0.180724823642301,0.14040673412635,0.123366985402109,0.0946329611618868,0.0918824700120276,0.182487770129618,0.139860936436319,0.123184367032792,0.0949173484896042,0.086331909560256,0.183938147770635,0.172165102241244,0.100237133612768,0.0766256679962264,0.076205186991989,0.173600207925952,0.172056669736179,0.111265617044952,0.0853743503042978,0.0753369562914221,0.17712184174369,0.166420806084672,0.105435894637575,0.0826097385341083,0.0754565042800337,0.191992431718459,0.146173898399926,0.0985233690713143,0.0868475639023584,0.0780039975245455,0.168378105399963,0.165009540146152,0.0930570441499403,0.0882841303606331,0.0825430489364916,0.179956124572913,0.166067336961498,0.0946307646125164,0.0904767677577897,0.088880452475343,0.179314980490952,0.16745396264022,0.0958253709626924,0.0836659237762803,0.0737093546066881,0.178574815950561,0.165648378570844,0.0884150419935708,0.087376539961033,0.0853329021321069,0.17897890684338,0.174784204486913,0.0946426099409595,0.0825360341097751,0.0747091053137393,0.199292615596963,0.167218771566598,0.095382591442374,0.0777626811594203,0.0743939786059351,0.185371436146984,0.168455439532082,0.100075188396356,0.0818810042350188,0.0758803088638855,0.171859685968597,0.16792804280428,0.0978076379066478,0.0873562356235624,0.084977783492635,0.200003771481044,0.147538698675062,0.0978502558048013,0.0834238488783943,0.0797269775678867,0.170710740191964,0.16089371039447,0.0953970697079011,0.092013316736564,0.0858979262061528,0.168529599546391,0.164948178894074,0.101035453973887,0.100839303731095,0.0906267602629543,0.169646285386428,0.159547668209595,0.0948092912378627,0.0939667242188251,0.0865339890065165,0.171351442096123,0.162851333064099,0.097302106876575,0.0899750367835474,0.0857539328284009,0.174642169173419,0.145494908255325,0.10592580644664,0.0938380292546959,0.0888384281613448,0.169206057032559,0.157606521271843,0.111757102763686,0.09520224884952,0.0875191395046991,0.167101891985589,0.164375969436447,0.0966340630664005,0.0934468095741744,0.0794795808622956,0.183137777538819,0.173243100456642,0.0843956535362785,0.0842066835556419,0.0802607452347036,0.173360901780495,0.173071916787259,0.0880246063240518,0.0805711283992245,0.0801665114511695,0.182079516395554,0.177469464497766,0.0920071673609409,0.0871116435974927,0.0793888108746599,0.174899881641455,0.1733949446309,0.0936220957569272,0.084714480276278,0.0811626700390745,0.174406801697638,0.168819062743366,0.0927933288491057,0.0895415009956843,0.0773500625094251,0.174718318136786,0.17038277605133,0.110025777476373,0.083330137253632,0.0746625737091472,0.186274761476918,0.173319642322338,0.104413211825611,0.0850896333376118,0.0823535703589612,0.174588744588745,0.171883116883117,0.0997979797979798,0.0833757215007215,0.0781998556998557,0.169393262634449,0.13712861058437,0.114293667040893,0.0951932883313616,0.0930959146367179,0.171098252353776,0.140509073564165,0.110256286807892,0.0978067286080642,0.0927835868889586,0.169438223328735,0.147992782186477,0.114840121155593,0.0934196773993309,0.0921282149223326,0.192037480710047,0.140889389978406,0.108360884300499,0.0903835524762125,0.0868644167446874,0.189959925954324,0.13797870064599,0.126715493242104,0.0997872233010733,0.0929024866155274,0.173880426831996,0.147283794290654,0.111546408163536,0.0988573941936029,0.0877571849615084,0.186662737622897,0.136892144385798,0.128881392185663,0.0839429819343736,0.0837945656839819,0.18457053643389,0.137984674630637,0.12411865796959,0.0957806168986293,0.0837845958963971,0.189755117128535,0.134143476073856,0.126851237136047,0.0944616213603555,0.0876801351484896,0.187607120062477,0.132953797194869,0.12902353103246,0.103236674040245,0.0912515758051472,0.184801922079502,0.135162218169336,0.13137224084733,0.100085842390113,0.0867865428363649,0.181110532229293,0.134803191644844,0.128826843456792,0.103472765520958,0.0911828752620491,0.19074331212696,0.135358526867961,0.134456877853104,0.0951343322412505,0.0820909000154283,0.188475605295882,0.138380513495721,0.125941774559286,0.100287104088947,0.0831980103869505,0.185105058481682,0.134062822699186,0.127501070358213,0.100070324096298,0.0888206430414223,0.193395683953624,0.145606396464766,0.123154146759297,0.1036265951502,0.0846121689469329,0.180912349299446,0.151393349780447,0.119309997051933,0.0918164750422815,0.071063631708793,0.183936408473816,0.14665335489436,0.114471215376412,0.110812274849968,0.0733852222401623,0.201672335600907,0.172070191713049,0.112530921459493,0.0810090702947846,0.0767084106369821,0.19594665799201,0.135540654899658,0.123259783548288,0.0940000116133928,0.0815251212141648,0.195261753616634,0.134426748106451,0.123083323341888,0.0915550381290524,0.0830333827990583,0.189088533527955,0.139731852435288,0.121040357071098,0.0978441791280851,0.0823345330578604,0.194634352575529,0.171704918175506,0.0865170994582759,0.0803513479984068,0.0787610211139623,0.172963735372494,0.159313327926467,0.104254045494921,0.0866006256517205,0.0755628934461051,0.172749191718835,0.164842839348445,0.0985282621256925,0.0893214803279043,0.0796623042182936,0.17405864246058,0.166547173568965,0.0901655783011715,0.087551404742688,0.0837906914178101,0.17672447040518,0.166951833581545,0.0932032736910786,0.0890593146690708,0.0784132349542549,0.185318480434162,0.160509242257314,0.0993899702125923,0.0819847390541478,0.0723140327253438,0.192701327489357,0.155571388987848,0.11324268693346,0.0802242229923028,0.0777140841978747,0.185546585546586,0.172871395598668,0.0943079443079443,0.0851090760181669,0.0833349287894743,0.198037694013304,0.172771970576849,0.110629113433991,0.0777735543589202,0.0742667089008552,0.198230679061778,0.162840778524425,0.106472615855994,0.0799003052354259,0.0771096642410315,0.192338801549328,0.16938178780284,0.106311232627022,0.0944368497000076,0.0824162679425837,0.209747686953569,0.140209076054664,0.102332321817616,0.0856886441445265,0.0843227442492148,0.213618685840908,0.155333966445078,0.094813005924117,0.0801677746122191,0.0796318907430019,0.193199898341742,0.157572346224828,0.0946926202245351,0.0827175844906341,0.0815625863498204,0.170493990791021,0.154000619842204,0.102314086720027,0.0902450501460402,0.0866340205449116,0.173866108828515,0.155554460159723,0.112210001777671,0.0973248242985085,0.0894040431164491,0.200902423678996,0.147307440691389,0.11416833347419,0.102649206662222,0.0831697827359433,0.179306165457245,0.162087867168802,0.0960111431334453,0.0956951322059236,0.081080135891287,0.190561182247365,0.150133992991136,0.116100280151802,0.115005863249423,0.0812719027004741,0.168500463475752,0.163258903827273,0.0954369811041969,0.0949662272561778,0.0793915218956405,0.17458763243647,0.157923213737167,0.0985117380466218,0.0957969141108676,0.0945393108183806,0.185910446995353,0.143696544545601,0.115242404346178,0.0956982535284422,0.0882440724893555,0.192726312024558,0.143224947026117,0.104427254573453,0.0953715442019536,0.0882212762329721,0.183057036961592,0.171468276240511,0.103023609314282,0.0992124891257212,0.0967902427772276,0.184748858447489,0.18253513609678,0.0912095514835241,0.0847292889758643,0.0846561505465615,0.188301840530253,0.18612367205682,0.0860909131104117,0.0852102400848919,0.0778684175620109,0.193883893883894,0.183165527283174,0.102798671916319,0.0840832370244135,0.0744293288410935,0.183023671896504,0.178743462703,0.0893201211120286,0.0839113680154143,0.0760597302504817,0.20397509236795,0.178389975599797,0.0962803937134294,0.0878242912841127,0.0835557795379224,0.184048785351128,0.170729666367752,0.0980830693068978,0.0950747816213918,0.0849197246754575,0.181813629233558,0.167082699822913,0.0892714047518318,0.0877792729216217,0.0852275146759133,0.178778190908368,0.165378583721779,0.111403827380159,0.0938052195448645,0.0745823100852687,0.174656277260813,0.170460340641064,0.117746165035322,0.0916814529146209,0.0711849861034836,0.178196651280593,0.17696113193376,0.0921192301210549,0.0901789410913498,0.0821359753385301,0.188975318662819,0.149142382822938,0.0984632201646091,0.0741024664635776,0.0738630518144407,0.201750093724063,0.154268845158216,0.101198187206864,0.0883222706433119,0.0872470022144642,0.202279326364692,0.171929442508711,0.0795296167247387,0.0756750871080139,0.0722415795586527,0.212190375088464,0.176541805681933,0.0807324840764331,0.0773430391264786,0.0740243655848751,0.207424090757424,0.175320558653892,0.0846441679775013,0.0773630773630774,0.0730873730873731,0.180650172214212,0.170888252415346,0.104098200649925,0.0828829558509361,0.0800364659970571,0.20501443001443,0.164177489177489,0.0920815295815296,0.0854707792207792,0.076366341991342,0.175988106338106,0.16719395049395,0.108721911421911,0.0839314463314463,0.0813936063936064,0.175086713581032,0.169055134680135,0.107995529302347,0.0770290788756698,0.0760225149429695,0.179410205265336,0.168226944082075,0.0975622186889793,0.0874785286254099,0.0735605329166697,0.196854661778131,0.168214764260683,0.0890000588980181,0.0873137350178167,0.0746140339252584,0.189038764556006,0.163673925053235,0.0895801771663841,0.0833250657388588,0.0704866397969846,0.195717822876597,0.153214396250608,0.100579210328514,0.0809590131317151,0.070343104744219,0.196254878622637,0.156031192429177,0.100747671024749,0.0822445816148587,0.0744112590460198,0.199557713528302,0.151880148788143,0.103057575210667,0.0953923346080209,0.0807019142803456,0.18789367880277,0.172105222105222,0.107373311918766,0.0812042857497403,0.0808231490049672,0.18375563339067,0.175135691559049,0.0925753619184276,0.0792722416810008,0.0704970752416008,0.193506493506494,0.158074795574796,0.0910092993426327,0.0797258297258297,0.0725889850889851,0.193512346929203,0.15587817017202,0.0993853021187873,0.0728213320468446,0.0710393504243163,0.179746008647743,0.167597099967042,0.0914698874236447,0.0905339575859807,0.077444146519291,0.168042390962909,0.167870863989163,0.0962444620485286,0.0919743431758219,0.0818810682026948,0.164252926399819,0.161348057675741,0.113931872688935,0.101078174806988,0.0865186706994617,0.200170422726814,0.150607412637488,0.108853385545115,0.0822598871471052,0.079212085603063,0.18663117093774,0.177862391731005,0.0946575592560994,0.0865976413421669,0.0838873616245879,0.183976966525263,0.171699473018119,0.0992528556507285,0.0844835984867459,0.0833492668607711,0.179652235647711,0.16098638666512,0.0956905839258781,0.0891241802440897,0.0765810170221935,0.179514439808557,0.166655729891024,0.104566348683996,0.084739198709787,0.0844354175236528,0.183707583707584,0.166209616209616,0.0953816453816454,0.0834936834936835,0.0834869334869335,0.176752384590864,0.176545426070367,0.0950300029872476,0.0860614049450154,0.0787117079278599,0.18056265523798,0.160106307833581,0.100121811810124,0.0934388997932597,0.0843851880957632,0.16798695342688,0.145004889961871,0.0990303709787962,0.0981461180567251,0.0858419100314091,0.165660572022465,0.164552418639572,0.0940046919439011,0.0932741543109436,0.0767155317740602,0.174870957735188,0.159461051250056,0.089049540112616,0.0877035662749948,0.0794955283767676,0.168430904739397,0.160111282901578,0.108758235794631,0.0906865808945532,0.0878697366565651,0.169585497595074,0.165759685544227,0.0946213872513462,0.0932033159119342,0.0856422761005524,0.184017552959861,0.168794101197947,0.11173001144155,0.076238344988345,0.0725206737706738,0.180905727786379,0.1691084432947,0.100816723963198,0.0802047911903246,0.0784496194984441,0.183565381205976,0.161484862309038,0.104383162624921,0.0854269058050571,0.0849571371791798,0.190739948220767,0.164282470276716,0.100919048745136,0.0813025789688194,0.0763970367630853,0.183497859985926,0.161968300128692,0.101279392708868,0.0795646419635234,0.0794359693586532,0.202211156898657,0.162799353424353,0.09780028998779,0.0935241841491841,0.0769529082029082,0.192208844579048,0.170450480044159,0.104915613606359,0.0763382341260445,0.071399881783629,0.182888147942892,0.164063238059588,0.102486341719918,0.0829825588037267,0.0797233889387174,0.180951630629742,0.179583792459329,0.0859742070042499,0.0835626700433567,0.0804156858877889,0.18436339819835,0.172663353367237,0.0943854284873702,0.0870019543563233,0.0759018759018759,0.186588722687377,0.158670153961634,0.0896531097203743,0.0895862607746016,0.0804255286318067,0.179179285075511,0.165713531751268,0.0891278663684324,0.0885685462336406,0.0816374663072776,0.187116206494197,0.157609933925723,0.111883876357561,0.0803988276476315,0.0781390459620125,0.174091714736876,0.14025891671053,0.118749291329936,0.108138074589687,0.103433484078645,0.160937682350959,0.157661134963062,0.117620637749117,0.106416697744321,0.104658154122822,0.172336942605867,0.129012073583787,0.124804113549133,0.108820556380317,0.104611159093231,0.169001077797374,0.166402116402116,0.123954046639232,0.0884675680971977,0.0830932784636488,0.183788809756552,0.162744495647721,0.127750546944095,0.107073499976726,0.0803756458595168,0.186340639871392,0.134868624162474,0.133702465593126,0.107775734768901,0.0985084265266498,0.16818015955947,0.148219054253537,0.130442976563666,0.110630110630111,0.0955555140899969,0.172875114058409,0.137471139327288,0.126076025031942,0.110521213769474,0.103148295375674,0.177031241850519,0.139332568368713,0.127745266781411,0.109263199986092,0.0963886715693945,0.168622480579002,0.14014424920222,0.135598231612724,0.108315342735633,0.0906410551338088,0.170135588317406,0.136261886261886,0.129619370528461,0.108991513536968,0.101581583399765,0.177550498569607,0.128364405115997,0.123292265648954,0.115965268513039,0.110107078578416,0.183287449729757,0.132960853249315,0.126070724147647,0.105067624683009,0.104260440414287,0.174100834815121,0.130323435680579,0.123235146449432,0.121697387768816,0.10626270447699,0.18015678015678,0.134852384852385,0.128509028509029,0.108258258258258,0.0969228969228969,0.184771781616442,0.132747726922484,0.126022359517505,0.107503257260539,0.0921776713038849,0.174434832063698,0.129877344877345,0.125815656279574,0.119602373571446,0.102895563771852,0.18060077880652,0.132196883393056,0.123706304328314,0.115091965450817,0.098621899100368,0.172691542906854,0.13661719726313,0.131780725919482,0.11038322389997,0.0968300572367558,0.179044964552933,0.136315405488712,0.133880876759363,0.0993891898274368,0.0833213267476216,0.18321758886275,0.145900438527167,0.143345594497668,0.10375103646993,0.0820705536143324,0.187879790891839,0.142766416983284,0.141209887836394,0.10570235654573,0.0787477315188159,0.187477477477477,0.132882882882883,0.130353925353925,0.109051909051909,0.0966194766194766,0.176989705597953,0.133769023073147,0.12770618556701,0.111384277234793,0.0997543550378602,0.186339540884995,0.135814799451163,0.120948966403512,0.108387312932767,0.104560304560305,0.182006280380264,0.131984772228675,0.129616724738676,0.109646405987869,0.0976986277799286,0.18147138414314,0.132493234783311,0.130419241487944,0.107354901248031,0.0967001898299608,0.184538106979052,0.136230130324619,0.114666537894884,0.113444531554768,0.0992256649736965,0.177914642788061,0.137571277761151,0.131908609440255,0.100076318430749,0.0902102819824339,0.182518544776609,0.144536479052608,0.131923405149212,0.102828652828653,0.0859898643769612,0.196969429038395,0.141129955612714,0.131479695272799,0.0943808554153382,0.0894354432285467,0.196758000345444,0.135882465815201,0.131375935972349,0.107128720805851,0.0849428349428349,0.182474606004018,0.136054421768707,0.12223859240666,0.114056733804633,0.100868630280395,0.194642394314613,0.137602834076966,0.135422287964811,0.102547772134944,0.0891077840315969,0.19536367373001,0.139131149378674,0.132089241891222,0.105960601554661,0.0996988599958897,0.184551719885053,0.134210357543691,0.127813458146791,0.100485452818786,0.100266868933536,0.171052310545064,0.132637451115712,0.123537305421363,0.111301942823682,0.100007493848074,0.180757037242186,0.134655410596005,0.121184057966236,0.114303606184794,0.101644906248867,0.177190237298933,0.123546574198748,0.122259395194178,0.109895973591626,0.103274829035699,0.183195213414994,0.128764433572126,0.126934893555773,0.110448286959276,0.10954230954231,0.181661052622591,0.131998338200261,0.123636032770648,0.106864988643835,0.105686439628747,0.191790576573185,0.135763954242215,0.131250914946567,0.102665021505601,0.0963802971049348,0.175663423485206,0.145005863223685,0.110561671551771,0.109497345338929,0.0989140342605689,0.176666519161739,0.138728755841567,0.118010712465779,0.106969644971557,0.103842089501745,0.185125535489484,0.145702345089847,0.113166148300484,0.108257648901512,0.0909568223362755,0.192382205373472,0.149304625505499,0.121275013196411,0.100675428404686,0.0910222722449797,0.187890288405752,0.139240341559929,0.124547588722846,0.0994543257429855,0.0909272857726466,0.183147040867629,0.145642402260049,0.111781464722641,0.109421909789557,0.103278448131389,0.192270240241938,0.133583120234064,0.130579546239924,0.099646972524331,0.0875028901915694,0.177547539447331,0.140788566571448,0.134601364768379,0.104399845109657,0.0935224135641672,0.185153491717524,0.135215029217787,0.110686275246631,0.109558631954465,0.0910571942128315,0.185134716574111,0.155532234320113,0.128105186059732,0.0944584736251403,0.087341670675004,0.176342212556063,0.139552609171928,0.116279546955329,0.107788439728239,0.0886994342138942,0.17720485638163,0.13468283647938,0.112196871475222,0.109512804593156,0.0912783553171667,0.191409755274573,0.13158441789291,0.128300228560194,0.106693903054388,0.0867279648908765,0.194464512848588,0.141534980762147,0.134674134088654,0.0908118813271038,0.0799782834911641,0.177164630186461,0.149976316832968,0.109572775386304,0.0993714951452343,0.0884628867207639,0.165149671223543,0.151334825685031,0.109629842215342,0.0912997692888254,0.0896887947640342,0.168373766396796,0.150066017192821,0.105499468263064,0.0953607597544889,0.0883344912271105,0.175055031175721,0.143170789656591,0.107050763075104,0.10655655647035,0.0892661412286159,0.185822621626879,0.158796102359523,0.119554638165294,0.103806655059962,0.0819316678618858,0.191077625267997,0.155408492552913,0.123736110716417,0.104012459701738,0.078026119273384]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>variables<\/th>\n      <th>total<\/th>\n      <th>ponderado<\/th>\n      <th>importancia_caso<\/th>\n      <th>importancia_ponderada<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="agrupando" class="level3">
<h3 class="anchored" data-anchor-id="agrupando">Agrupando</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>tabla_diag_boston <span class="ot">&lt;-</span> <span class="fu">xtabs</span>(ponderado <span class="sc">~</span> id<span class="sc">+</span> variables, <span class="at">data=</span> importancia_individual)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tabla_diag_boston)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      variables</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; id         age     crim      dis    indus    lstat      nox  ptratio       rm</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   100 18.34266  0.00000  0.00000 21.95556 37.81429 17.20397  0.00000 38.40952</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   108  0.00000  0.00000 28.51039 27.88223 50.73328 34.23095  0.00000 41.07002</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   110 27.78868  0.00000 29.29312  0.00000 51.24393 33.02176  0.00000 42.08247</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   111  0.00000  0.00000 27.27855 33.53332 49.47596 26.90144  0.00000 43.21389</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   112  0.00000  0.00000 24.53920 25.53335 54.25059 30.61195  0.00000 39.80125</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   119  0.00000  0.00000 26.33785 28.28968 53.85364 35.92384  0.00000 39.11696</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      variables</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; id         tax</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   100  0.00000</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   108  0.00000</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   110  0.00000</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   111  0.00000</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   112  0.00000</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   119  0.00000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>res_ca <span class="ot">&lt;-</span> FactoMineR<span class="sc">::</span><span class="fu">CA</span>(tabla_diag_boston, <span class="at">graph =</span> <span class="cn">FALSE</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_ca</span>(res_ca)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-30-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="index_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Podemos hacer un <a href="http://www.sthda.com/english/articles/31-principal-component-methods-in-r-practical-guide/117-hcpc-hierarchical-clustering-on-principal-components-essentials/">HCPC</a> usando las dimensiones obtenidas. Lo que hace es un cluster jerárquico usando las dimensiones obtenidas en la estructura factorial.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>res_hcpc <span class="ot">&lt;-</span> <span class="fu">HCPC</span>(res_ca, <span class="at">graph =</span> <span class="cn">FALSE</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_cluster</span>(res_hcpc,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">repel =</span> <span class="cn">TRUE</span>,            <span class="co"># Avoid label overlapping</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">show.clust.cent =</span> <span class="cn">TRUE</span>, <span class="co"># Show cluster centers</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">palette =</span> <span class="st">"jco"</span>,         <span class="co"># Color palette see ?ggpubr::ggpar</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>(),</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">main =</span> <span class="st">"Factor map"</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>             )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-31-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="index_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(res_hcpc, <span class="at">choice =</span> <span class="st">"3D.map"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-32-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="index_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Una utilidad interesante es la descripción de las variables de los clusters. Dónde nos dice cuales son la variables más importantes para cada uno.</p>
<p>Cuando en un cluster su <code>Intern %</code> para una variable se desvíe mucho de <code>glob %</code> quiere decir que en esa variable la distribución es distinta de en la población general y por tanto es una variables que caracteriza al cluster.</p>
<p>En este caso estaremos encontrando grupos de individuos con mismas variables importantes en el randomForest.</p>
<p>Claramente se ven grupos dónde es muy importante la variable de criminalidad o la edad</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>res_hcpc<span class="sc">$</span>desc.var</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $`1`</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Intern %    glob % Intern freq Glob freq        p.value     v.test</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; crim    15.592962  2.127929    642.8840   657.2566  0.000000e+00        Inf</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; nox     20.157813 12.416539    831.0888  3835.1142  2.807733e-52  15.215104</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dis     11.939900  9.329212    492.2715  2881.5271  2.572108e-09   5.956809</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; rm      20.191263 25.487484    832.4679  7872.3559  1.117021e-17  -8.561196</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; age      4.411035  7.568723    181.8631  2337.7625  1.230524e-18  -8.811891</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; tax      0.000000  1.001897      0.0000   309.4575  9.327733e-20  -9.096514</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ptratio  0.000000  3.118072      0.0000   963.0835  2.250504e-61 -16.529487</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; indus    0.000000 10.860935      0.0000  3354.6328 2.069270e-222 -31.835808</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $`2`</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Intern %    glob % Intern freq Glob freq        p.value     v.test</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; age     14.32559  7.568723    803.0250  2337.7625  7.150050e-85  19.521920</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; nox     19.56112 12.416539   1096.5037  3835.1142  9.886451e-65  16.989118</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dis     15.61069  9.329212    875.0616  2881.5271  3.449026e-63  16.779470</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; rm      21.85203 25.487484   1224.9213  7872.3559  2.382720e-12  -7.010027</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; tax      0.00000  1.001897      0.0000   309.4575  1.880511e-27 -10.855366</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; crim     0.00000  2.127929      0.0000   657.2566  2.961603e-58 -16.090764</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ptratio  0.00000  3.118072      0.0000   963.0835  1.146579e-85 -19.615212</span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; indus    0.00000 10.860935      0.0000  3354.6328 2.480702e-311 -37.718398</span></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $`3`</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Intern %    glob % Intern freq Glob freq        p.value     v.test</span></span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dis     14.41601  9.329212    885.4575  2881.5271  7.965757e-48  14.528753</span></span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; indus   15.72645 10.860935    965.9468  3354.6328  4.377749e-39  13.078362</span></span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; nox     17.05504 12.416539   1047.5513  3835.1142  1.891207e-32  11.860817</span></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; rm      24.28797 25.487484   1491.8110  7872.3559  1.531797e-02  -2.424773</span></span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; tax      0.00000  1.001897      0.0000   309.4575  2.402280e-30 -11.448146</span></span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; crim     0.00000  2.127929      0.0000   657.2566  1.885153e-64 -16.951216</span></span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ptratio  0.00000  3.118072      0.0000   963.0835  8.318594e-95 -20.657729</span></span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; age      0.00000  7.568723      0.0000  2337.7625 1.165375e-235 -32.779199</span></span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $`4`</span></span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Intern %    glob % Intern freq Glob freq        p.value     v.test</span></span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; age     13.713854  7.568723    994.4487  2337.7625 7.010364e-100  21.214544</span></span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; indus   15.980898 10.860935   1158.8415  3354.6328  3.363370e-53  15.353354</span></span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; rm      27.297454 25.487484   1979.4522  7872.3559  6.332137e-05   4.000079</span></span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; nox     11.031380 12.416539    799.9313  3835.1142  3.337066e-05  -4.149154</span></span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; tax      0.000000  1.001897      0.0000   309.4575  1.541120e-36 -12.624810</span></span>
<span id="cb33-42"><a href="#cb33-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; crim     0.000000  2.127929      0.0000   657.2566  1.026729e-77 -18.661061</span></span>
<span id="cb33-43"><a href="#cb33-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dis      3.479402  9.329212    252.3059  2881.5271 1.613296e-102 -21.498348</span></span>
<span id="cb33-44"><a href="#cb33-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ptratio  0.000000  3.118072      0.0000   963.0835 2.246449e-114 -22.730329</span></span>
<span id="cb33-45"><a href="#cb33-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb33-46"><a href="#cb33-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $`5`</span></span>
<span id="cb33-47"><a href="#cb33-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;           Intern %    glob % Intern freq Glob freq        p.value     v.test</span></span>
<span id="cb33-48"><a href="#cb33-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ptratio 13.4631336  3.118072   731.46909   963.0835  0.000000e+00        Inf</span></span>
<span id="cb33-49"><a href="#cb33-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; indus   16.0021844 10.860935   869.41894  3354.6328  2.134777e-37  12.779485</span></span>
<span id="cb33-50"><a href="#cb33-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; rm      30.0450942 25.487484  1632.38800  7872.3559  6.922077e-17   8.348354</span></span>
<span id="cb33-51"><a href="#cb33-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; age      5.9723379  7.568723   324.48468  2337.7625  4.791243e-07  -5.034489</span></span>
<span id="cb33-52"><a href="#cb33-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dis      5.8922388  9.329212   320.13279  2881.5271  6.783780e-24 -10.079838</span></span>
<span id="cb33-53"><a href="#cb33-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; tax      0.0000000  1.001897     0.00000   309.4575  1.567007e-26 -10.659939</span></span>
<span id="cb33-54"><a href="#cb33-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; crim     0.2645368  2.127929    14.37262   657.2566  4.931237e-37 -12.714201</span></span>
<span id="cb33-55"><a href="#cb33-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; nox      1.1050567 12.416539    60.03913  3835.1142 3.406088e-250 -33.783844</span></span>
<span id="cb33-56"><a href="#cb33-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb33-57"><a href="#cb33-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $`6`</span></span>
<span id="cb33-58"><a href="#cb33-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          Intern %    glob % Intern freq Glob freq        p.value     v.test</span></span>
<span id="cb33-59"><a href="#cb33-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; tax     13.270152  1.001897   309.45748   309.4575  0.000000e+00        Inf</span></span>
<span id="cb33-60"><a href="#cb33-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ptratio  9.932087  3.118072   231.61443   963.0835  3.328525e-58  16.083531</span></span>
<span id="cb33-61"><a href="#cb33-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; indus   15.455762 10.860935   360.42551  3354.6328  2.442145e-12   7.006580</span></span>
<span id="cb33-62"><a href="#cb33-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; rm      30.502626 25.487484   711.31557  7872.3559  1.684450e-08   5.641633</span></span>
<span id="cb33-63"><a href="#cb33-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; crim     0.000000  2.127929     0.00000   657.2566  4.470886e-23  -9.892856</span></span>
<span id="cb33-64"><a href="#cb33-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dis      2.414161  9.329212    56.29780  2881.5271  1.144880e-43 -13.857568</span></span>
<span id="cb33-65"><a href="#cb33-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; age      1.455459  7.568723    33.94103  2337.7625  5.050710e-44 -13.916197</span></span>
<span id="cb33-66"><a href="#cb33-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; nox      0.000000 12.416539     0.00000  3835.1142 2.015379e-140 -25.227201</span></span>
<span id="cb33-67"><a href="#cb33-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb33-68"><a href="#cb33-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; attr(,"class")</span></span>
<span id="cb33-69"><a href="#cb33-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "descfreq" "list"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Y por supuesto tenemos los datos con el cluster asignado y los valores de cada variable (no son los valores originales de las variables , sino la importancia ponderada que tenían con el procedimiento descrito para cada observación )</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>res_hcpc<span class="sc">$</span>data.clust <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>         dplyr<span class="sc">::</span><span class="fu">select</span>(clust, <span class="fu">everything</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-287449a47154afb275ba" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-287449a47154afb275ba">{"x":{"filter":"none","vertical":false,"data":[["296","487","121","7","154","464","474","189","425","123","250","351","352","428","416","246","315","269","24","409","58","399","308","302","345","431","226","266","275","2","133","182","17","301","245","447","281","220","111","72","424","43","89","355","170","458","381","218","201","423","316","485","378","119","297","80","30","235","418","404","100"],["4","2","3","3","2","2","2","5","3","2","6","6","5","2","1","4","3","4","3","1","5","1","5","5","5","2","4","4","5","5","1","5","3","5","4","1","4","3","3","3","2","5","5","5","2","2","2","3","5","2","3","3","1","3","4","4","4","4","2","1","4"],[20.096756021756,25.0210178710179,0,0,24.1449966699967,27.9725621600622,21.0688034188034,0,0,22.3312517547812,0,17.9348928848929,0,18.0050505050505,0,22.8286817757406,0,13.4404761904762,0,0,14.3083333333333,0,16.5688145188145,22.8950551899081,0,22.1878382238676,13.977380952381,16.2474025974026,14.6243506493506,0,0,0,0,17.2388528138528,23.7796231546232,29.9050505050505,14.5321428571429,0,0,0,19.9926434676435,0,0,0,22.6681135041429,19.9507215007215,19.2496392496392,0,14.0694444444444,21.3798368298368,0,0,21.6225996225996,0,22.1488289488289,22.6119407553231,23.5526101349631,19.6726412476412,18.0253968253968,0,18.3426587301587],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,19.3523448773449,0,0,0,0,20.913653013653,0,19.7238095238095,0,0,0,0,0,0,0,0,26.4886252636253,0,0,0,0,30.1523823398823,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23.6567737817738,0,0,0,0,0,0,20.6119769119769,0],[0,30.781191031191,24.8352833441069,27.2249799692911,19.7146353646354,27.1547064047064,22.8034188034188,16.0849567099567,20.5278360528361,22.3708046855106,0,0,17.3071428571429,20.359126984127,21.6085497835498,0,22.7418081918082,15.0428571428571,21.0082739156269,24.9466866466866,0,22.0305555555556,0,0,15.8150738150738,25.5343952616011,0,16.82524003774,0,24.3260378510378,30.0588383838384,18.6011480349716,20.5645021645022,0,0,0,12.6265873015873,22.6287573537574,27.2785458006046,24.2879717504718,23.9076617826618,24.2339937839938,0,16.3310606060606,24.9945254092313,21.2516594516595,16.6266594516595,25.4160284160284,0,23.7180874680875,30.3021942410874,32.2287434787435,0,26.337854955502,0,0,0,0,20.2297619047619,24.0542207792208,0],[23.493561993562,0,27.9766425567896,32.0930414356885,0,0,0,22.7051587301587,19.4522089022089,0,25.2406690531691,19.9926434676435,18.8951076701077,0,0,29.3187950937951,25.1817834942835,16.2063492063492,25.1844877344877,0,17.5503968253968,0,20.0038156288156,26.8975238813474,23.2388084138084,0,15.2952380952381,21.1319347319347,17.4440115440115,23.9880591630592,0,23.0063492063492,24.7823232323232,19.4521284271284,28.2408702408702,0,18.0539682539683,24.4628010878011,33.533315377433,27.0775016650017,0,25.5441586191586,18.4676684426684,23.3837301587302,0,0,0,24.3911421911422,16.6396825396825,0,34.6455796740239,26.5211308299544,0,28.2896778058543,24.8790598290598,27.4923909423909,23.9528233204704,21.5668081918082,0,0,21.9555555555556],[46.6440892440892,55.2217143967144,49.2081607934549,49.3313948693206,45.0611943611944,46.1982947607948,37.3619963369963,31.1920634920635,42.8408508158508,49.7456195765019,48.8258824508825,35.3834443334443,35.1312687312687,32.5717171717172,34.3360028860029,43.4894130379424,48.6616355866356,28.8952380952381,45.0955097190391,44.9402861027861,30.768253968254,36.6619047619048,37.206376956377,46.5305571879101,37.7547813297813,48.4659561843385,33.8001803751804,34.6903152403152,32.9700937950938,49.9637598512599,52.6126096126096,38.4908029878618,41.3938311688312,36.5507215007215,45.3202713952714,50.0122932622933,27.5019841269841,49.434299034299,49.4759612119906,45.1659326784327,42.4355616605617,46.2197899322899,38.6008574758575,32.9404761904762,53.3064587373411,39.7006493506493,29.2633477633478,45.0436091686092,27.2611111111111,42.1657703407703,59.2993945596887,52.7263215542627,40.9017704517705,53.8536390080508,45.4554667554668,47.5404882699,51.7765375147728,45.6904206904207,33.5801587301587,37.7455627705628,37.8142857142857],[23.7364357864358,37.0146159396159,31.5676335102806,27.9945857934635,28.6949161949162,30.8598013098013,22.3220695970696,0,28.5968337218337,34.3468910174793,0,0,0,21.8195887445887,25.9511904761905,17.7250615397674,26.9828282828283,0,29.6342288430524,33.6041000666001,0,27.4424603174603,0,0,0,33.7201497032379,15.4533189033189,0,0,0,37.424198024198,0,26.0562770562771,0,18.9066156066156,34.6532259407259,0,26.7855907980908,26.9014387573211,27.0249333999334,30.6721916971917,0,19.5055194805195,0,33.6017472723355,28.1031385281385,22.6970779220779,24.7156038406038,0,31.2623404373404,34.9577209555151,34.7675845396434,29.603663003663,35.9238423341365,26.034126984127,26.5856173238526,28.649982860277,18.7164946164946,24.3511904761905,27.6291486291486,17.2039682539683],[0,0,0,0,0,0,0,15.5816738816739,0,0,24.7090298590299,0,18.7765318015318,0,0,0,0,0,0,0,13.6884920634921,0,18.1159257409257,22.587651319269,16.9089188589189,0,0,0,17.1134920634921,23.6369325119325,0,20.8565656565657,0,17.7958152958153,0,0,0,0,0,0,0,22.6580669330669,16.8304279054279,16.803354978355,0,0,0,0,13.9753968253968,0,0,0,0,0,0,0,0,0,0,0,0],[43.4914474414474,37.9621045621046,41.681313784255,47.9811072742187,33.9262903762904,36.2775696525697,29.7110500610501,38.6366161616162,30.6957653457653,36.4817564788153,48.4873501498502,41.6092851592852,37.9860084360084,24.2857142857143,24.775,42.4446248196248,43.14864996115,36.0825396825397,37.0052032934386,34.2151667776668,36.6698412698413,26.1515873015873,37.1628121878122,49.8577579283462,42.5742590742591,34.2631056851645,33.4091991341991,36.671984959485,38.5835137085137,44.4160644910645,39.1603271728272,40.336936266348,39.2115079365079,38.3527056277056,41.923470973471,35.1526903651904,35.1313492063492,36.7371989121989,43.2138923984512,44.2061119436119,33.6047313797314,45.2951187701188,37.6235264735265,39.1072871572872,36.6985022330611,27.1689393939394,25.7901154401154,40.7441891441891,37.4900793650794,32.6043928293928,51.1867261565404,41.7262301424066,29.3476911976912,39.1169616331381,45.4090687090687,46.7649633046692,38.1046797973269,39.9593545343545,23.9142857142857,25.8546176046176,38.4095238095238],[0,0,0,0,0,0,0,0,0,0,22.5052572427572,19.9777361527362,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>clust<\/th>\n      <th>age<\/th>\n      <th>crim<\/th>\n      <th>dis<\/th>\n      <th>indus<\/th>\n      <th>lstat<\/th>\n      <th>nox<\/th>\n      <th>ptratio<\/th>\n      <th>rm<\/th>\n      <th>tax<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8,9,10]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Si unimos con el dataset original</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>test_df_with_cluster <span class="ot">&lt;-</span>  res_hcpc<span class="sc">$</span>data.clust <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">"id"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(id, clust)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>unido <span class="ot">&lt;-</span> test_df <span class="sc">%&gt;%</span> </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">"id"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(test_df_with_cluster, <span class="at">by =</span> <span class="st">"id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Y efectivamente vemos que el cluster 1 tiene mucho más ratio de criminalidad, y además es la variable más importante para ese grupo en relación con la variable dependiente <code>medv</code>. No causa sorpresa ver que es justo en ese cluster dónde el precio de la propiedad es más bajo</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>unido <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(clust) <span class="sc">%&gt;%</span> </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">c</span>(lstat,crim, age, black, medv), <span class="fu">list</span>(<span class="at">mean =</span> mean, <span class="at">median =</span> median), <span class="at">.names =</span> <span class="st">"{.col}_{.fn}"</span> )) <span class="sc">%&gt;%</span> </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-909d8facf4db1004d42f" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-909d8facf4db1004d42f">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],["1","2","3","4","5","6"],[21.8767857142857,17.3883783783784,12.7932432432432,11.1577083333333,6.569,5.86375],[20.93,15.79,11.69,9.965,5.85,6.17],[16.9166767857143,9.62652648648649,1.18672108108108,0.679979791666667,0.05824075,0.064505],[10.40037,5.20177,0.25356,0.18319,0.049775,0.051705],[96.7821428571429,87.3108108108108,62.4918918918919,66.975,42.2775,27.8375],[98,89.1,69.1,67.35,36.55,22.6],[304.185,274.395135135135,358.92972972973,388.824791666667,390.538,391.125],[378.45,352.58,389.15,391.87,393.995,393.71],[13.1142857142857,18.4810810810811,21.027027027027,26.1354166666667,27.6025,26.46875],[11.45,19.1,21.7,21.45,28.3,24.9]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>clust<\/th>\n      <th>lstat_mean<\/th>\n      <th>lstat_median<\/th>\n      <th>crim_mean<\/th>\n      <th>crim_median<\/th>\n      <th>age_mean<\/th>\n      <th>age_median<\/th>\n      <th>black_mean<\/th>\n      <th>black_median<\/th>\n      <th>medv_mean<\/th>\n      <th>medv_median<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8,9,10,11]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Carlos en el <a href="https://www.datanalytics.com/2020/10/14/explicacion-de-los-scorings-de-ciertos-modelos/">post</a> que inspira este, comenta que este tipo de procedimientos sería útil para aquellas de las observaciones con un mayor score predicho. En este ejemplo se podría aplicar para clusterizar las observaciones con un mayor valor predicho del valor de la propiedad.</p>
</section>
</section>
<section id="nota" class="level2">
<h2 class="anchored" data-anchor-id="nota">Nota</h2>
<blockquote class="blockquote">
<p>Hice el código deprisa y corriendo, es claramente mejorable y podría ir mucho más rápido. El objetivo era mostrar como se puede obtener variables importantes a nivel de observación en este tipo de modelos, simplemente recorriendo por qué camino ha ido cada observación en cada árbol</p>
</blockquote>
<blockquote class="blockquote">
<p>Estaría chulo representar espacialmente la distribución de los clusters obtenidos</p>
</blockquote>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="joscani/blogComments" data-repo-id="R_kgDOIXA9wA" data-category="General" data-category-id="DIC_kwDOIXA9wM4CSZhs" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"selector":".lightbox","openEffect":"zoom","descPosition":"bottom","closeEffect":"zoom","loop":true});</script>



</body></html>